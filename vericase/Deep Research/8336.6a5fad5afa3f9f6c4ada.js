"use strict";(self.webpackChunkEgnyte_CommonUI=self.webpackChunkEgnyte_CommonUI||[]).push([[8336],{77259:function(e,n,t){t.d(n,{LF:function(){return s},_I:function(){return a},Ce:function(){return b},P5:function(){return E},nJ:function(){return C},I4:function(){return w},v_:function(){return j},pe:function(){return R}});var r,o=t(529439),i=t(204942);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var a={FULL:"Full",OWNER:"Owner",EDITOR:"Editor",VIEWER:"Viewer",VIEWER_ONLY:"Viewer Only",NAV:"Nav",NONE:"None"},s={NOT_ALLOWED_TO_MANAGE_LARGE_GROUP_PERMISSION:"NOT_ALLOWED_TO_MANAGE_LARGE_GROUP_PERMISSION",GROUP_NOT_FOUND:"GROUP_NOT_FOUND"},c=(r={},(0,i.Z)(r,a.OWNER,"MODIFY"),(0,i.Z)(r,a.FULL,"RWD"),(0,i.Z)(r,a.EDITOR,"READWRITE"),(0,i.Z)(r,a.VIEWER,"READ"),(0,i.Z)(r,a.VIEWER_ONLY,"VIEWER_ONLY"),(0,i.Z)(r,a.NAV,"NAV"),(0,i.Z)(r,a.NONE,"NONE"),r),l=(Object.entries(c).reduce((function(e,n){var t=(0,o.Z)(n,2),r=t[0],a=t[1];return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}((0,i.Z)({},a,r),e)}),{}),t(667294)),d=t(145218),m=t(190544),p=t(221842),f=t.n(p),v=t(42594),O=t(451090);function b(e){var n=e.folderPath,t=(0,v.pL)(),r=t?O.FJ.PORTAL_PERMISSIONS_CHANGED:O.FJ.CFS_PERMISSIONS_CHANGED,o=t?{id:(0,v.cO)()}:{path:n};(0,O.rx)({eventType:r,data:o})}var E=function(e){return c[e]},g=t(240701),P=t(23661);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var D="folderPermissions/permissions";function j(e){var n=e.id,t=e.path,r=e.documentRoomId,o=void 0===r?null:r,i=e.options,u=void 0===i?{}:i,a=(0,v.pL)(),s=a&&o?[D,n,t,o]:[D,n,t];return(0,d.useQuery)(N({queryKey:s,queryFn:function(){return a&&o?function(e){var n=e.id,t=e.path,r=e.documentRoomId,o=e.requestFields,i=void 0===o?{}:o;return(0,P.ZP)(g.Z.DOCUMENT_ROOM.PORTAL.PERMISSIONS({folderId:n,documentRoomId:r}),{method:P.I5.POST,body:Z({path:t,_method:P.I5.GET},i),headers:{"Content-Type":"application/vnd.egnyte.fsi.permissions.query+json;v=1",Accept:"application/vnd.egnyte.fsi.permissions+json;v=1"}})}({id:n,path:t,documentRoomId:o}):function(e){var n=e.id,t=e.path,r=e.requestFields,o=void 0===r?{}:r;return(0,P.ZP)(g.Z.FSI.PERMISSIONS(n),{method:P.I5.POST,body:h({path:t,_method:P.I5.GET},o),headers:{"Content-Type":"application/vnd.egnyte.fsi.permissions.query+json;v=1",Accept:"application/vnd.egnyte.fsi.permissions+json;v=1"}})}({id:n,path:t})},staleTime:10*m.NO},u))}function R(e){var n=e.id,t=e.path,r=e.documentRoomId,o=void 0===r?null:r,i=(0,d.useQueryClient)(),u=(0,v.pL)(),a=(0,l.useMemo)((function(){return u&&o?[D,n,t,o]:[D,n,t]}),[n,t,o,u]);return{refresh:(0,l.useCallback)((function(){return i.invalidateQueries(a)}),[a,i])}}function w(e){var n=e.id,t=e.path,r=e.documentRoomId,o=void 0===r?null:r,i=e.options,u=void 0===i?{}:i,a=R({id:n,path:t,documentRoomId:o}).refresh,s=(0,v.pL)()&&o?function(e){return function(e){var n=e.id,t=e.path,r=e.documentRoomId,o=e.requestFields;return(0,P.ZP)(g.Z.DOCUMENT_ROOM.PORTAL.PERMISSIONS({folderId:n,documentRoomId:r}),{method:P.I5.PATCH,body:Z({path:t},o),headers:{"Content-Type":"application/vnd.egnyte.fsi.permissions.update+json;v=1",Accept:"application/vnd.egnyte.fsi.permissions.update+json;v=1"}})}({id:n,path:t,documentRoomId:o,requestFields:e})}:function(e){return function(e){var n=e.id,t=e.path,r=e.requestFields;return(0,P.ZP)(g.Z.FSI.PERMISSIONS(n),{method:P.I5.PATCH,body:h({path:t},r),headers:{"Content-Type":"application/vnd.egnyte.fsi.permissions.update+json;v=1",Accept:"application/vnd.egnyte.fsi.permissions.update+json;v=1"}})}({id:n,path:t,requestFields:e})};return(0,d.useMutation)(N({mutationFn:s},f()({onSuccess:function(){a(),b({folderPath:t})}},u)))}function C(e){var n=e.id,t=e.path,r=e.documentRoomId,o=e.options,i=void 0===o?{}:o,u=R({id:n,path:t,documentRoomId:r}).refresh;return(0,d.useMutation)(N({mutationFn:function(e){var t=e.userId,r=e.groupId;return function(e){var n=e.folderId,t=e.userId,r=e.groupId;return(0,P.ZP)(g.Z.FSI.ADD_GROUP_PERMISSION(n),{method:P.I5.PATCH,body:{userId:t,groupId:r}})}({folderId:n,userId:t,groupId:r})}},f()({onSuccess:function(){u(),b({folderPath:t})}},i)))}},617928:function(e,n,t){t.d(n,{dS:function(){return r},DD:function(){return o},cS:function(){return h},Mk:function(){return ee},AT:function(){return te},Xs:function(){return ne},_v:function(){return V},md:function(){return Q},lW:function(){return K},Xn:function(){return Y},Zr:function(){return z},B2:function(){return X},d8:function(){return B},WF:function(){return H},XY:function(){return x},F9:function(){return J},yr:function(){return W},Yh:function(){return $}});var r={AD_KIT:"AD_KIT",BULK_IMPORT:"BULK_IMPORT",PUB_API:"PUB_API",SYSTEM:"SYSTEM",WEB_UI:"WEB_UI",MOBILE:"MOBILE",UNKNOWN:"UNKNOWN"},o={USER:"USER",EMPLOYEE:"EMPLOYEE",GUEST:"GUEST",ALL:"ALL"},i=t(145987),u=t(115861),a=t(204942),s=t(364687),c=t.n(s),l=t(301158),d=t(23661),m=t(240701),p=t(401096),f=["file"];function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=function(e){var n=e.query;return(0,d.ZP)(m.Z.GROUPS.LIST(O({queryType:n?"CONTAINS":void 0},e)))},E=function(e){return(0,d.ZP)(m.Z.GROUPS.ID({groupId:e}))},g=function(e){return l.Z.get(m.Z.GROUPS.INFO({groupId:e})).then((function(e){return e.json()}))},P=function(e){return(0,d.ZP)(m.Z.GROUPS.ID({groupId:e}),{method:d.I5.DELETE})},y=function(e){return function(n){return(0,d.ZP)(m.Z.GROUPS.ID({groupId:e}),{method:d.I5.PUT,body:n})}},h=function(e){var n=e.groupId,t=e.data;return(0,d.ZP)(m.Z.GROUPS.USERS({groupId:n}),{method:d.I5.POST,body:t},{getDataCallback:p.Z})},I=function(e){return function(n){return(0,d.ZP)(m.Z.GROUPS.USERS({groupId:e}),{method:d.I5.DELETE,body:{id:e,resources:n}},{getDataCallback:p.Z})}},Z=function(e){return function(n){return(0,d.ZP)(m.Z.GROUPS.OWNERS({groupId:e}),{method:d.I5.POST,body:{resources:n}},{getDataCallback:p.Z})}},S=function(e){return function(n){return(0,d.ZP)(m.Z.GROUPS.OWNERS({groupId:e}),{method:d.I5.DELETE,body:{resources:n}},{getDataCallback:p.Z})}};function N(e){return(0,d.ZP)(m.Z.GROUPS.ROOT,{method:"POST",body:e})}function D(e){return"true"===e.success?{success:!0}:O(O({},e),{},{success:!1})}function j(e){return R.apply(this,arguments)}function R(){return(R=(0,u.Z)(c().mark((function e(n){var t,r,o,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,r=n.file,o=(0,i.Z)(n,f),t.append("bulk_group_insert_file",r),Object.keys(o).forEach((function(e){t.append(e,"".concat(o[e]))})),e.next=6,(0,d.vj)(m.Z.GROUPS.IMPORT,{body:t});case 6:return u=e.sent,e.abrupt("return",D(u));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){var n=e.body,t=e.folderId;return(0,d.ZP)(m.Z.GROUPS.CREATE_NEW_WITH_USERS({folderId:t}),{method:d.I5.POST,body:n})}function C(e){var n=e.body,t=e.folderId,r=e.templateId;return(0,d.ZP)(m.Z.GROUPS.CREATE_FOR_TEMPLATE({folderId:t,templateId:r}),{method:d.I5.POST,body:n})}var A=t(667294),T=t(221842),M=t.n(T),k=t(145218),U=t(183685),_=t(933705);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L={groups:"groups",group:function(e){return[L.groups,e]}};function W(){var e=(0,k.useQueryClient)();return(0,A.useCallback)((function(){return e.invalidateQueries([L.groups])}),[e])}function q(){var e=(0,k.useQueryClient)();return(0,A.useCallback)((function(n){return e.invalidateQueries(L.group(n))}),[e])}function x(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,k.useQuery)(F({queryKey:[L.groups,e],queryFn:function(){return b(e)}},n))}function V(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,k.useQuery)(F({queryKey:L.group(e),queryFn:function(){return E(e)}},n))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,k.useMutation)(F({mutationFn:function(e){return g(e)}},e))}function Y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=W();return(0,k.useMutation)(F({mutationFn:function(){return P(e)}},M()({onSuccess:t},n)))}function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=W();return(0,k.useMutation)(F({mutationFn:y(e)},M()({onSuccess:function(){t()}},n)))}function B(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=W();return(0,k.useMutation)(F({mutationFn:I(e)},M()({onSuccess:function(){(0,_.YA)(),t()}},n)))}function X(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=W();return(0,k.useMutation)(F({mutationFn:S(e)},M()({onSuccess:t},n)))}function Q(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=W();return(0,k.useMutation)(F({mutationFn:Z(e)},M()({onSuccess:t},n)))}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=W();return(0,k.useMutation)(F({mutationFn:N},M()({onSuccess:n},e)))}function $(e){var n=e.userId,t=e.defaultPagination,r=e.defaultFilters,o=e.options;return(0,U.Z)([L.groups,n],(function(e){var t=e.pagination,r=t.offset,o=t.limit,i=t.sortBy,u=t.sortDirection,a=t.filters;return b({offset:r,limit:o,sortBy:i,sortDirection:u,userId:n,query:a.query?a.query:void 0})}),F({paginationOptions:{getTotalCount:function(e){return e.count},defaultState:{pagination:t,filters:r}}},o))}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,k.useMutation)(F({mutationFn:j},e))}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=q();return(0,k.useMutation)(F({mutationFn:h},M()({onSuccess:function(e,t){var r=t.groupId;(0,_.YA)(),n(r)}},e)))}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=W();return(0,k.useMutation)(F({mutationFn:w},M()({onSuccess:n},e)))}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=W();return(0,k.useMutation)(F({mutationFn:C},M()({onSuccess:n},e)))}},324176:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(667294),o=t(289098),i=t(762074),u=t(403455),a=t(260554),s=t(529439),c=t(610861),l=t(579621),d=t(722610),m=t(330759);function p(e){var n=e.id,t=e.checked,o=e.onChange,i=e.label,u=e.description,a=e.tooltip;return r.createElement("div",{"data-tid":"discontinue-permissions-option"},r.createElement(m.Z,{size:m.Z.SIZES.S,id:n,checked:t,onChange:o,infoTooltip:a},i),r.createElement("div",{className:"Nfw8uryJTaeNM5_j1DcT Z3MFLDOuhAfuf_m3JCZI qqGfbuN2RooWpKmkockU cMD1Ln5gNqHc7P7v_G_6"},u))}var f=(0,i.nD)("storage.folderPermissions.inheritance.discontinueInheritance");function v(e){var n=e.onClose,t=e.onSubmit,o=(0,r.useState)(!1),u=(0,s.Z)(o,2),a=u[0],m=u[1],v=(0,r.useMemo)((function(){return[{value:!1,label:f("option.remove.label"),description:f("option.remove.description"),tooltip:f("option.remove.tooltip"),id:"remove-permissions-option"},{value:!0,label:f("option.keep.label"),description:f("option.keep.description"),tooltip:f("option.keep.tooltip"),id:"keep-permissions-option"}]}),[]);return r.createElement(r.Fragment,null,r.createElement(c.ZP.Header,null,r.createElement(c.ZP.Title,null,r.createElement("div",{className:"ZHQ1vxSELJysFmhanV3E"},r.createElement("span",null,f("title")),r.createElement(l.Z,{type:l.Z.TERTIARY,onClick:n},r.createElement(l.Z.Icon,{icon:d.xv}))))),r.createElement(c.ZP.Body,null,r.createElement("div",{className:"vjNXdAPKYW5fZyFpKkkM"},f("description")),r.createElement("div",{className:"wXOBL9T7aD4leG8z2CbX"},v.map((function(e){var n=e.value,t=e.label,o=e.description,i=e.tooltip,u=e.id;return r.createElement(p,{key:u,id:u,checked:a===n,onChange:function(){return m(n)},label:t,description:o,tooltip:i})})))),r.createElement(c.ZP.Footer,null,r.createElement(l.Z,{onClick:n,type:l.Z.SECONDARY},(0,i.t)("button.label.cancel")),r.createElement(l.Z,{onClick:function(){t({keepParentPermissions:a})}},(0,i.t)("button.label.apply"))))}function O(e){var n=e.onRemovePermissionInheritance,t=e.onAddPermissionInheritance,o=e.keepingParentPermissionsFeature,i=(0,u.u6)(),s=i.submitForm,l=i.resetForm;return r.createElement(a.Z,{onChange:function(e){var i,u,a,d,m=e.prevValues.inheritsPermissions,p=e.nextValues.inheritsPermissions;m!==p&&(o?p?(null==t||t(),s()):(u=(i={onCancel:l,onSubmit:function(e){null==n||n(e),s()}}).onCancel,a=i.onSubmit,d=function(){u(),(0,c.GZ)()},(0,c.Ll)(r.createElement(v,{onClose:d,onSubmit:function(e){a(e),(0,c.GZ)()}}),{onRequestClose:d})):s())}})}var b="Gf1tRYdMCwFTZxNjTeFX",E=(0,i.nD)("storage.folderPermissionsModal"),g=function(e){var n=e.onRemovePermissionInheritance,t=e.onAddPermissionInheritance,i=e.isModificationAllowed,u=void 0===i||i,a=e.keepingParentPermissionsFeature,s=void 0===a||a;return r.createElement("div",{className:"Sj0oEQba9PbOv88XT8Bl","data-tid":"permission-inheritance"},r.createElement(o.Switch,{name:"inheritsPermissions",label:E("inheritance.inheritPermissions"),infoTooltip:r.createElement("div",null,r.createElement("ul",{className:"hEU14Zh2ufvOwOCK3gjg"},r.createElement("li",{className:b},E("inheritance.tooltip.inheritanceState_li1")),r.createElement("li",{className:b},E("inheritance.tooltip.inheritanceState_li2",{mark:r.createElement("span",{className:"PXAGawA7Z1c3A2qvUpA6 eugzcnL4uVMlgbRkfTqa"},E("label.thisFolderOnly"))})))),disabled:!u}),r.createElement(O,{onRemovePermissionInheritance:n,onAddPermissionInheritance:t,keepingParentPermissionsFeature:s}))}},963170:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(529439),o=t(667294),i=t(337995),u=t(779210),a=t(499345),s=t(557155),c=t(799532),l=t(621465),d=t(294184),m=t.n(d),p=t(583025),f=t(713147),v=t(46326),O=t(581355),b=t(698607),E=t(762074),g=(0,E.nD)("storage.folderPermissionsModal.permissionDropdown");function P(e){var n=e.openGroups,t=void 0!==n&&n;return o.createElement(o.Fragment,null,!t&&o.createElement(c.Z,{icon:l.Mn,size:c.Z.sizes.M}),o.createElement("div",{className:"PzIFbyCg2xgz1TLTdqLL"},o.createElement("p",{className:"rrykt7Yju0aIlu5LR45A vlpHvsjgdbzjuadKPQ3e C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6","data-tid":"permission-open-groups"},g("addToGroup")),t&&o.createElement("p",{className:"WuycfMgwQ1uEMX3YRor1 Z3MFLDOuhAfuf_m3JCZI qqGfbuN2RooWpKmkockU cMD1Ln5gNqHc7P7v_G_6"},g("inherit"))),t&&o.createElement(o.Fragment,null,o.createElement(b.Z,{tooltip:g("tooltip")},o.createElement(c.Z,{icon:O.yo,size:c.Z.sizes.M})),o.createElement(c.Z,{icon:l.XX,size:c.Z.sizes.M})))}var y=function(e){var n=e.groups,t=e.onAddToGroup,r=e.setIsGroupDisplayed,i=e.toggleDropdown;return o.createElement(o.Fragment,null,o.createElement(p.Z,{onClick:function(){return r(!1)}},o.createElement(P,null)),o.createElement(f.Z,null),n.map((function(e){var n;return o.createElement(p.Z,{key:e.id,onClick:function(){null==t||t(e.id,e.name),i(!1)}},o.createElement(v.Z,{label:e.name,description:null!==(n=e.permission)&&void 0!==n?n:""}))})))},h=t(153672),I=t(474824),Z=t(381859),S=t(610253),N=(0,I.n)("storage.folderPermissionsModal.permissionDropdown"),D=function(e){var n=e.selectedPermission,t=e.onChange,i=e.toggleDropdown,u=e.setIsGroupDisplayed,a=e.groups,s=e.isUserDisabled,c=void 0!==s&&s,l=e.options,d=void 0===l?[]:l,m=e.isGroup,f=void 0!==m&&m,O=e.onRemove,b=(0,h.Lb)("ui.display.canManageGroups"),E=(0,r.Z)(b.data,1)[0]&&!c&&!f&&a.length>0;return o.createElement(o.Fragment,null,d.map((function(e){var r=e.value===n;return o.createElement(p.Z,{key:e.label,onClick:function(){t(e.value),i(!1)}},o.createElement(v.Z,{label:e.label,description:e.description,selected:r}))})),E&&o.createElement(p.Z,{onClick:function(){return u(!0)}},o.createElement(P,{openGroups:!0})),O&&o.createElement(o.Fragment,null,o.createElement(Z.Z,null),o.createElement(p.Z,{onClick:function(){O(),i(!1)}},o.createElement("span",{className:S.Z.removeButton},N("removePermissions")))))},j=function(e){var n=e.onChange,t=e.onAddToGroup,d=e.onRemove,p=e.isUserDisabled,f=e.outline,v=void 0!==f&&f,O=e.groups,b=void 0===O?[]:O,E=e.selectedPermission,g=void 0===E?"":E,P=e.isGroup,h=void 0!==P&&P,I=e.options,Z=void 0===I?[]:I,S=e.trigger,N=(0,o.useState)(!1),j=(0,r.Z)(N,2),R=j[0],w=j[1];return(0,o.useEffect)((function(){!g||Z.map((function(e){return e.value})).includes(g)||b.map((function(e){return e.name})).includes(g)||n(Z[Z.length-1].value)}),[g,n,Z,b]),o.createElement(u.Z,{trigger:null!=S?S:o.createElement(s.Z,{className:m()(v&&"XO08JkrMbFVA3WG4VF6u"),type:v?s.Z.SECONDARY:s.Z.TEXT,"data-tid":"permission-dropdown"},o.createElement(a.Z,{"data-tid":g,maxLength:12},g),o.createElement(c.Z,{icon:l.Dd,size:c.Z.sizes.M})),closeMenuOnClick:!1,onToggle:function(e){e||w(!1)},className:"vZkXNwiqatSsF8V4Fdgm"},(function(e){var r=e.toggleDropdown;return o.createElement(i.Z,{className:"kHMfT_yYqkw4MRYAR0i4"},R?o.createElement(y,{groups:b,onAddToGroup:t,setIsGroupDisplayed:w,toggleDropdown:r}):o.createElement(D,{options:Z,selectedPermission:g,onChange:n,onRemove:d,toggleDropdown:r,setIsGroupDisplayed:w,groups:b,isUserDisabled:p,isGroup:h}))}))}},46326:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(667294),o=t(799532),i=t(460019),u=t(499345),a=t(610253);function s(e){var n=e.label,t=e.description,s=e.selected,c=void 0!==s&&s;return r.createElement(r.Fragment,null,r.createElement("div",{className:a.Z.option},r.createElement("p",{className:a.Z.label,"data-tid":"permission-option-label"},r.createElement(u.Z,{maxLength:25},n)),r.createElement("p",{className:a.Z.description,"data-tid":"permission-option-description"},t)),c&&r.createElement(o.Z,{icon:i.d2,size:o.Z.sizes.M}))}},244507:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(487462),o=t(204942),i=t(145987),u=t(667294),a=t(698607),s=t(852298),c=t(77259),l=t(762074),d=t(758542),m=t(293996),p=t(224912),f=t(963170),v=t(99815),O=t(294184),b=t.n(O),E=t(799532),g=t(51505),P=t(998876),y=t(579621),h=function(e){var n=e.isCreatingAllowed,t=e.inputValue,r=e.openUserInvitationModal;return u.createElement(y.Z,{type:y.Z.TERTIARY,className:"EPpGMqYkOiWRPsLnaWbA",onClick:function(){return r(t)}},u.createElement("div",{className:b()("wYSajWTA46IqiNUdNbsL",{unlocked:n})},u.createElement(E.Z,{icon:g.hd,size:E.Z.sizes.M}),(0,l.t)("storage.folderPermissions.inviteNewUsers"),!n&&u.createElement("span",{className:"KWZIvGXhhRknhCZbhdMF"},u.createElement(E.Z,{icon:P.Ml,size:E.Z.sizes.S})," ",(0,l.t)("storage.folderPermissions.label.lockedByAdmin"))))},I=t(495032),Z=t(326269),S=t(588765),N=t(534733),D=function(e){if(!e||"group"===e.type||"external"===e.type)return!1;var n=e.role;return(void 0===n?"":n).includes(N.$A.ADMIN)},j=t(965965),R=["data","isDisabled","selectProps"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=(0,l.nD)("storage.folderPermissionsModal"),T=function(e){var n=e.setValue,t=e.values,o=e.errors,l=e.groups,O=void 0===l?[]:l,b=e.openUserInvitationModal,E=e.isUserDisabled,g=e.outline,P=void 0!==g&&g,y=e.isInInactiveContainer,N=void 0!==y&&y,w=e.isMulti,T=void 0!==w&&w,M=(0,p.x)().canInviteNewUsers,k=I.n.VIEWER.value,U=M&&!!b,_=t.usersOrGroups.length>0,G=t.usersOrGroups.some((function(e){return n=e.value,!(0,v.$0)(n)&&(0,v.S_)(n);var n})),F=(0,u.useMemo)((function(){var e=t.usersOrGroups.map((function(e){return(0,I.J)(e.value,N)}));return(0,S.HQ)(e)}),[t.usersOrGroups,N]);return u.createElement("div",{className:j.Z.inviteRow},u.createElement("div",{"data-tid":"invite-user-or-group",className:j.Z.tokenfield},u.createElement("div",{className:j.Z.prompt},A("label.addDomainUsersOrGroups")),u.createElement(d.Z,{value:t.usersOrGroups,isMulti:T,stagingUsers:!0,placeholder:A("enterName"),canCreateUnknownOption:U,canCurrentUserBeChosen:!0,isOptionDisabled:function(e){return D(e.value)},components:{Option:function(e){var n=e.data,o=e.isDisabled,a=e.selectProps,s=(0,i.Z)(e,R),l=D(n.value),d=!Object.values(c._I).includes(t.permission)&&n.value.type===m.V.group;return u.createElement(m.Z,(0,r.default)({value:n.value,data:n,isDisabled:o||l||d,selectProps:C(C({},a),{},{getOptionTooltip:function(e){var n=e.option,t=e.isDisabled;return D(n.value)?A("addDomainUser.disabledTooltip"):d?A("addDomainUser.nestedGroupDisabledTooltip"):t?A("addDomainUser.currentUserNotAllowed"):void 0}})},s))}},formatCreateLabel:function(e){return u.createElement(h,{inputValue:e,isCreatingAllowed:!0,openUserInvitationModal:b})},onChange:function(e){if(!e||Array.isArray(e)&&0===e.length)return n("permission",k),void n("usersOrGroups",[]);var t=(Array.isArray(e)?e:[e]).filter((function(e){return e.value.id}));0!==t.length&&n("usersOrGroups",t)}}),o.usersOrGroups&&u.createElement(s.Z,{error:o.usersOrGroups,name:"usersOrGroups"})),u.createElement(a.Z,{disabled:_,tooltip:A("tooltip.noUserOrGroupInputValue")},u.createElement("div",{className:j.Z.actionRow},_?u.createElement(f.Z,{selectedPermission:t.permission,isGroup:G,options:F,onChange:function(e){n("permission",e),n("groupId","")},onAddToGroup:function(e,t){n("permission",t),n("groupId",e)},groups:O,outline:P,isUserDisabled:E}):u.createElement(Z.O,{permission:t.permission}))))}},326269:function(e,n,t){t.d(n,{d:function(){return l},O:function(){return p}});var r=t(762074),o=t(799532),i=t(581355),u=t(698607),a=t(667294),s="gmQLUdDoD6Eak4Pjbi0w",c=(0,r.nD)("storage.folderPermissions");function l(){return a.createElement("div",{className:"oSn74RFM2MM25AtsmFGe"},c("label.Owner"),a.createElement(u.Z,{tooltip:c("adminInfoTooltip",{name:a.createElement("span",{className:"kzmuswNavyfxAWIiie3Q"},c("allAdministrators"))})},a.createElement(o.Z,{icon:i.yo,className:s})))}var d=t(621465),m=(0,r.nD)("storage.folderPermissions");function p(e){var n=e.permission;return a.createElement("div",{className:"hiN4xl29PPM0Ad3PNHat","data-tid":"read-only-permission"},m("label.".concat(n)),a.createElement(o.Z,{icon:d.Dd,className:s}))}},441680:function(e,n,t){t.d(n,{ZC:function(){return y},sx:function(){return E},My:function(){return I}});var r=t(487462),o=t(115861),i=t(364687),u=t.n(i),a=t(667294),s=t(579621),c=t(762074),l=t(610861);function d(e){var n=e.children;return a.createElement("div",{className:"dSlfBYU4wDTedpaw1rOQ"},n)}var m=t(821442),p=t(930652);function f(){return a.createElement(m.Z,{as:"a",target:"_blank",href:p.Z.helpdesk.ARTICLES.STANDARD_USERS_FAQ,className:"cYH3hIDMdrZHQE5Adh0r"},(0,c.t)("storage.folderPermissionsModal.grantPermissionConfirmation.helpdeskLink"))}var v=(0,c.nD)("storage.folderPermissionsModal.grantPermissionConfirmation");function O(e){var n=e.text;return a.createElement("span",{className:"sYqPlgkS5ZzmxVwuOMSU L1NPGp0OArr9AgHvsxTA C7HhvVmv8inrSQjb607z eugzcnL4uVMlgbRkfTqa"},n)}function b(e){var n=e.groupNames,t=e.userEmails,r=void 0===t?[]:t,o=e.onCancel,i=e.onConfirm,u=(0,a.useCallback)((function(){(0,l.GZ)(),o()}),[o]),m=(0,a.useCallback)((function(){(0,l.GZ)(),i()}),[i]);return a.createElement(a.Fragment,null,a.createElement(l.ZP.Header,null,a.createElement(l.ZP.Title,null,v("groupWithStandardUser.title"))),a.createElement(l.ZP.Body,null,a.createElement(d,null,v(r.length>0?"groupWithStandardUser.descriptionWithUsers":"groupWithStandardUser.description",{count:n.length,groupName:a.createElement(O,{text:n[0]}),groupCount:a.createElement(O,{text:n.length-1}),userCount:a.createElement(O,{text:r.length})}))),a.createElement(l.ZP.Footer,null,a.createElement(f,null),a.createElement(s.Z,{type:s.Z.SECONDARY,onClick:u},(0,c.t)("button.label.cancel")),a.createElement(s.Z,{variant:s.Z.variants.DESTRUCTIVE,onClick:m},(0,c.t)("button.label.continue"))))}function E(e){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(0,l.Ll)(a.createElement(b,(0,r.default)({},n,{onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}})),{size:l.ZP.sizes.M,withCloseButton:!1})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=(0,c.nD)("storage.folderPermissionsModal.grantPermissionConfirmation"),y={INVITE:"invite",ADD:"add"};function h(e){var n=e.folderName,t=e.usersEmails,r=void 0===t?[]:t,o=e.onCancel,i=e.onConfirm,u=e.variant,m=void 0===u?y.INVITE:u,p=(0,a.useCallback)((function(){(0,l.GZ)(),o()}),[o]),v=(0,a.useCallback)((function(){(0,l.GZ)(),i()}),[i]);return a.createElement(a.Fragment,null,a.createElement(l.ZP.Header,null,a.createElement(l.ZP.Title,null,P("standardUser.title",{count:r.length,context:m}))),a.createElement(l.ZP.Body,null,a.createElement(d,null,a.createElement(a.Fragment,null,a.createElement("p",null,P("standardUser.description",{count:r.length,emailAddress:a.createElement("strong",null,r[0]),folderName:a.createElement("strong",null,n)})),a.createElement("p",null,P("standardUser.areYouSure",{context:m}))))),a.createElement(l.ZP.Footer,null,a.createElement(f,null),a.createElement(s.Z,{type:s.Z.SECONDARY,onClick:p},(0,c.t)("button.label.cancel")),a.createElement(s.Z,{onClick:v},(0,c.t)("button.label.".concat(m)))))}function I(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(0,l.Ll)(a.createElement(h,(0,r.default)({},n,{onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}})),{size:l.ZP.sizes.M,withCloseButton:!1})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},693652:function(e,n,t){t.d(n,{Ae:function(){return O},qz:function(){return b},th:function(){return s},kh:function(){return z},Hh:function(){return h}});var r=t(762074),o=t(735691),i=(0,r.nD)("error"),u=(0,r.nD)("storage.folderPermissionsMultiUser");function a(e){var n=e.fieldName,t=e.errorMessage;return{name:"",message:t,test:function(e,r){var o=r.parent,i=r.path,u=r.createError;return!!e.isSaved||!o.find((function(t){return t[n]===e[n]&&t.cid!==e.cid}))||u({path:"".concat(i,".").concat(n),message:t})}}}function s(){return o.Ry().shape({users:o.IX().of(o.Ry().shape({email:o.Z_().email().required(i("required")),userName:o.Z_().required(i("required")),userType:o.Z_().required(i("required"))}).test(a({fieldName:"email",errorMessage:u("emailNotUnique")})).test(a({fieldName:"userName",errorMessage:u("usernameNotUnique")})))})}var c=t(204942),l=t(986456),d=t.n(l),m=t(943886),p=t(495032),f=t(534733);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({cid:d().uniqueId("cid:user:"),isSaved:!1,email:"",userName:"",userType:f.$A.POWER,groupId:"",permissions:p.n.VIEWER.value},e)}function b(e){return(0,m.r0)("fullEmailAsUsername")?e.replace("@",".").replace(/([^A-Z0-9._-])/gi,"_"):e.split("@")[0].replace(/([^A-Z0-9._-])/gi,"_")}var E=t(153672),g=f.$A.STANDARD,P=f.$A.POWER,y=f.$A.ADMIN;function h(){var e=(0,E.ZP)().data;return[P,g,y].filter((function(n){return e.ui.availableValues[n].addUser}))}var I=t(115861),Z=t(364687),S=t.n(Z),N=t(933705),D=t(240701),j=t(23661),R=t(931020),w=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.v.DOCUMENT_ROOM;return(0,j.ZP)(D.Z.EXTERNAL_PORTAL.PROXY.BULK_INVITE({resourceId:n,portalName:t}),{method:j.I5.POST,body:{items:e}})};function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(e){return M.apply(this,arguments)}function M(){return M=(0,I.Z)(S().mark((function e(n){var t,r,o,i,u,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.path,r=n.users,o=n.message,i=n.resourceId,u=n.portalName,a=r.map((function(e){var n={path:t,username:e.userName,role:e.userType,email:e.email,message:o};return e.groupId?A(A({},n),{},{groupId:e.groupId}):A(A({},n),{},{priv:e.permissions})})),!i){e.next=4;break}return e.abrupt("return",w(a,i,u));case 4:return e.abrupt("return",N.ZP.inviteBulkUsers(a));case 5:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}var k=t(529439);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G=(0,r.nD)("error"),F=function(){return{error:G("default")}},L=t(52646),W=function(e,n){return n.find((function(n){var t=n.resource;return(null==t?void 0:t.email)===e.email&&(null==t?void 0:t.username)===e.userName}))},q=function(e,n){return e.map((function(e){var t,r=W(e,n);return r&&200!==r.status?function(e,n){var t,r,o,i,u=e.errors,a=e.inputErrors,s=e.formErrors,c=e.errorMessage,l=e.results,d=e.message,m=Object.entries(a||{}).reduce((function(e,t){var r=(0,k.Z)(t,2),o=r[0],i=(0,k.Z)(r[1],1)[0].msg,u=n[o];return u?e.known[u]=i:e.unknown[o]=i,e}),{known:{},unknown:{}}),p=_(_(_(_(_(_(_({},!!Object.keys(m.known).length&&{inputErrors:m.known}),!!Object.keys(m.unknown).length&&{error:Object.values(m.unknown)[0]}),(null==u||null===(t=u[0])||void 0===t?void 0:t.msg)&&{error:u[0].msg}),(null==s||null===(r=s[0])||void 0===r?void 0:r.msg)&&{error:s[0].msg}),c&&{error:c}),d&&{error:d}),(null==l||null===(o=l[0])||void 0===o||null===(i=o.errors)||void 0===i?void 0:i.msg)&&{error:l[0].errors.msg});return Object.keys(p)||(p=F()),p}(null!==(t=r.errors)&&void 0!==t?t:{},{email:"email",userName:"userName",username:"userName",message:"message"}):null})).reduce((function(e,n,t){var r;return n?(null!==(r=n.inputErrors)&&void 0!==r&&r.message&&(e.message=n.inputErrors.message),Object.entries(n.inputErrors||{}).filter((function(e){return"message"!==(0,k.Z)(e,1)[0]})).forEach((function(n){var r=(0,k.Z)(n,2),o=r[0],i=r[1];e["users[".concat(t,"].").concat(o)]=i})),n.error&&(e["users[".concat(t,"].").concat(L.z)]=n.error),e):e}),{})},x=function(e,n){var t=W(e,n);return e.isSaved||!!t&&200===t.status},V=t(93433);function z(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,I.Z)(S().mark((function e(n){var t,r,o,i,u,a,s,c,l,d,m,p,f;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.folderPath,r=n.values,o=n.resourceId,i=n.portalName,u=r.withCustomMessage?r.message:"",a=r.users.filter((function(e){return!e.isSaved})),e.prev=3,e.next=6,T({path:t,users:a,message:u,resourceId:o,portalName:i});case 6:return s=e.sent,c=q(r.users,s),l=r.users.map((function(e,n){return{user:e,index:n}})).filter((function(e){var n=e.user;return x(n,s)})).map((function(e){return e.index})),d=s.filter((function(e){return 200===e.status})),m=d.filter((function(e){return"groupId"in e.resource})).map((function(e){return e.resource.groupId})),p=d.filter((function(e){return"id"in e.resource})).map((function(e){return e.resource.id})),f=[].concat((0,V.Z)(m),(0,V.Z)(p)),e.abrupt("return",{isSuccess:0===Object.keys(c).length,errors:c,succeededItemsIndexes:l,succeededItemsIds:f});case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return",{isSuccess:!1,errors:[F()],succeededItemsIndexes:[],succeededItemsIds:[]});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}},8316:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(667294),o=t(693652);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,o.Hh)(),t=(0,r.useMemo)((function(){return e?(0,o.qz)(e):""}),[e]),i=(0,r.useMemo)((function(){return{users:[(0,o.Ae)({email:e,userName:t,userType:n[0]})],message:"",withCustomMessage:!1}}),[n,e,t]);return i}},838831:function(e,n,t){t.d(n,{v:function(){return L}});var r=t(667294),o=t(832116),i=t(832201),u=t(809742),a=t(474824),s=t(529439),c=t(762074),l=t(403455),d=t(821442),m=t(579621),p=t(799532),f=t(451545),v=t(51505),O=t(569748),b=t(698607),E=t(460474),g=t(930652),P=t(294184),y=t.n(P),h=t(289098),I=t(225364),Z=t(460019),S=t(362658),N=t(52646),D=t(528058),j=t(77259),R=t(609063),w=t(693652),C=(0,c.nD)("components.multiUserInviteForm");function A(e){var n=e.fieldName,t=e.remove,o=e.withRemoveButton,i=void 0===o||o,a=e.disabled,m=e.groups,f=e.isInInactiveContainer,v=(0,w.Hh)(),O=(0,r.useMemo)((function(){return v.map((function(e){return{value:e,label:(0,c.t)("users.userType.".concat(e))}}))}),[v]),E=(0,l.U$)("".concat(n,".email")),g=(0,s.Z)(E,1)[0].value,P=(0,l.U$)("".concat(n,".userName")),y=(0,s.Z)(P,3),A=y[0].value,T=y[2].setValue,M=(0,l.U$)("".concat(n,".groupId")),k=(0,s.Z)(M,3)[2].setValue,U=(0,l.U$)("".concat(n,".userType")),_=(0,s.Z)(U,1)[0].value,G=(0,l.U$)("".concat(n,".permissions")),F=(0,s.Z)(G,3),L=F[0].value,W=F[2].setValue,q=(0,l.U$)("".concat(n,".isSaved")),x=(0,s.Z)(q,1)[0].value,V=(0,r.useCallback)((function(){g&&!A&&T((0,w.qz)(g))}),[g,A,T]),z=x||a,Y=Object.values(j._I).includes(L)?{type:D.BX.USER,permission:L,role:_}:{permission:L};return r.createElement("li",{className:"ka2jIJT2QXPM4DO74TQc"},r.createElement("div",{className:"Cbkbitv8tiFEyJsR3HVW"},r.createElement("div",{className:"vZFuUsh0cHDKs_HlJ7OO"},r.createElement("div",{className:"t_QbXBY_QKXP2WRdHPAk","data-onboarding":"[createSharedFolder.enterEmail_new]"},r.createElement("div",null,r.createElement(h.Text,{name:"".concat(n,".email"),required:!0,label:C("emailLabel"),placeholder:C("emailPlaceholder"),onBlur:V,disabled:z})),r.createElement("div",null,r.createElement(h.Text,{name:"".concat(n,".userName"),required:!0,label:C("usernameLabel"),placeholder:C("usernamePlaceholder"),disabled:z})),r.createElement("div",null,r.createElement(h.Select,{name:"".concat(n,".userType"),label:C("userTypeLabel"),placeholder:C("userTypePlaceholder"),options:O,disabled:z})),r.createElement("div",null,r.createElement(S.Z,null,r.createElement(S.Z.Label,null,C("permissionsLabel")),r.createElement(S.Z.Control,null,r.createElement(R.Z,{item:Y,onChange:function(e){W(e),k("")},onAddToGroup:function(e,n){W(n),k(e)},outline:!0,groups:m,isInInactiveContainer:f}))))),i&&!x&&r.createElement("div",null,r.createElement(b.Z,{tooltip:C("removeUserRowTooltip")},r.createElement(d.Z,{onClick:t,className:"MY8_aPf9fbur3kTKYIWy",disabled:z,"aria-label":"Remove user"},r.createElement(d.Z.Icon,{icon:I.gt})))),x&&r.createElement(b.Z,{tooltip:C("savedUserRowTooltip")},r.createElement(p.Z,{icon:Z.I1,className:"Y053jyIU7wjYFzFjdCLs"}))),r.createElement("div",null,r.createElement(N.Z,{fieldName:n},(function(e){return r.createElement("div",{className:"QvPvHz4gqSHwGtFT_FqH"},r.createElement(u.Z,{type:u.Z.types.ERROR,fullWidth:!0},e))})))))}var T=(0,c.nD)("components.multiUserInviteForm");function M(){return r.createElement(d.Z,{as:"a",href:g.Z.helpdesk.ARTICLES.INVITATING_MULTIPLE_USERS,target:"_blank"},(0,c.t)("button.label.learnMore"),r.createElement(p.Z,{icon:f.g,size:p.Z.sizes.M}))}function k(e){var n=e.title,t=e.subtitle,o=e.fieldName,u=e.disabled,a=e.groups,c=e.isInInactiveContainer,d=(0,w.Hh)(),p=(0,l.u6)(),f=p.status,g=p.setStatus,P=(0,l.U$)(o),h=(0,s.Z)(P,1)[0].value,I=(0,E.Z)("multiUserInvitationModalEnabled"),Z=h.length>1,S=(0,r.useCallback)((function(e,n){e(n),g((0,i.YY)(f,"".concat(o,"[").concat(n,"]")))}),[f,g,o]);return r.createElement(O.$0,{title:n,subtitle:t},r.createElement(l.F2,{name:o},(function(e){var n=e.push,t=e.remove;return r.createElement("div",null,h.map((function(e,n){return r.createElement(A,{key:e.cid,fieldName:"".concat(o,"[").concat(n,"]"),remove:function(){return S(t,n)},withRemoveButton:Z,disabled:u,groups:a,isInInactiveContainer:c})})),r.createElement(b.Z,{disabled:I,tooltip:T("addMultipleUsersTooltip"),actions:r.createElement(M,null),placement:"right"},r.createElement(m.Z,{onClick:function(){return n((0,w.Ae)({userType:d[0]}))},type:m.Z.TERTIARY,disabled:u||!I},r.createElement(m.Z.Icon,{icon:v.IH}),r.createElement("span",{className:y()("lzh6uvNl3D0joWp3xzJe",I&&"efjWlLzOt9fQM0mlqB0_")},T("addNewUserRow")))))})))}var U=(0,c.nD)("components.multiUserInviteForm");function _(e){var n=e.fieldName,t=e.disabled,o=(0,l.U$)("withCustomMessage"),i=(0,s.Z)(o,1)[0].value;return r.createElement("div",{className:"MuxjILTYmMH_W6oQNS4r"},r.createElement("div",{className:"KjnS02GRWaFmP1G70gZq"},r.createElement(h.Switch,{name:"withCustomMessage",label:U("includeCustomMessage"),disabled:t})),i&&r.createElement("div",{className:"MLMgfTbPYB2nfrD2vnVS"},r.createElement(h.Textarea,{rows:5,name:n,label:U("customMessageLabel"),disabled:t})))}var G=(0,a.n)("components.multiUserInviteForm");function F(){return(0,i.IM)()?r.createElement(u.Z,{type:u.Z.types.ERROR,fullWidth:!0},G("failedToCreateSomeUsers")):null}function L(e){var n=e.title,t=e.subtitle,i=e.groups,u=e.isInInactiveContainer,a=e.disabled;return r.createElement(r.Fragment,null,r.createElement(F,null),r.createElement(k,{fieldName:"users",title:n,subtitle:t,groups:i,isInInactiveContainer:u,disabled:a}),r.createElement(o.Z,null),r.createElement(_,{fieldName:"message"}))}},900774:function(e,n,t){t.d(n,{D:function(){return i},m:function(){return u}});var r=t(667294),o=(0,r.createContext)({id:"",path:"",name:"",isModificationAllowed:!1,documentRoomId:null,emailFolderAccessRequestId:null,isInInactiveContainer:!1});function i(e){var n=e.children,t=e.id,i=e.path,u=e.name,a=e.isModificationAllowed,s=e.documentRoomId,c=e.emailFolderAccessRequestId,l=e.isInInactiveContainer,d=(0,r.useMemo)((function(){return{id:t,path:i,name:u,isModificationAllowed:a,documentRoomId:s,emailFolderAccessRequestId:c,isInInactiveContainer:l}}),[t,i,u,a,s,c,l]);return r.createElement(o.Provider,{value:d},n)}function u(){var e=(0,r.useContext)(o);return{id:e.id,path:e.path,name:e.name,isModificationAllowed:e.isModificationAllowed,documentRoomId:e.documentRoomId,emailFolderAccessRequestId:e.emailFolderAccessRequestId,isInInactiveContainer:e.isInInactiveContainer}}},609063:function(e,n,t){var r=t(667294),o=t(99815),i=t(963170),u=t(495032);n.Z=function(e){var n=e.onChange,t=e.onAddToGroup,a=e.item,s=e.isUserDisabled,c=e.isInInactiveContainer,l=e.groups,d=e.outline,m=void 0!==d&&d,p=a.permission,f=(0,u.J)(a,c),v=!(0,o.$0)(a)&&(0,o.S_)(a);return(0,r.useEffect)((function(){f.map((function(e){return e.value})).includes(p)||l.map((function(e){return e.name})).includes(p)||n(f[f.length-1].value)}),[p,n,f,l]),r.createElement(i.Z,{onChange:n,onAddToGroup:t,isUserDisabled:s,outline:m,groups:l,selectedPermission:p,isGroup:v,options:f})}},555200:function(e,n,t){t.d(n,{RC:function(){return s},WX:function(){return a},nq:function(){return u}});var r=t(529439),o=t(667294),i=(0,o.createContext)(void 0);function u(e){var n=e.children,t=(0,o.useState)({});return o.createElement(i.Provider,{value:t},n)}function a(){var e=(0,o.useContext)(i);return{permissionStatuses:(0,r.Z)(e,1)[0]}}function s(){var e=(0,o.useContext)(i);return{setPermissionStatuses:(0,r.Z)(e,2)[1]}}},636343:function(e,n,t){t.d(n,{s:function(){return s}});var r=t(204942),o=t(667294),i=t(555200);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(){var e=(0,i.RC)().setPermissionStatuses;return{addStatuses:(0,o.useCallback)((function(n){var t=Object.fromEntries(n.map((function(e){return[e.id,(n=e,t=n.id,r=n.mutation,o=n.oldPermission,i=void 0===o?void 0:o,{id:t,mutation:r,timestamp:Date.now(),oldPermission:i})];var n,t,r,o,i})));e((function(e){return a(a({},e),t)}))}),[e])}}},528058:function(e,n,t){t.d(n,{Au:function(){return o},BX:function(){return u},FP:function(){return s},Gg:function(){return i},ZZ:function(){return r},lZ:function(){return a}});var r="All Standard Users",o="All Standard Users and Power Users",i=[r,"All Power Users",o],u={USER:"user",STAGING_USER:"staging",GROUP:"group"},a={ADDED:"added",CHANGED:"changed",USER_ADDED:"userAdded",NONE:"none"},s={OPEN:"Permission Modal: modal opened",ADD:"Permission Modal: permission added",DELETE:"Permission Modal: permission deleted",MODIFY:"Permission Modal: permission modified",ADD_TO_GROUP:"Permission Modal: added to group",INVITE_NEW:"Permission Modal: invite new users clicked",USER_ADDED:"Permission Modal: user added successfully "}},676409:function(e,n,t){t.d(n,{KN:function(){return s},m5:function(){return d},nG:function(){return V}});var r=t(115861),o=t(364687),i=t.n(o),u=t(667294),a=t(617928);function s(){var e=(0,a.Zr)().mutateAsync;return(0,u.useCallback)(function(){var n=(0,r.Z)(i().mark((function n(t){var r,o,u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.id){n.next=3;break}return n.abrupt("return",!1);case 3:return n.prev=3,n.next=6,e(r);case 6:return o=n.sent,u=o.hasStandardUsers,n.abrupt("return",u);case 11:return n.prev=11,n.t0=n.catch(3),n.abrupt("return",void 0);case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e])}var c=t(190544),l=t(384309);function d(){var e=(0,l.Z)({staleTime:30*c.NO}).data;return void 0!==e&&e}var m=t(204942),p=t(145987),f=t(77259),v=t(900774),O=t(93433),b=t(529439),E=t(403455),g=t(762074),P=t(610861),y=t(579621),h=t(531926),I=t(534733),Z=t(397404),S=t(441680),N=t(266606),D=t(528058),j=t(621465),R=t(776327),w=t(318798),C=t(838831),A=t(693652),T=t(8316),M=t(169060),k=(0,g.nD)("storage.folderPermissionsMultiUser");function U(e){var n=e.folderName,t=e.folderPath,o=e.folderId,a=e.documentRoomId,s=e.userEmailAddress,c=e.onClose,l=e.isInInactiveContainer,d=(0,T.Z)(s),m=(0,M.Z)({id:o,path:t,documentRoomId:a}),p=(0,u.useState)([]),v=(0,b.Z)(p,2),U=v[0],_=v[1];(0,u.useEffect)((function(){w.Z.closeTooltipsForTaskWithToken("uploadAndShare")}),[]);var G=(0,u.useCallback)((function(e){(0,P.GZ)(),null==c||c(e)}),[c]);function F(){(0,P.Mr)(),R.ZP.trigger(R.ZP.Events.Onboarding.UPLOAD_AND_SHARE.STEPS_COMPLETED)}function L(){return(L=(0,r.Z)(i().mark((function e(r,o){var u,s,c,l,d,m,p,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=o.setStatus,s=o.setFieldValue,!(c=r.users.filter((function(e){return e.userType===I.$A.STANDARD}))).length){e.next=8;break}return e.next=5,(0,S.My)({usersEmails:c.map((function(e){return e.email})),folderName:n});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return u({}),e.next=11,(0,A.kh)({folderPath:t,values:r,resourceId:a});case 11:l=e.sent,d=l.isSuccess,m=l.errors,p=l.succeededItemsIndexes,(v=l.succeededItemsIds).length>0&&_((function(e){return[].concat((0,O.Z)(e),(0,O.Z)(v))})),d?((0,f.Ce)({folderPath:t}),N.Z.track(D.FP.USER_ADDED,{count:p.length}),G([].concat((0,O.Z)(U),(0,O.Z)(v))),(0,Z.c0)("success",k("usersCreatedSuccessfully"))):u({errors:m}),p.forEach((function(e){return s("users[".concat(e,"].isSaved"),!0)}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u.createElement(E.J9,{initialValues:d,validationSchema:(0,A.th)(),onSubmit:function(e,n){return L.apply(this,arguments)}},(function(e){var t=e.isSubmitting;return u.createElement(E.l0,null,u.createElement(P.ZP.Header,null,u.createElement(P.ZP.Title,null,k("modalHeader",{folderName:n}))),u.createElement(P.ZP.Body,null,u.createElement(C.v,{title:k("sectionTitle"),subtitle:k("sectionSubtitle",{folderName:n}),groups:m,isInInactiveContainer:l,disabled:t})),u.createElement(P.ZP.Footer,null,u.createElement("div",{className:"s5_al5HNcP6G2pdKasYc"},u.createElement(y.Z,{type:y.Z.SECONDARY,onClick:G,disabled:t},u.createElement(y.Z.Icon,{icon:j.Mn}),(0,g.t)("button.label.back")),u.createElement("div",{className:"wvohdyxQu3pQtFplGs_f"},u.createElement(y.Z,{type:y.Z.SECONDARY,onClick:F,disabled:t},(0,g.t)("button.label.close")),u.createElement(h.Z,{"data-onboarding":"[createSharedFolder.invitedUser_new]",idleText:k("saveButton")})))))}))}function _(e){(0,P.Ll)(u.createElement(U,e),{size:P.ZP.sizes.XL,withCloseButton:!0,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,onRequestClose:function(){var n;(0,P.GZ)(),null===(n=e.onClose)||void 0===n||n.call(e,[])}})}var G=t(636343),F=t(221842),L=t.n(F),W=["email"];function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){(0,m.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onClose,t=(0,v.m)(),r=t.id,o=t.path,i=t.name,a=t.documentRoomId,s=t.isInInactiveContainer,c=(0,f.pe)({id:r,path:o,documentRoomId:a}),l=c.refresh,d=(0,G.s)(),m=d.addStatuses,O=(0,M.Z)({id:r,path:o,documentRoomId:a}),b=(0,u.useCallback)((function(e){e&&e.length>0&&m(e.map((function(e){return{id:e,mutation:D.lZ.ADDED}}))),l(),null==n||n()}),[m,l,n]),E=(0,u.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.email,t=void 0===n?"":n,u=(0,p.Z)(e,W);return _(x({documentRoomId:a,userEmailAddress:t,folderId:r,folderName:i,folderPath:o,groupsWithPermission:O,isInInactiveContainer:s},L()(u,{onClose:b})))}),[r,i,o,a,b,O,s]);return{openModal:E}}},169060:function(e,n,t){t.d(n,{Z:function(){return r.Z}});var r=t(33292)},33292:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(77259),o=t(204942),i=t(528058);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){var n=e.id,t=e.path,o=e.documentRoomId,u=void 0===o?null:o,s=(0,r.v_)({path:t,id:n,documentRoomId:u,options:{select:function(e){return e.groups.filter((function(e){return e.id&&!i.Gg.includes(e.name)})).map((function(e){return a(a({},e),{},{type:i.BX.GROUP})}))}}}).data;return void 0===s?[]:s}},500140:function(e,n,t){t.d(n,{mo:function(){return i},oA:function(){return o},sy:function(){return u}});var r=t(77259);function o(e){return!(!e||!e.formErrors&&!e.inputErrors)}function i(e){var n=e.formErrors;return(void 0===n?[]:n).find((function(e){return e.code===r.LF.NOT_ALLOWED_TO_MANAGE_LARGE_GROUP_PERMISSION}))}function u(e){var n=e.formErrors;return(void 0===n?[]:n).find((function(e){return e.code===r.LF.GROUP_NOT_FOUND}))}},99815:function(e,n,t){t.d(n,{$0:function(){return O},FJ:function(){return E},O7:function(){return y},S_:function(){return v},YF:function(){return d},fP:function(){return p},gV:function(){return P},hE:function(){return b},kO:function(){return m},ny:function(){return f},oY:function(){return g}});var r=t(93433),o=t(204942),i=t(534733),u=t(351910),a=t(307179),s=t(528058);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(e){var n=null==e?void 0:e.type;return null==n?void 0:n.toUpperCase()},m=function(e){return e.type===s.BX.USER||e.type===s.BX.STAGING_USER},p=function(e){return e.type===s.BX.STAGING_USER},f=function(e){var n=[i.$A.ADMIN,i.$A.POWER];return m(e)&&(n.includes(e.role)||e.role&&e.role.includes(i.$A.ADMIN))},v=function(e){return e.type===s.BX.GROUP},O=function(e){return"isRequester"in e&&e.isRequester},b=function(e){return!(v(e)&&void 0===e.id)},E=function(e){var n=v(e),t=p(e),o=m(e)||t,i=l(l({id:e.id,permission:e.permission,local:!t},o&&{username:e.username}),n&&{name:e.name});return{users:(0,r.Z)(o?[i]:[]),groups:(0,r.Z)(n?[i]:[])}},g=function(e){return m(e)?(0,a.Gf)(e):e.name},P=function(e){return e.email||(null==e?void 0:e.displayEmail)||e.unverifiedEmail||""},y=function(e){var n=(e.endsWith("/")?e.slice(0,-1):e).split("/");return 3===n.length&&n[1]===u.W_.slice(1)}},495032:function(e,n,t){t.d(n,{J:function(){return p},n:function(){return m}});var r=t(762074),o=t(943886),i=t(534733),u=t(77259),a=t(528058),s=t(99815),c=[a.ZZ,a.Au],l=function(e){return!((0,s.kO)(e)&&!(0,s.ny)(e)||(0,s.S_)(e)&&c.includes(null==e?void 0:e.name))},d=function(e){return e.typeName===i.$A.ADMIN||e.typeName===i.$A.POWER},m={OWNER:{value:u._I.OWNER,label:(0,r.t)("storage.folderPermissions.label.Owner"),description:(0,r.t)("storage.folderPermissions.subLabel.Owner")},FULL:{value:u._I.FULL,label:(0,r.t)("storage.folderPermissions.label.Full"),description:(0,r.t)("storage.folderPermissions.subLabel.Full")},EDITOR:{value:u._I.EDITOR,label:(0,r.t)("storage.folderPermissions.label.Editor"),description:(0,r.t)("storage.folderPermissions.subLabel.Editor")},VIEWER:{value:u._I.VIEWER,label:(0,r.t)("storage.folderPermissions.label.Viewer"),description:(0,r.t)("storage.folderPermissions.subLabel.Viewer")},VIEWER_ONLY:{value:u._I.VIEWER_ONLY,label:(0,r.t)("storage.folderPermissions.label.ViewerOnly"),description:(0,r.t)("storage.folderPermissions.subLabel.ViewerOnly")}},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=(0,o.Jo)().features.viewerOnlyPrivEnabled,r=(0,s.$0)(e)?d(e):l(e);return[r&&m.OWNER,!n&&m.FULL,!n&&m.EDITOR,m.VIEWER,t&&m.VIEWER_ONLY].filter(Boolean)}},224912:function(e,n,t){t.d(n,{x:function(){return u}});var r=t(153672),o=t(667294),i=t(296924),u=function(){var e=(0,r.ZP)().data,n=(0,o.useMemo)((function(){return(0,i.D1)(e)}),[e]),t=(0,o.useMemo)((function(){return(0,i.r8)(e)}),[e]),u=(0,o.useMemo)((function(){return(0,i.v5)(e)}),[e]);return{canInviteStandardUsers:n,canManagePowerUsers:t,canInviteNewUsers:n||t||u}}},610253:function(e,n){n.Z={option:"MJzvKMGinGczWK3vnVWZ",label:"BtmbcimMxcNGwrDUhzuX vlpHvsjgdbzjuadKPQ3e C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6",description:"QeyOtqKsUjUk1CYkJswd Z3MFLDOuhAfuf_m3JCZI qqGfbuN2RooWpKmkockU cMD1Ln5gNqHc7P7v_G_6",removeButton:"WhP38rbDXqKx91vlPNxr"}},965965:function(e,n){n.Z={tokenfield:"zT9cD5ukhSVhn5hA4av9",actionRow:"urQ93XmWB1PblsXkXG1e",prompt:"nf5Wq7vdyNwaf84z_Hhg",inviteRow:"zJb3ZEw9f1C4vepfWCCU",highlighted:"ptXV1axre0YQpFS6kUII L1NPGp0OArr9AgHvsxTA C7HhvVmv8inrSQjb607z eugzcnL4uVMlgbRkfTqa"}}}]);