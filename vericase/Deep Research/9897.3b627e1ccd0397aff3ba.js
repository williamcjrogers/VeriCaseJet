"use strict";(self.webpackChunkEgnyte_CommonUI=self.webpackChunkEgnyte_CommonUI||[]).push([[9897],{498568:function(e,t,n){n.d(t,{E:function(){return m}});var r=n(93433),o=function(e){return"".concat("document-portal","/").concat(e)},a=o("workspaces"),i=o("settings"),c=o("workspaces/templates"),l=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return[e].concat(n)}},s=l(a),u=l(c),m={workspaces:{LISTING:function(){return s("listing")},DETAILS:function(e){var t=e.workspaceId;return s(t,"details")},tasks:{TASK_LIST:function(e){var t=e.workspaceId,n=e.taskStatus,o=e.assigneeId,a=e.creatorId,i=e.sortBy,c=e.sortOrder;return s.apply(void 0,[t,"tasks"].concat((0,r.Z)([o?["assignee",o]:[],a?["creator",a]:[],n?["taskStatus",n]:[],i?["sortBy",i]:[],c?["sortOrder",c]:[]].flat())))},PENDING_TASK_LIST:function(e){var t=e.workspaceId;return s(t,"pendingTasks")}},taskGroups:{TASK_LIST:function(e){var t=e.workspaceId;return s(t,"taskGroups")}},FSI:function(e,t){return s(e,"fsi",t)},templates:{ITEM:function(e){var t=e.folderId;return u(t)},LISTING:function(){return u("listing")}}},settings:{DETAILS:i}}},916018:function(e,t,n){n.d(t,{tQ:function(){return I},pj:function(){return T},bb:function(){return g}});var r=n(204942),o=n(145987),a=n(221842),i=n.n(a),c=n(388767),l=n(145218),s=n(460474),u=n(498568),m=n(23661),d=n(240701);function p(){return(0,m.ZP)(d.Z.CLIENT_PORTAL.SETTINGS.ROOT,{method:"GET"})}function E(e){return(0,m.ZP)(d.Z.CLIENT_PORTAL.SETTINGS.WORKSPACE_TYPES,{method:m.I5.POST,body:{workspaceType:e}})}function f(e){return(0,m.ZP)(d.Z.CLIENT_PORTAL.SETTINGS.WORKSPACE_TYPES,{method:m.I5.DELETE,body:{workspaceType:e}})}var O=["enabled"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,r=(0,o.Z)(e,O),a=(0,s.Z)("isClientPortalEnabled"),i=a&&n;return(0,l.useQuery)(v({queryKey:u.E.settings.DETAILS,queryFn:p,enabled:i},r))}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(v({mutationFn:E},i()({onSuccess:function(){return t.invalidateQueries(u.E.settings.DETAILS)}},e)))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(v({mutationFn:f},i()({onSuccess:function(){return t.invalidateQueries(u.E.settings.DETAILS)}},e)))}},74686:function(e,t,n){n.d(t,{AU:function(){return s},RU:function(){return p},SS:function(){return l},_J:function(){return E},iM:function(){return m},jb:function(){return u},r9:function(){return d}});var r=n(204942),o=n(45697),a=n.n(o);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={WORKFLOW:{type:"WORKFLOW",statuses:{IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED",CANCELED:"CANCELED"},task:{types:{TODO:"TODO",REVIEW:"REVIEW",APPROVAL:"APPROVAL",WEBHOOK:"WEBHOOK",MOVE_FILE:"MOVE_FILE",SET_METADATA:"SET_METADATA",AI_PROMPT:"AI_PROMPT",CONVERT_FILE:"CONVERT_FILE"},statuses:{IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED",REJECTED:"REJECTED",CANCELED:"CANCELED",APPROVED:"APPROVED",FAILED:"FAILED"}}},E_SIGNATURE:{type:"E_SIGNATURE",statuses:{COMPLETED:"COMPLETED",IN_PROGRESS:"IN_PROGRESS",FAILED:"FAILED",CANCELED:"CANCELED"},task:{types:{E_SIGNATURE:"E_SIGNATURE"},statuses:{COMPLETED:"COMPLETED",IN_PROGRESS:"IN_PROGRESS",CANCELED:"CANCELED"}}},UPLOAD_REQUEST:{type:"UPLOAD_REQUEST",statuses:{IN_PROGRESS:"IN_PROGRESS",CANCELED:"CANCELED",COMPLETED:"COMPLETED"},task:{types:{PENDING_REVIEW:"PENDING_REVIEW",PENDING_UPLOAD:"PENDING_UPLOAD"},statuses:{IN_PROGRESS:"IN_PROGRESS",CANCELED:"CANCELED",COMPLETED:"COMPLETED"}}}},s=c(c(c({},l.WORKFLOW.statuses),l.E_SIGNATURE.statuses),l.UPLOAD_REQUEST.statuses),u=c(c(c({},l.WORKFLOW.task.statuses),l.E_SIGNATURE.task.statuses),l.UPLOAD_REQUEST.task.statuses),m={WORKFLOW:l.WORKFLOW.type,E_SIGNATURE:l.E_SIGNATURE.type,UPLOAD_REQUEST:l.UPLOAD_REQUEST.type},d={TODO:l.WORKFLOW.task.types.TODO,APPROVAL:l.WORKFLOW.task.types.APPROVAL,REVIEW:l.WORKFLOW.task.types.REVIEW,WEBHOOK:l.WORKFLOW.task.types.WEBHOOK,MOVE_FILE:l.WORKFLOW.task.types.MOVE_FILE,SET_METADATA:l.WORKFLOW.task.types.SET_METADATA,AI_PROMPT:l.WORKFLOW.task.types.AI_PROMPT,CONVERT_FILE:l.WORKFLOW.task.types.CONVERT_FILE,E_SIGNATURE:l.E_SIGNATURE.task.types.E_SIGNATURE,PENDING_UPLOAD:l.UPLOAD_REQUEST.task.types.PENDING_UPLOAD,PENDING_REVIEW:l.UPLOAD_REQUEST.task.types.PENDING_REVIEW},p={FILE:"FILE",DIRECTORY:"DIRECTORY"},E=(a().string.isRequired,a().string.isRequired,a().oneOf(Object.values(c(c(c({},l.WORKFLOW.task.types),l.E_SIGNATURE.task.types),l.UPLOAD_REQUEST.task.types))),a().oneOf(Object.values(m)),a().string,a().shape({id:a().string.isRequired,groupId:a().string.isRequired,name:a().string.isRequired,path:a().string.isRequired,type:a().oneOf([p.FILE,p.DIRECTORY])}).isRequired,a().string,a().string,a().string.isRequired,a().string.isRequired,a().shape({id:a().oneOfType([a().number,a().string]),email:a().string,firstName:a().string,lastName:a().string,status:a().string,username:a().string}).isRequired,a().oneOf(Object.values(u)).isRequired,a().oneOf(Object.values(s)).isRequired,a().string.isRequired,a().string.isRequired,{ASC:"ASC",DESC:"DESC"})},559747:function(e,t,n){n.d(t,{sX:function(){return A},qv:function(){return M},o9:function(){return h}});var r=n(145987),o=n(204942),a=n(667294),i=n(388767),c=n(221842),l=n.n(c),s=n(460474),u=n(153672),m=n(296924),d=n(943886),p=n(776327),E=n(787781),f=n(57324),O=n(351910),b=n(190544),v=n(23661),I=n(240701);function T(){return(0,v.ZP)(I.Z.CLIENT_PORTAL.WORKSPACES.TEMPLATES.CONFIG,{method:v.I5.PATCH,body:{initialized:!0}})}function g(e,t){return(0,v.ZP)(I.Z.CLIENT_PORTAL.WORKSPACES.TEMPLATES.ITEM({rootFolderId:e}),{method:v.I5.PUT,body:t})}function P(){return(0,v.ZP)(I.Z.CLIENT_PORTAL.WORKSPACES.TEMPLATES.ROOT)}function N(e){return(0,v.ZP)(I.Z.CLIENT_PORTAL.WORKSPACES.TEMPLATES.ITEM({rootFolderId:e}))}var Z=n(498568),y=["enabled"],S=["enabled"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(){var e=(0,i.useQueryClient)(),t=(0,s.Z)("workspaceTemplatesInitialized"),n=(0,s.Z)("isClientPortalEnabled"),r=(0,i.useMutation)({mutationFn:T}),o=r.mutate,c=r.data,l=(0,u.ZP)().data,b=(0,m.GJ)(l),v=n&&(t||(null==c?void 0:c.initialized));(0,a.useEffect)((function(){(0,d.T0)("clientPortalTemplates")||!b||!n||t||null!=c&&c.initialized||o()}),[b,o,n,t,null==c?void 0:c.initialized]),(0,a.useEffect)((function(){if(!v)return function(){};function t(t){t===O.yt&&e.invalidateQueries(Z.E.workspaces.templates.LISTING())}function n(e){t((0,f.p5)(e))}function r(e){var n=e.get("type");if("upload"===n&&t(e.get("path")),["copy","move","folder"].includes(n)){var r=e.destination.get("path"),o=e.processedItems.pluck("path").find((function(e){return E.ZP.getParentPath(e)===O.yt}));r===O.yt?t(r):o&&t(E.ZP.getParentPath(o)),p.ZP.trigger(p.ZP.Events.Storage.FOLDER.REFRESH)}}var o=[p.ZP.Events.Storage.FOLDER.ADD,p.ZP.Events.Storage.FOLDER.REMOVE,p.ZP.Events.Storage.FOLDER.RENAME];return o.forEach((function(e){return p.ZP.on(e,n)})),p.ZP.on(p.ZP.Events.Operation.COMPLETE,r),function(){o.forEach((function(e){return p.ZP.off(e,n)})),p.ZP.off(p.ZP.Events.Operation.COMPLETE,r)}}),[e,v])}function A(e){var t=e.folderId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,i.useQueryClient)();return(0,i.useMutation)(R({mutationFn:function(e){return g(t,e)}},l()({onSuccess:function(){r.invalidateQueries(Z.E.workspaces.templates.ITEM({folderId:t}))}},n)))}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,o=(0,r.Z)(e,y);C();var a=(0,s.Z)("isClientPortalEnabled"),c=(0,u.ZP)(),l=c.data,p=(0,m.Kg)(l),E=!(0,d.T0)("clientPortalTemplates")&&a&&n&&!p;return(0,i.useQuery)(R({queryKey:Z.E.workspaces.templates.LISTING(),queryFn:P,staleTime:b.iL,enabled:E},o))}function M(e){var t=e.folderId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.enabled,a=void 0===o||o,c=(0,r.Z)(n,S);C();var l=(0,s.Z)("isClientPortalEnabled"),p=(0,u.ZP)(),E=p.data,f=(0,m.Kg)(E),O=!(0,d.T0)("clientPortalTemplates")&&!!t&&l&&a&&!f;return(0,i.useQuery)(R({queryKey:Z.E.workspaces.templates.ITEM({folderId:t}),queryFn:function(){return N(t)},enabled:O},c))}},509969:function(e,t,n){n.d(t,{P:function(){return S},BK:function(){return R},j3:function(){return D},gY:function(){return C},ww:function(){return y},Hj:function(){return Z}});var r=n(204942),o=n(145987),a=n(221842),i=n.n(a),c=n(388767),l=n(145218),s=n(498568),u=n(460474),m=n(23661),d=n(240701);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t){return(0,m.ZP)(d.Z.CLIENT_PORTAL.WORKSPACES.WORKSPACE({workspaceId:e}),{method:"PUT",body:t})}function f(e){return(0,m.ZP)(d.Z.CLIENT_PORTAL.WORKSPACES.ROOT,{method:"POST",body:e})}function O(){return(0,m.ZP)(d.Z.CLIENT_PORTAL.WORKSPACES.ROOT,{method:"GET"})}function b(e){return(0,m.ZP)(d.Z.CLIENT_PORTAL.WORKSPACES.WORKSPACE({workspaceId:e}),{method:"GET"})}function v(e){var t=e.workspaceId,n=e.queryParams;return(0,m.ZP)(d.Z.CLIENT_PORTAL.WORKSPACES.DELETE_WORKSPACE(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({workspaceId:t},n)),{method:"DELETE"})}var I=n(760204),T=["enabled"],g=["enabled"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,r=(0,o.Z)(e,T),a=(0,u.Z)("isClientPortalEnabled"),i=a&&n;return(0,l.useQuery)(N({queryKey:s.E.workspaces.LISTING(),queryFn:O,enabled:i},r))}function y(e){var t=e.workspaceId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enabled,a=void 0===r||r,i=(0,o.Z)(n,g),c=(0,u.Z)("isClientPortalEnabled"),m=!!t&&c&&a;return(0,l.useQuery)(N({queryKey:s.E.workspaces.DETAILS({workspaceId:t}),queryFn:function(){return b(t)},enabled:m},i))}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(N({mutationFn:f},i()({onSuccess:function(){return t.invalidateQueries(s.E.workspaces.LISTING())}},e)))}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.useQueryClient)();return(0,c.useMutation)(N(N({},t),{},{mutationFn:function(t){return E(e,t)},onSuccess:function(){var r;n.invalidateQueries(s.E.workspaces.LISTING()),n.invalidateQueries(s.E.workspaces.DETAILS({workspaceId:e}));for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];null===(r=t.onSuccess)||void 0===r||r.call.apply(r,[t].concat(a))}}))}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.useQueryClient)();return(0,c.useMutation)(N(N({},t),{},{mutationFn:function(t){return v({workspaceId:e,queryParams:t})},onSuccess:function(){var e;n.invalidateQueries(s.E.workspaces.LISTING());for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];null===(e=t.onSuccess)||void 0===e||e.call.apply(e,[t].concat(o))}}))}var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.useQuery)(N({queryKey:s.E.workspaces.FSI(e.workspaceId,e.path),queryFn:function(){return(0,I.Lx)(e.workspaceId,e.path)}},t))}},761730:function(e,t,n){n.d(t,{Gj:function(){return a},oT:function(){return c}});var r=n(45697),o=n.n(r),a={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},i=o().oneOf(Object.values(a)),c={NAME:"name",CREATOR:"creator",TASKS_COUNT:"tasksCount",STATUS:"status",TYPE:"type"};o().shape({id:o().string.isRequired,name:o().string.isRequired,description:o().string,type:o().string.isRequired,folderId:o().string.isRequired,parentFolderId:o().string.isRequired,status:i.isRequired,templateFolderId:o().string,creator:o().shape({firstName:o().string,lastName:o().string}),tasksCount:o().number.isRequired})},240801:function(e,t,n){n.d(t,{queryKeys:function(){return C},useProjectTemplate:function(){return h},useProjectTemplateMutation:function(){return k},useProjectTemplates:function(){return M}});var r=n(204942),o=n(667294),a=n(145218),i=n(57324),c=n(174816),l=n(722332),s=n(42594),u=n(460474),m=n(787781),d=n(776327),p=n(153672),E=n(296924),f=n(691409),O=n(351910),b=n(190544),v=n(221842),I=n.n(v),T=n(641822),g=n(23661),P=n(240701).Z.PROJECT_TEMPLATES,N=function(){return(0,g.ZP)(P.INITIALIZATION,{method:"PATCH",body:{initialized:!0}})},Z=function(e){return(0,g.ZP)(P.TEMPLATE(e))},y=function(e){return function(t){return(0,g.ZP)(P.TEMPLATE_UPDATE(e),{method:"PUT",body:t})}};function S(){return(0,g.ZP)(P.TEMPLATES).then((function(e){return e.projectTemplates}))}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={TEMPLATE:"projectTemplates/template",TEMPLATES:"projectTemplates/templates",VALIDATION:"projectTemplates/validation"};function A(){var e=(0,a.useQueryClient)(),t=(0,u.Z)("projectFoldersTemplatesEnabled"),n=(0,u.Z)("projectTemplatesInitialized"),r=(0,a.useMutation)({mutationFn:N}),s=r.mutate,b=r.data,v=void 0===b?{}:b,I=(0,p.ZP)().data,T=(0,E.GJ)(I),g=(0,f.eC)(I),P=t&&!g,Z=P&&(n||v.initialized);(0,o.useEffect)((function(){T&&P&&!n&&!v.initialized&&s()}),[T,P,n,v.initialized,s]),(0,o.useEffect)((function(){if(Z){var t=[d.ZP.Events.Storage.FOLDER.ADD,d.ZP.Events.Storage.FOLDER.REMOVE,d.ZP.Events.Storage.FOLDER.RENAME];return t.forEach((function(e){return d.ZP.on(e,r)})),d.ZP.on(d.ZP.Events.Operation.COMPLETE,o),function(){t.forEach((function(e){return d.ZP.off(e,r)})),d.ZP.off(d.ZP.Events.Operation.COMPLETE,o)}}function n(t){t===O.ng&&(e.invalidateQueries([C.TEMPLATE]),e.invalidateQueries([C.TEMPLATES]))}function r(e){n((0,i.p5)(e))}function o(e){var t=e.get("type");if("upload"===t&&n(e.get("path")),[c.Z.OperationItem.COPY,c.Z.OperationItem.MOVE,l.Z.FOLDER].includes(t)){var r=e.destination.get("path"),o=e.processedItems.pluck("path").find((function(e){return m.ZP.getParentPath(e)===O.ng}));r===O.ng?n(r):o&&n(m.ZP.getParentPath(o))}}}),[e,Z])}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A();var n=(0,u.Z)("projectFoldersTemplatesEnabled");return(0,a.useQuery)(R({queryKey:[C.TEMPLATE,e],queryFn:function(){return Z(e)},enabled:n},t))}var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A();var t=(0,u.Z)("projectFoldersTemplatesEnabled");return(0,a.useQuery)(R({queryKey:C.TEMPLATES,queryFn:S,staleTime:b.iL,enabled:t&&!(0,s.bE)()&&!(0,T.jl)()},e))};function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,a.useQueryClient)();return(0,a.useMutation)(R({mutationFn:y(e)},I()({onSuccess:function(){n.invalidateQueries([C.TEMPLATE,e]),n.invalidateQueries([C.TEMPLATES])}},t)))}},136030:function(e,t,n){n.d(t,{uG:function(){return U},db:function(){return z},as:function(){return V},oK:function(){return x},a4:function(){return Y},sD:function(){return H},K2:function(){return B},JW:function(){return G},dc:function(){return F},T2:function(){return W},d5:function(){return Q},ig:function(){return X},PB:function(){return K}});var r=n(115861),o=n(204942),a=n(93433),i=n(364687),c=n.n(i),l=n(145218),s=n(221842),u=n.n(s),m=n(183685),d=n(23947),p=n(145987),E=n(23661),f=n(240701),O=n(401096),b=["id"],v=["id"],I=["roleId"],T=["roleId"];function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,E.ZP)(f.Z.ROLES.LIST(e))}function P(e){return(0,E.ZP)(f.Z.ROLES.LIST_V2(e))}function N(e){return(0,E.ZP)(f.Z.ROLES.LIST_V2(),{method:"POST",body:e})}function Z(e){return(0,E.ZP)(f.Z.ROLES.ROLE_V2({roleId:e}))}function y(e){var t=e.id,n=(0,p.Z)(e,b);return(0,E.ZP)(f.Z.ROLES.ROLE_V2({roleId:t}),{method:"PATCH",body:n})}function S(e){return(0,E.ZP)(f.Z.ROLES.ROLE_V2({roleId:e}),{method:"DELETE"})}function D(e){return(0,E.ZP)(f.Z.ROLES.PROTECT_LIST(e))}function R(e){var t=e.id,n=(0,p.Z)(e,v);return(0,E.ZP)(f.Z.ROLES.PROTECT_ROLE({roleId:t}),{method:"PATCH",body:n})}function C(e){return(0,E.ZP)(f.Z.ROLES.PROTECT_ROLE({roleId:e}))}var A=function(e){var t=e.roleId,n=(0,p.Z)(e,I);return(0,E.ZP)(f.Z.SETTINGS.CONFIGURATION.USER_ROLES.USERS_WITH_PROTECT_ROLE(t,n))},h=function(e){var t=e.roleId,n=(0,p.Z)(e,T);return(0,E.ZP)(f.Z.SETTINGS.CONFIGURATION.USER_ROLES.USERS_WITH_CONNECT_ROLE(t,n))},M=function(e){var t=e.roleId,n=e.payload;return(0,E.ZP)(f.Z.SETTINGS.CONFIGURATION.USER_ROLES.USERS_WITH_CONNECT_ROLE(t),{method:"PATCH",body:n})},k=function(e){var t=e.roleId,n=e.payload;return(0,E.ZP)(f.Z.SETTINGS.CONFIGURATION.USER_ROLES.USERS_WITH_PROTECT_ROLE(t),{method:"PATCH",body:n})},L=n(933705);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={collaborateRolesV1:["collaborateRolesV1"],collaborateRolesV2:function(){return["collaborateRolesV2"]},collaborateRolesList:function(e){return[].concat((0,a.Z)(_.collaborateRolesV2()),[e])},collaborateRole:function(e){return["collaborateRole",e]},protectRoles:function(){return["protectRoles"]},protectRolesList:function(e){return[].concat((0,a.Z)(_.protectRoles()),[e])},protectRole:function(e){return["protectRole",e]},usersWithConnectRole:function(e){return[].concat((0,a.Z)(_.collaborateRolesV2()),["users",e])},usersWithProtectRole:function(e){return[].concat((0,a.Z)(_.protectRoles()),["users",e])}};function F(e){return(0,l.useQuery)(w({queryKey:_.collaborateRolesV1,queryFn:(t=(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,n=t.results,e.abrupt("return",n.map((function(e){return{label:e.name,value:e.id}})));case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},e));var t}function U(e){return(0,l.useMutation)(w({mutationFn:function(e){return function(e){var t=e.roleId,n=e.userIds;return(0,E.ZP)(f.Z.ROLES.ADD_USERS({roleId:t}),{method:"POST",body:{resources:n.map((function(e){return{id:e}}))}},{getDataCallback:O.Z})}({roleId:e.selectedRole,userIds:e.selectedUsers.map((function(e){return e.id}))})}},u()({onSuccess:function(){(0,L.YA)()}},e)))}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.useQuery)(w({queryKey:_.collaborateRolesList(e),queryFn:function(){return P(e)}},t))}function x(){return(0,l.useMutation)({mutationFn:N})}function W(){var e=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:y,onSuccess:function(t,n){var r=n.id;e.invalidateQueries(_.collaborateRole(r)),e.invalidateQueries(_.collaborateRolesV2())}})}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.useQuery)(w({queryKey:_.collaborateRole(e),queryFn:function(){return Z(e)}},t))}function G(){return(0,l.useMutation)({mutationFn:S})}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.useQuery)(w({queryKey:_.protectRolesList(e),queryFn:function(){return D(e)}},t))}function Y(){return(0,l.useMutation)({mutationFn:function(e){return function(e){return(0,E.ZP)(f.Z.ROLES.PROTECT_LIST(),{method:"POST",body:e})}(e)}})}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.useQuery)(w({queryKey:_.protectRole(e),queryFn:function(){return C(e)}},t))}function Q(){var e=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:R,onSuccess:function(t,n){var r=n.id;e.invalidateQueries(_.protectRoles()),e.invalidateQueries(_.protectRole(r))}})}function K(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(t={},(0,o.Z)(t,d.b.CONNECT,h),(0,o.Z)(t,d.b.PROTECT,A),t),c=(n={},(0,o.Z)(n,d.b.CONNECT,_.usersWithConnectRole(r)),(0,o.Z)(n,d.b.PROTECT,_.usersWithProtectRole(r)),n),l=i[e];return(0,m.Z)(c[e],(function(e){var t=e.pagination,n=t.offset,o=t.limit,a=t.sortBy,i=t.sortDirection;return l(w(w({},r),{},{offset:n,limit:o,sortBy:a,sortDirection:i}))}),{paginationOptions:{defaultState:{pagination:a},getTotalCount:function(e){return e.count}}})}function X(e){var t,n,r=(0,l.useQueryClient)(),a=(t={},(0,o.Z)(t,d.b.CONNECT,M),(0,o.Z)(t,d.b.PROTECT,k),t),i=(n={},(0,o.Z)(n,d.b.CONNECT,_.usersWithConnectRole),(0,o.Z)(n,d.b.PROTECT,_.usersWithProtectRole),n),c=a[e];return(0,l.useMutation)({mutationFn:c,onSuccess:function(t,n){var o=n.id;r.invalidateQueries(i[e]({roleId:o}))}})}},23947:function(e,t,n){n.d(t,{b:function(){return o},v:function(){return r}});var r={ADMIN:"ADMIN",DATA_OWNER:"DATA_OWNER",BASIC_VIEWER:"BASIC_VIEWER",POWER_USER:"POWER_USER",BASIC_USER:"BASIC_USER"},o={CONNECT:"CONNECT",PROTECT:"PROTECT"}},632417:function(e,t,n){n.d(t,{I:function(){return O},m:function(){return f}});var r=n(204942),o=n(145218),a=n(190544),i=n(115861),c=n(364687),l=n.n(c),s=n(23661),u=n(240701),m=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.ZP)(u.Z.SETTINGS.USER_TYPES.GET));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(e){return(0,s.ZP)(u.Z.SETTINGS.USER_TYPES.SET,{method:"POST",body:e})};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return(0,o.useQuery)(E({queryKey:["settings/types"],queryFn:m,staleTime:5*a.A_},e))}function O(e){return(0,o.useMutation)(E({mutationFn:d},e))}},438044:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(487462),o=n(529439),a=n(145987),i=n(667294),c=n(403455),l=n(762074),s=n(289098),u=n(294184),m=n.n(u),d=["name","disabled"];function p(e){var t=e.name,n=e.disabled,u=(0,a.Z)(e,d),p=(0,c.U$)(t),E=(0,o.Z)(p,1)[0].value;return i.createElement(s.Switch,(0,r.default)({name:t,disabled:n,suffix:i.createElement("span",{className:m()("DYdrpWITzCrpvXP9Omc8",n&&"XWCTt9TuX_VZKJ_wcm7g")},E?(0,l.t)("checkbox.enabled"):(0,l.t)("checkbox.disabled"))},u))}},162178:function(e,t,n){n.d(t,{G:function(){return r},U:function(){return o}});var r={GENERAL:"General",PERMISSIONS:"Template Permissions"},o={PROJECT:"projectTemplate",DOCUMENT_ROOM:"documentRoomTemplate"}},777324:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(204942),o=n(318450),a=n(221842),i=n.n(a),c=n(667294),l=n(240801),s=n(27056),u=n(23661),m=n(240701);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=n(460474),f=n(397404),O=n(762074),b=n(154177),v=n(610861),I=n(578744),T=(0,f.Sh)({showExclusively:!0}).showNotification;function g(e){var t,n=e.updateTemplate,r=e.resetTemplateUpdate,a=e.templateId,d=(t=e.resourceName,(0,O.nD)("components.templateSettingsForm.".concat(t))),f=(0,E.Z)("folderTemplatesPermissionsWizard"),g=function(e){var t=e.templateId,n=e.options,r=void 0===n?{}:n,a=function(e){var t=e.templateId,n=(0,o.useQueryClient)();return(0,c.useCallback)((function(){n.invalidateQueries([l.queryKeys.TEMPLATE,t]),n.invalidateQueries([l.queryKeys.TEMPLATES]),n.invalidateQueries(s.VF.template(t))}),[n,t])}({templateId:t});return(0,o.useMutation)(p({mutationFn:function(e){return function(e){var t=e.templateId,n=e.payload;return(0,u.ZP)(m.Z.TEMPLATES.PERMISSIONS_WIZARD.TEMPLATE_DESCRIPTION(t),{method:u.I5.PUT,body:n})}({templateId:t,payload:e})}},i()(p({},r),{onSuccess:function(){a()}})))}({templateId:a}),P=g.mutate,N=g.reset,Z=f?N:r,y=(0,c.useCallback)((function(e){var t=e.error,n=e.setErrors,r=(0,I.C)(t);r?n(r):T("error",(0,b.e$)(t))}),[]);return{onSubmit:(0,c.useCallback)((function(e,t){var r=e.description,o=e.permissionsTemplate,a=t.setSubmitting,i=t.setErrors,c={onSuccess:function(){Z(),T("success",d("notifications.templateSettings.success")),(0,v.Mr)()},onError:function(e){return y({error:e,setErrors:i})},onSettled:function(){a(!1)}};f?P({description:r.trim()},c):n({description:r.trim(),permissionsTemplate:o.trim()?JSON.parse(o):null},c)}),[f,y,Z,d,n,P])}}},578744:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(529439),o=n(154177),a=/^\$\.folders\[(\d+)\]\.([^ ]+):/,i=/\$\.([^ ]+):/,c=function(e){if((0,o.k0)(e)){var t=(0,o.lt)(e);if(null!=t&&t.permissionsTemplate){var n=t.permissionsTemplate,c=n.match(a);if(c){var l=(0,r.Z)(c,3),s=l[0],u=l[1],m=l[2];n=n.replace(s,'Property "'.concat(m,'" in folder number ').concat(Number(u)+1))}else{var d=n.match(i);if(d){var p=(0,r.Z)(d,2),E=p[0],f=p[1];n=n.replace(E,'Property "'.concat(f,'"'))}}t.permissionsTemplate=n}return t}}},898052:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(735691),o=n(343697),a=(0,n(762074).nD)("components.templateSettingsForm"),i=function(){return r.Ry().shape({description:r.Z_().trim().max(200),permissionsTemplate:r.Z_().trim().ensure().test("permissionsTemplate",a("jsonValidationError"),(function(e){return""===e||(0,o.tp)(e)}))})}},122776:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(153672),o=n(667294),a=n(296924),i=n(13764);function c(e){var t=(0,r.ZP)().data;return(0,o.useMemo)((function(){return(0,a.GJ)(t)||(0,i.mF)(e)}),[t,e])}},524334:function(e,t,n){n.d(t,{Z:function(){return fn}});var r=n(529439),o=n(667294),a=n(155570),i=n(339594),c=n(403455),l=n(162178),s=n(762074),u=n(569748),m=n(936),d=n(87796),p=n(987407);function E(e){var t=e.resourceName,n=e.tabsKey,r=e.selectedTabKey,a=e.disabled,i=function(e){return(0,s.nD)("components.templateSettingsForm.".concat(e,".generalTab"))}(t);return o.createElement(p.Z,{key:l.G.GENERAL,tabsKey:n,tabKey:l.G.GENERAL,selectedTabKey:r},o.createElement(u.$0,{subtitle:i("subtitle")},o.createElement(m.Z,{name:"templateName","aria-label":i("templateName.title"),label:i("templateName.title"),readonly:!0}),o.createElement(d.Z,{"aria-label":"description",name:"description",label:i("templateDescription.title"),placeholder:i("templateDescription.placeholder"),rows:3,maxLength:200,readonly:a})))}var f=n(460474),O=n(610861),b=n(141797),v=n(579621),I=n(722610),T=n(145987),g=n(204942),P=function(e){return e.substring(0,e.lastIndexOf("/"))},N=function(e){return e.substring(e.lastIndexOf("/"),e.length)},Z=["setContextState"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=(0,o.createContext)(void 0);function R(e){var t=e.children,n=e.templateId,a=e.templatePath,i=e.resourceName,c=e.templateName,l=(0,o.useState)({selectedPath:N(a),selectedFolderId:n}),s=(0,r.Z)(l,2),u=s[0],m=s[1],d=(0,o.useMemo)((function(){return S(S({templateId:n,templatePath:a,resourceName:i,templateName:c},u),{},{setContextState:m})}),[u,i,n,a,c]);return o.createElement(D.Provider,{value:d},t)}function C(){var e=(0,o.useContext)(D);if(!e)throw new Error("useTemplatePermissionsContext must be used within a TemplatePermissionsProvider");return e}function A(){var e=C();return e.setContextState,(0,T.Z)(e,Z)}function h(){var e=C(),t=e.setContextState,n=e.selectedFolderId,r=e.selectedPath,a=(0,o.useCallback)((function(e){t((function(t){return S(S({},t),{},{selectedPath:e})}))}),[t]);return{setSelectedPath:a,setSelectedFolderId:(0,o.useCallback)((function(e){t((function(t){return S(S({},t),{},{selectedFolderId:e})}))}),[t]),selectedFolderId:n,selectedPath:r}}var M=n(319783),k=(0,s.nD)("templatePermissions.header");function L(){var e=A(),t=e.templatePath,n=e.resourceName;return o.createElement(b.Z.Header,null,o.createElement(b.Z.Title,null,o.createElement("div",{className:"lxEoixrqYLtLbzzq0Odz"},o.createElement("div",{className:"a2Pvpf1oh5PbeuhVMEUA"},o.createElement("p",{className:"JpMRtNk9TsU0_13Inqd_ DjBes9t5ENd6DFQP1lbE vSadc0pqvD7KtbqURZCR"},k("".concat(n,".title"),{name:(0,M.dX)(t,{appendSlash:!1})})),o.createElement("p",{className:"QygnY7EyAtTZez00VtIo Z3MFLDOuhAfuf_m3JCZI qqGfbuN2RooWpKmkockU cMD1Ln5gNqHc7P7v_G_6"},k("".concat(n,".subtitle")))),o.createElement(v.Z,{type:v.Z.TERTIARY,onClick:O.Mr,"aria-label":"close"},o.createElement(v.Z.Icon,{icon:I.xv})))))}var j=n(956688),w=n(252534),_=n(683680),F=n(190544),U="project-templates",V="document-room-templates",x="user",W="group",z="inheritance",G="added",B="changed",Y=5*F.NO,H=n(762144),Q=n(255725),K=n(986456),X=n.n(K),q=n(57324),J=n(23661);function $(){var e=A(),t=e.templatePath,n=e.templateId,r=h(),a=r.selectedPath,i=r.setSelectedPath,c=r.setSelectedFolderId,l=(0,o.useRef)(null),s=(0,o.useMemo)((function(){return function(e){var t=e.relativeTo,n=e.pathPrefix;function r(e){X().extend(this,e)}return X().extend(r,{CONTENT_TYPE_ITEM_SIMPLE_QUERY:"application/vnd.egnyte.fsi.item.simple.query+json",CONTENT_TYPE_ITEM_QUERY:"application/vnd.egnyte.fsi.item.query+json",CONTENT_TYPE_ITEM_CREATE:"application/vnd.egnyte.fsi.item.create+json",CONTENT_TYPE_ITEM_UPDATE:"application/vnd.egnyte.fsi.item.update+json"}),r.prototype={read:function(e,o,a){return a.type=J.I5.POST,a.data=a.data||{},a.contentType=r.CONTENT_TYPE_ITEM_SIMPLE_QUERY,a.data.additionalFields=(0,q.Sd)(),this._self&&X().defaults(a.data,this._self.data),X().defaults(a.data,{_method:J.I5.GET,path:"".concat(n).concat(o.get("path")),relativeTo:t})}},r}({relativeTo:n,pathPrefix:P(t)})}),[n,t]),u=(0,Q.Z)({path:N(t),id:n,customAdapter:s}),m=(0,j.Or)(_.j.TEMPLATE_PERMISSIONS),d=m.width,p=m.setWidth,E=(0,o.useCallback)((function(e){p(e)}),[p]);return o.createElement("div",{"data-tid":"template-permissions-modal--folder-tree-wrapper"},o.createElement(j._2,{className:"GQYcJZMqgVFiVoiG4D70",side:j._2.sides.LEFT,width:d,minWidth:250,maxWidth:500,onWidthChange:E,endDragOnMinWidth:!0},o.createElement(w.tn,{ref:l,"data-tippy-scroll-container":"true",className:"LoUK3UVo77hwyHUczu1g"},o.createElement(H.Z,{container:l.current,path:a,TreeControllerComponent:u,onFolderSelect:function(e){var t=e.path;return i(t)},onNewPath:function(e){var t=e.id;return c(t)},customAdapter:s}))))}var ee=(0,o.createContext)(void 0);function te(e){var t=e.children,n=(0,o.useState)({});return o.createElement(ee.Provider,{value:n},t)}function ne(){var e=(0,o.useContext)(ee);if(!e)throw new Error("usePermissionStatusesContext must be used within a PermissionStatusesProvider");return e}function re(){var e=ne();return{permissionStatuses:(0,r.Z)(e,1)[0]}}var oe=n(265860),ae=n(115861),ie=n(364687),ce=n.n(ie),le=n(812493),se=n(324176),ue=n(397404),me=n(93433),de=n(307179),pe=n(534733);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){return(null==e?void 0:e.type)===x},be=function(e){return(null==e?void 0:e.type)===W},ve=function(e){return(null==e?void 0:e.type)===z},Ie=function(e){return e.map((function(e){return fe(fe({},e),{},{type:x})}))},Te=function(e){return be(e)?e.name:(0,de.Gf)(e)},ge=function(e){var t=[pe.$A.ADMIN,pe.$A.POWER];return Oe(e)&&(t.includes(e.role)||e.role&&e.role.includes(pe.$A.ADMIN))},Pe=n(318450),Ne=n(154177),Ze=n(221842),ye=n.n(Ze),Se=n(240701);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={all:["templatePermissionsWizard/permissions"],fullPermissionsList:function(){return[].concat((0,me.Z)(Ce.all),["fullPermissionsList"])},variables:["templateVariables"]};function Ae(){var e=(0,Pe.useQueryClient)();return function(){return e.invalidateQueries((0,me.Z)(Ce.fullPermissionsList()))}}function he(e){var t=e.templateId,n=e.folderId,r=e.options,o=void 0===r?{}:r,a=Ae();return(0,Pe.useMutation)(Re({mutationFn:function(e){return function(e){var t=e.templateId,n=e.folderId,r=e.payload;return(0,J.ZP)(Se.Z.TEMPLATES.PERMISSIONS_WIZARD.FOLDER_PERMISSIONS({templateId:t,folderId:n}),{method:J.I5.PUT,body:r})}({templateId:t,folderId:n,payload:e})}},ye()(Re({},o),{onSuccess:function(){a()}})))}var Me=["data"];function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Le=function(){var e,t,n=A(),r=function(e){var t=e.templateId,n=e.folderId,r=e.options,o=void 0===r?{}:r;return(0,Pe.useQuery)(Re(Re({queryKey:[].concat((0,me.Z)(Ce.fullPermissionsList()),[t,n]),queryFn:function(){return function(e){var t=e.templateId,n=e.folderId;return(0,J.ZP)(Se.Z.TEMPLATES.PERMISSIONS_WIZARD.FOLDER_PERMISSIONS({templateId:t,folderId:n}))}({templateId:t,folderId:n})},retry:function(e,t){return(0,Ne.k0)(t)?403!==t.response.status&&(0,Pe.shouldQueryRetry)(e,t):e<=Pe.DEFAULT_RETRY_COUNT},refetchOnWindowFocus:!1},o),{},{refetchOnMount:"always"}))}({templateId:n.templateId,folderId:n.selectedFolderId}),o=r.data,a=void 0===o?{}:o,i=a.groups,c=void 0===i?[]:i,l=a.users,u=void 0===l?[]:l,m=a.inheritsPermissions,d=void 0!==m&&m,p=(0,T.Z)(r,Me);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({permissions:[].concat((0,me.Z)((t={inheritsPermissions:d},t.inheritsPermissions?[{id:"inheritedPermissions",type:z,name:(0,s.t)("templatePermissions.inheritance.label")}]:[])),(0,me.Z)((e=c,e.map((function(e){return fe(fe({},e),{},{type:W,id:e.dynamicGroup?e.name:e.id})})))),(0,me.Z)(Ie(u))),inheritsPermissions:d,groups:c,users:u},p)},je=n(266606),we=function(e){je.Z.track("Template Permissions Modal: group created",{Prefixed:e})},_e=function(){je.Z.track("Template Permissions Modal: permission changed")};function Fe(e){if((0,Ne.k0)(e)){var t=(0,Ne.lt)(e);return null==t?void 0:t.permissionsTemplate}}var Ue=n(384309);function Ve(){var e=(0,Ue.Z)().data,t=Le(),n=t.isFetching,r=t.inheritsPermissions,a=t.groups,i=t.users,l=A(),u=he({templateId:l.templateId,folderId:l.selectedFolderId}).mutateAsync,m=function(){var t=(0,ae.Z)(ce().mark((function t(n,o){var c,l,m;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.inheritsPermissions,l=o.resetForm,c!==r){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,u({inheritsPermissions:c,users:i,groups:a});case 7:(0,ue.c0)(ue.em.success,(0,s.t)("storage.folderPermissions.inheritance.notifications.success",{context:c?"added":"removed"})),p=c,je.Z.track("Template Permissions Modal: permission inheritance changed",{"Permission inheritance":p}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(4),l(),d=void 0,m=e?(0,s.t)("error.FAILOVER_WRITES_FORBIDDEN"):null!==(d=Fe(t.t0))&&void 0!==d?d:(0,s.t)("storage.folderPermissions.inheritance.notifications.error",{context:c?"add":"remove"}),(0,ue.c0)(ue.em.error,m);case 16:case"end":return t.stop()}var d,p}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}();return o.createElement("div",{className:"KhZR0T7BDcLED8BX2WJH"},n?o.createElement("div",{className:"QzivDXVx7ltEtGLJK2Hw"},o.createElement(le.Z,null)):o.createElement(c.J9,{initialValues:{inheritsPermissions:r},enableReinitialize:!0,onSubmit:m},o.createElement(c.l0,null,o.createElement(se.Z,{keepingParentPermissionsFeature:!1}))))}function xe(){var e=h(),t=e.selectedPath,n=e.setSelectedPath;return o.createElement("div",{className:"dxZdMwzGsAvpsjA63eYT"},o.createElement(oe.Z,{folderPath:t,onFolderSelect:n}),o.createElement(Ve,null))}var We=n(487462),ze=n(568874);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e){var t,n=(t=ne(),{setPermissionStatuses:(0,r.Z)(t,2)[1]}).setPermissionStatuses;return{addStatuses:(0,o.useCallback)((function(t){var r=Object.fromEntries(t.map((function(t){return[t.id+e,(n=t,r=n.id,o=n.mutation,a=n.oldPermission,i=void 0===a?void 0:a,{id:r,mutation:o,timestamp:Date.now(),oldPermission:i})];var n,r,o,a,i})));n((function(e){return Be(Be({},e),r)}))}),[e,n])}}var He=function(e){return Object.values(e).filter((function(e){return e&&Date.now()-e.timestamp<Y})).map((function(e){return null==e?void 0:e.id.toString()}))},Qe=(0,s.nD)("templatePermissions.notifications");function Ke(e){var t=e.children;return o.createElement("div",{className:"uKpnYaKjj3mEbx8mowwQ"},t)}var Xe=(0,s.nD)("templatePermissions.removePermissionConfirmationModal");function qe(e){var t=e.resourceName,n=e.name,r=e.type,a=e.onCancel,i=e.onConfirm,c=function(e){return(0,s.nD)("templatePermissions.removePermissionConfirmationModal.".concat(e))}(t),l=(0,o.useCallback)((function(){(0,O.GZ)(),a()}),[a]),u=(0,o.useCallback)((function(){(0,O.GZ)(),i()}),[i]);return o.createElement(o.Fragment,null,o.createElement(O.ZP.Header,null,o.createElement(O.ZP.Title,null,Xe("title"))),o.createElement(O.ZP.Body,null,o.createElement("div",{className:"YCA2cnU7owJXzfW35c4w"},o.createElement(Ke,null,c("description",{context:r})),o.createElement(Ke,null,Xe("bottomLine",{name:o.createElement("span",{className:"wdE0fmfvICaW1ghAr3c6 L1NPGp0OArr9AgHvsxTA C7HhvVmv8inrSQjb607z eugzcnL4uVMlgbRkfTqa"},n)})))),o.createElement(O.ZP.Footer,null,o.createElement(v.Z,{type:v.Z.SECONDARY,onClick:l},(0,s.t)("button.label.cancel")),o.createElement(v.Z,{variant:v.Z.variants.DESTRUCTIVE,onClick:u},(0,s.t)("button.label.remove"))))}function Je(e){return $e.apply(this,arguments)}function $e(){return($e=(0,ae.Z)(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(0,O.Ll)(o.createElement(qe,(0,We.default)({},t,{onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}})),{size:O.ZP.sizes.M,withCloseButton:!1})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=(0,s.nD)("templatePermissions.notifications"),tt=n(79564),nt=n(798399),rt=n(799532),ot=n(606188),at=n(434986),it=n(27212);var ct=n(963170),lt=n(943886),st=n(77259),ut=n(528058),mt=[ut.ZZ,ut.Au],dt=function(e){return!(Oe(e)&&!ge(e)||be(e)&&mt.includes(null==e?void 0:e.name))},pt={OWNER:{value:st._I.OWNER,label:(0,s.t)("storage.folderPermissions.label.Owner"),description:(0,s.t)("storage.folderPermissions.subLabel.Owner")},FULL:{value:st._I.FULL,label:(0,s.t)("storage.folderPermissions.label.Full"),description:(0,s.t)("storage.folderPermissions.subLabel.Full")},EDITOR:{value:st._I.EDITOR,label:(0,s.t)("storage.folderPermissions.label.Editor"),description:(0,s.t)("storage.folderPermissions.subLabel.Editor")},VIEWER:{value:st._I.VIEWER,label:(0,s.t)("storage.folderPermissions.label.Viewer"),description:(0,s.t)("storage.folderPermissions.subLabel.Viewer")},VIEWER_ONLY:{value:st._I.VIEWER_ONLY,label:(0,s.t)("storage.folderPermissions.label.ViewerOnly"),description:(0,s.t)("storage.folderPermissions.subLabel.ViewerOnly")}},Et=n(652421),ft=n(621465),Ot=n(294184),bt=n.n(Ot);function vt(e){var t=e.permission,n=e.clickable,r=void 0!==n&&n;return o.createElement("div",{className:bt()(r&&"LZsqv31JKHVNDjNStm0s")},o.createElement(Et.Z,{size:Et.Z.sizes.MEDIUM,color:Et.Z.WHITE,type:Et.Z.types.OUTLINED,uppercase:!1},t,r&&o.createElement(rt.Z,{icon:ft.Dd,size:rt.Z.sizes.M})))}function It(e){var t=e.userOrGroup,n=e.templatePermissions,r=function(e,t){var n=t.users,r=t.groups,a=t.inheritsPermissions,i=(0,Ue.Z)().data,c=A(),l=c.templateId,u=c.selectedFolderId,m=Ye(u).addStatuses,d=he({templateId:l,folderId:u,options:{onSuccess:function(){(0,ue.c0)(ue.em.success,Qe("permissionUpdated")),e.id&&m([{id:e.id,mutation:B,oldPermission:e.permission}]),_e()}}}),p=d.mutateAsync,E=d.isLoading,f=be(e),O=Oe(e);return{editPermission:(0,o.useCallback)(function(){var t=(0,ae.Z)(ce().mark((function t(o){var c,l,u;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==e.permission){t.next=2;break}return t.abrupt("return");case 2:return c=O?n.map((function(t){return t.username===e.username?{permission:o,username:e.username}:t})):n,l=f?r.map((function(t){return t.name===e.name?{permission:o,name:e.name}:t})):r,t.prev=4,t.next=7,p({users:c,groups:l,inheritsPermissions:a});case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(4),m=void 0,u=i?(0,s.t)("error.FAILOVER_WRITES_FORBIDDEN"):null!==(m=Fe(t.t0))&&void 0!==m?m:Qe("permissionUpdateError"),(0,ue.c0)(ue.em.error,u);case 13:case"end":return t.stop()}var m}),t,null,[[4,9]])})));return function(e){return t.apply(this,arguments)}}(),[p,r,a,f,i,O,e,n]),isLoading:E}}(t,n),a=r.editPermission,i=r.isLoading,c=function(e,t){var n=t.users,r=t.groups,a=t.inheritsPermissions,i=(0,Ue.Z)().data,c=A(),l=c.resourceName,u=he({templateId:c.templateId,folderId:c.selectedFolderId,options:{onSuccess:function(){(0,ue.c0)(ue.em.success,et("permissionRemoved")),_e()}}}),m=u.mutateAsync,d=u.isLoading,p=be(e),E=Oe(e);return{removePermission:(0,o.useCallback)((0,ae.Z)(ce().mark((function t(){var o,c,u;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Je({type:E?x:W,name:Te(e),resourceName:l});case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return o=E?n.filter((function(t){return t.id!==e.id})):n,c=p?r.filter((function(t){return t.name!==e.name})):r,t.prev=7,t.next=10,m({users:o,groups:c,inheritsPermissions:a});case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(7),d=void 0,u=i?(0,s.t)("error.FAILOVER_WRITES_FORBIDDEN"):null!==(d=Fe(t.t0))&&void 0!==d?d:et("permissionRemovalError"),(0,ue.c0)(ue.em.error,u);case 16:case"end":return t.stop()}var d}),t,null,[[7,12]])}))),[r,a,p,E,m,l,e,n,i]),isLoading:d}}(t,n),l=c.removePermission,u=c.isLoading,m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,lt.Jo)().features.viewerOnlyPrivEnabled;return[dt(e)&&pt.OWNER,!t&&pt.FULL,!t&&pt.EDITOR,pt.VIEWER,n&&pt.VIEWER_ONLY].filter(Boolean)}(t),d=function(e){return be(e)?!!e.id||e.dynamicGroup:!!e.id||e.dynamicUser}(t),p=be(t),E=!!Oe(t)&&t.status===pe.Nj.DEACTIVATED;return i||u?o.createElement(le.Z,{height:14,width:"100px"}):d?o.createElement(ct.Z,{onChange:a,onRemove:l,isUserDisabled:E,outline:!1,selectedPermission:t.permission,isGroup:p,options:m,trigger:o.createElement("div",{"data-tid":"permission-dropdown"},o.createElement(vt,{permission:t.permission,clickable:!0}))}):o.createElement(vt,{permission:t.permission})}var Tt=(0,s.nD)("templatePermissions");function gt(e){var t=e.item,n=e.folderId,r=e.isInvited,a=function(e,t,n){var r,a,i=Oe(e),c=ge(e),l=ve(e),s=(r=e.id+t,a=re().permissionStatuses,r?a[r]:void 0);return l?null:i&&e.status===pe.Nj.DEACTIVATED?{content:Tt("labels.deactivated"),color:Et.Z.RED}:(null==s?void 0:s.mutation)===B&&e.permission!==s.oldPermission?{content:Tt("labels.changedFrom",{status:o.createElement("span",{className:"Av7tZ9awWAElXhJkVDt5"},s.oldPermission)}),color:Et.Z.BLUE}:(null==s?void 0:s.mutation)===G?{content:Tt("labels.added"),color:Et.Z.BLUE}:"userAdded"===(null==s?void 0:s.mutation)?{content:Tt("labels.userAdded"),color:Et.Z.BLUE}:i&&!c?{content:Tt("labels.nonEmployee"),color:Et.Z.COOL_GRAY}:n?{content:Tt("labels.invited"),color:Et.Z.BLUE}:null}(t,n,void 0!==r&&r);return o.createElement(o.Fragment,null,a&&o.createElement("div",{className:"Nuve7yebXea3UmMlsgci"},o.createElement(Et.Z,{uppercase:!1,color:a.color,size:Et.Z.sizes.MEDIUM},a.content)))}var Pt=(0,s.nD)("templatePermissions"),Nt=n(557155),Zt=n(779210),yt=n(367283),St=n(337995),Dt=n(583025),Rt=n(51505),Ct=n(704548),At=n(698607),ht=n(992163),Mt=n(531926),kt=n(244507),Lt=n(99815),jt=function(e,t,n){var r=n.users,o=n.groups,a=n.inheritsPermissions,i=(0,Lt.S_)(e),c=(0,Lt.fP)(e),l=(0,Lt.kO)(e)||c;return{users:[].concat((0,me.Z)(l?[{permission:t,username:e.username}]:[]),(0,me.Z)(r)),groups:[].concat((0,me.Z)(i?[{permission:t,name:e.name}]:[]),(0,me.Z)(o)),inheritsPermissions:a}},wt=n(344606);function _t(e,t){var n=t.groups,r=t.users;return(0,Lt.S_)(e)?!!n.find((function(t){return t.name===e.name})):!!r.find((function(t){return t.id===e.id}))}var Ft=(0,s.nD)("templatePermissions.addExistingUserOrGroup");function Ut(e){var t=e.addStatuses,n=e.templateId,a=e.folderId,i=e.path,l=e.users,u=e.groups,m=e.inheritsPermissions,d=(0,Ue.Z)().data,p={users:l,groups:u,inheritsPermissions:m},E={usersOrGroups:[],permission:st._I.VIEWER,groupId:""},f=he({templateId:n,folderId:a}).mutateAsync,b=(0,wt.w)(i),I=function(){var e=(0,ae.Z)(ce().mark((function e(n,a){var i,c,l,u,m,E,v;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.usersOrGroups,c=n.permission,l=a.resetForm,i.length){e.next=4;break}return e.abrupt("return");case 4:if(u=(0,r.Z)(i,1),!_t(m=u[0].value,p)){e.next=10;break}return m.id&&t([{id:m.id,mutation:"none"}]),(0,ue.c0)(ue.em.success,(0,s.t)("storage.folderPermissions.grantPermission.permissionAlreadyExists",{name:o.createElement("span",{className:"_duAZctAmZLPwmmzAhll eugzcnL4uVMlgbRkfTqa"},(0,Lt.oY)(m))})),(0,O.GZ)(),e.abrupt("return");case 10:return e.next=12,b([m]);case 12:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:return e.prev=14,E=jt(m,c,p),e.next=18,f(E);case 18:m.id&&t([{id:m.id,mutation:G}]),(0,ue.c0)(ue.em.success,(0,s.t)("templatePermissions.notifications.permissionAdded")),T=m.type,je.Z.track("Template Permissions Modal: permission added",{type:T}),l(),(0,O.GZ)(),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(14),I=void 0,v=d?(0,s.t)("error.FAILOVER_WRITES_FORBIDDEN"):null!==(I=Fe(e.t0))&&void 0!==I?I:(0,s.t)("templatePermissions.notifications.addPermissionError",{name:(0,Lt.oY)(m)}),(0,ue.c0)(ue.em.error,v);case 29:case"end":return e.stop()}var I,T}),e,null,[[14,25]])})));return function(t,n){return e.apply(this,arguments)}}();return o.createElement(o.Fragment,null,o.createElement(c.J9,{onSubmit:I,initialValues:E},(function(e){var t=e.setFieldValue,n=e.values,r=e.errors;return o.createElement(c.l0,null,o.createElement(O.ZP.Header,null,o.createElement(O.ZP.Title,null,Ft("title"))),o.createElement(O.ZP.Body,null,o.createElement(kt.Z,{setValue:t,values:n,errors:r})),o.createElement(O.ZP.Footer,null,o.createElement(v.Z,{type:v.Z.SECONDARY,onClick:O.GZ},(0,s.t)("button.label.close")),o.createElement(Mt.Z,{disabled:!n.usersOrGroups.length,processingText:(0,s.t)("button.label.adding"),idleText:(0,s.t)("button.label.add")})))})))}var Vt=n(821442),xt=n(809742),Wt=n(581355),zt=n(451545),Gt=n(289098),Bt=n(930652),Yt=n(465428),Ht=n(112730),Qt=n(617928),Kt=(0,s.nD)("templatePermissions.addGroupModal"),Xt=function(e){return e.map((function(e){return{value:e,label:Kt("variablesListOptions.".concat(e))}}))};function qt(e){var t=e.templateName,n=e.templateId,a=e.folderId,i=e.addStatuses,l=e.resourceName,u=(0,o.useState)(""),m=(0,r.Z)(u,2),d=m[0],p=m[1],E=(0,Ue.Z)().data,f=function(e){return(0,s.nD)("templatePermissions.addGroupModal.".concat(e))}(l),b=Ae(),I=(0,Qt.AT)({onSuccess:function(){i([{id:d,mutation:G}]),b(),(0,O.GZ)()}}).mutateAsync,T=function(e){var t=e.templateId;return(0,Pe.useQuery)({queryKey:[].concat((0,me.Z)(Ce.variables),[t]),queryFn:function(){return function(e){var t=e.templateId;return(0,J.ZP)(Se.Z.TEMPLATES.PERMISSIONS_WIZARD.VARIABLES({templateId:t}))}({templateId:t})}})}({templateId:n}).data,g=void 0===T?[]:T,P=function(){var e=(0,ae.Z)(ce().mark((function e(t,r){var o,i,c,l,u,m,d,f;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.name,i=t.permission,c=t.variablesListOption,l=t.prefix,u=r.setStatus,m=Boolean(l&&c),d={name:m?"{{".concat(c,"}} ").concat(o):o,priv:i},p(d.name),e.prev=5,e.next=8,I({body:d,folderId:a,templateId:n});case 8:(0,ue.c0)(ue.em.success,(0,s.t)("templatePermissions.notifications.dynamicGroupAdded")),we(m),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),O=void 0,f=E?(0,s.t)("error.FAILOVER_WRITES_FORBIDDEN"):null!==(O=Fe(e.t0))&&void 0!==O?O:(0,s.t)("templatePermissions.notifications.addPermissionError",{name:d.name}),u({errors:f}),(0,ue.c0)(ue.em.error,f);case 17:case"end":return e.stop()}var O}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}();return o.createElement(c.J9,{initialValues:{name:"",permission:st._I.VIEWER,users:[],prefix:!1},validationSchema:(0,Ht.t)(),onSubmit:P},(function(e){var n=e.isSubmitting,r=e.values,a=r.prefix,i=r.variablesListOption;return o.createElement(c.l0,null,o.createElement(O.ZP.Header,null,o.createElement(O.ZP.Title,null,Kt("title"))),o.createElement(O.ZP.Body,null,o.createElement("div",{className:"pLDXvXdPHVOneQ58dK0B"},o.createElement(xt.Z,{icon:Wt.n3,type:xt.Z.types.WARN},f("notification",{templateName:t})),o.createElement("div",{className:"oz8G5zk2yw0FcIgf3ipT"},a&&i&&o.createElement("span",{className:"P3NABsLZiGk_JKN0LigZ"},Kt("variablesListOptions.option",{value:Kt("variablesListOptions.".concat(i))})),o.createElement(Yt.Z,null)),!!g.length&&o.createElement(o.Fragment,null,o.createElement("div",{className:"FsWgPEYDmNhzldtuKFUT"},o.createElement(Gt.Checkbox,{name:"prefix",label:Kt("prefix"),subField:function(e){var t=e.field.value;return o.createElement(o.Fragment,null,o.createElement("span",{className:"E9EtIBAfK9ih0xZnhLwZ"},Kt("prefixInfo")),t&&o.createElement(Gt.Radio,{className:"AvLRyIfBpEno4KOT6YV9",name:"variablesListOption",options:Xt(g)}))}}),o.createElement("div",{className:"xaS2kfjYHpYbmEDEINaS"},o.createElement(At.Z,{tooltip:f("prefixTooltip"),actions:o.createElement(Vt.Z,{as:"a",href:Bt.Z.project.templates,target:"_blank"},(0,s.t)("button.label.learnMore"),o.createElement(Vt.Z.Icon,{icon:zt.g}))},o.createElement(rt.Z,{icon:Wt.yo,"data-tid":"use-prefix-info-icon"}))))))),o.createElement(O.ZP.Footer,null,o.createElement(v.Z,{type:v.Z.SECONDARY,onClick:O.GZ,disabled:n},(0,s.t)("button.label.cancel")),o.createElement(Mt.Z,{idleText:(0,s.t)("button.label.create")})))}))}var Jt=(0,s.nD)("templatePermissions.addUserOrGroupDropdown"),$t=function(){var e=A(),t=e.resourceName,n=e.templateName,r=e.templateId,a=e.selectedFolderId,i=e.selectedPath,c=Le(),l=c.users,s=c.groups,u=c.inheritsPermissions,m=Ye(a).addStatuses,d=(0,ht.O)();return o.createElement("div",null,o.createElement(Zt.Z,{trigger:o.createElement(yt.Z,{icon:Rt.hd,type:Nt.Z.TEXT,className:"D6dPGqTChKtoB2LOZGxS"},Jt("label"))},o.createElement(St.Z,null,o.createElement(Dt.Z,{onClick:function(){return e={addStatuses:m,templateId:r,folderId:a,path:i,users:l,groups:s,inheritsPermissions:u},(0,O.Ll)(o.createElement(Ut,e),{size:O.ZP.sizes.L,onRequestClose:O.GZ,withCloseButton:!0});var e},icon:Rt.hd},Jt("existingUserOrGroup")),o.createElement(At.Z,{disabled:d,tooltip:Jt("disabledTooltip")},o.createElement(Dt.Z,{disabled:!d,onClick:function(){return e={templateName:n,templateId:r,folderId:a,addStatuses:m,resourceName:t},void(0,O.Ll)(o.createElement(qt,e),{onRequestClose:O.GZ,keepVisibleInBackground:!0,size:O.ZP.sizes.L,withCloseButton:!0,"data-tid":"add-new-group-modal"});var e},icon:Ct.$$},Jt("createNewGroup"))))))},en=n(615788),tn=n(124333),nn=(0,s.nD)("templatePermissions.permissionsGrid");function rn(e){var t=e.clearFilters;return o.createElement("div",{className:"qPJd8uUr7Dx9khRCIsUZ"},o.createElement(tn.Z,{illustration:en.Z.types.ADD_NEW_ITEM},o.createElement(tn.Z.Heading,null,nn("emptyView.title")),o.createElement(tn.Z.Description,null,nn("emptyView.description")),o.createElement(Vt.Z,{onClick:t},nn("emptyView.clearAll"))))}function on(){var e,t=function(){var e,t=(0,f.Z)("viewerOnlyPrivEnabled"),n=Le(),a=n.users,i=n.groups,c=n.inheritsPermissions,l=h().selectedFolderId,s=(e=A().resourceName,(0,o.useMemo)((function(){return{isProject:function(){return function(e){return e===U}(e)},isDocumentRoom:function(){return function(e){return e===V}(e)}}}),[e])).isProject;return{columns:(0,o.useMemo)((function(){return[{accessorFn:function(e){return e},id:"name",label:Pt("columns.name"),enableResizing:!0,enableSorting:!0,maxSize:500,minSize:350,filter:(0,ze.oy)({placeholder:Pt("placeholders.searchByName")}),cell:function(e){var t=e.getValue();return ve(t)?(0,ze.lv)({getAcronym:function(){return o.createElement(nt.Z,{acronym:o.createElement(rt.Z,{icon:ot.S,size:rt.Z.sizes.M}),size:nt.Z.sizes.M,withBorder:!0})},getLabel:function(){return o.createElement("span",null,o.createElement(o.Fragment,null,Pt("inheritance.label")),o.createElement(tt.Z,{className:"I_qkovNiKArfXjbmItvN"},Pt("inheritance.tooltip")))}})(e):Oe(t)?(0,ze.lv)({getAcronym:function(e){return(0,at.e5)(e)},getSrc:function(e){return null==e?void 0:e.avatarUri},getLabel:function(e){return Te(e)},getMeta:function(e){return(null==e?void 0:e.email)||(null==e?void 0:e.unverifiedEmail)||""},getChildren:function(e){return o.createElement(gt,{item:e,folderId:l,isInvited:!1})}})(e):t.dynamicGroup?(0,ze.si)({getLabel:function(e){var t,n,a=-1===(n=(t=e.name).lastIndexOf("}}"))?[void 0,t]:[t.substring(0,n+2),t.substring(n+2)],i=(0,r.Z)(a,2),c=i[0],l=i[1];return o.createElement(o.Fragment,null,c&&o.createElement("span",{className:"aPQsdL3mh3sQZ1xk1mWa"},c),l)},getMeta:function(){return s()?Pt("labels.dynamicGroupProjectMeta"):Pt("labels.dynamicGroupVDRMeta")}})(e):(0,ze.si)({getLabel:function(e){return e.name},getMeta:function(e){return Pt("labels.membersCount",{count:e.numberOfMembers})},getChildren:function(e){return o.createElement(gt,{item:e,folderId:l,isInvited:!1})}})(e)}},{accessorFn:function(e){return e},id:"type",label:Pt("columns.type"),enableResizing:!0,enableSorting:!0,minSize:100,maxSize:200,cell:(0,ze.K1)({getLabel:function(e){return ve(e)?Pt("placeholders.none"):be(e)?Pt("types.group"):Pt("types.".concat(e.role))}}),filter:(0,ze.e$)({placeholder:Pt("placeholders.filter"),options:[{value:null,label:Pt("labels.any")},{value:"group",label:Pt("types.group")},{value:"user",label:Pt("types.user")},{value:"guest",label:Pt("types.guest")}]})},{accessorFn:function(e){return e},id:"userStatus",label:Pt("columns.status"),enableResizing:!0,enableSorting:!0,minSize:100,maxSize:200,cell:function(e){var t=(0,e.getValue)();if(t&&Oe(t)){var n=t.status;return o.createElement(it.O,{status:n})}return Pt("placeholders.none")},filter:(0,ze.e$)({placeholder:Pt("placeholders.filter"),options:[{value:null,label:Pt("labels.any")},{value:"ACTIVE",label:Pt("labels.active")},{value:"DEACTIVATED",label:Pt("labels.deactivated")},{value:"PENDING",label:Pt("labels.pending")}]})},{accessorFn:function(e){return e},id:"permission",label:Pt("columns.permissions"),enableResizing:!0,enableSorting:!0,minSize:100,maxSize:200,cell:function(e){var t=(0,e.getValue)();return ve(t)?Pt("placeholders.none"):o.createElement(It,{userOrGroup:t,templatePermissions:{users:a,groups:i,inheritsPermissions:c}})},filter:(0,ze.e$)({placeholder:Pt("placeholders.filter"),options:[{value:null,label:Pt("labels.any")},{value:"Owner",label:Pt("permissions.owner")},{value:"Full",label:Pt("permissions.full")},{value:"Editor",label:Pt("permissions.editor")},{value:"Viewer",label:Pt("permissions.viewer")},t&&{value:"Viewer Only",label:Pt("permissions.viewer_only")}].filter(Boolean)})}]}),[l,i,c,a,t,s])}}(),n=t.columns,a=(0,ze.AY)(),i=(0,r.Z)(a,2),c=i[0],l=i[1],s=(0,o.useCallback)((function(){l([])}),[l]),u=function(){var e=re().permissionStatuses,t=(0,ze.Dz)(),n=(0,r.Z)(t,2)[1];return(0,o.useEffect)((function(){var t,r=He(e);return(null==r?void 0:r.length)>0&&(n({rows:r}),t=setTimeout((function(){var t=He(e);n({rows:t})}),Y)),function(){return clearTimeout(t)}}),[e,n]),{highlight:t}}(),m=u.highlight,d=function(e){var t=e.clearFilters;return(0,o.useMemo)((function(){return{Header:{Toolbar:function(){return o.createElement(ze.ZP.Header.Toolbar,null,o.createElement(ze.ZP.Header.Toolbar.Group,{justifyContent:"left"},o.createElement($t,null)),o.createElement(ze.ZP.Header.Toolbar.RightActions,null))}},Table:function(){return o.createElement(ze.ZP.Table,{maxHeight:"70vh"})},EmptyView:function(){return o.createElement(rn,{clearFilters:t})}}}),[t])}({clearFilters:s}),p=(0,ze.rK)(),E=(0,r.Z)(p,1)[0][0],O=(0,ze.q7)({columnId:"name",columnFilters:c}),b=(0,ze.q7)({columnId:"type",columnFilters:c}),v=(0,ze.q7)({columnId:"userStatus",columnFilters:c}),I=(0,ze.q7)({columnId:"permission",columnFilters:c}),T=Le(),P=T.permissions,N=T.isFetching,Z=function(e,t){if(!t)return(0,me.Z)(e);var n=e.find((function(e){return ve(e)})),r=e.filter((function(e){return!ve(e)})).sort((function(e,n){if("name"===t.id){var r=Oe(e)?Te(e):e.name,o=Oe(n)?Te(n):n.name;return(t.desc?-1:1)*r.localeCompare(o)}if("type"===t.id){var a,i=(a={},(0,g.Z)(a,"admin",0),(0,g.Z)(a,"group",1),(0,g.Z)(a,"user",2),(0,g.Z)(a,"guest",3),a),c=function(e){var t,n=Oe(e)?e.role:e.type;return null!==(t=i[n])&&void 0!==t?t:4},l=c(e),s=c(n);return(t.desc?-1:1)*(l-s)}if("userStatus"===t.id){var u=Oe(e)?e.status:"",m=Oe(n)?n.status:"";return(t.desc?-1:1)*u.localeCompare(m)}return"permission"===t.id?(t.desc?-1:1)*e.permission.localeCompare(n.permission):0}));return n?[n].concat((0,me.Z)(r)):r}(function(e,t){return e.filter((function(e){var n=ve(e);return!(t&&!n)||e.permission===t}))}(function(e,t){return e.filter((function(e){var n=ve(e);return!(t&&!n)||(Oe(e)?e.status:null)===t}))}(function(e,t){return e.filter((function(e){var n=ve(e);return!(t&&!n)||(Oe(e)?e.role:e.type)===t}))}((e=O,P.filter((function(t){var n=ve(t);if(!e||n)return!0;var r=Oe(t)?Te(t):t.name,o=e.toLowerCase();return r.toLowerCase().includes(o)}))),b),v),I),E);return{data:Z,columns:n,isLoading:N,components:d,highlight:m,isEmpty:0===Z.length,sorting:p,filtering:a}}function an(){var e=on();return o.createElement("div",{className:"vw2fG8WTlkV764P7DYbf"},o.createElement(ze.ZP,(0,We.default)({getRowId:function(e){return Oe(t=e)?t.id.toString():null!==(n=null===(r=t.id)||void 0===r?void 0:r.toString())&&void 0!==n?n:t.name;var t,n,r}},e)))}function cn(){return o.createElement("div",{className:"Qbzf2Rpufcrpy4jLtkg3"},o.createElement(xe,null),o.createElement(te,null,o.createElement(an,null)))}function ln(){return o.createElement("div",{className:"ybAyzCpaFkDZ3abERvw0"},o.createElement(b.Z.Body,null,o.createElement("div",{className:"TurcJrD4jMLLjnUyN7aX"},o.createElement($,null),o.createElement(cn,null))))}var sn=function(e){var t=e.templateId,n=e.resourceName,r=e.templatePath,a=e.templateName;return o.createElement(R,{templateId:t,templatePath:r,resourceName:n,templateName:a},o.createElement(L,null),o.createElement(ln,null))};function un(e){var t=e.text;try{var n=JSON.parse(t);return o.createElement("pre",{className:"MRZSVJR97lgdEudriBnw"},JSON.stringify(n,null,4))}catch(e){return o.createElement(o.Fragment,null,t)}}var mn=(0,s.nD)("components.templateSettingsForm");function dn(e){var t=e.resourceName,n=e.tabsKey,r=e.selectedTabKey,a=e.disabled,i=e.downloadLink,m=e.documentationLink,E=e.folderId,b=e.folderPath,I=function(e){return(0,s.nD)("components.templateSettingsForm.".concat(e,".templatePermissionsTab"))}(t),T=(0,f.Z)("folderTemplatesPermissionsWizard"),g=(0,c.u6)().values.templateName;return o.createElement(p.Z,{key:l.G.PERMISSIONS,tabsKey:n,tabKey:l.G.PERMISSIONS,selectedTabKey:r},T?o.createElement(u.$0,{subtitle:I("subtitle")},o.createElement(At.Z,{disabled:!a,tooltip:mn("templatePermissions.noPermission")},o.createElement(v.Z,{disabled:a,onClick:function(){return function(e){var t;t=e.resourceName,je.Z.track("Template Permissions Modal: modal opened",{"Resource name":t}),(0,O.h7)(o.createElement(sn,e),{onRequestClose:O.Mr,keepVisibleInBackground:!0,size:O.ZP.sizes.FULLSCREEN})}({templateId:E,templatePath:b,resourceName:t===l.U.PROJECT?U:V,templateName:g})}},o.createElement(v.Z.Icon,{icon:Ct.mc}),mn("templatePermissions.managePermissions")))):o.createElement(u.$0,{subtitle:I("json_subtitle",{downloadLink:o.createElement(Vt.Z,{as:"a",href:i,download:!0},mn("templatePermissions.downloadSampleTemplate")),viewDocumentation:o.createElement(Vt.Z,{as:"a",href:m,rel:"noopener noreferrer",target:"_blank"},mn("templatePermissions.viewDocumentation"))})},o.createElement(d.Z,{"aria-label":"Permissions Template",name:"permissionsTemplate",placeholder:mn("templatePermissions.placeholder"),rows:16,formatValue:function(e){return o.createElement(un,{text:"string"==typeof e?e:""})},readonly:a})))}var pn=[l.G.GENERAL,l.G.PERMISSIONS],En="template-settings";function fn(e){var t=e.resourceName,n=e.disabled,s=e.downloadLink,u=e.documentationLink,m=e.folderId,d=e.folderPath,p=(0,o.useState)(pn[0]),f=(0,r.Z)(p,2),O=f[0],b=f[1],v=(0,c.u6)().errors;return(0,o.useEffect)((function(){v.permissionsTemplate&&!v.description&&b(l.G.PERMISSIONS)}),[v]),o.createElement(o.Fragment,null,o.createElement("div",{className:"Q8SzWvtTv1RcV25i7Rdm"},o.createElement(a.Z,{type:a.Z.TYPE.PRIMARY,tabsKey:En,selectedTabKey:O,onChange:function(e){return b(e)}},pn.map((function(e){return o.createElement(i.Z,{key:e,tabKey:e},e)})))),o.createElement(E,{resourceName:t,selectedTabKey:O,tabsKey:En,disabled:n}),o.createElement(dn,{resourceName:t,selectedTabKey:O,tabsKey:En,disabled:n,downloadLink:s,documentationLink:u,folderId:m,folderPath:d}))}},786273:function(e,t,n){n.d(t,{KP:function(){return u},M7:function(){return a},QX:function(){return l},Th:function(){return i},k4:function(){return s},np:function(){return c}});var r=n(204942),o=n(266606);function a(e){o.Z.track("Doc Portal: Workspace Created",(0,r.Z)({},"Creation Type",e.creationType))}function i(){o.Z.track("Doc Portal: Workspace Edited")}function c(e){o.Z.track("Doc Portal: Workspace Deleted",e)}function l(){o.Z.track("Doc Portal: Workspace List Opened")}function s(e){o.Z.track("Doc Portal: Workspace Tab Opened",(0,r.Z)({},"Tab",e.tab))}function u(e){var t;o.Z.track("Doc Portal: Task Opened",(t={},(0,r.Z)(t,"Task Type",e.taskType),(0,r.Z)(t,"Tab",e.tab),(0,r.Z)(t,"Days until Due Date",e.daysUntilDueDate),(0,r.Z)(t,"File Extension",e.fileExtension),t))}},827289:function(e,t,n){n.d(t,{jH:function(){return I},F7:function(){return $},J1:function(){return Pe}});var r=n(667294),o=n(294184),a=n.n(o),i=n(499345),c=n(779210),l=n(499039),s=n(713147),u=n(583025),m=n(337995),d=n(887302),p=n(51505),E=n(762074),f=n(943886),O=n(559747),b="Vxmxy7sHmxd2EX6pzERs",v=(0,E.nD)("clientPortal.workspaces.createButton");function I(e){var t=e.onSelect,n=!(0,f.T0)("clientPortalTemplates"),o=(0,O.o9)({enabled:n,select:function(e){return e.workspaceTemplates}}).data,E=void 0===o?[]:o,I=n?r.createElement(r.Fragment,null,r.createElement(s.Z,null),r.createElement(u.Z,{as:"div",disabled:!0,buttonClassName:b},v("fromTemplate")),0===E.length?r.createElement(u.Z,{as:"div",disabled:!0,buttonClassName:a()(b,"LRXQer5Ffnll6K8hIIZF")},v("noTemplates")):E.map((function(e){return r.createElement(u.Z,{key:e.id,icon:d.nv,onClick:function(){return t(e)},"data-tid":"template-item"},r.createElement("div",{className:"PEP8fDFUiQcZdt9ZG6cw"},r.createElement(i.Z,null,e.name),e.description&&r.createElement(i.Z,{className:"dRbIoKGYvUsu4YOUYqDV Z3MFLDOuhAfuf_m3JCZI qqGfbuN2RooWpKmkockU cMD1Ln5gNqHc7P7v_G_6",maxLength:60},e.description)))}))):null;return r.createElement(c.Z,{trigger:r.createElement(l.Z,{type:l.Z.PRIMARY},r.createElement(l.Z.Icon,{icon:p.hd}),r.createElement("div",{className:"Hzf3Tk0mBedN7P22nApI"},v("addNewWorkspace")))},r.createElement(m.Z,null,r.createElement(u.Z,{icon:d.lz,onClick:t},v("emptyWorkspace")),I))}var T=n(204942),g=n(610861),P=n(888990),N=n(397404),Z=n(145987),y=n(529439),S=n(93433),D=n(787781),R=n(736871),C=n(154177),A=n(509969),h=n(761730),M=n(77259),k=n(11196),L=n(739232),j=n(243077),w=n(531081),_=n(832486),F=n(786273),U=n(460474),V=n(584629),x=n(943435),W=["id"],z=["id"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,T.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=(0,E.nD)("clientPortal.workspaces.form"),H=[V.Oy,V.wm];function Q(e){var t,n,o,a=e.workspaceFolder,i=e.templateId,c=e.templateName,l=e.flowKey,s=e.wizardRef,u=(0,_.Z)().showNotification,m=(0,U.Z)("isClientPortalResourcesEnabled"),d=(0,A.P)({}).mutate,p=(0,M.v_)({id:null!==(t=null==a?void 0:a.id)&&void 0!==t?t:"",path:null!==(n=null==a?void 0:a.path)&&void 0!==n?n:"",options:{enabled:!(null==a||!a.id||null==a||!a.path)}}),f=p.data,O=(void 0===f?{users:[]}:f).users,b=p.isLoading,v=(0,r.useMemo)((function(){return O.filter((function(e){return"guest"===e.role}))}),[O]),I=(0,r.useMemo)((function(){return l===x.mG.FROM_EXISTING_FOLDER?{title:Y("markAsWorkspaceHeader"),lastStepButtonText:Y("markAsWorkspaceButtonText")}:{title:Y("createHeader"),lastStepButtonText:Y("lastStepButtonText")}}),[l]),T=(0,r.useMemo)((function(){return{GENERAL:{name:Y("general.wizardTitle"),component:r.createElement(V.UR,{templateName:c},r.createElement(V.d,null)),icon:L.X},RESOURCES:{name:Y("resources.wizardTitle"),component:r.createElement(V.UR,{templateName:c},r.createElement(V.ec,null)),icon:j.wl},ACCESS:{name:Y("access.wizardTitle"),component:null!=a&&a.name?r.createElement(V.yq,{folderName:a.name,standardUserPermissions:v}):null,icon:w.Hf},TEMPLATE_VARIABLES:{name:Y("templateVariables.wizardTitle"),component:i?r.createElement(V.Xw,{templateId:i}):null,icon:w.Hf},FOLDER:{name:Y("folder.wizardTitle"),component:r.createElement(V.UR,{templateName:c},r.createElement(V._2,{name:"folder"})),icon:w.Hf}}}),[v,i,c,null==a?void 0:a.name]),P=(0,r.useMemo)((function(){return m?["GENERAL","RESOURCES"]:["GENERAL"]}),[m]),N=(0,r.useMemo)((function(){return{EMPTY:[].concat((0,S.Z)(P),["FOLDER"]),EMPTY_IN_PARENT_FOLDER:(0,S.Z)(P),FROM_TEMPLATE:[].concat((0,S.Z)(P),["FOLDER","TEMPLATE_VARIABLES"]),FROM_TEMPLATE_IN_PARENT_FOLDER:[].concat((0,S.Z)(P),["TEMPLATE_VARIABLES"]),FROM_EXISTING_FOLDER:v.length>0?[].concat((0,S.Z)(P),["ACCESS"]):(0,S.Z)(P)}}),[P,v.length]),G=(0,r.useMemo)((function(){return N[l].map((function(e,t){return B(B({},T[e]),{},{id:t})}))}),[N,l,T]),Q={name:null!==(o=null==a?void 0:a.name)&&void 0!==o?o:"",description:"",status:h.Gj.ACTIVE,type:"",contacts:[{id:(0,R.M)(),name:"",email:"",phoneNumber:"",extension:""}],links:[{id:(0,R.M)(),link:"",name:"",description:""}],folder:a,templateFolderId:"",templateVariables:{}},K=(0,r.useCallback)((function(e,t){var n=e.name,r=e.description,o=e.status,a=e.type,c=e.folder,p=e.templateVariables,f=e.links,O=e.contacts,b=t.setSubmitting,v=t.setStatus;if(null!=c&&c.id){var I=p&&Object.entries(p).length?Object.entries(p).map((function(e){var t=(0,y.Z)(e,2);return{name:t[0],value:t[1].map((function(e){return e.value.id}))}})):void 0,T=O.filter((function(e){return!!e.name})).map((function(e){return e.id,(0,Z.Z)(e,W)})),P=f.filter((function(e){return!!e.name})).map((function(e){return e.id,(0,Z.Z)(e,z)})),N=B({name:n.trim(),description:r.trim(),status:o.trim(),type:a,workspaceTemplateId:i,variables:I},m&&{resources:{links:P,contacts:T}});l===x.mG.FROM_EXISTING_FOLDER?N.workspaceFolderId=c.id:N.workspaceParentFolderId=c.id,d(N,{onSuccess:function(){var e=D.ZP.getParentPath(c.path);(0,k.q)({path:l===x.mG.FROM_EXISTING_FOLDER?e:c.path}),u("success",Y("notifications.successCreated")),(0,F.M7)({creationType:x.d4[l]}),(0,g.Mr)()},onError:function(e){if((0,C.k0)(e)){var t=(0,C.lt)(e);if(t){var n,r=function(e){var t=Object.keys(e).map((function(e){return H.reduce((function(t,n,r){return Object.keys((null==n?void 0:n.fields)||[]).includes(e)?r:t}),-1)})),n=Math.min.apply(Math,(0,S.Z)(t));return n>-1?n:void 0}(t);void 0!==r&&r>=0&&(null==s||null===(n=s.current)||void 0===n||n.setActiveStep(r)),v({errors:t})}else u("error",(0,C.e$)(e)||(0,E.t)("error.default"));b(!1)}else u("error",(0,E.t)("error.default"))}})}}),[i,m,l,d,u,s]);return{steps:G,labels:I,initialValues:Q,validationSchemas:H,isLoading:b,onSubmit:K}}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,T.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=(0,N.Sh)().hideNotifications;function J(e){var t=(0,r.useRef)(),n=Q(X(X({},e),{},{wizardRef:t})),o=n.steps,a=n.labels,i=n.initialValues,c=n.validationSchemas,l=n.onSubmit;return r.createElement(P.Z,{instanceRef:t,title:a.title,initialValues:i,validationSchemas:c,onSubmit:l,steps:o,showStepper:o.length>1,lastStepButtonText:a.lastStepButtonText,hideNotifications:q})}function $(e){(0,g.h7)(r.createElement(J,e),{onRequestClose:g.Mr,size:g.ZP.sizes.XL,withCloseButton:!0,shouldCloseOnOverlayClick:!1})}var ee=n(115861),te=n(364687),ne=n.n(te),re=n(403455),oe=n(735691),ae=n(821442),ie=n(579621),ce=n(32570),le=n(569748),se=n(936),ue=n(87796),me=n(531926),de=n(343697),pe=n(930652),Ee=(0,E.nD)("clientPortal.workspaces.templateSettings"),fe=(0,N.Sh)({showExclusively:!0}),Oe=fe.showNotification,be=fe.hideNotifications,ve=oe.Ry().shape({description:oe.Z_().trim().max(200),permissionsTemplate:oe.Z_().trim().ensure().test("permissionsTemplate",Ee("templatePermissions.validationError"),(function(e){return""===e||(0,de.tp)(e)}))});function Ie(e){var t=e.children;try{var n=JSON.parse(t);return r.createElement("pre",{className:"dRqr0sg41RHLmNIj6Ftr"},JSON.stringify(n,null,4))}catch(e){return r.createElement(r.Fragment,null,t)}}var Te=function(){var e=(0,ee.Z)(ne().mark((function e(t){return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.Mr)(),Oe("error",null==t?void 0:t.message);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ge(e){var t=e.rootFolderId,n=(0,O.qv)({folderId:t},{onError:Te}),o=n.data,a=void 0===o?null:o,i=n.isLoading,c=n.isSuccess,l=(0,O.sX)({folderId:t}),s=l.mutate,u=l.reset,m=(0,r.useCallback)((function(e){var t=e.error,n=e.setStatus,r=(0,C.lt)(t);if(null!=r&&r.permissionsTemplate){var o=r.permissionsTemplate,a=o.match(/^\$\.folders\[(\d+)\]\.([^ ]+):/);if(a){var i=(0,y.Z)(a,3),c=i[0],l=i[1],s=i[2];o=o.replace(c,'Property "'.concat(s,'" in folder number ').concat(Number(l)+1))}else{var u=o.match(/\$\.([^ ]+):/);if(u){var m=(0,y.Z)(u,2),d=m[0],p=m[1];o=o.replace(d,'Property "'.concat(p,'"'))}}r.permissionsTemplate=o}r?n({errors:r}):Oe("error",(0,C.e$)(t))}),[]),d={templateName:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",permissionsTemplate:null!=a&&a.permissionsTemplate?JSON.stringify(a.permissionsTemplate,null,"\t"):""};return r.createElement(r.Fragment,null,r.createElement(g.ZP.Header,null,r.createElement(g.ZP.Title,null,Ee("title"))),i&&r.createElement("div",{className:"mWoBt6Ecxo5ViOuP61N9"},r.createElement(ce.Z,null)),!i&&c&&r.createElement(re.J9,{initialValues:d,validationSchema:ve,onSubmit:function(e,t){var n=t.setSubmitting,r=t.setStatus,o=e.description,a=e.permissionsTemplate;s({description:o.trim(),permissionsTemplate:a.trim()?JSON.parse(a):null},{onSuccess:function(){u(),Oe("success",Ee("notifications.templateSettings.success")),(0,g.Mr)()},onError:function(e){return m({error:e,setStatus:r})},onSettled:function(){n(!1)}})}},r.createElement(re.l0,null,r.createElement(g.ZP.Body,null,r.createElement(le.$0,{title:Ee("general.title"),subtitle:Ee("general.subtitle")},r.createElement(se.Z,{name:"templateName",label:Ee("general.templateName.title"),readonly:!0}),r.createElement(ue.Z,{name:"description",label:Ee("general.templateDescription.title"),placeholder:Ee("general.templateDescription.placeholder"),rows:3})),r.createElement(le.$0,{title:Ee("templatePermissions.title"),subtitle:r.createElement(r.Fragment,null,Ee("templatePermissions.subtitle",{downloadLink:r.createElement(ae.Z,{as:"a",href:"/resource/SampleWorkspaceTemplatePermissions.json",download:!0},Ee("templatePermissions.downloadSampleTemplate")),viewArticle:r.createElement(ae.Z,{as:"a",href:pe.Z.clientPortal.templates,rel:"noopener noreferrer",target:"_blank"},Ee("templatePermissions.viewArticle"))}))},r.createElement(ue.Z,{"aria-label":"Permissions Template",name:"permissionsTemplate",label:"",placeholder:Ee("templatePermissions.placeholder"),rows:10,formatValue:function(e){return r.createElement(Ie,null,e)}}))),r.createElement(g.ZP.Footer,null,r.createElement(ie.Z,{type:ie.Z.SECONDARY,onClick:function(){(0,g.Mr)(),be()}},(0,E.t)("button.label.cancel")),r.createElement(me.Z,null)))))}function Pe(e){var t=e.folderId;(0,g.Ll)(r.createElement(ge,{rootFolderId:t}),{onRequestClose:g.GZ,withCloseButton:!0,size:g.ZP.sizes.XL,isScrollable:!0})}},879055:function(e,t,n){var r=n(762074),o=n(735691),a=n(761730),i=n(943435);t.Z=o.Ry().shape({name:o.Z_().trim().min(i.Lv.default).max(i.wN.name).folderPath((0,r.t)("error.invalidName",{forbiddenChars:'* ? / \\ : < > " |'})).required(),type:o.Z_().required(),status:o.Z_().oneOf(Object.values(a.Gj)).required()})},336878:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(93433),o=n(667294),a=n(762074),i=n(569748),c=n(936),l=n(40023),s=n(761730),u=n(916018),m=(0,a.nD)("clientPortal.workspaces"),d=(0,a.nD)("clientPortal.workspaces.form.general");function p(e){var t=e.originalWorkspaceType,n=(0,u.tQ)().data,a=(void 0===n?{}:n).workspaceTypes,p=void 0===a?[]:a,E=(0,o.useMemo)((function(){return function(e,t){if(!t)return e;var n=new Set(e);return n.add(t),(0,r.Z)(n)}(p,t).map((function(e){return{value:e,label:e}}))}),[p,t]),f=Object.values(s.Gj).map((function(e){return{value:e,label:m("status",{context:e})}}));return o.createElement(i.$0,{title:d("title")},o.createElement(l.Z,{name:"type",options:E,label:d("type.label"),"data-tid":"workspace-type",required:!0}),o.createElement(c.Z,{name:"name",label:d("name.label"),required:!0,autoFocus:!0}),!1,o.createElement(l.Z,{name:"status",options:f,label:d("status.label"),"data-tid":"workspace-status"}))}},584629:function(e,t,n){n.d(t,{yq:function(){return d},Oy:function(){return r.Z},d:function(){return k.Z},wm:function(){return o.Z},ec:function(){return z},UR:function(){return B},Xw:function(){return M},_2:function(){return ne}});var r=n(879055),o=n(238877),a=n(667294),i=n(762074),c=n(569748),l=n(798399),s=n(434986),u=n(307179),m=(0,i.nD)("clientPortal.workspaces.form.access");function d(e){var t=e.folderName,n=e.standardUserPermissions;return a.createElement(c.$0,{className:"cEYVw5gpNiN41rmsbobq"},a.createElement("div",null,m("description",{name:t})),n.map((function(e){var t,n,r;return a.createElement("div",{key:e.id,className:"j7wwfPXRzoUUMa00OBZT"},a.createElement(l.Z,{size:l.Z.sizes.M,acronym:(0,s.e5)(e),src:null===(t=e._self)||void 0===t||null===(n=t.linkedResources)||void 0===n||null===(r=n.itemAvatar)||void 0===r?void 0:r.url,color:l.Z.colors.ORANGE,altText:e.displayName}),a.createElement("span",null,(0,u.v2)(e)||e.email))})))}var p=n(529439),E=n(403455),f=n(734474),O=n(559747),b=n(93433),v=n(377145),I=n(799532),T=n(51505),g=n(579621),P=n(141797),N=n(534733),Z=n(578999),y=n(98922),S=n(65410),D=(0,i.nD)("clientPortal.workspaces.form.inviteUserModal"),R=(0,i.nD)("clientPortal.workspaces.form.templateVariables");function C(e){var t=e.email,n=e.onUserCreated,r=e.workspaceName,o=e.role,c=(0,a.useMemo)((function(){return a.createElement(a.Fragment,null,a.createElement(P.Z.Title,null,D("title")),a.createElement(P.Z.Subtitle,null,D("subtitle",{role:o})))}),[o]),l=(0,a.useCallback)((function(){return(0,y.Z)({userType:N.$A.STANDARD,email:t,isServiceAccount:!1,onUserCreated:n,folderName:r,requireConfirmation:!0,setUsernameOnInit:!0,modalHeader:c})}),[t,n,r,c]);return a.createElement(g.Z,{type:g.Z.TERTIARY,className:"W6MPusKi6yJY5bpnBbgD",onClick:l},a.createElement("div",{className:"WdCigSeaXYF5oAreTRAO gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa"},a.createElement(I.Z,{icon:T.hd,size:I.Z.sizes.M}),(0,i.t)("storage.folderPermissions.inviteNewUser")))}function A(e){var t=e.name,n=e.label,r=e.workspaceName,o=(0,a.useCallback)((function(e){var t=e.selectProps.inputValue,o=e.getValue,i=e.setValue;return(null==t?void 0:t.length)>=2?a.createElement(C,{email:t,onUserCreated:function(e){i([].concat((0,b.Z)(o()||[]),[{label:(0,S.o3)(e),value:e}]),"select-option")},workspaceName:r,role:n}):a.createElement(v.c.NoOptionsMessage,e)}),[r,n]);return a.createElement(Z.Z,{placeholder:R("templateVariablePlaceholder"),name:t,label:n,"data-tid":"template-group",isMulti:!0,canCurrentUserBeChosen:!0,queryUsers:!0,queryGroups:!1,builtinGroups:!1,canCreateUnknownOption:!1,components:{NoOptionsMessage:o}})}var h=(0,i.nD)("clientPortal.workspaces.form.templateVariables");function M(e){var t,n=e.templateId,r=(0,E.U$)("name"),o=(0,p.Z)(r,1)[0],i=null==o?void 0:o.value,l=(0,O.qv)({folderId:n}),s=l.data;return l.isLoading?a.createElement(f.Z,null):a.createElement(c.$0,{title:h("title"),subtitle:h("subtitle")},null==s||null===(t=s.variables)||void 0===t?void 0:t.map((function(e){var t=e.name;return a.createElement(A,{key:t,name:"templateVariables.".concat(t),label:t,workspaceName:i})})))}var k=n(336878),L=n(936),j=n(736871),w=n(610861),_=n(4845),F=n(225364),U="Ey7cACvJ5A3hplgcYrw2",V="Emntp8DhzmALftKN4Mwb",x="vfXgwDqK4gVTH39jHPse",W=(0,i.nD)("clientPortal.workspaces.form.resources");function z(){var e=(0,E.U$)("contacts"),t=(0,p.Z)(e,1)[0].value,n=(0,E.U$)("links"),r=(0,p.Z)(n,1)[0].value;return(0,a.useEffect)((function(){return(0,w.Gc)({size:w.ZP.sizes.XXL}),function(){return(0,w.Gc)({size:w.ZP.sizes.XL})}}),[]),a.createElement(a.Fragment,null,a.createElement("p",{className:"DGSnsVZ5O2Ue7435PBSl"},W("subtitle")),a.createElement(E.F2,{name:"contacts",render:function(e){var n=e.push,r=e.remove;return a.createElement(c.$0,{title:W("contactSubsection.title"),className:U},null==t?void 0:t.map((function(e,t){return a.createElement("div",{key:e.id,className:V,"data-tid":"contact-row"},a.createElement("div",{className:"Bk9HZIxDG2G25nETjwrw"},a.createElement(L.Z,{name:"contacts[".concat(t,"].name"),label:W("contactSubsection.name.label"),placeholder:W("contactSubsection.name.placeholder"),autoFocus:!0}),a.createElement(L.Z,{name:"contacts[".concat(t,"].email"),label:W("contactSubsection.email.label"),placeholder:W("contactSubsection.email.placeholder")}),a.createElement(L.Z,{name:"contacts[".concat(t,"].phoneNumber"),label:W("contactSubsection.phoneNumber.label"),placeholder:W("contactSubsection.phoneNumber.placeholder"),style:{marginTop:0}}),a.createElement(L.Z,{name:"contacts[".concat(t,"].extension"),label:W("contactSubsection.extension.label"),placeholder:W("contactSubsection.extension.placeholder")})),a.createElement("div",{className:x},a.createElement(_.Z,{icon:F.gt,size:_.Z.sizes.LARGE,"aria-label":W("contactSubsection.removeContact"),type:_.Z.GHOSTED,onClick:function(){return r(t)}})))})),a.createElement("div",null,a.createElement(g.Z,{type:g.Z.TERTIARY,onClick:function(){return n({id:(0,j.M)(),name:"",email:"",phoneNumber:"",extension:""})}},a.createElement(g.Z.Icon,{icon:T.hd}),W("contactSubsection.addContact"))))}}),a.createElement(E.F2,{name:"links",render:function(e){var t=e.push,n=e.remove;return a.createElement(c.$0,{key:"links",title:W("linksSubsection.title"),className:U},null==r?void 0:r.map((function(e,t){return a.createElement("div",{key:e.id,className:V,"data-tid":"link-row"},a.createElement("div",{className:"YYxiU55i7pigv14D7HA7"},a.createElement(L.Z,{name:"links[".concat(t,"].link"),label:W("linksSubsection.link.label"),placeholder:W("linksSubsection.link.placeholder"),alert:W("linksSubsection.link.helper")}),a.createElement(L.Z,{name:"links[".concat(t,"].name"),label:W("linksSubsection.name.label"),placeholder:W("linksSubsection.name.placeholder"),alert:W("linksSubsection.name.helper"),style:{margin:0}}),a.createElement(L.Z,{name:"links[".concat(t,"].description"),label:W("linksSubsection.description.label"),placeholder:W("linksSubsection.description.placeholder")})),a.createElement("div",{className:x},a.createElement(_.Z,{icon:F.gt,"aria-label":W("linksSubsection.removeLink"),type:_.Z.GHOSTED,onClick:function(){return n(t)}})))})),a.createElement("div",null,a.createElement(g.Z,{type:g.Z.TERTIARY,onClick:function(){return t({id:(0,j.M)(),link:"",name:"",description:""})}},a.createElement(g.Z.Icon,{icon:T.hd}),W("linksSubsection.addLink"))))}}))}var G=n(766334);function B(e){var t=e.children,n=e.templateName;return a.createElement(a.Fragment,null,!!n&&a.createElement(G.K0,{type:G.K0.types.WARN,className:"_SWrb0VpQAAGW3S8AlKb",fullWidth:!0},(0,i.t)("clientPortal.workspaces.form.templateNotification",{name:n})),t)}var Y=n(357764),H=n(107831),Q=n(513580),K=n(351910),X=n(153672),q=n(296924),J=n(57324),$=(0,i.nD)("clientPortal.workspaces.form.folder");function ee(e){var t=e.name,n=e.adapter,r=(0,X.ZP)().data,o=(0,X.Lb)("ui.display.canCreateTopFolders"),i=(0,p.Z)(o.data,1)[0],c=function(e){var t;return(0,q.GJ)(r)||(0,J.qe)(e)&&i||"OWNER"===(null===(t=e.permission)||void 0===t?void 0:t.toUpperCase())?{disabled:!1}:{disabled:!0,tooltip:$("onlyOwnerCanCreate")}};return a.createElement(Q.Z,{name:t,fieldProps:{label:""},getTreeProps:function(e){var t,r=e.field,o=e.fieldHelpers;return{mode:Q.Z.MODES.SINGLESELECT,path:(null===(t=r.value)||void 0===t?void 0:t.path)||K.W_,includePrivateFolders:!1,customAdapter:n,onFolderSelect:function(e){o.setValue(e)},onInitialFolderData:function(e){o.setValue(e)},getPathConfig:c}}})}var te=(0,i.nD)("clientPortal.workspaces.form.folder");function ne(e){var t=e.name,n=(0,a.useMemo)((function(){return(0,Y.Z)([])}),[]);return a.createElement(c.$0,{title:te("title"),subtitle:te("subtitle")},a.createElement("div",{className:"PaNQHh6Ai9Lb_sjafGS9"},a.createElement(ee,{adapter:n,name:t}),a.createElement(H.Z,{name:t})))}},238877:function(e,t,n){var r=n(735691),o=n(762074),a=n(943435),i=(0,o.nD)("clientPortal.workspaces.form.resources"),c=r.Ry().shape({name:r.Z_().trim().min(a.Lv.default).max(a.wN.resources.contacts.default).optional().test("required-with-other-fields",(0,o.t)("error.required"),(function(e){var t=this.parent,n=t.email,r=t.phoneNumber,o=t.extension;return!(n||r||o)||!!e})),email:r.Z_().trim().min(a.Lv.default).max(a.wN.resources.contacts.default).email().optional(),phoneNumber:r.Z_().trim().min(a.Lv.default).max(a.wN.resources.contacts.default).optional().test("required-with-extension",(0,o.t)("error.required"),(function(e){return!this.parent.extension||!!e})),extension:r.Z_().trim().max(a.wN.resources.contacts.default).optional()}),l=r.Ry().shape({link:r.Z_().trim().min(a.Lv.default).max(a.wN.resources.links.link).url().optional().test("required-with-name-or-description",(0,o.t)("error.required"),(function(e){var t=this.parent,n=t.name,r=t.description;return!n&&!r||!!e})).test("starts-with-http-or-https",i("errors.httpOrHttps"),(function(e){return!e||/^https?:\/\//.test(e)})),name:r.Z_().trim().min(a.Lv.default).max(a.wN.resources.links.name).folderPath((0,o.t)("error.invalidName",{forbiddenChars:'* ? / \\ : < > " |'})).optional().test("required-with-link-or-description",(0,o.t)("error.required"),(function(e){var t=this.parent,n=t.link,r=t.description;return!n&&!r||!!e})),description:r.Z_().trim().min(a.Lv.default).max(a.wN.resources.links.description).optional()});t.Z=r.Ry().shape({contacts:r.IX().of(c),links:r.IX().of(l)})},943435:function(e,t,n){n.d(t,{Jd:function(){return T},Lv:function(){return g},Xh:function(){return p},YQ:function(){return b},d4:function(){return f},dz:function(){return v},kl:function(){return I},mG:function(){return E},tA:function(){return O},wN:function(){return P}});var r,o,a,i,c,l,s=n(204942),u=n(145987),m=n(74686),d={GENERAL:"GENERAL",RESOURCES:"RESOURCES",ACCESS:"ACCESS",TEMPLATE_VARIABLES:"TEMPLATE_VARIABLES",FOLDER:"FOLDER",EXTERNAL_USERS:"EXTERNAL_USERS"},p=(c=d,(0,u.Z)(c,["EXTERNAL_USERS"]),{GENERAL:(l=d).GENERAL,RESOURCES:l.RESOURCES,EXTERNAL_USERS:l.EXTERNAL_USERS}),E={EMPTY:"EMPTY",EMPTY_IN_PARENT_FOLDER:"EMPTY_IN_PARENT_FOLDER",FROM_TEMPLATE:"FROM_TEMPLATE",FROM_TEMPLATE_IN_PARENT_FOLDER:"FROM_TEMPLATE_IN_PARENT_FOLDER",FROM_EXISTING_FOLDER:"FROM_EXISTING_FOLDER"},f=(r={},(0,s.Z)(r,E.EMPTY,"Blank"),(0,s.Z)(r,E.EMPTY_IN_PARENT_FOLDER,"Blank in Parent Folder"),(0,s.Z)(r,E.FROM_TEMPLATE,"Template"),(0,s.Z)(r,E.FROM_TEMPLATE_IN_PARENT_FOLDER,"Template in Parent Folder"),(0,s.Z)(r,E.FROM_EXISTING_FOLDER,"Existing Folder"),r),O=(o={},(0,s.Z)(o,m.iM.E_SIGNATURE,"E-Signature"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.TODO,"To-Do"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.REVIEW,"Review"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.APPROVAL,"Approval"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.WEBHOOK,"Webhook"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.MOVE_FILE,"Move file"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.CONVERT_FILE,"Convert file"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.SET_METADATA,"Add metadata"),(0,s.Z)(o,m.SS.WORKFLOW.task.types.AI_PROMPT,"AI prompt"),(0,s.Z)(o,m.SS.UPLOAD_REQUEST.task.types.PENDING_UPLOAD,"Upload Request - Upload"),(0,s.Z)(o,m.SS.UPLOAD_REQUEST.task.types.PENDING_REVIEW,"Upload Request - Review"),o),b={HOME:"HOME",TASKS:"TASKS",FILES:"FILES"},v=(a={},(0,s.Z)(a,b.HOME,"dashboard"),(0,s.Z)(a,b.TASKS,"tasks"),(0,s.Z)(a,b.FILES,"files"),a),I=(i={},(0,s.Z)(i,b.HOME,"Home"),(0,s.Z)(i,b.TASKS,"Tasks"),(0,s.Z)(i,b.FILES,"Files"),i),T={CREATED_BY:"CREATED_BY",ASSIGNED_BY:"ASSIGNED_BY"},g={default:3},P={name:50,description:500,resources:{contacts:{default:50},links:{link:255,name:50,description:255}}}},652450:function(e,t,n){n.d(t,{B:function(){return a}});var r=n(204942);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({RENAME:"rename",DOWNLOAD:"download",CREATE_SHORTCUT:"createShortcut",ADD_BOOKMARK:"addBookmark",REMOVE_BOOKMARK:"removeBookmark",COPY_MOVE:"copyMove",COPY:"copy",MOVE:"move",DUPLICATE:"duplicate",EDIT_PDF:"editPdf"},n(345247).lh)},358156:function(e,t,n){n.d(t,{MP:function(){return Z},R$:function(){return P},sL:function(){return N}});var r=n(529439),o=n(667294),a=n(776327),i=n(762074),c=n(787781),l=n(604769),s=n(716962),u=n(792189),m=n(567421),d=n(590624),p=n(568070),E=n(267807),f=n(449654),O=n(461498),b=n(369889),v=n(540810),I=n(347392),T=n(57324),g=n(868430),P={COPILOT:"copilot_submenu",ASK_AI:"globalCopilot",PREVIEW_ASK:"previewAsk",CREATE_KNOWLEDGE_BASE:"createKnowledgeBase"};function N(e){var t=e.shouldGoToFolderPath;return(0,l.hV)({id:P.PREVIEW_ASK,label:(0,i.t)("copilotHub.contextMenu.label"),icon:m.w2,permissions:[s.W.PREVIEW_ASK],onClick:function(e){var n,o=e.selectedItems,a=(0,r.Z)(o,1)[0];b.ZP.run(a,a.collection,{actionSource:v.Z.CONTEXT_MENU,gotoFolderPath:!!t&&c.ZP.getParentPath(a.get("path")),showSmartTags:(0,u.tz)(),disableNavigateTrigger:(0,I.GB)(),workspaceId:null!==(n=(0,I.yT)())&&void 0!==n?n:void 0,panelToOpen:b.ZP.PANELS.ASK})}})}function Z(){var e=(0,p.F8)(),t=(0,d.Z)().aiSourceSelectorFeatureEnabled;return(0,o.useMemo)((function(){return(0,l.Ge)({id:P.COPILOT,label:(0,i.t)("copilotHub.contextMenu.label"),icon:m.w2,actions:[(0,l.hV)({id:P.ASK_AI,label:(0,i.t)("storage.actions.askAI"),permissions:[s.W.GLOBAL_COPILOT],onClick:function(n){var r=n.selectedItems;(0,u.tz)()&&e?e.handleSelection({selections:r,shouldExpand:!0}):(a.ZP.trigger(a.ZP.Events.Storage.GLOBAL_COPILOT,{selections:r,shouldExpand:!0}),t&&(0,g.e0)(JSON.stringify(r)))}}),(0,l.hV)({id:P.CREATE_KNOWLEDGE_BASE,label:(0,i.t)("knowledgeBaseAssistant.menu.label"),permissions:[s.W.CREATE_KNOWLEDGE_BASE],onClick:function(e){var t=e.selectedItems,n=(0,r.Z)(t,1)[0],o=(0,T.cX)(n);(0,E.S1)({entryPoint:O.eR.CONTEXT_MENU}),(0,f.Z)({folderDetails:{id:o.id,name:o.name,path:o.path},entryPoint:O.eR.CONTEXT_MENU})}})]})}),[e,t])}},667103:function(e,t,n){n.d(t,{U:function(){return b},b:function(){return f}});var r=n(529439),o=n(762074),a=n(227654),i=n(431436),c=n(401552),l=n(604769),s=n(823592),u=n(227052),m=n(549998),d=n(716962),p=n(297681),E=(0,o.nD)("storage.actions.crossDomainFolders"),f={CREATE_CROSS_DOMAIN_CONNECTION:"createCrossDomainConnection",MANAGE_ALL_CROSS_DOMAIN_CONNECTIONS:"manageAllCrossDomainConnections",EDIT_CONNECTION_REQUEST:"editConnectionRequest",CROSS_DOMAIN_FOLDERS_SUBMENU:"crossDomainFoldersSubmenu"},O=function(e){var t="crossDomainInfo"in e&&e.crossDomainInfo?e.crossDomainInfo.filter((function(e){return e.connectionType===m.d9.OUTGOING})):[];return(0,l.Ge)({id:f.EDIT_CONNECTION_REQUEST,label:E("editConnectionRequest"),actions:t.map((function(e){var t=e.jobName,n=e.status,r=e.connectionId;return(0,l.hV)({id:t,label:t,disabledReason:n===m.CY.ERROR?E("tooltips.cannotBeEdited"):void 0,onClick:function(){(0,i.u)({connectionId:r}),i.c.trackOpenEditConnectionRequestModal()}})}))})},b=function(e){var t=e.selectedItems,n=c.ZP.isAdmin()&&1===t.length,o=(0,s.xH)(t),m=(0,r.Z)(o,1)[0];return(0,l.Ge)({id:f.CROSS_DOMAIN_FOLDERS_SUBMENU,label:E("title"),icon:a.Z,tooltip:E("tooltips.title"),actions:[(0,l.hV)({permissions:[d.W.CREATE_CROSS_DOMAIN_CONNECTION],id:f.CREATE_CROSS_DOMAIN_CONNECTION,label:E("create"),onClick:function(e){var t=e.selectedItems;(0,i.u)({folderItems:(0,s.xH)(t)}),i.c.trackOpenNewRequestModal()}}),(0,l.hV)({permissions:[d.W.MANAGE_ALL_CROSS_DOMAIN_CONNECTIONS],id:f.MANAGE_ALL_CROSS_DOMAIN_CONNECTIONS,label:E("manageAllConnections"),tooltip:E("tooltips.secureAndGovernV2"),onClick:function(){u.Z.openInWindow({customRedirectUrl:p.Wg.CROSS_DOMAIN_FOLDERS}),i.c.trackManageAllConnectionsClick()}}),n&&O(m)].filter(Boolean)})}},654777:function(e,t,n){n.d(t,{vX:function(){return P},x5:function(){return Z}});var r=n(204942),o=n(762074),a=n(305738),i=n(299452),c=n(604769),l=n(964280),s=n(494090),u=n(667294),m=n(57324),d=n(460474),p=n(716962),E=n(482282),f="unlock";var O=n(987518),b=n(216914),v=n(681304),I=n(870938);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={LOCK:"lock",UNLOCK_ACTION_ID:f,DELETE:"delete"};function N(e){var t=(0,v.e)(),n=(0,v.x)(t);return(0,c.hV)(g(g({permissions:[p.W.DELETE],id:P.DELETE,icon:i.g,label:(0,o.t)("storage.actions.delete"),variant:s.Z.variants.ERROR},e&&{shortcut:{label:n.DELETE,keys:{code:I.X.BACKSPACE.code}}}),{},{onClick:function(e){var t=e.selectedItems,n=[p.W.DELETE],r=(0,b.eG)(t,n);r.length>=1&&r.length<t.length?O.Z.mixedHandler({selectedItems:t,permissions:n}):O.Z.normalHandler({selectedItems:t})}}))}function Z(e){var t,n,r,i,s=(t={selectedItems:e.selectedItems},n=t.selectedItems,r=(0,d.Z)("collaborativeEditingUnlockingFilesEnabled"),i=(0,u.useMemo)((function(){return n.some(m.Uw)}),[n]),(0,u.useMemo)((function(){return function(e){var t=e.collaborativeEditingUnlockingFilesEnabled,n=e.hasCollaborationOngoing;return(0,c.hV)({permissions:[p.W.UNLOCK],id:f,label:(0,o.t)("storage.actions.unlock"),tooltip:t&&n?(0,o.t)("actions.collaboration.unlockingEndsCoeditingSession"):void 0,icon:a.Y,onClick:function(e){var t=e.selectedItems;(0,E.W)(t)?(0,E.n)({items:t,unlockItems:function(){return(0,l.Ds)(t)}}):(0,l.Ds)(t)}})}({collaborativeEditingUnlockingFilesEnabled:r,hasCollaborationOngoing:i})}),[r,i])),O=(0,d.Z)("contextMenuShortcutsEnabled");return(0,u.useMemo)((function(){return function(e){var t=e.unlockActionSchema,n=e.isContextMenuShortcutsEnabled;return[(0,c.hV)({permissions:[p.W.LOCK],id:P.LOCK,icon:a.h,label:(0,o.t)("storage.actions.lock"),onClick:function(e){var t=e.selectedItems;(0,l.PI)(t)}}),t,N(n)]}({unlockActionSchema:s,isContextMenuShortcutsEnabled:O})}),[s,O])}},406306:function(e,t,n){n.d(t,{fm:function(){return O},uE:function(){return f}});var r=n(667294),o=n(604769),a=n(289578),i=n(868660),c=n(823592),l=n(23645),s=n(369889),u=n(540810),m=n(762074),d=n(333340),p=n(218629),E=n(716962);function f(e){var t=e.selectedItems,n=(0,d.EE)(t[0].id,p.kE.ALL,{enabled:1===t.length&&"file"===t[0].attributes.type}).workflowsCount;return(0,r.useMemo)((function(){return function(e){var t=e.workflowsCount;return(0,o.hV)({permissions:[E.W.TASKS],id:"tasks",icon:a.k,label:(0,m.t)("storage.actions.workflows"),count:t,onClick:function(e){var t=e.selectedItems;s.ZP.run(t[0],t[0].collection,{panelToOpen:s.ZP.PANELS.TASKS,actionSource:u.Z.CONTEXT_MENU})}})}({workflowsCount:n.all})}),[n])}function O(){return(0,o.Ge)({permissions:[E.W.SEND_E_SIGNATURE_REQUEST,E.W.CREATE_E_SIGNATURE_TEMPLATE],id:"egnyte-sign-submenu",label:(0,m.t)("actions.eSign.label"),icon:i.nn,actions:[(0,o.hV)({permissions:[E.W.SEND_E_SIGNATURE_REQUEST],id:"eSignatureMenu",label:(0,m.t)("actions.eSign.sendForSignature"),onClick:function(e){var t=e.selectedItems,n=(0,c.xH)(t);(0,l.P)(n)}}),(0,o.hV)({permissions:[E.W.CREATE_E_SIGNATURE_TEMPLATE],id:"eSignatureTemplateMenu",label:(0,m.t)("actions.eSign.createTemplate"),tooltip:(0,m.t)("actions.eSign.createTemplateTooltip"),onClick:function(e){var t=e.selectedItems,n=(0,c.xH)(t);(0,l.P)(n,{isCreateMode:!0})}})]})}},26136:function(e,t,n){n.d(t,{MM:function(){return E},PD:function(){return O}});var r=n(667294),o=n(604769),a=n(540810),i=n(762074),c=n(302782),l=n(369889),s=n(716962),u=n(499690),m=n(803472),d=n(802535),p=n(602577),E={FILE_PROPERTIES:"fileProperties",COMMENTS:"comments",FILE_DETAILS:"fileDetails",VERSIONS:"versions"},f=function(e){var t;return(0,o.hV)({permissions:[s.W.COMMENTS],id:E.COMMENTS,label:(0,i.t)("storage.actions.comments"),icon:u.z6,count:null===(t=e.attributes.notes)||void 0===t?void 0:t.count,onClick:function(e){var t=e.selectedItems;l.ZP.run(t[0],t[0].collection,{panelToOpen:l.ZP.PANELS.COMMENTS,actionSource:a.Z.CONTEXT_MENU})}})};function O(e){var t=e.item;return(0,r.useMemo)((function(){return function(e){var t=e.item;return(0,o.Ge)({id:E.FILE_PROPERTIES,label:(0,i.t)("storage.actions.fileProperties"),icon:p.x,actions:[f(t),(0,o.hV)({permissions:[s.W.FILE_DETAILS],id:E.FILE_DETAILS,label:(0,i.t)("storage.actions.fileDetails"),icon:m.y,onClick:function(e){var t=e.selectedItems;l.ZP.run(t[0],t[0].collection,{panelToOpen:l.ZP.PANELS.METADATA,actionSource:a.Z.CONTEXT_MENU})}}),(0,o.hV)({permissions:[s.W.VERSIONS],id:E.VERSIONS,label:(0,i.t)("storage.actions.versions"),icon:d.b,onClick:function(e){var t=e.selectedItems;(0,c.Z)(t[0],{actionSource:a.Z.CONTEXT_MENU})}})]})}({item:t})}),[t])}},840258:function(e,t,n){n.d(t,{Ah:function(){return k},BM:function(){return h},GQ:function(){return j},KY:function(){return R},O4:function(){return D},_8:function(){return L},fx:function(){return M},kH:function(){return C},qY:function(){return A}});var r=n(529439),o=n(115861),a=n(364687),i=n.n(a),c=n(667294),l=n(604769),s=n(762074),u=n(818356),m=n(480414),d=n(383433),p=n(557035),E=n(40509),f=n(397404),O=n(102966),b=n(961281),v=n(869506),I=n(271938),T=n(433357),g=n(183526),P=n(301245),N=n(827289),Z=n(943435),y=n(716962),S=n(57324),D={HOME_FOLDER:"homeFolder",MARK_AS_DOCUMENT_ROOM:"markAsDocumentRoom",MARK_AS_WORKSPACE:"markAsWorkspace",PROJECT_SETTINGS:"projectSettings",DOCUMENT_ROOM_SETTINGS:"documentRoomSettings",PROJECT_TEMPLATE_SETTINGS:"projectTemplateSettings",DOCUMENT_ROOM_TEMPLATE_SETTINGS:"documentRoomTemplateSettings",WORKSPACE_TEMPLATE_SETTINGS:"workspaceTemplateSettings"},R=function(){return(0,l.hV)({permissions:[y.W.HOME_FOLDER],id:D.HOME_FOLDER,label:(0,s.t)("actions.folderActions.setHomeFolder"),icon:m.T,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedItems,r=c.createElement(E.Z.SemiBold,null,n[0].get("name")),e.prev=2,e.next=5,O.Z.getInstance().updatePref("homeFolder",n[0].id);case 5:(0,f.c0)(f.em.success,(0,s.t)("homeDashboard.setAsDefaultViewSuccessV2",{folderName:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),(0,f.c0)(f.em.error,(0,s.t)("homeDashboard.setAsDefaultViewFailureV2",{folderName:r}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(t){return e.apply(this,arguments)})});var e},C=function(){return(0,l.hV)({permissions:[y.W.MARK_AS_DOCUMENT_ROOM],id:D.MARK_AS_DOCUMENT_ROOM,label:(0,s.t)("actions.folderActions.markAsDocumentRoom"),icon:d.l,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],c=(0,S.cX)(a),(0,g.J)(c.id,c.name,(0,P.ns)(c));case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e},A=function(){return(0,l.hV)({permissions:[y.W.MARK_AS_WORKSPACE],id:D.MARK_AS_WORKSPACE,label:(0,s.t)("actions.folderActions.markAsWorkspace"),icon:u.h1,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],c=(0,S.cX)(a),(0,N.F7)({flowKey:Z.mG.FROM_EXISTING_FOLDER,workspaceFolder:{id:c.id,name:c.name,path:c.path}});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e},h=function(){return(0,l.hV)({permissions:[y.W.PROJECT_SETTINGS],id:D.PROJECT_SETTINGS,label:(0,s.t)("actions.folderActions.projectSettings"),icon:p.C,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],c=(0,S.cX)(a),(0,v.Z)({folderId:c.id,folderName:c.name,folderPath:c.path,canManageProjects:(0,T.h)(c.permission)});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e},M=function(){return(0,l.hV)({permissions:[y.W.DOCUMENT_ROOM_SETTINGS],id:D.DOCUMENT_ROOM_SETTINGS,label:(0,s.t)("actions.folderActions.documentRoomSettings"),icon:p.C,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],c=(0,S.cX)(a),(0,g.q)({folderId:c.id,folderName:c.name,canEditWatermarkingValue:(0,P.ns)(a)});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e},k=function(){return(0,l.hV)({permissions:[y.W.PROJECT_TEMPLATE_SETTINGS],id:D.PROJECT_TEMPLATE_SETTINGS,label:(0,s.t)("actions.folderActions.projectTemplateSettings"),icon:p.C,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],(0,b.Z)({folderModel:a});case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e},L=function(){return(0,l.hV)({permissions:[y.W.DOCUMENT_ROOM_TEMPLATE_SETTINGS],id:D.DOCUMENT_ROOM_TEMPLATE_SETTINGS,label:(0,s.t)("actions.folderActions.documentRoomTemplateSettings"),icon:p.C,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],c=(0,S.cX)(a),(0,I.Z)({folderId:c.id,folderPath:c.path,permission:c.permission});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e},j=function(){return(0,l.hV)({permissions:[y.W.WORKSPACE_TEMPLATE_SETTINGS],id:D.WORKSPACE_TEMPLATE_SETTINGS,label:(0,s.t)("actions.folderActions.workspaceTemplateSettings"),icon:p.C,onClick:(e=(0,o.Z)(i().mark((function e(t){var n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedItems,o=(0,r.Z)(n,1),a=o[0],c=(0,S.cX)(a),(0,N.J1)({folderId:c.id});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});var e}},274042:function(e,t,n){n.d(t,{O:function(){return u}});var r=n(204942),o=n(667294),a=n(474935),i=n(576415),c=n(544663),l=n(42594);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){var t=e.selectedItem,n=(0,i.me)({folderId:t.id.toString(),folderPath:(0,l.DW)(t),permission:t.get("permission")});return(0,o.useMemo)((function(){return function(e){var t=e.teamManagement;return t.showTeamManagement?(0,c.Z)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)):(0,a.Z)({})}({teamManagement:n})}),[n])}},828800:function(e,t,n){n.d(t,{sJ:function(){return Pe},mL:function(){return Ne},FX:function(){return fe},bn:function(){return Oe},eh:function(){return Ie},MH:function(){return Te},dC:function(){return be},jw:function(){return Ee},I7:function(){return ve},K0:function(){return ge},bd:function(){return Ze}});var r=n(115861),o=n(529439),a=n(204942),i=n(364687),c=n.n(i),l=n(667294),s=n(762074),u=n(604769),m=n(461188),d=n(179565),p=n(716962),E=n(57324),f=n(772299),O=n(730824),b=n(278714),v=n(969267),I=n(777814),T=n(887302),g=n(179755),P=n(921758),N=n(609777),Z=n(867071),y=n(951695),S=n(803472),D=n(285134),R=n(462826),C=n(741127),A=n(690415),h=n(266606),M=n(197147),k=n(582278),L=n(495054),j=n(205339),w=n(680087),_=n(419452),F=n(264802),U=n(918233),V=n(223901),x=n(892053),W=n(680252),z=n(156552),G=n(397404),B=n(193645),Y=n(771591),H=n(13764),Q=n(240701),K=n(23661),X=n(963648),q=n(610861),J="migrateToQuality",$=function(e){return(0,G.c0)(G.em.error,(null==e?void 0:e.message)||(0,s.t)("qualityDocs.makeEffective.notifications.metadataFailed"),{persist:!1})},ee=n(75237),te="kYcqsA8PAH0wPRfK0aHl",ne=n(974682),re=n(166823),oe=n(832297),ae=n(986619);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le={CONVERT_TO_POWERPOINT:"convertToPowerpoint",CONVERT_TO_WORD:"convertToWord",CONVERT_TO_EXCEL:"convertToExcel",CONVERT_TO_PDF:"convertToPdf",CONVERT_TO_SUBMENU:"convertToSubmenu"},se=n(667103);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=me(me(me({MORE_ACTIONS_SUBMENU:"moreActionsSubmenu",PUBLISH_DRAFT_DOCUMENT:"publishDraftDocument",EDIT_URL_FILE:"editURLFile",OPEN_IN_DESKTOP_APP:"openInDesktopApp",UPLOAD_TO_ETMF:"uploadToEtmf",DOWNLOAD_EXTRACTED_CONTENT:"downloadExtractedContent",REQUEST_TO_RESTORE_INACTIVE_CONTAINER:"requestToRestoreInactiveContainer",FOLDER_OPTIONS:"folderOptions",INACTIVE_FOLDER_OPTIONS:"inactiveFolderOptions",PROTECT_SECURITY_ANALYTICS:"protectSecurityAnalytics",COMPARE_DOCUMENT:"compareDocument",RESTORE_FROM_SNAPSHOT:"restoreFromSnapshot",MORE_LIKE_THIS_OPTION:"moreLikeThisOption",MORE_LIKE_THIS_OPTION_FOR_IMAGES:"moreLikeThisOptionForImages",DOCUMENT_ROOM_DOWNLOAD_CSV_INDEX_REPORT:"downloadCSVDocumentRoomIndexReport",DOWNLOAD_TRANSCRIPT:"downloadTranscript"},se.b),le),{},{MIGRATE_TO_QUALITY_ACTION_ID:J}),pe=function(e){var t=e.selectedItems,n=(1===t.length?(0,E.zE)(t[0]):t.length>1)?(0,s.t)("actions.openIn.openInDesktopAppParentFolderHint"):void 0;return(0,u.hV)({permissions:[p.W.OPEN_IN_DESKTOP_APP],id:de.OPEN_IN_DESKTOP_APP,label:(0,s.t)("actions.openIn.openInDesktopAppV2"),tooltip:n,icon:y.U,onClick:function(e){var t,n=e.selectedItems,r=(0,o.Z)(n,1)[0],a=(0,E.cX)(r);1===n.length?(0,E.zE)(r)?(0,ee.h)(a.id,a.name):(0,E.qR)(r)&&(0,ee.B)(a.id,a.name):a.parentId&&null!==(t=a.parentFolder)&&void 0!==t&&t.name&&(0,ee.B)(a.parentId,a.parentFolder.name)}})},Ee=function(){return(0,u.hV)({permissions:[p.W.REQUEST_TO_RESTORE_INACTIVE_CONTAINER],id:de.REQUEST_TO_RESTORE_INACTIVE_CONTAINER,label:(0,s.t)("storage.actions.requestToRestoreInactiveContainer"),icon:I.b,onClick:function(e){var t=e.selectedItems,n=(0,o.Z)(t,1)[0],r=(0,E.cX)(n),a=r.id,i=r.path;(0,L.Z)({folderId:a,folderPath:i})}})},fe=function(){return(0,u.hV)({permissions:[p.W.FOLDER_OPTIONS],id:de.FOLDER_OPTIONS,label:(0,s.t)("storage.actions.detailsAndOptions"),icon:S.y,onClick:function(e){var t=e.selectedItems,n=(0,o.Z)(t,1)[0];(0,j.Z)(n,(function(){var e;null==n||null===(e=n.collection)||void 0===e||e.fetch(),n.fetch()}))}})},Oe=function(){return(0,u.hV)({permissions:[p.W.INACTIVE_FOLDER_OPTIONS],id:de.INACTIVE_FOLDER_OPTIONS,label:(0,s.t)("storage.actions.detailsAndOptions"),icon:S.y,onClick:function(e){var t=e.selectedItems,n=(0,o.Z)(t,1)[0];(0,j.Z)(n,(function(){var e;null==n||null===(e=n.collection)||void 0===e||e.fetch(),n.fetch()}))}})},be=function(){return(0,u.hV)({permissions:[p.W.PROTECT_SECURITY_ANALYTICS],id:de.PROTECT_SECURITY_ANALYTICS,label:(0,s.t)("storage.actions.folderInsights"),"data-pendoid":"folder-insights-context-menu-option",icon:T.OL,onClick:function(e){var t=e.selectedItems,n=(0,o.Z)(t,1)[0],r=(0,E.cX)(n),a=r.id,i=r.name,c=r.path;(0,w.T)({id:a,name:i,path:c}),h.Z.track(w.S.FOLDER_INSIGHTS_MODAL_OPENED)}})},ve=function(){return(0,u.hV)({permissions:[p.W.RESTORE_FROM_SNAPSHOT],id:de.RESTORE_FROM_SNAPSHOT,label:(0,s.t)("storage.actions.restoreFromSnapshot"),icon:I.b,onClick:function(e){var t=e.selectedItems;(0,q.h7)(l.createElement(M.Z,{items:t}),{size:q.ZP.sizes.XL,onRequestClose:q.Mr,withCloseButton:!0})}})},Ie=function(){return(0,u.hV)({permissions:[p.W.MORE_LIKE_THIS_OPTION],id:de.MORE_LIKE_THIS_OPTION,label:(0,s.t)("storage.actions.moreLikeThis"),icon:P.Vn,onClick:function(e){var t=(0,o.Z)(e.selectedItems,1)[0],n=(0,E.cX)(t),r=n.id,a=n.name,i=n.entryId||r;i&&A.ZP.getMoreLikeThisSearchResults(i,r,a)}})},Te=function(){return(0,u.hV)({permissions:[p.W.MORE_LIKE_THIS_OPTION_FOR_IMAGES],id:de.MORE_LIKE_THIS_OPTION_FOR_IMAGES,label:(0,s.t)("storage.actions.moreLikeThis"),icon:P.Vn,onClick:function(e){var t=(0,o.Z)(e.selectedItems,1)[0],n=(0,E.cX)(t),r=n.id,a=n.name,i=n.entryId||r;i&&A.ZP.getMoreLikeThisSearchResults(i,r,a,U.LV.GALLERY)}})};function ge(){var e=(0,V.Wm)().data,t=void 0===e?[]:e;return(0,l.useMemo)((function(){return(0,u.hV)({permissions:[p.W.DOCUMENT_ROOM_DOWNLOAD_CSV_INDEX_REPORT],id:de.DOCUMENT_ROOM_DOWNLOAD_CSV_INDEX_REPORT,label:(0,s.t)("storage.actions.documentRoomDownloadCSVIndexReport"),icon:D.a,onClick:function(e){var n=(0,o.Z)(e.selectedItems,1)[0];(0,x.t)(n,{documentRooms:t}),h.Z.track(C.FP.INDEX_REPORT_DOWNLOADED,me({},(0,W.zs)()))}})}),[t])}var Pe=function(){return(0,u.hV)({permissions:[p.W.DOWNLOAD_EXTRACTED_CONTENT],id:de.DOWNLOAD_EXTRACTED_CONTENT,label:(0,s.t)("storage.actions.downloadExtractedContentV2"),icon:D.a,onClick:function(e){e.selectedItems.forEach((function(e){(0,R.Z)(e.id.toString())}))}})},Ne=function(){return(0,u.hV)({permissions:[p.W.DOWNLOAD_TRANSCRIPT],id:de.DOWNLOAD_TRANSCRIPT,label:(0,s.t)("storage.actions.downloadTranscript"),icon:N._1,onClick:(e=(0,r.Z)(c().mark((function e(t){var n,r,a,i,u,m,d,p,f,O,b,v,I;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,o.Z)(t.selectedItems,1),r=n[0],a=(0,E.cX)(r),i=a.entryId,u=a.parentId,m=a.name,!i){e.next=24;break}return e.prev=3,e.next=6,(0,z.VD)(i);case 6:if(h.Z.track("Create transcript button clicked"),p=r.parentFolder,f=B.Z.toRawNode(p),p||!u){e.next=13;break}return e.next=12,(0,K.ZP)(Q.Z.FSI.ITEM(u));case 12:f=e.sent;case 13:O=(0,H.zm)(null===(d=f)||void 0===d?void 0:d.permission),(0,Y.av)({entryId:i,fileName:m,parentFolder:O?f:null}),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(3),null===(b=e.t0.response)||void 0===b||!b.status){e.next=23;break}return v=(0,z.ro)(e.t0.response.status),I=v.message,(0,G.c0)(G.em.error,l.createElement("p",{className:te},I)),e.abrupt("return");case 23:(0,G.c0)(G.em.error,l.createElement("p",{className:te},(null===e.t0||void 0===e.t0?void 0:e.t0.message)||(0,s.t)("error.default")));case 24:case"end":return e.stop()}}),e,null,[[3,17]])}))),function(t){return e.apply(this,arguments)})});var e},Ze=function(e){var t,a,i,I,T,N=e.selectedItems,y=ge(),S=(t={selectedItems:N},a=(0,o.Z)(t.selectedItems,1)[0],i=(0,E.cX)(a).entryId,I=(0,X.Dy)(i).refetch,T=(0,l.useCallback)(function(){var e=(0,r.Z)(c().mark((function e(t){var r,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([I(),Promise.all([n.e(532),n.e(1329),n.e(1336)]).then(n.bind(n,461336))]);case 3:if(r=e.sent,a=(0,o.Z)(r,2),s=a[0],u=a[1].default,!s.isError&&!s.error){e.next=10;break}return $(s.error),e.abrupt("return");case 10:if(s.data){e.next=13;break}return $(),e.abrupt("return");case 13:(0,q.h7)(l.createElement(u,{imported:!0,fileName:t.get("name"),metadata:s.data,entryId:i}),{onRequestClose:q.Mr}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),$(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),[i,I]),(0,u.hV)({permissions:[p.W.MIGRATE_TO_QUALITY],id:J,label:(0,s.t)("storage.actions.migrateToQuality"),icon:P.I2,onClick:function(e){var t=(0,o.Z)(e.selectedItems,1)[0];T(t)}})),D=function(e){var t=(0,ae.A)({selectedItems:e});return(0,l.useMemo)((function(){return function(e){var t=(0,u.mz)([(0,u.hV)({permissions:[p.W.CONVERT_TO_POWERPOINT],id:le.CONVERT_TO_POWERPOINT,label:(0,s.t)("storage.actions.convert.extension.pptx"),icon:ne.UU,onClick:function(e){var t=e.selectedItems;(0,re.Z)({file:(0,E.cX)(t[0]),targetExtension:"pptx"})}}),(0,u.hV)({permissions:[p.W.CONVERT_TO_WORD],id:le.CONVERT_TO_WORD,label:(0,s.t)("storage.actions.convert.extension.docx"),icon:ne.JU,onClick:function(e){var t=e.selectedItems;(0,re.Z)({file:(0,E.cX)(t[0]),targetExtension:"docx"})}}),(0,u.hV)({permissions:[p.W.CONVERT_TO_EXCEL],id:le.CONVERT_TO_EXCEL,label:(0,s.t)("storage.actions.convert.extension.xlsx"),icon:ne.RD,onClick:function(e){var t=e.selectedItems;(0,re.Z)({file:(0,E.cX)(t[0]),targetExtension:"xlsx"})}}),(0,u.hV)({permissions:[p.W.CONVERT_TO_PDF],id:le.CONVERT_TO_PDF,label:(0,s.t)("storage.actions.convert.extension.pdf"),icon:oe.c,onClick:function(e){var t=e.selectedItems;(0,re.Z)({file:(0,E.cX)(t[0]),targetExtension:"pdf"})}})],e);if(1===t.length){var n=t[0];return ce(ce({},n),{},{permissions:[p.W.CONVERT_TO],label:(0,s.t)("storage.actions.convert.convertTo",{extension:n.label})})}return(0,u.Ge)({permissions:[p.W.CONVERT_TO],id:le.CONVERT_TO_SUBMENU,label:(0,s.t)("storage.actions.convert.label"),icon:oe.c,actions:t})}(t)}),[t])}(N);return(0,l.useMemo)((function(){return(0,u.Ge)({id:de.MORE_ACTIONS_SUBMENU,label:(0,s.t)("actions.moreActions"),icon:Z.gw,sort:function(e,t){return("label"in e?e.label:"").localeCompare("label"in t?t.label:"")},actions:[(0,u.hV)({permissions:[p.W.PUBLISH_DRAFT_DOCUMENT],id:de.PUBLISH_DRAFT_DOCUMENT,label:(0,s.t)("storage.actions.publishDraftDocument"),icon:O.Q8,onClick:function(e){var t=e.selectedItems,n=(0,o.Z)(t,1)[0],r=(0,E.cX)(n),a=r.id,i=r.name;(0,d.Z)({documentName:i,fileGroupId:a}),(0,m.I)()}}),(0,u.hV)({permissions:[p.W.EDIT_URL_FILE],id:de.EDIT_URL_FILE,label:(0,s.t)("actions.editActions.edit"),icon:b.T,onClick:function(e){var t=e.selectedItems,n=(0,o.Z)(t,1)[0],r=(0,E.cX)(n);(0,f.Z)({file:r})}}),pe({selectedItems:N}),(0,u.hV)({permissions:[p.W.UPLOAD_TO_ETMF],id:de.UPLOAD_TO_ETMF,label:(0,s.t)("storage.actions.uploadToEtmf"),icon:v.K,onClick:function(e){var t=e.selectedItems.map((function(e){return(0,k.VT)(e.toJSON())}));(0,k.cL)({mode:k.wM.NONE,files:t,labels:{title:(0,s.t)("eTMF.uploadDocumentsToEtmf"),actions:{upload:(0,s.t)("eTMF.uploadToEtmf")}}})}}),Pe(),y,S,Ee(),Ne(),Ie(),Te(),(0,u.hV)({permissions:[p.W.COMPARE_DOCUMENT],id:de.COMPARE_DOCUMENT,label:(0,s.t)("storage.actions.compareDocument"),icon:g.Bd,onClick:function(e){var t=e.selectedItems;(0,_.Z)({closePreview:F.Z,document:(0,E.cX)(t[0])})}}),ve(),fe(),Oe(),be(),D,(0,se.U)({selectedItems:N})]})}),[D,y,S,N])}},345247:function(e,t,n){n.d(t,{Xt:function(){return h},bo:function(){return M},d3:function(){return C},iG:function(){return A},lh:function(){return S},m5:function(){return R},rh:function(){return D}});var r=n(204942),o=n(93433),a=n(529439),i=n(667294),c=n(762074),l=n(2764),s=n(986619),u=n(604769),m=n(540810),d=n(26346),p=n(278714),E=n(951695),f=n(841413),O=n(307179),b=n(373897),v=n(954033),I=n(381908),T=n(823592),g=n(716962),P=n(369889),N=n(151548);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={COLLABORATION_SUBMENU_ID:"edit",OPEN_IN_SUBMENU_ID:"openIn",EDIT_PDF_ACTION_ID:"editPdf",WEBEDIT_ACTION_ID:"webEditAction"},D=function(e){return"".concat(e.appId,"_").concat(e.entryActionId)};function R(e){var t=e.app,n=e.currentApp,r=e.selectedItem.get("lock").owner;if(t&&n&&D(t)===D(n))return(0,c.t)("actions.collaboration.tooltip.coeditedBy",{fullName:(0,O.v2)(r),email:null==r?void 0:r.email,action:null==t?void 0:t.name,context:(0,b.$)(r)?"you":""})}function C(){return(0,u.hV)({permissions:[g.W.EDIT],id:S.WEBEDIT_ACTION_ID,label:(0,c.t)("actions.openIn.desktopEditV2"),icon:E.b,onClick:function(e){var t=e.selectedItems;(0,a.Z)(t,1)[0].edit()}})}function A(){return(0,u.hV)({id:S.EDIT_PDF_ACTION_ID,permissions:[g.W.EDIT_PDF],icon:E.b,label:(0,c.t)("storage.actions.editWithPdfEditor"),onClick:function(e){var t=e.selectedItems,n=(0,a.Z)(t,1)[0];P.ZP.run(n,[],{openEdit:!0,actionSource:m.Z.CONTEXT_MENU})}})}function h(e){var t=e.openInApps;return(0,u.Ge)({id:S.OPEN_IN_SUBMENU_ID,label:(0,c.t)("actions.openIn.shortLabel"),icon:f.g,actions:t.filter((function(e){return e.isAllowed})).map((function(e){return(0,u.hV)({id:D(e),label:e.text||e.editorName||e.appName,iconUrl:e.iconUrl,onClick:e.action,tooltip:e.tooltip})}))})}function M(e){var t=e.selectedItems,n=e.integrationCallbacks,r=void 0===n?{}:n,E=(0,s.A)({selectedItems:t}),f=(0,a.Z)(t,1)[0],O=(0,d.Z)({folderItem:f,placement:m.Z.CONTEXT_MENU,integrationCallbacks:r,computedActions:E}),b=(0,i.useMemo)((function(){return(0,I.n)({getIntegrationActions:l.Z.getOpenInActions.bind(l.Z),folderItems:(0,T.xH)(t),integrationCallbacks:r,placement:v.Z.CONTEXT_MENU_OPEN_IN})}),[t,r]);return(0,i.useMemo)((function(){return(0,N.d)(t)?function(e){var t=e.selectedItem,n=e.collaboration,r=e.computedActions,a=n.prioritizedApps,i=void 0===a?[]:a,l=n.defaultApp,s=n.currentApp,m=null!=l&&l.isAllowed?l:void 0,d=R({app:m,currentApp:s,selectedItem:t});!d&&null!=m&&m.name&&(d=(0,c.t)("actions.collaboration.editIn",{name:null==m?void 0:m.name}));var E=i.filter((function(e){return e.isAllowed||e.disabledReason})),f=[].concat((0,o.Z)(E.map((function(e){return(0,u.hV)({id:D(e),label:e.name,iconUrl:e.iconUrl,onClick:e.action,tooltip:R({app:e,currentApp:s,selectedItem:t}),disabledReason:e.disabledReason})}))),[A(),C()]),O=(0,u.mz)(f,r);return 1===O.length&&O[0].id===S.EDIT_PDF_ACTION_ID?y(y({},O[0]),{},{label:(0,c.t)("actions.collaboration.edit"),tooltip:(0,c.t)("storage.actions.editWithPdfEditor")}):1===O.length&&m&&O[0].id===D(m)?(0,u.hV)({id:S.COLLABORATION_SUBMENU_ID,label:(0,c.t)("actions.collaboration.edit"),icon:p.T,tooltip:d,onClick:null==m?void 0:m.action}):1===O.length&&O[0].id===S.WEBEDIT_ACTION_ID?y(y({},O[0]),{},{label:(0,c.t)("actions.collaboration.edit"),tooltip:(0,c.t)("actions.openIn.desktopEditV2")}):(0,u.Ge)({id:S.COLLABORATION_SUBMENU_ID,label:(0,c.t)("actions.collaboration.edit"),icon:p.T,tooltip:d,onClick:null==m?void 0:m.action,actions:O})}({selectedItem:f,collaboration:O,computedActions:E}):h({openInApps:b})}),[f,t,O,b,E])}},491067:function(e,t,n){n.d(t,{P1:function(){return X},cs:function(){return K},j9:function(){return ne},jF:function(){return Q},q9:function(){return re},qf:function(){return $},sE:function(){return J},sp:function(){return ee},yz:function(){return te}});var r=n(93433),o=n(529439),a=n(204942),i=n(115861),c=n(364687),l=n.n(c),s=n(667294),u=n(762074),m=n(805252),d=n(413290),p=n(722332),E=n(823592),f=n(25886),O=n(540810),b=n(318890),v=n(319783),I=n(266606),T=n(323063),g=n(485343),P=n(255574),N=n(681304),Z=n(277235),y=n(425026),S=n(280112),D=n(581162),R=n(956153),C=n(54106),A=n(776327),h=n(55034),M=n(153672),k=n(460474),L=n(604769),j=n(42594),w=n(347392),_=n(368354),F=n(232452),U=n(945450),V=n(154177),x=n(397404),W=n(716962),z=n(870938),G=n(652450),B=n(345247);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(){return(0,L.hV)({id:G.B.DUPLICATE,permissions:[W.W.DUPLICATE],icon:Z.H,label:(0,u.t)("storage.actions.duplicate"),onClick:(e=(0,i.Z)(l().mark((function e(t){var n,r,a,i,c,s,m,d,E,f,O,b,v,I;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedItems,r=n[0],a=(0,j.DW)(r),i=r.get("name"),c=(0,j.cO)(),s=(0,w.yT)(),e.prev=6,e.next=9,(0,U.OM)({sourceFilePath:a,documentRoomId:c,workspaceId:s});case 9:m=e.sent,d=s||c?{customAdapter:F.Z,documentRoomId:c,workspaceId:s,parentFolder:r.parentFolder}:{},E=new p.Z(H(H({},m),{},{isNewItem:!0}),d),(f=r.collection.add(E,{merge:!0,at:0})).trigger("change",f),(0,x.c0)(x.em.success,(0,u.t)("operations.item.duplicateItem",{name:(0,_.q)(i)})),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(6),(0,V.k0)(e.t0)){e.next=22;break}return(0,x.c0)(x.em.error,(0,u.t)("error.default")),e.abrupt("return");case 22:O=e.t0.data.errors||[],b=(0,o.Z)(O,1),v=b[0].msg,I=void 0===v?"":v,(0,x.c0)(x.em.error,(0,u.t)("operations.item.duplicateItemError",{name:(0,_.q)(i),msg:I}));case 24:case"end":return e.stop()}}),e,null,[[6,17]])}))),function(t){return e.apply(this,arguments)})});var e}function K(e){var t=e.env;return(0,L.hV)({permissions:[W.W.CREATE_SHORTCUT],id:G.B.CREATE_SHORTCUT,icon:y.k,label:(0,u.t)("storage.actions.createShortcut"),tooltip:(0,u.t)("storage.actionsInfo.createShortcutV2"),onClick:function(e){var n=e.selectedItems,r=t.workgroup.id,o=(0,u.t)("storage.labels.shortcut");n.forEach((function(e){var t=e.attributes,n=t.name,i=t.type,c=t.path,l=i===T.dt.FOLDER,s=(0,a.Z)({workgroup_id:r},l?"folder_id":"group_id",e.id),u=l?"".concat(n," - ").concat(o,".").concat(m._L):"".concat(n," - ").concat(o,".").concat(m.JK),d=new File([JSON.stringify(s)],u,{type:"text/plain"});(0,g.c)({file:d,destinationPath:(0,v.XX)(c),uploadAPIAccessor:{}}).then((function(){var t;null===(t=e.collection)||void 0===t||t.fetch(),I.Z.track("".concat(l?"Folder":"File"," Shortcut Created"))}))}))}})}function X(e){var t=e.env,n=e.isContextMenuShortcutsEnabled,r=(0,N.e)(),o=(0,N.x)(r);return(0,L.hV)(H({id:G.B.RENAME,permissions:[W.W.RENAME],icon:S.P,label:(0,u.t)("storage.actions.rename"),onClick:function(e){var n=e.selectedItems;function r(){(0,f.default)(n[0])}(0,E.gp)(t.user,n)?(0,h.Z)(r):r()}},n&&{shortcut:{label:o.RENAME,keys:{code:[z.X.ENTER.code,z.X.NUMPAD_ENTER.code]}}}))}function q(e){var t=e.isContextMenuShortcutsEnabled,n=(0,N.e)(),r=(0,N.x)(n);return(0,L.hV)(H({id:G.B.DOWNLOAD,permissions:[W.W.DOWNLOAD],icon:D.V,label:(0,u.t)("storage.actions.download"),onClick:function(e){var t=e.selectedItems;(0,b.Z)(t,O.Z.CONTEXT_MENU)}},t&&{shortcut:{label:r.DOWNLOAD,keys:{code:z.X.D.code,altKey:!0}}}))}function J(){return(0,L.hV)({permissions:[W.W.BOOKMARK],id:G.B.ADD_BOOKMARK,icon:R.e,label:(0,u.t)("storage.actions.addBookmarkV2"),onClick:function(e){var t=e.selectedItems;(new d.Z).addBookmarkItems(t)}})}function $(){return(0,L.hV)({permissions:[W.W.REMOVE_BOOKMARK],id:G.B.REMOVE_BOOKMARK,icon:R.e,label:(0,u.t)("storage.actions.removeBookmarkV2"),onClick:function(e){var t=e.selectedItems;(new d.Z).removeBookmarkItems(t)}})}function ee(e){var t=e.env,n=e.isContextMenuShortcutsEnabled,r=(0,N.e)(),o=(0,N.x)(r);return(0,L.hV)(H({permissions:[W.W.COPY,W.W.MOVE],id:G.B.COPY_MOVE,icon:C.O,label:(0,u.t)("storage.actions.copyMove"),tooltip:(0,u.t)("storage.actionsInfo.copyMove"),onClick:function(e){var n=e.selectedItems;function r(){A.ZP.trigger(A.ZP.Events.Storage.SHOW_COPY_MOVE_SELECTED,new d.Z(n))}(0,E.gp)(t.user,n)?(0,h.Z)(r):r()}},n&&{shortcut:{label:o.COPY_MOVE,keys:{code:z.X.M.code,altKey:!0}}}))}function te(){return(0,L.hV)({permissions:[W.W.COPY],id:G.B.COPY,icon:C.O,label:(0,u.t)("storage.actions.copy"),onClick:function(e){var t=e.selectedItems;A.ZP.trigger(A.ZP.Events.Storage.SHOW_COPY_SELECTED,new d.Z(t))}})}function ne(e){var t=e.env;return(0,L.hV)({permissions:[W.W.MOVE],id:G.B.MOVE,icon:P.Ws,label:(0,u.t)("storage.actions.move"),onClick:function(e){var n=e.selectedItems;function r(){A.ZP.trigger(A.ZP.Events.Storage.SHOW_MOVE_SELECTED,new d.Z(n))}(0,E.gp)(t.user,n)?(0,h.Z)(r):r()}})}function re(e){var t=e.selectedItems,n=e.integrationCallbacks,o=(0,M.ZP)().data,a=(0,k.Z)("unifiedCopyAndMoveEnabled"),i=(0,k.Z)("contextMenuShortcutsEnabled"),c=(0,B.bo)({selectedItems:t,integrationCallbacks:n});return(0,s.useMemo)((function(){return[X({env:o,isContextMenuShortcutsEnabled:i}),q({isContextMenuShortcutsEnabled:i}),K({env:o}),J(),$()].concat((0,r.Z)(a?[ee({env:o,isContextMenuShortcutsEnabled:i})]:[te(),ne({env:o})]),[Q(),c])}),[o,i,a,c])}},17791:function(e,t,n){n.d(t,{Dj:function(){return F},Oi:function(){return U},TP:function(){return x},lL:function(){return V},tT:function(){return j}});var r=n(529439),o=n(204942),a=n(667294),i=n(762074),c=n(413290),l=n(540810),s=n(601714),u=n(528348),m=n(214519),d=n(581162),p=n(289578),E=n(604769),f=n(974127),O=n(352593),b=n(792189),v=n(347392),I=n(999932),T=n(57324),g=n(106999),P=n(946264),N=n(824063),Z=n(397404),y=n(986619),S=n(544663),D=n(474935),R=n(716962),C=n(870938),A=n(681304),h=n(460474),M=n(274042);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={PUBLIC_LINK:"publicLink",FOLDER_LINK:"folderLink",COPY_DIRECT_LINK:"copyDirectLink",FOLDER_PERMISSIONS:D.R,TEAM_MANAGEMENT:S.t,UPLOAD_LINK:"uploadLink",UPLOAD_REQUEST_LINK:"uploadRequestLink",COPY_URL_FILE_LINK:N.jG},w=function(e,t,n){return(0,E.hV)(L(L({permissions:[R.W.SEND_PUBLIC_LINK],id:j.PUBLIC_LINK,label:(0,i.t)("storage.actions.share"),"data-onboarding":"[uploadAndShare.expandContextMenuShareMenu]",icon:u.Z},n&&{shortcut:{label:t,keys:{code:C.X.S.code,altKey:!0}}}),{},{onClick:function(t){var n=t.selectedItems,r=new c.Z(n);(0,f.ZP)({items:(0,f.Pw)(r,e),actionSource:l.Z.CONTEXT_MENU})}}))},_=function(e,t,n){return(0,E.hV)(L(L({permissions:[R.W.SEND_FOLDER_LINK],id:j.FOLDER_LINK,label:(0,i.t)("storage.actions.share"),tooltip:(0,i.t)("storage.actionsInfo.shareFolderLink"),"data-onboarding":"[createSharedFolder.openContextMenuShareMenu]",icon:u.Z},n&&{shortcut:{label:t,keys:{code:C.X.S.code,altKey:!0}}}),{},{onClick:function(t){var n=t.selectedItems,r=new c.Z(n);(0,f.ZP)({items:(0,f.Pw)(r,e),actionSource:l.Z.CONTEXT_MENU})}}))},F=function(){return(0,E.hV)({permissions:[R.W.COPY_DIRECT_LINK],id:j.COPY_DIRECT_LINK,label:(0,i.t)("actions.share.directLink.labelV2"),icon:m.m,tooltip:(0,i.t)("storage.actionsInfo.copyDirectLinkV2"),onClick:function(e){var t=e.selectedItems,n=L(L({},(0,b.tz)()?{showSmartTags:!0}:{}),(0,v.GB)()?{source:"document-portal"}:{});(0,I.Z)((0,T.bW)(t[0],s.Z.getRootCfsUrl(),n),{onSuccess:function(){(0,Z.c0)(Z.em.success,(0,i.t)("actions.share.directLink.success"))}})}})},U=function(){return(0,E.hV)({permissions:[R.W.SEND_UPLOAD_LINK],id:j.UPLOAD_LINK,label:(0,i.t)("storage.actions.createUploadLinkV2"),icon:d.o,tooltip:(0,i.t)("storage.actionsInfo.createUploadLink"),onClick:function(e){var t=e.selectedItems;(0,O.Z)({item:{path:t[0].get("path"),name:t[0].get("name"),type:t[0].get("type")}})}})},V=function(e){return(0,E.Ge)({permissions:[R.W.SEND_UPLOAD_REQUEST],id:j.UPLOAD_REQUEST_LINK,label:(0,i.t)("storage.actions.createUploadRequestV2"),icon:p.k,tooltip:(0,i.t)("storage.actionsInfo.createUploadRequest"),actions:e.length?e.map((function(e){var t=e.name,n=e.description,r=e.id;return(0,E.hV)({id:"".concat("uploadRequestTemplate-").concat(r),label:t,tooltip:n,onClick:function(e){var t=e.selectedItems;(0,g.ri)({templateId:r,folderId:t[0].id.toString()})}})})):[(0,E.hV)({id:"no-templates",label:"",onClick:function(){}})]})};function x(e){var t=e.selectedItems,n=e.documentRoomId,o=(0,y.A)({selectedItems:t}),i=(0,r.Z)(t,1)[0],c=(0,h.Z)("contextMenuShortcutsEnabled"),l=(0,P.q9)({folderId:i.id.toString()},{enabled:o.SendUploadRequest.allowed}).data,s=void 0===l?[]:l,u=(0,M.O)({selectedItem:i}),m=(0,N.iV)({selectedItem:i});return(0,a.useMemo)((function(){return function(e){var t=e.documentRoomId,n=e.uploadRequestTemplates,r=e.permissionsManagersSchema,o=e.copyUrlFileActionSchema,a=e.isContextMenuShortcutsEnabled,i=(0,A.x)((0,A.e)());return[w(t,i.SHARE,a),_(t,i.SHARE,a),F(),r,U(),V(n),o]}({documentRoomId:n,uploadRequestTemplates:s,permissionsManagersSchema:u,copyUrlFileActionSchema:m,isContextMenuShortcutsEnabled:c})}),[n,s,u,m,c])}},892053:function(e,t,n){n.d(t,{t:function(){return u}});var r=n(301245),o=n(709967),a=n(397404),i=n(762074),c=n(824802),l=n(240701),s=n(776327);function u(e,t){var n=t.documentRooms,u=e.get("id"),m=(0,r.rw)(u,n);m?c.Z.downloadFile("get",l.Z.DOCUMENT_ROOM.INDEX_REPORT({documentRoomId:m.id}),s.ZP,{xsrfToken:(0,o.U2)()}):(0,a.c0)(a.em.error,(0,i.t)("documentRoom.downloadIndexReport.cantDownloadReport"))}},183526:function(e,t,n){n.d(t,{q:function(){return pe},J:function(){return de}});var r=n(667294),o=n(610861),a=n(102966),i=n(529439),c=n(579621),l=n(576329),s=n(762074),u="YiAK0s18LJZBXxgu1MYz",m="rvRoSKsUlptkc0zmyhOz",d=(0,s.nD)("documentRoom");function p(e){var t=e.onContinue,n=(0,r.useState)(!0),p=(0,i.Z)(n,2),E=p[0],f=p[1];return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,d("markAsDocumentRoom"))),r.createElement(o.ZP.Body,null,r.createElement("div",{className:u},r.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzgiIGhlaWdodD0iNjgiIHZpZXdCb3g9IjAgMCA3OCA2OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZGRfNjAzN185ODIxOCkiPgo8cGF0aCBkPSJNNyA5LjU2OTIzQzcgNy4wNDU3MiA5LjA0NjcgNSAxMS41NzE0IDVIMzEuNzI4OEMzMS45OTM5IDUgMzIuMjQ4MiA1LjEwNTI5IDMyLjQzNTcgNS4yOTI3MkwzOSAxMS44NTM4VjIzLjI3NjlDMzkgMjUuODAwNCAzNi45NTMzIDI3Ljg0NjIgMzQuNDI4NiAyNy44NDYySDExLjU3MTRDOS4wNDY3IDI3Ljg0NjIgNyAyNS44MDA0IDcgMjMuMjc2OVY5LjU2OTIzWiIgZmlsbD0iI0RCQTQwMCIvPgo8cmVjdCB4PSI3IiB5PSIxMS4yMzA4IiB3aWR0aD0iNjQiIGhlaWdodD0iNDcuNzY5MiIgcng9IjQiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl82MDM3Xzk4MjE4KSIvPgo8bWFzayBpZD0ibWFzazBfNjAzN185ODIxOCIgc3R5bGU9Im1hc2stdHlwZTphbHBoYSIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iNyIgeT0iMTEiIHdpZHRoPSI2NCIgaGVpZ2h0PSI0OCI+CjxyZWN0IHg9IjciIHk9IjExLjIzMDgiIHdpZHRoPSI2NCIgaGVpZ2h0PSI0Ny43NjkyIiByeD0iNCIgZmlsbD0iI0ZGQ0EyOSIvPgo8L21hc2s+CjxnIG1hc2s9InVybCgjbWFzazBfNjAzN185ODIxOCkiPgo8cGF0aCBkPSJNNzEgNDYuNTM4NVY1NUM3MSA1Ny4yMDkxIDY5LjIwOTEgNTkgNjcgNTlINyIgc3Ryb2tlPSJ1cmwoI3BhaW50MV9saW5lYXJfNjAzN185ODIxOCkiIHN0cm9rZS13aWR0aD0iMyIvPgo8cGF0aCBkPSJNNyA1NC44NDYyTDcgMTUuMjMwOEM3IDEzLjAyMTYgOC43OTA4NiAxMS4yMzA4IDExIDExLjIzMDhMNjEgMTEuMjMwOCIgc3Ryb2tlPSJ1cmwoI3BhaW50Ml9saW5lYXJfNjAzN185ODIxOCkiIHN0cm9rZS13aWR0aD0iMyIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIxX2RpXzYwMzdfOTgyMTgpIj4KPHBhdGggZD0iTTUzLjcxNjQgMjYuMDEyQzUzLjcwMTcgMjUuNzc2MSA1My42MDgyIDI1LjU1MTkgNTMuNDUwOSAyNS4zNzU1QzUzLjI5MzYgMjUuMTk5MSA1My4wODE2IDI1LjA4MDUgNTIuODQ4OSAyNS4wMzg5QzQ3LjE3MzMgMjQuMDIxNiA0NC43ODUxIDIzLjIyNiAzOS42NTk3IDIwLjkxOTZDMzkuMTQ3OCAyMC43Mjg5IDM4LjgzMDUgMjAuNzMyMiAzOC4zNDAzIDIwLjkxOTZDMzMuMjE0OSAyMy4yMjg2IDMwLjgyNjcgMjQuMDIwMyAyNS4xNTExIDI1LjAzODlDMjQuOTE4NSAyNS4wODA1IDI0LjcwNjUgMjUuMTk5MSAyNC41NDkyIDI1LjM3NTVDMjQuMzkxOSAyNS41NTE5IDI0LjI5ODQgMjUuNzc2MSAyNC4yODM2IDI2LjAxMkMyNC4wMjk2IDMwLjA0MjkgMjQuNTY5OSAzMy43OTY3IDI1Ljg5MDcgMzcuMTcxMkMyNi45NzA3IDM5LjkyMjkgMjguNTcwNiA0Mi40NDA3IDMwLjYwMzEgNDQuNTg3MUMzMy41NTAxIDQ3LjcxNjIgMzYuODE3NyA0OS41NDMgMzguNTAyNiA1MC4yMzQ0QzM4LjgyMjEgNTAuMzY0NyAzOS4xNzk5IDUwLjM2NDcgMzkuNDk5NCA1MC4yMzQ0QzQxLjI4MDcgNDkuNTEzOSA0NC40MjY5IDQ3LjczOTMgNDcuMzk3IDQ0LjU4NThDNDkuNDI5MyA0Mi40Mzk4IDUxLjAyOTIgMzkuOTIyNCA1Mi4xMDk0IDM3LjE3MTJDNTMuNDMwMSAzMy43OTc0IDUzLjk3MDQgMzAuMDQyOSA1My43MTY0IDI2LjAxMloiIGZpbGw9IiNBRDgyMDAiLz4KPC9nPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTM0LjU1NTYgMjcuNjI5NkMzNC4wMzkyIDI3LjYyOTYgMzMuNDQ0NSAyOC4xMjQ2IDMzLjQ0NDUgMjguOTYzVjQwLjM3MDRDMzMuNDQ0NSA0MS4yMDg4IDM0LjAzOTIgNDEuNzAzNyAzNC41NTU2IDQxLjcwMzdINDMuNDQ0NUM0My45NjA4IDQxLjcwMzcgNDQuNTU1NiA0MS4yMDg4IDQ0LjU1NTYgNDAuMzcwNFYzMi4yMjIyQzQ0LjU1NTYgMjkuNTgzOCA0Mi42MzQzIDI3LjYyOTYgNDAuNDgxNSAyNy42Mjk2SDM0LjU1NTZaTTM0LjU1NTYgMjYuNTE4NUMzMy4zMjgzIDI2LjUxODUgMzIuMzMzMyAyNy42MTI5IDMyLjMzMzMgMjguOTYzVjQwLjM3MDRDMzIuMzMzMyA0MS43MjA0IDMzLjMyODMgNDIuODE0OCAzNC41NTU2IDQyLjgxNDhINDMuNDQ0NUM0NC42NzE4IDQyLjgxNDggNDUuNjY2NyA0MS43MjA0IDQ1LjY2NjcgNDAuMzcwNFYzMi4yMjIyQzQ1LjY2NjcgMjkuMDcyMiA0My4zNDUyIDI2LjUxODUgNDAuNDgxNSAyNi41MTg1SDM0LjU1NTZaIiBmaWxsPSIjRkZDQjJDIi8+CjxwYXRoIGQ9Ik00NS42NDU1IDMxLjcwMzdINDAuNDgxNVYyNi41MTg1QzQzLjE4NjMgMjYuNTE4NSA0NS40MDc0IDI4Ljc5NjYgNDUuNjQ1NSAzMS43MDM3WiIgZmlsbD0iI0ZGQ0IyQyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTM2LjAzNyAzMy4zNzA0QzM2LjAzNyAzMy4wNjM2IDM2LjI4NTggMzIuODE0OCAzNi41OTI2IDMyLjgxNDhIMzkuMTg1MkMzOS40OTIgMzIuODE0OCAzOS43NDA4IDMzLjA2MzYgMzkuNzQwOCAzMy4zNzA0QzM5Ljc0MDggMzMuNjc3MiAzOS40OTIgMzMuOTI1OSAzOS4xODUyIDMzLjkyNTlIMzYuNTkyNkMzNi4yODU4IDMzLjkyNTkgMzYuMDM3IDMzLjY3NzIgMzYuMDM3IDMzLjM3MDRaIiBmaWxsPSIjRkZDQjJDIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzYuMDM3IDM1Ljk2M0MzNi4wMzcgMzUuNjU2MSAzNi4yODU4IDM1LjQwNzQgMzYuNTkyNiAzNS40MDc0SDQxLjQwNzRDNDEuNzE0MiAzNS40MDc0IDQxLjk2MyAzNS42NTYxIDQxLjk2MyAzNS45NjNDNDEuOTYzIDM2LjI2OTggNDEuNzE0MiAzNi41MTg1IDQxLjQwNzQgMzYuNTE4NUgzNi41OTI2QzM2LjI4NTggMzYuNTE4NSAzNi4wMzcgMzYuMjY5OCAzNi4wMzcgMzUuOTYzWiIgZmlsbD0iI0ZGQ0IyQyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTM2LjAzNyAzOC41NTU2QzM2LjAzNyAzOC4yNDg3IDM2LjI4NTggMzggMzYuNTkyNiAzOEg0MS40MDc0QzQxLjcxNDIgMzggNDEuOTYzIDM4LjI0ODcgNDEuOTYzIDM4LjU1NTZDNDEuOTYzIDM4Ljg2MjQgNDEuNzE0MiAzOS4xMTExIDQxLjQwNzQgMzkuMTExMUgzNi41OTI2QzM2LjI4NTggMzkuMTExMSAzNi4wMzcgMzguODYyNCAzNi4wMzcgMzguNTU1NloiIGZpbGw9IiNGRkNCMkMiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF82MDM3Xzk4MjE4IiB4PSIwIiB5PSItNSIgd2lkdGg9Ijc4IiBoZWlnaHQ9Ijc4IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjIiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMy41Ii8+CjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjIxNDA1IDAgMCAwIDAgMC4wMjAwNTIxIDAgMCAwIDAgMC40MzgyODEgMCAwIDAgMC4wMyAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzYwMzdfOTgyMTgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIi8+CjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjA4OTUxMTMgMCAwIDAgMCAwLjAxMTk0NDQgMCAwIDAgMCAwLjE3OTE2NyAwIDAgMCAwLjA3IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd182MDM3Xzk4MjE4IiByZXN1bHQ9ImVmZmVjdDJfZHJvcFNoYWRvd182MDM3Xzk4MjE4Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0Ml9kcm9wU2hhZG93XzYwMzdfOTgyMTgiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjFfZGlfNjAzN185ODIxOCIgeD0iMjMuMjIyNiIgeT0iMTkuNzc3OCIgd2lkdGg9IjMxLjU1NDgiIGhlaWdodD0iMzEuNTU0MyIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0Lz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC41Ii8+CjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4yIDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfNjAzN185ODIxOCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd182MDM3Xzk4MjE4IiByZXN1bHQ9InNoYXBlIi8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHg9IjEiIGR5PSIxIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIvPgo8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJhcml0aG1ldGljIiBrMj0iLTEiIGszPSIxIi8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuNjU0MTY3IDAgMCAwIDAgMC40OTE1NyAwIDAgMCAwIDAgMCAwIDAgMC4xMiAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJzaGFwZSIgcmVzdWx0PSJlZmZlY3QyX2lubmVyU2hhZG93XzYwMzdfOTgyMTgiLz4KPC9maWx0ZXI+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl82MDM3Xzk4MjE4IiB4MT0iNi45OTk5NyIgeTE9IjExLjc1IiB4Mj0iODcuNTY4NSIgeTI9IjY5LjA3MzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRDY3MCIvPgo8c3RvcCBvZmZzZXQ9IjAuNTIwODMzIiBzdG9wLWNvbG9yPSIjRkZDQTI4Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGQTkwMiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfNjAzN185ODIxOCIgeDE9IjcwIiB5MT0iNjQuNzExNSIgeDI9IjcwIiB5Mj0iNTEuMjExNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjQjc3OTAwIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0U4OTkwMCIgc3RvcC1vcGFjaXR5PSIwIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhcl82MDM3Xzk4MjE4IiB4MT0iMjUiIHkxPSIyOS40MDM5IiB4Mj0iOC4zNTg0MiIgeTI9IjEyLjM3NzEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRTlBNSIgc3RvcC1vcGFjaXR5PSIwIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGRTlBNSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=",alt:"",className:u,draggable:!1})),r.createElement("div",{className:"hMc5CiSO1OhCJ9ulTLyJ"},r.createElement("h6",null,d("infoModal.title")),r.createElement("div",null,r.createElement("div",null,d("infoModal.content")),r.createElement("div",{className:m,dangerouslySetInnerHTML:{__html:d("infoModal.contentList")}})),r.createElement("div",{className:m,dangerouslySetInnerHTML:{__html:d("infoModal.whatsNew")}}))),r.createElement(o.ZP.Footer,null,r.createElement("label",{className:"jFXJ89oLac23IOo9DABk",htmlFor:"dontAskAgainCheckbox"},r.createElement(l.Z,{onChange:function(e){return f(!e.target.checked)},name:"dontAskAgainCheckbox",id:"dontAskAgainCheckbox"}),d("infoModal.dontShowInfo")),r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:o.GZ},(0,s.t)("button.label.cancel")),r.createElement(c.Z,{onClick:function(){var e=a.Z.getInstance();E||e.updatePref("showDocumentInfoModal",!1),t()}},(0,s.t)("button.label.continue"))))}var E=n(204942),f=n(403455),O=n(735691),b=n(776327),v=n(153672),I=n(953848),T=n(27056),g=n(531926),P=n(397404),N=n(78776),Z=n(565253),y=n(15652),S=n(587309),D=n(803326);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C=(0,s.nD)("documentRoom"),A=(0,P.Sh)({showExclusively:!0}),h=A.showNotification,M=A.hideNotifications,k=O.Ry().concat(S.Z).concat(D.Z);function L(e){var t=e.folderId,n=e.folderName,a=e.canEditWatermarkingValue,l=(0,r.useRef)(),u=(0,T.GL)().mutate,m=(0,v.Lb)("workgroup.documentRoomSettings"),d=(0,i.Z)(m.data,1)[0],p=d.defaultWatermarkingValue,O=d.watermarkingEnabled;return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,C("markAsDocumentRoom"))),r.createElement(f.J9,{initialValues:{name:n,rootFolderId:t,documentRoomId:"",description:"",status:"",startDate:(0,N.Gu)(""),completionDate:(0,N.Gu)(""),watermark:!!O&&p},validationSchema:k,onSubmit:function(e,r){var a=e.name,i=e.documentRoomId,c=e.description,l=e.status,m=e.startDate,d=e.completionDate,p=e.watermark,f=e.documentRoomLogo,v=r.setSubmitting;u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({rootFolderId:t,name:a.trim(),documentRoomId:i.trim(),description:c.trim(),status:l,documentRoomLogo:f,startDate:(0,N.F6)(m),completionDate:(0,N.F6)(d)},O&&{watermark:p}),{onSuccess:function(){(0,o.GZ)(),h("success",C("markedSuccessfully",{folderName:n})),b.ZP.trigger(b.ZP.Events.Storage.FOLDER.REFRESH)},onError:function(e){var t,n;v(!1);var r=(null==e||null===(t=e.data)||void 0===t||null===(n=t.constraintViolations)||void 0===n?void 0:n[0])||e;h("error",(null==r?void 0:r.message)||(0,s.t)("error.default"))}})}},r.createElement(f.l0,{ref:l},r.createElement(o.ZP.Body,null,r.createElement(I.Z,{formRef:l}),r.createElement(Z.Z,{canEditWatermarkingValue:O&&a}),r.createElement(y.Z,null)),r.createElement(o.ZP.Footer,null,r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:function(){(0,o.Mr)(),M()}},(0,s.t)("button.label.cancel")),r.createElement(g.Z,null)))))}var j=n(401552),w=n(405510),_=n(516271),F=n(581355),U=n(32570),V=n(155570),x=n(339594),W=n(987407),z=n(698607),G=n(780851),B=n(982925),Y=n(669147),H=n(223901),Q=n(889166),K=n(766334),X=n(80373),q=n(741127),J=n(264928),$=n(116450),ee=(0,s.nD)("documentRoom.deleteModal"),te=function(e){var t=e.folderName,n=e.id,o=e.closeModal,a=(0,T.ij)({id:n}).mutate,i=(0,$.p)(),c=(0,H.Wm)().refetch,l=(0,H.F4)();return r.createElement(X.Z,{onCancel:o,onConfirm:function(){return a({id:n},{onSuccess:function(){l(),o(),i&&(c(),(0,J.c4)("#".concat(q._j.HOME()))),b.ZP.trigger(b.ZP.Events.Storage.NOTIFICATION.SHOW,"success",ee("notification.deleteSuccess",{folder:t}))},onError:function(e){var t=e.message;b.ZP.trigger(b.ZP.Events.Storage.NOTIFICATION.SHOW,"error",Q.Z.parseErrorMessage(t,ee("notification.genericError")))}})},messages:{title:ee("title"),body:r.createElement(r.Fragment,null,r.createElement("p",null,ee("info",{folder:t})),r.createElement(K.K0,{type:K.em.INFO},ee("infoNotification"))),cancel:(0,s.t)("button.label.cancel"),confirm:ee("deleteConfirmationButton")}})};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re={general:"general",timeline:"timeline"},oe=(0,s.nD)("documentRoom"),ae=(0,P.Sh)({showExclusively:!0}),ie=ae.showNotification,ce=ae.hideNotifications,le="document-room-settings",se=O.Ry().concat(S.Z).concat(D.Z),ue=function(e){var t,n,a,l,u,m=e.folderId,d=e.folderName,p=e.closeModal,O=e.canEditWatermarkingValue,b=(0,v.Lb)("workgroup.documentRoomSettings.watermarkingEnabled"),I=(0,i.Z)(b.data,1)[0],P=(0,r.useState)(re.general),S=(0,i.Z)(P,2),D=S[0],R=S[1],C=(0,H.Wm)({options:{select:function(e){return e.find((function(e){return e.rootFolderId===m}))},onError:function(){ie("error",oe("notification.genericError")),p()}}}),A=C.data,h=void 0===A?{}:A,M=C.isLoading,k=(0,T.TS)({documentRoomId:h.id,height:80,width:250},{enabled:h.logoAvailable}).data,L=(0,T.Rp)(h),Q=L.data,K=L.error,X=L.isEnabled,q=L.isLoading,J=L.hasResourcesToClean,$=(0,T.GL)(null==h?void 0:h.id).mutate,ee=!h.id&&!M,ae=j.ZP.isAdmin(),ue=h.status===B.EQ.completed,me=!ae&&ue,de=409===(null==K||null===(t=K.response)||void 0===t?void 0:t.status),pe=(0,r.useMemo)((function(){var e;return 403!==(null==K||null===(e=K.response)||void 0===e?void 0:e.status)&&X}),[K,X]),Ee=(0,r.useMemo)((function(){return[{key:re.general,label:oe("tabs.general"),Component:Z.Z,componentProps:{canEditWatermarkingValue:I&&O}},{key:re.timeline,label:oe("tabs.timeline"),Component:y.Z,componentProps:{documentRoom:h,isCleanupEnabled:pe,isCleanupInProgress:de,hasResourcesToClean:J}}].filter(Boolean)}),[h,J,pe,de,O,I]),fe=(0,r.useCallback)((function(e){var t=(0,G.H0)(e);t&&R(t)}),[]);return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,oe("modal.settings.title"))),M||q?r.createElement(U.Z,{className:"tKaTbu4ITZje5XgpIsBg"}):r.createElement(f.J9,{initialValues:{name:null!==(n=h.name)&&void 0!==n?n:"",documentRoomId:null!==(a=h.documentRoomId)&&void 0!==a?a:"",documentRoomLogo:k||"",description:null!==(l=h.description)&&void 0!==l?l:"",status:null!==(u=h.status)&&void 0!==u?u:"",startDate:(0,N.Gu)(null==h?void 0:h.startDate),completionDate:(0,N.Gu)(null==h?void 0:h.completionDate),cleanup:!1,watermark:!!I&&h.watermark},validationSchema:se,onSubmit:function(e,t){var n=e.name,r=e.documentRoomId,o=e.description,a=e.status,i=e.startDate,c=e.completionDate,l=e.cleanup,s=e.watermark,u=e.documentRoomLogo,m=t.setSubmitting;$(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:n.trim(),documentRoomId:r.trim(),description:o.trim(),status:a,documentRoomLogo:u,startDate:(0,N.F6)(i),completionDate:(0,N.F6)(c)},I&&{watermark:s}),{onSuccess:function(){ie("success",oe("notification.successSave")),l?(0,Y.Z)({projectId:h.id,projectStatus:h.status,resources:Q,folderName:d,isDocumentRoom:!0}):p()},onError:function(e){var t,n,r=(null===(t=e.data)||void 0===t||null===(n=t.constraintViolations)||void 0===n?void 0:n[0])||e;ie("error",r.message),m(!1)}})}},r.createElement(f.l0,null,r.createElement(o.ZP.Body,null,r.createElement(_.Z,{onValidationError:fe}),r.createElement("div",{className:"lTGH6FrGOZcpbIVa9xnk"},r.createElement(V.Z,{tabsKey:le,selectedTabKey:D},Ee.map((function(e){var t=e.key,n=e.label;return r.createElement(x.Z,{key:t,tabKey:t,onClick:function(){return R(t)}},n)})))),pe&&de&&r.createElement(w.Z,{icon:F.yo},oe("form.cleanup.inProgressAlert")),Ee.map((function(e){var t=e.key,n=e.Component,o=e.componentProps;return r.createElement(W.Z,{className:"fy3QyNo8AtY5oIbRFxjh",key:t,tabsKey:le,tabKey:t,selectedTabKey:D},r.createElement(n,o))}))),r.createElement(o.ZP.Footer,null,!ee&&r.createElement(z.Z,{tooltip:oe("modal.statusTransitionPolicy"),disabled:!me},r.createElement(c.Z,{type:c.Z.TERTIARY,variant:c.Z.variants.DESTRUCTIVE,onClick:function(){!function(e){var t=e.documentRoom,n=e.folderName;(0,o.h7)(r.createElement(te,{id:t.id,folderName:n,closeModal:o.Mr}),{onRequestClose:o.Mr})}({documentRoom:h,folderName:d})},className:"QNVgNFiTtncJ1ZAvgXly",disabled:me},oe("button.delete"))),r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:function(){p(),ce()}},(0,s.t)("button.label.cancel")),r.createElement(g.Z,null)))))};function me(e){var t=e.folderId,n=e.folderName,a=e.canEditWatermarkingValue;(0,o.h7)(r.createElement(L,{folderId:t,folderName:n,canEditWatermarkingValue:a}),{onRequestClose:o.Mr,size:o.ZP.sizes.XL,withCloseButton:!0,isScrollable:!0})}function de(e,t,n){a.Z.getInstance().get("showDocumentInfoModal")?function(e){var t=e.folderId,n=e.folderName,a=e.canEditWatermarkingValue;(0,o.h7)(r.createElement(p,{onContinue:function(){return me({folderId:t,folderName:n,canEditWatermarkingValue:a})}}),{onRequestClose:o.Mr,withCloseButton:!0,size:o.ZP.sizes.XL,isScrollable:!0})}({folderId:e,folderName:t,canEditWatermarkingValue:n}):me({folderId:e,folderName:t,canEditWatermarkingValue:n})}function pe(e){var t=e.folderId,n=e.folderName,a=e.canEditWatermarkingValue;(0,o.h7)(r.createElement(ue,{folderId:t,folderName:n,closeModal:o.Mr,canEditWatermarkingValue:a}),{onRequestClose:o.Mr,size:o.ZP.sizes.XL,withCloseButton:!0})}},271938:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(667294),o=n(610861),a=n(115861),i=n(364687),c=n.n(i),l=n(403455),s=n(579621),u=n(32570),m=n(930652),d=n(531926),p=n(762074),E=n(397404),f=n(27056),O=n(524334),b=n(898052),v=n(122776),I=n(162178),T=n(266606),g=function(e){T.Z.track("Document Room template settings modal closed with error",{"Closing cause":e})},P=n(777324),N=(0,p.nD)("documentRoom.templateSettings"),Z=(0,E.Sh)({showExclusively:!0}),y=Z.showNotification,S=Z.hideNotifications,D=function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(null==t?void 0:t.message),(0,o.Mr)(),y("error",null==t?void 0:t.message);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function R(e){var t=e.rootFolderId,n=e.rootFolderPath,a=e.permission,i=(0,v.C)(a),c=(0,b.i)(),E=(0,f.Rs)(t,{onError:D}),T=E.data,g=E.isLoading,Z=(0,f.Od)(t),y=Z.mutate,R=Z.reset,C=(0,P.Z)({updateTemplate:y,resetTemplateUpdate:R,resourceName:I.U.DOCUMENT_ROOM,templateId:t}).onSubmit;return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,N("title"))),g?r.createElement("div",{className:"xQSZtLZJaQ4OevJGEBSw"},r.createElement(u.Z,null)):T&&r.createElement(l.J9,{initialValues:{templateName:T.name,description:(null==T?void 0:T.description)||"",permissionsTemplate:null!=T&&T.permissionsTemplate?JSON.stringify(T.permissionsTemplate,null,"\t"):""},validationSchema:c,onSubmit:C,validateOnChange:!1,validateOnBlur:!1},r.createElement(l.l0,null,r.createElement(o.ZP.Body,null,r.createElement(O.Z,{folderId:t,folderPath:n,resourceName:I.U.DOCUMENT_ROOM,disabled:!i,downloadLink:"/resource/SampleDocumentRoomTemplatePermissions.json",documentationLink:m.Z.documentRooms.templates})),r.createElement(o.ZP.Footer,null,r.createElement(s.Z,{type:s.Z.SECONDARY,onClick:function(){(0,o.Mr)(),S()}},(0,p.t)("button.label.cancel")),r.createElement(d.Z,{disabled:!i})))))}function C(e){var t=e.folderId,n=e.folderPath,a=e.permission;T.Z.track("Document Room template settings modal opened"),(0,o.Ll)(r.createElement(R,{rootFolderId:t,rootFolderPath:n,permission:a}),{onRequestClose:o.GZ,withCloseButton:!0,size:o.ZP.sizes.XL,isScrollable:!0})}},565253:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(667294),o=n(934244),a=n(569748),i=n(936),c=n(87796),l=n(733374),s=n(762074),u=n(460474),m=(0,s.nD)("documentRoom.metadata.general"),d=(0,s.nD)("documentRoom");function p(e){var t=e.canEditWatermarkingValue,n=(0,u.Z)("watermarkFileDownloadAndPreviewEnabled"),p=(0,u.Z)("viewerOnlyPrivEnabled");return r.createElement(a.$0,{title:m("title")},r.createElement(l.oL,{tooltip:void 0,name:"documentRoomLogo",label:(0,s.t)("documentRoom.metadata.general.logo.label"),"data-tid":"users-upload"}),r.createElement(i.Z,{name:"name",label:m("name.label"),required:!0,autoFocus:!0}),r.createElement(i.Z,{name:"documentRoomId",label:m("documentRoomId.label")}),r.createElement(c.Z,{name:"description",label:m("description.label"),rows:3}),r.createElement(o.Z,{name:"watermark",disabled:!t,label:m("watermark",{permission:d(n&&p?"permissions.viewerAndViewerOnly":!n&&p?"permissions.viewerOnlyPermission":"permissions.viewerPermission")})}))}},15652:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(667294),o=n(403455),a=n(401552),i=n(934244),c=n(569748),l=n(40023),s=n(762074),u=n(806510),m=n(982925),d=n(676145),p=(0,s.nD)("documentRoom.metadata.timeline");function E(e){var t=e.documentRoom,n=void 0===t?null:t,s=e.isCleanupEnabled,E=void 0!==s&&s,f=e.isCleanupInProgress,O=void 0!==f&&f,b=e.hasResourcesToClean,v=void 0!==b&&b,I=(0,o.u6)(),T=I.getFieldHelpers,g=I.values.status,P=T("status").setValue,N=T("completionDate").setValue,Z=T("cleanup").setValue,y=!(null!=n&&n.id),S=(null==n?void 0:n.status)===m.EQ.completed,D=!a.ZP.isAdmin()&&S,R=(0,r.useMemo)((function(){return Object.values(m.EQ).map((function(e){return{value:e,label:p("status.options.".concat(e))}})).filter((function(e){var t=e.value;return!y||![m.EQ.completed,m.EQ.canceled].includes(t)}))}),[y]),C=(0,r.useMemo)((function(){return(null==n?void 0:n.status)!==m.EQ.completed&&g===m.EQ.completed}),[n,g]),A=(0,r.useMemo)((function(){return E&&g===m.EQ.completed}),[E,g]);return r.createElement(c.$0,{title:p("title")},C&&r.createElement(d.Z,{isDocumentRoom:!0}),r.createElement(l.Z,{readonly:D,name:"status",label:p("status.label"),placeholder:p("status.placeholder"),infoTooltip:D?p("status.statusTransitionPolicy"):null,options:R,formatValue:function(e){return e?p("status.options.".concat(e)):""},required:!0,onChange:function(e){P(e),e===m.EQ.completed?N(new Date):Z(!1)}}),r.createElement(u.Z,{name:"startDate",label:p("startDate.label")}),r.createElement(u.Z,{name:"completionDate",label:p("completionDate.label")}),A&&!O&&r.createElement(i.Z,{name:"cleanup",label:p("cleanup.label"),disabled:!v,infoTooltip:p(v?"cleanup.info.alert":"cleanup.info.empty")}))}},587309:function(e,t,n){var r=n(671002),o=n(762074),a=n(164762),i=n(735691);t.Z=i.Ry().shape({name:i.Z_().max(245).trim().folderPath((0,o.t)("error.invalidName",{forbiddenChars:'* ? / \\ : < > " |'})).required(),documentRoomLogo:i.nK().test((function(e,t){var n=t.createError;return!("object"===(0,r.Z)(e)&&e&&(0,a.Q)(null==e?void 0:e.size)>1.3)||n({path:"documentRoomLogo",message:(0,o.t)("error.logoUpload.maxFileSize")})})),documentRoomId:i.Z_().max(20),description:i.Z_().max(200),watermark:i.O7()})},803326:function(e,t,n){var r=n(735691),o=(0,n(762074).nD)("documentRoom.metadata.timeline");t.Z=r.Ry({status:r.Z_().required(o("status.validation.required")),startDate:r.hT().useDayjs().typeError(o("startDate.validation.invalidType")),completionDate:r.hT().useDayjs().typeError(o("completionDate.validation.invalidType")).when("startDate",(function(e,t){return e?t.min(e,o("completionDate.validation.min")):t}))})},474935:function(e,t,n){n.d(t,{R:function(){return s},Z:function(){return u}});var r=n(704548),o=n(762074),a=n(776327),i=n(540810),c=n(604769),l=n(716962),s="folderPermissions";function u(e){var t=e.analyticsContext,n=void 0===t?i.Z.CONTEXT_MENU:t;return(0,c.hV)({permissions:[l.W.FOLDER_PERMISSIONS],id:s,label:(0,o.t)("storage.actions.folderPermissions"),tooltip:(0,o.t)("storage.actionsInfo.folderPermissions"),icon:r.mc,onClick:function(e){var t=e.selectedItems;a.ch.SHOW_FOLDER_PERMISSIONS_SELECTED.trigger({folder:t[0],analyticsContext:n})},"data-tid":"folder-permissions"})}},669147:function(e,t,n){n.d(t,{Z:function(){return Ie}});var r=n(667294),o=n(610861),a=n(529439),i=n(204942),c=n(579621),l=n(762074),s=n(779210),u=n(367283),m=n(337995),d=n(583025),p=n(487462),E=n(145987),f=["state","actions","controls","children"],O=function(e){var t=e.state,n=e.actions,o=e.controls,a=e.children,i=(0,E.Z)(e,f);return r.createElement("div",(0,p.default)({role:"group",className:"rOM51kX9vwna88GDgtYQ","aria-label":"Cleanup section"},i),r.createElement("div",{className:"w63J63t7Pqw5VCg2vVQV"},r.createElement("div",{className:"g5xXGXn0wE9bzY8LsVlu"},r.createElement("div",{className:"Od5hASEH_YEtNt3lwEFR"},t),r.createElement("div",{className:"maEcNSVkPB_VGEptriZl"},null==n?void 0:n.map((function(e){return r.createElement("div",{key:e,className:"w_qqe6mNpb80fwqW8HeC"},e)})))),r.createElement("div",{className:"VgXaK4hT3IJRT9rZw0tK"},o)),a)},b=n(45697),v=n.n(b),I=(v().shape({email:v().string.isRequired,firstName:v().string.isRequired,lastName:v().string.isRequired,userId:v().number.isRequired}),"delete"),T="deactivate",g=(0,l.nD)("projects.cleanup"),P=function(e){var t=e.folderName,n=e.resources,a=e.openAssociatedUsersView,i=e.onCancel,p=e.onSave,E=e.resourcesToClean,f=e.dispatchCleanupAction,b=e.openMembersView,v=e.isDocumentRoom,I=n.users.members.map((function(e){return e.userId})),T=n.users.members.length>0,P=n.linksCount>0;return r.createElement("div",{"data-tid":"cleanup-actions-view"},r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,g("title",{folderName:t,context:v?"documentRoom":"project"}))),r.createElement(o.ZP.Body,null,r.createElement(O,{"data-tid":"cleanup-actions-view-links",state:g("links.state",{count:n.linksCount,context:v?"documentRoom":"project"}),actions:[P?g("links.actions.delete",{count:E.deleteLinks?n.linksCount:0,totalCount:n.linksCount}):g("nothingToClean")],controls:r.createElement(s.Z,{trigger:r.createElement(u.Z,{disabled:!P},g("links.controls.label"))},r.createElement(m.Z,null,r.createElement(d.Z,{key:"delete",onClick:function(){return f({type:"deleteAllLinks"})}},g("links.controls.options.delete",{count:n.linksCount})),r.createElement(d.Z,{key:"skip",onClick:function(){return f({type:"skipLinks"})}},g("links.controls.options.skip",{count:n.linksCount}))))}),r.createElement(O,{"data-tid":"cleanup-actions-view-members",actions:T?[g("members.actions.delete",{count:E.usersToDelete.length,totalCount:n.users.members.length}),g("members.actions.deactivate",{count:E.usersToDisable.length,totalCount:n.users.members.length})]:[g("nothingToClean")],state:g("members.state",{count:n.users.members.length,context:v?"documentRoom":"project"}),controls:r.createElement(s.Z,{trigger:r.createElement(u.Z,{disabled:!T},g("members.controls.label"))},r.createElement(m.Z,null,[{name:"select",action:function(){return b()}},{name:"delete",action:function(){return f({type:"deleteAllUsers",payload:I})}},{name:"deactivate",action:function(){return f({type:"disableAllUsers",payload:I})}},{name:"skip",action:function(){return f({type:"skipUsers",payload:I})}}].map((function(e){var t=e.name,o=e.action;return r.createElement(d.Z,{key:t,onClick:o},g("members.controls.options.".concat(t),{count:n.users.members.length}))}))))}),r.createElement(O,{"data-tid":"cleanup-actions-view-associated",state:g("associated.state",{count:n.users.associated.length,context:v?"documentRoom":"project"}),controls:r.createElement(c.Z,{type:c.Z.SECONDARY,disabled:0===n.users.associated.length,onClick:a},g("associated.controls.label"))})),r.createElement(o.ZP.Footer,null,r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:i},(0,l.t)("button.label.cancel")),r.createElement(c.Z,{type:c.Z.PRIMARY,onClick:p},g("buttons.cleanUp"))))},N=n(405510),Z=n(581355),y=n(317268),S=n(307179),D=(0,l.nD)("projects.cleanup"),R=function(e){var t,n,a,i,s=e.resources,u=e.onCancel,m=e.isDocumentRoom,d=(null===(t=s.users)||void 0===t||null===(n=t.associated)||void 0===n?void 0:n.length)||0;return r.createElement("div",{"data-tid":"associated-users-view"},r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,D("usersView.title",{count:d,context:m?"documentRoom":"project"}))),r.createElement(o.ZP.Body,null,r.createElement(N.Z,{className:"R985lKX5VpO3p6lbNy6L",icon:Z.yo,"data-tid":"standard-users-preview-alert"},r.createElement("div",{className:"nz6ANb5rTvJkn54YfCSl"},D("alert",{context:m?"documentRoom":"project"}))),r.createElement(y.ZP,{maxHeight:"250px",className:"ez4w10ZAnq0RLpkW7sSg",features:{stickyHeader:!0},columns:[{Header:D("usersView.user"),accessor:"userName",Cell:y.hI},{Header:D("usersView.email"),accessor:"email",Cell:y.hI}],data:(i=null===(a=s.users)||void 0===a?void 0:a.associated,i.map((function(e){return{email:e.email,userName:(0,S.v2)(e)||e.userName}})))})),r.createElement(o.ZP.Footer,null,r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:u},(0,l.t)("button.label.close"))))},C=n(652421),A=n(799532),h=n(722610),M=n(704548),k=n(225364),L=n(576329),j=n(698607),w={bulkActions:"QYG5sfxZCJhV__DuXpJw",bulkActionButtons:"tHxjgaEr3pVCr42ixWF4",bulkActionText:"ojXUjEapNdvW6JOFNZ5F",actionsGroup:"WsmZde35MpfqQ2p7DleT",actionButtonsGroup:"nlqBjnQcmYCHFFovB728",iconButton:"YWzMiUOMOomLghxDQf7V",badge:"jrlFHRDmDM45dKO6oDWG",badgeIcon:"jzDHmNzr_DDNgoUQ1cdh",summary:"P3sIHLlZmzmh_HyTdGTw",middot:"iPwON1Y2SUVAIkXwqjBo",selectRowCheckbox:"ZY8b25Tkj_IgIAQasn6V",tableWrapper:"TCvHr29UzJ_ajNASN_IL"},_=(0,l.nD)("projects.cleanup");function F(e){var t,n=e.row,o=e.column,a=n.original,l=a.userId,s=a.action,u=a.isActive,m=(t={},(0,i.Z)(t,I,_("membersView.toDelete")),(0,i.Z)(t,T,_("membersView.toDeactivate")),t);return r.createElement("div",{className:w.actionsGroup},r.createElement("div",null,s&&r.createElement(C.Z,{color:C.Z.BLUE,className:w.badge,onClick:function(e){return e.stopPropagation()}},m[s],r.createElement(A.Z,{icon:h.xv,className:w.badgeIcon,onClick:function(e){e.stopPropagation(),o.props.onClearMark(l)}})),!s&&!u&&r.createElement(C.Z,{color:C.Z.COOL_GRAY},_("membersView.deactivated"))),r.createElement("div",{className:w.actionButtonsGroup},r.createElement(j.Z,{tooltip:_("membersView.tooltips.markForDeactivate",{context:u?"":"disabled"})},r.createElement(c.Z,{"data-tid":"mark-for-deactivate",disabled:!u,type:c.Z.SECONDARY,className:w.iconButton,onClick:function(e){e.stopPropagation(),o.props.onMarkForDeactivate(l)}},r.createElement(c.Z.Icon,{icon:u?M.KX:M.Pn}))),r.createElement(j.Z,{tooltip:_("membersView.tooltips.markForDelete")},r.createElement(c.Z,{"data-tid":"mark-for-delete",type:c.Z.SECONDARY,className:w.iconButton,onClick:function(e){e.stopPropagation(),o.props.onMarkForDelete(l)}},r.createElement(c.Z.Icon,{icon:k._I})))))}function U(e){var t=e.rows,n=e.column,o=t.every((function(e){return e.original.isSelected}));return r.createElement(L.Z,{checked:o,onChange:n.props.onSelectAll})}function V(e){var t=e.row,n=e.column,o=t.original,a=o.isSelected,i=o.userId;return r.createElement(L.Z,{className:w.selectRowCheckbox,checked:a,onChange:function(e){e.stopPropagation(),n.props.onSelect(i)},onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()}})}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=(0,l.nD)("projects.cleanup"),G=function(e,t){return t?I:e?T:null},B=function(e){var t=e.members,n=e.resourcesToClean,i=e.dispatchCleanupAction,s=e.onGoBack,u=e.isDocumentRoom,m=(0,r.useState)((function(){return function(e,t){var n=t.usersToDelete,r=t.usersToDisable;return e.map((function(e){var t=n.includes(e.userId),o=r.includes(e.userId);return{email:e.email,userId:e.userId,isActive:e.active,userName:(0,S.v2)(e)||e.userName,isSelected:!1,action:G(o,t)}}))}(t,n)})),d=(0,a.Z)(m,2),p=d[0],E=d[1],f=(0,r.useCallback)((function(){i({type:"disableAndDeleteUsers",payload:{usersToDelete:p.filter((function(e){return e.action===I})).map((function(e){return e.userId})),usersToDisable:p.filter((function(e){return e.action===T})).map((function(e){return e.userId}))}})}),[i,p]),O=(0,r.useCallback)((function(){return E((function(e){var t=e.every((function(e){return e.isSelected}));return e.map((function(e){return W(W({},e),{},{isSelected:!t})}))}))}),[]),b=(0,r.useCallback)((function(e){return E((function(t){return t.map((function(t){return W(W({},t),{},{action:t.userId===e?I:t.action})}))}))}),[]),v=(0,r.useCallback)((function(){return E((function(e){return e.map((function(e){return W(W({},e),{},{action:e.isSelected?I:e.action})}))}))}),[]),g=(0,r.useCallback)((function(e){return E((function(t){return t.map((function(t){return W(W({},t),{},{action:t.userId===e?T:t.action})}))}))}),[]),P=(0,r.useCallback)((function(){return E((function(e){return e.map((function(e){return W(W({},e),{},{action:e.isSelected&&e.isActive?T:e.action})}))}))}),[]),N=(0,r.useCallback)((function(e){return E((function(t){return t.map((function(t){return W(W({},t),{},{isSelected:t.userId===e?!t.isSelected:t.isSelected})}))}))}),[]),Z=(0,r.useCallback)((function(e){return E((function(t){return t.map((function(t){return W(W({},t),{},{action:t.userId===e?null:t.action})}))}))}),[]),D=(0,r.useCallback)((function(){return E((function(e){return e.map((function(e){return W(W({},e),{},{action:e.isSelected?null:e.action})}))}))}),[]),R=(0,r.useMemo)((function(){return[{Header:U,accessor:"checkbox",Cell:V,minWidth:30,width:30,props:{onSelect:N,onSelectAll:O}},{Header:z("membersView.user"),accessor:"userName",Cell:y.hI,minWidth:170,width:170},{Header:z("membersView.email"),accessor:"email",Cell:y.hI,minWidth:205,width:205},{accessor:"memberActions",Cell:F,minWidth:175,width:175,props:{onClearMark:Z,onMarkForDelete:b,onMarkForDeactivate:g}}]}),[N,O,b,g,Z]),C=(0,r.useMemo)((function(){return p.filter((function(e){return e.action===I})).length}),[p]),A=(0,r.useMemo)((function(){return p.filter((function(e){return e.action===T})).length}),[p]),h=(0,r.useMemo)((function(){return p.some((function(e){return e.isSelected}))}),[p]);return r.createElement("div",{"data-tid":"members-view"},r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,z("membersView.title",{count:t.length,context:u?"documentRoom":"project"}))),r.createElement(o.ZP.Body,null,r.createElement("div",{className:w.bulkActions},r.createElement("span",{className:w.bulkActionText},z("membersView.selectAction")),r.createElement("div",{className:w.bulkActionButtons},r.createElement(c.Z,{type:c.Z.SECONDARY,disabled:!h,onClick:P},z("membersView.markForDeactivate")),r.createElement(c.Z,{type:c.Z.SECONDARY,disabled:!h,onClick:v},z("membersView.markForDelete")),r.createElement(c.Z,{type:c.Z.SECONDARY,disabled:!h,onClick:D},z("membersView.clearMarks")))),r.createElement(y.ZP,{maxHeight:"250px",className:w.tableWrapper,features:{stickyHeader:!0},columns:R,data:p,getRowProps:function(e){return{className:w.row,onClick:function(){return N(e.original.userId)}}},getCellProps:function(){return{className:w.cell}},getHeaderProps:function(){return{className:w.headerCell}}})),r.createElement(o.ZP.Footer,null,r.createElement("div",{className:w.summary,"data-tid":"members-view-summary"},z("membersView.toBeDeleted",{count:C}),r.createElement("span",{className:w.middot}),z("membersView.toBeDeactivated",{count:A})),r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:s},(0,l.t)("button.label.cancel")),r.createElement(c.Z,{type:c.Z.PRIMARY,onClick:function(){f(),s()}},(0,l.t)("button.label.save"))))},Y=n(403455),H=n(668477),Q=n(6587),K=n(465249),X=n(266606),q=n(680252),J=n(741127),$=n(735691),ee=n(776327),te=n(982925);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=(0,l.nD)("projects.cleanup.confirmationView"),oe={confirmationText:""};function ae(){return r.createElement(H.ZP,{name:"confirmationText"},r.createElement(H.ZP.Control,null,(function(e){var t=e.field,n=e.hasError;return r.createElement(Q.Z,(0,p.default)({id:"confirmationText",type:"text",hasError:n},t))})))}var ie=function(e){var t=e.projectId,n=e.resources,a=e.resourcesToClean,s=e.onBack,u=e.isDocumentRoom,m=a.deleteLinks,d=a.usersToDelete,p=a.usersToDisable,E=d.length,f=p.length,O=m?n.linksCount:0,b=re("confirmationText",{deleteUsersCount:E,modifyUsersCount:f,deleteLinksCount:O}),v=(0,r.useMemo)((function(){return function(e){return $.Ry().shape({confirmationText:$.Z_().ensure().required().test("confirmationText",void 0,(function(t,n){var r=n.path,o=n.createError;return t.toUpperCase()===e||o({path:r,message:re("confirmationTextMatchError",{confirmationText:e})})}))})}(b)}),[b]),I=(0,te.bJ)(t,u,{onSuccess:function(){(0,o.Mr)(),ee.ZP.trigger(ee.ZP.Events.Storage.NOTIFICATION.SHOW,"success",re("notifications.success")),u&&X.Z.track(J.FP.CLEANUP_DATA,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"Deleted users":E,"Deactivated users":f,"Deleted links":O},(0,q.zs)()))},onError:function(e){var t=e.response,n=null==t?void 0:t.status,r=(0,l.t)(["projects.cleanup.confirmationView.notifications.error.".concat(n),"projects.cleanup.confirmationView.notifications.error.default"],{context:u?"documentRoom":"project"});ee.ZP.trigger(ee.ZP.Events.Storage.NOTIFICATION.SHOW,"error",r)}}),T=I.mutate,g=I.isLoading,P=I.isSuccess,y=I.isError;return r.createElement("div",{"data-tid":"confirmation-view"},r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,re("title",{context:u?"documentRoom":"project"}))),r.createElement(Y.J9,{initialValues:oe,validationSchema:v,onSubmit:function(){return T(a)}},(function(e){var t=e.isValid,n=e.submitCount;return r.createElement(Y.l0,null,r.createElement(o.ZP.Body,null,r.createElement(N.Z,{icon:Z.yo},r.createElement("div",{"data-tid":"confirmation-view-alert"},r.createElement("span",null,re("alert.summary",{deleteUsersCount:E,modifyUsersCount:f,deleteLinksCount:O})),r.createElement("strong",{className:"kO6ShpVjwgwNPKdwzjEx"},re("alert.irreversibleWarning")))),r.createElement("div",{className:"Y8xvgUtjg03rx2_YiETx"},re("promptConfirmationText",{confirmationText:b})),r.createElement(ae,null)),r.createElement(o.ZP.Footer,null,r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:s},re("actions.back")),r.createElement(K.Z,{isSubmitting:g,failed:y||!t&&n>0,succeeded:P,htmlType:"submit",stateToLabel:function(e){return e===K.Z.STATES.DEFAULT?re("actions.cleanUp"):void 0}})))})))},ce=(0,l.nD)("projects.cleanup.nothingSelectedConfirmationView"),le=function(e){var t=e.onConfirm,n=e.isDocumentRoom;return r.createElement("div",{"data-tid":"confirmation-view"},r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,ce("title"))),r.createElement(o.ZP.Body,null,ce("message",{context:n?"documentRoom":"project"})),r.createElement(o.ZP.Footer,null,r.createElement(c.Z,{type:c.Z.SECONDARY,onClick:o.Mr},(0,l.t)("button.label.done")),r.createElement(c.Z,{type:c.Z.PRIMARY,onClick:t},ce("backAction"))))};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me="actions",de="confirmation",pe="viewMembers",Ee="viewAssociated",fe={deleteLinks:!1,usersToDelete:[],usersToDisable:[]};function Oe(e,t){switch(t.type){case"deleteAllLinks":return ue(ue({},e),{},{deleteLinks:!0});case"skipLinks":return ue(ue({},e),{},{deleteLinks:!1});case"deleteAllUsers":return ue(ue({},e),{},{usersToDelete:t.payload,usersToDisable:[]});case"disableAllUsers":return ue(ue({},e),{},{usersToDelete:[],usersToDisable:t.payload});case"disableAndDeleteUsers":return ue(ue({},e),{},{usersToDelete:t.payload.usersToDelete,usersToDisable:t.payload.usersToDisable});case"skipUsers":return ue(ue({},e),{},{usersToDelete:[],usersToDisable:[]});default:return e}}var be=function(e){var t=e.projectId,n=e.folderName,i=e.closeModal,c=e.resources,l=e.isDocumentRoom,s=(0,r.useReducer)(Oe,fe),u=(0,a.Z)(s,2),m=u[0],d=u[1],p=m.deleteLinks,E=m.usersToDelete,f=m.usersToDisable,O=!p&&E.length+f.length===0,b=function(){var e=(0,r.useState)(me),t=(0,a.Z)(e,2),n=t[0],i=t[1];return{step:n,openCleanupActionsView:function(){i(me),(0,o.Gc)({size:o.ZP.sizes.L})},openAssociatedUsersView:function(){i(Ee),(0,o.Gc)({size:o.ZP.sizes.XL})},openMembersView:function(){i(pe),(0,o.Gc)({size:o.ZP.sizes.XL})},openConfirmationView:function(){i(de),(0,o.Gc)({size:o.ZP.sizes.L})}}}(),v=b.step,I=b.openAssociatedUsersView,T=b.openMembersView,g=b.openCleanupActionsView,N=b.openConfirmationView;return r.createElement(r.Fragment,null,v===me&&r.createElement(P,{folderName:n,resources:c,onCancel:i,resourcesToClean:m,dispatchCleanupAction:d,openAssociatedUsersView:I,openMembersView:T,onSave:N,isDocumentRoom:l}),v===Ee&&r.createElement(R,{resources:c,onCancel:g,isDocumentRoom:l}),v===pe&&r.createElement(B,{members:c.users.members,resourcesToClean:m,dispatchCleanupAction:d,onGoBack:g,isDocumentRoom:l}),v===de&&(O?r.createElement(le,{onConfirm:g,isDocumentRoom:l}):r.createElement(ie,{projectId:t,resources:c,resourcesToClean:m,onBack:g,isDocumentRoom:l})))},ve=n(701329);function Ie(e){var t=e.projectId,n=e.projectStatus,a=e.folderName,i=e.resources,c=e.isDocumentRoom;ve.ZP.logOpenResourcesCleanupModal({projectId:t,projectStatus:n,isDocumentRoom:c}),(0,o.h7)(r.createElement(be,{projectId:t,folderName:a,closeModal:o.Mr,resources:i,isDocumentRoom:c}),{size:o.ZP.sizes.L,onRequestClose:o.Mr})}},869506:function(e,t,n){n.d(t,{Z:function(){return Fe}});var r=n(667294),o=n(610861),a=n(204942),i=n(529439),c=n(776327),l=n(154177),s=n(735691),u=n(581355),m=n(405510),d=n(397404),p=n(762074),E=n(403455),f=n(460474),O=n(78776),b=n(698607),v=n(579621),I=n(32570),T=n(531926),g=n(155570),P=n(339594),N=n(987407),Z=n(821442),y=n(217614),S=n(956729),D=n(889166),R=n(145218),C=n(982925),A=n(930652),h=n(346734),M=n(701329),k=M.HC.unmarkAsProjectAnalytics,L=(0,p.nD)("projects"),j=(0,p.nD)("projects.modal.delete"),w=(0,p.nD)("projects.modal.deleteWithClassification"),_={loading:y.Z.STATES.PROCESSING,success:y.Z.STATES.SUCCESS},F=function(e){var t=e.folderName,n=e.projectId,a=e.closeModal,i=(0,R.useQueryClient)(),c=(0,h.q)(),l=(0,S.Vb)(),s=(0,f.Z)("documentClassificationEnabled"),u=(0,f.Z)("imageClassificationEnabled"),m=s||u?w:j,E=(0,R.useMutation)({mutationFn:C.ZP.delete,onSuccess:function(){k.logUnmarkAsProjectSaved(n),a(),(0,d.c0)("success",L("notification.deleteSuccess",{folder:t})),c(),l(),i.invalidateQueries(C.VF.list())},onError:function(e){var t=e.message;(0,d.c0)("error",D.Z.parseErrorMessage(t,L("notification.genericError")))}}),O=E.mutate,b=E.status;return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,m("title"))),r.createElement(o.ZP.Body,null,r.createElement("div",{className:"lAYRZ5x4EgaSNS7SYTdr"},r.createElement("p",null,m("info",{folder:t})),r.createElement("p",null,m("subInfo")),r.createElement(Z.Z,{as:"a",href:A.Z.helpdesk.ARTICLES.PROJECT_RECOMMENDATIONS_LEARN_MORE,target:"_blank"},m("learnMoreCta")))),r.createElement(o.ZP.Footer,null,r.createElement(v.Z,{type:v.Z.SECONDARY,onClick:function(){a(),k.logUnmarkAsProjectCanceled()}},(0,p.t)("button.label.cancel")),r.createElement(y.Z,{state:_[b]||y.Z.STATES.DEFAULT,onClick:function(){O(n)},stateToLabel:function(){return L("button.deleteConfirmation")}})))},U=n(669147),V=n(33740),x=n(661108),W=n(384132),z=n(553283),G=n(38329),B=n(154522),Y=n(869635),H=n(107583),Q=n(261157),K=n(945205),X=n(400702),q=n(685773),J=(0,p.nD)("projects.locations.removeLocation"),$=(0,p.nD)("button.label"),ee=function(e){var t=e.name,n=e.projectId,a=e.onSuccess,i=e.onCancel,c=(0,C.cO)(n,{onSuccess:a,onError:q.V}).mutate;return(0,r.useEffect)((function(){return(0,o.Gc)({size:X.q6.confirmation}),function(){return(0,o.Gc)({size:X.q6.location})}}),[]),r.createElement(r.Fragment,null,r.createElement(o.ZP.Body,null,r.createElement("span",{className:"ooiCxIHROcFmMIYfJhKc"},J("body",{projectName:t}))),r.createElement(o.ZP.Footer,null,r.createElement(v.Z,{type:v.Z.SECONDARY,onClick:i},$("cancel")),r.createElement(v.Z,{onClick:c},$("remove"))))},te=n(763302),ne=n(499345),re=n(799532),oe=n(926809),ae=n(531081),ie=n.p+"f344e698ca497556852d.webp",ce=n(946018),le=(0,p.nD)("projects.locations.preview");function se(){return r.createElement(m.Z,{"data-tid":"project-locations-alert",className:"XcitsVZL3hkos3tExqDX",icon:u.yo},r.createElement("span",{className:"xIXNlx6TkxxgNYwy5mXW"},le("alert")),r.createElement(Z.Z,{as:"a",target:"_blank",className:"M18O3cxRNggpvatjyMA0",href:A.Z.project.SMART_UPLOAD_FOLDER},(0,p.t)("button.label.learnMore")))}var ue="MiUWnmUn5VMEZDYZFsmS",me="A0K6EnyNaznoI0PwnRW3",de=r.lazy((function(){return Promise.resolve().then(n.bind(n,946018))})),pe=(0,p.nD)("projects.locations"),Ee=(0,p.nD)("button.label");function fe(e){var t=e.onAddLocationClick,n=(0,x.kZ)(x.r);return r.createElement(o.ZP.Body,null,r.createElement("div",{className:"b0pApdr6zuQTC61xEqE9"},r.createElement("img",{src:ie,alt:"",className:"x8D7jqa7cfi8ZgzygQhu",draggable:!1}),r.createElement("div",{className:"vyqAko_iptKC39iwnhoa"},pe("empty.noLocationsInfo")),r.createElement("div",{className:"PtQ3Ca5plDjhM0Y8XfwH"},pe("empty.howItWorks")),r.createElement(v.Z,{disabled:!n,onClick:t},pe("empty.addLocation"))))}function Oe(e){var t=e.location,n=t.name,o=t.radius,a=t.uploadFolderPath,i=t.latitude,c=t.longitude,l=e.onEditLocationClick,s=e.onRemoveLocationClick,u=function(e){var t=e.longitude;return"".concat(e.latitude.toFixed(7),", ").concat(t.toFixed(7))}({latitude:i,longitude:c}),m={lat:i,lng:c};return r.createElement(r.Fragment,null,r.createElement(se,null),r.createElement(r.Suspense,{fallback:r.createElement(te.Z,null)},r.createElement(de,{center:m,zoom:11,dragEnabled:!1,zoomEnabled:!1,mapProps:{className:"eGotpy4tXmuoItSAJb73"}},r.createElement(ce.LocationMarker,{location:m,radius:o}))),r.createElement("div",{className:"ney1nGqlxp39N8NY4Qh9"},r.createElement(re.Z,{"data-tid":"mapMarker",icon:oe.x,className:"geh8dRFjOJ_UjMifGRYO"}),r.createElement("div",{"data-tid":"location-name",className:"LNINWbISgucYRYx58K_g"},n||u),r.createElement(v.Z,{type:v.Z.TERTIARY,className:ue,onClick:l},Ee("edit")),r.createElement(v.Z,{type:v.Z.TERTIARY,className:ue,onClick:s},Ee("remove"))),r.createElement("div",{className:"aHWIfycscsyEwa8YJzZW"},r.createElement("div",{className:"r0m5RIxufLKsTeZgJGgQ","aria-label":pe("preview.labels.radius")},pe("preview.radius")," ",r.createElement(ce.LocationRadius,{meters:o})),n&&r.createElement("div",{className:me},u),r.createElement("div",{className:me},r.createElement(re.Z,{"data-tid":"folder",icon:ae.so,className:"w9SBeIiUIab43yiWuSWG"}),r.createElement(ne.Z,{"aria-label":pe("preview.labels.uploadFolderPath")},a))))}var be=function(e){var t=e.projectId,n=e.onAddLocationClick,o=e.onEditLocationClick,a=e.onRemoveLocationClick,i=(0,C.le)(t,{onError:q.V}),c=i.data,l=i.isLoading,s=i.isSuccess;return l?r.createElement(te.Z,null):r.createElement(r.Fragment,null,s&&c&&r.createElement(Oe,{location:c,onEditLocationClick:o,onRemoveLocationClick:a}),s&&!c&&r.createElement(fe,{onAddLocationClick:n}))},ve=r.lazy((function(){return Promise.all([n.e(532),n.e(8538)]).then(n.bind(n,558538))})),Ie=(0,p.nD)("projects.locations"),Te=(0,p.nD)("projects.locations.notifications"),ge=(0,d.Sh)({namespace:"projects/location"}).showNotification;function Pe(e){var t=e.folderId,n=e.folderName,a=e.folderPath,i=e.project,c=i.id,l=i.name,s=function(){(0,o.GZ)()},u=function(){s(),ge(d.em.success,Te("createLocation.success"))},m=function(){s(),ge(d.em.success,Te("editLocation.success"))},p=function(){s(),ge(d.em.success,Te("removeLocation.success"))},E=function(e){var n=e.isEditingLocation,i=void 0!==n&&n;return function(){(0,o.Ll)(r.createElement(Q.Z,{title:Ie("setLocation.selectLocation.title",{context:i?"editLocation":"addLocation"})},r.createElement(r.Suspense,{fallback:r.createElement(te.Z,null)},r.createElement(ve,{action:i?K.Y.edit:K.Y.add,rootFolderId:t,rootFolderPath:a,projectId:c,onCancel:s,onSuccess:i?m:u}))),{size:o.ZP.sizes.XL,withCloseButton:!0,onRequestClose:o.GZ,isScrollable:!0})}};return r.createElement(be,{projectId:c,onAddLocationClick:E({isEditingLocation:!1}),onEditLocationClick:E({isEditingLocation:!0}),onRemoveLocationClick:function(){(0,o.Ll)(r.createElement(Q.Z,{title:Ie("removeLocation.title")},r.createElement(ee,{name:l||n,projectId:c,onCancel:s,onSuccess:p})))}})}var Ne=n(268778),Ze=n(780851),ye=n(569748),Se=n(733374),De=n(916843),Re=(0,p.nD)("projects.metadata.general");function Ce(e){var t=e.project;return r.createElement(ye.$0,null,r.createElement(Se.oL,{name:"projectLogo",label:Re("logo.labelForProjectCreation"),tooltip:void 0}),null!==t&&r.createElement(De.Z,{"data-tid":"file-picker",name:"specFiles",label:Re("specificationsFile.label"),selectedProjectFolder:t}))}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=(0,p.nD)("projects"),Me=(0,d.Sh)({showExclusively:!0}),ke=Me.showNotification,Le=Me.hideNotifications,je="project-settings";function we(e){var t,n,d,Z,y,S,D,R,A,h,k,L,j,w,_,Q,K,q,J=e.folderId,$=e.folderName,ee=e.folderPath,te=e.canManageProjects,ne=e.closeModal,re=e.initialTab,oe=void 0===re?X.Ze.general:re;(0,x.Av)();var ae=(0,r.useMemo)((function(){return s.Ry().concat((0,B.Z)()).concat((0,Y.Z)()).concat((0,H.Z)())}),[]),ie=(0,r.useState)(oe),ce=(0,i.Z)(ie,2),le=ce[0],se=ce[1],ue=(0,f.Z)("smartSpecFeatureEnabled"),me=(0,f.Z)("projectHomePageEnabled"),de=(0,C.Z0)({select:function(e){return e.find((function(e){return e.rootFolderId===J}))},onError:function(){c.ZP.trigger(c.ZP.Events.Storage.NOTIFICATION.SHOW,"error",he("notification.genericError")),ne()}}),pe=de.data,Ee=void 0===pe?{}:pe,fe=de.isLoading,Oe=(0,C.vd)(null==Ee?void 0:Ee.id,{enabled:ue}).data,be=void 0===Oe?{}:Oe,ve=(0,C.Pv)({projectId:Ee.id,height:80,width:250},{enabled:me}).data,Ie=(0,C.Wt)(Ee),Te=Ie.data,ge=Ie.error,ye=Ie.isEnabled,Se=Ie.isLoading,De=Ie.hasResourcesToClean,Re=(0,C.Wu)(null==Ee?void 0:Ee.id,null==Ee?void 0:Ee.path).mutate,Me=!Ee.id&&!fe,we=(0,f.Z)("smartFoldersEnabled")&&!Me,_e=Ee.status===C.EQ.completed,Fe=!te&&_e,Ue=409===(null==ge||null===(t=ge.response)||void 0===t?void 0:t.status),Ve=(0,r.useMemo)((function(){var e;return 403!==(null==ge||null===(e=ge.response)||void 0===e?void 0:e.status)&&ye}),[ge,ye]),xe=(0,r.useMemo)((function(){return[{key:X.Ze.general,label:he("tabs.general"),Component:W.Z,componentProps:{title:"",isFilesTab:ue}},me&&ue&&{key:X.Ze.files,label:he("tabs.files"),Component:Ce,componentProps:{project:Ee}},{key:X.Ze.timeline,label:he("tabs.timeline"),Component:G.Z,componentProps:{title:"",project:Ee,isCleanupEnabled:Ve,isCleanupInProgress:Ue,hasResourcesToClean:De}},{key:X.Ze.address,label:he("tabs.address"),Component:z.Z,componentProps:{title:""}},we&&{key:X.Ze.location,label:he("tabs.locations"),Component:Pe,componentProps:{folderId:J,folderName:$,folderPath:ee,project:Ee}}].filter(Boolean)}),[we,J,$,ee,Ee,Ve,Ue,De,ue,me]),We=(0,r.useCallback)((function(e){var t=(0,Ze.H0)(e);t&&se(t)}),[]),ze=(0,r.useRef)(null);return(0,r.useEffect)((function(){ze.current&&ze.current.setFieldValue("specFiles",be.files)}),[be]),r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,he("modal.settings.title"))),fe||Se?r.createElement(I.Z,{className:"WbHrruDhOouw5NrvoSOD"}):r.createElement(E.J9,{innerRef:ze,initialValues:{name:null!==(n=Ee.name)&&void 0!==n?n:"",projectId:null!==(d=Ee.projectId)&&void 0!==d?d:"",projectLogo:ve||"",customerName:null!==(Z=Ee.customerName)&&void 0!==Z?Z:"",description:null!==(y=Ee.description)&&void 0!==y?y:"",specFiles:null==be?void 0:be.files,location:{streetAddress1:null!==(S=null===(D=Ee.location)||void 0===D?void 0:D.streetAddress1)&&void 0!==S?S:"",streetAddress2:null!==(R=null===(A=Ee.location)||void 0===A?void 0:A.streetAddress2)&&void 0!==R?R:"",city:null!==(h=null===(k=Ee.location)||void 0===k?void 0:k.city)&&void 0!==h?h:"",state:null!==(L=null===(j=Ee.location)||void 0===j?void 0:j.state)&&void 0!==L?L:"",country:null!==(w=null===(_=Ee.location)||void 0===_?void 0:_.country)&&void 0!==w?w:"",postalCode:null!==(Q=null===(K=Ee.location)||void 0===K?void 0:K.postalCode)&&void 0!==Q?Q:""},status:null!==(q=Ee.status)&&void 0!==q?q:"",startDate:(0,O.Gu)(null==Ee?void 0:Ee.startDate),completionDate:(0,O.Gu)(null==Ee?void 0:Ee.completionDate),cleanup:!1},validationSchema:ae,onSubmit:function(e,t){var n=e.name,r=e.projectId,o=e.customerName,i=e.description,c=e.location,s=e.status,u=e.projectLogo,m=e.specFiles,d=e.startDate,p=e.completionDate,E=e.cleanup,f=t.setSubmitting,b=t.setStatus,v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:n.trim(),projectId:r.trim(),customerName:o.trim(),description:i.trim(),projectLogo:u,location:{streetAddress1:c.streetAddress1.trim(),streetAddress2:c.streetAddress2.trim(),city:c.city.trim(),state:c.state.trim(),country:c.country,postalCode:c.postalCode.trim()},status:s,startDate:(0,O.F6)(d),completionDate:(0,O.F6)(p)},ue&&{specFiles:(0,Ze.cv)(m,null==be?void 0:be.files),unmarkedSpecFiles:(0,Ze.cv)(null==be?void 0:be.files,m)});Re(v,{onSuccess:function(){ke("success",he("notification.successSave")),E?(0,U.Z)({projectId:Ee.id,projectStatus:Ee.status,resources:Te,folderName:$,isDocumentRoom:!1}):ne(),M.HC.logProjectSettingsSaved(v)},onError:function(e){var t=(0,l.lt)(e);t?(b({errors:t}),We(t)):ke("error",(0,l.e$)(e)),f(!1)}})}},r.createElement(E.l0,null,r.createElement(o.ZP.Body,null,r.createElement(Ne.Z,null),r.createElement(V.Z,{tabFields:(0,X.P8)(),handleError:se}),r.createElement("div",{className:"sykX6cCpNSslOJMwFTYP"},r.createElement(g.Z,{tabsKey:je,selectedTabKey:le},xe.map((function(e){var t=e.key,n=e.label;return r.createElement(P.Z,{key:t,tabKey:t,onClick:function(){return se(t)}},n)})))),Ve&&Ue&&r.createElement(m.Z,{"data-tid":"clean-up-in-progress-message",icon:u.yo},he("form.cleanup.inProgressAlert")),xe.map((function(e){var t=e.key,n=e.Component,o=e.componentProps;return r.createElement(N.Z,{className:"YfzDSoIoOJK5fHisNJQC",key:t,tabsKey:je,tabKey:t,selectedTabKey:le},r.createElement(n,o))}))),r.createElement(o.ZP.Footer,null,!Me&&r.createElement(b.Z,{tooltip:he("modal.statusTransitionPolicy"),disabled:!Fe},r.createElement("div",{className:"oOt1krEI6xF2_WoMPetg"},r.createElement(v.Z,{type:v.Z.TERTIARY,variant:v.Z.variants.DESTRUCTIVE,onClick:function(){!function(e){var t=e.project,n=e.folderName;(0,o.h7)(r.createElement(F,{projectId:t.id,folderName:n,closeModal:o.Mr}),{onRequestClose:o.Mr})}({project:Ee,folderName:$}),M.HC.unmarkAsProjectAnalytics.logUnmarkAsProjectClicked()},disabled:Fe},he("button.delete")))),r.createElement(v.Z,{type:v.Z.SECONDARY,onClick:function(){ne(),Le(),M.HC.logProjectSettingsCanceled()}},(0,p.t)("button.label.cancel")),r.createElement(T.Z,{disabled:Ue})))))}var _e=n(662301);function Fe(e){var t=e.folderId,n=e.folderName,a=e.folderPath,i=e.canManageProjects,c=e.initialTab,l=e.source,s=void 0===l?_e.Y.STORAGE:l;M.HC.logProjectSettingsOpened(s),(0,o.h7)(r.createElement(we,{folderId:t,folderName:n,folderPath:a,canManageProjects:i,closeModal:o.Mr,initialTab:c}),{onRequestClose:o.Mr,size:o.ZP.sizes.XL,withCloseButton:!0,isScrollable:!0})}},961281:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(667294),o=n(610861),a=n(701329),i=n(115861),c=n(364687),l=n.n(c),s=n(403455),u=n(32570),m=n(579621),d=n(531926),p=n(397404),E=n(762074),f=n(240801),O=(n(578744),n(898052)),b=n(122776),v=n(524334),I=n(162178),T=n(930652),g=n(777324),P=(0,E.nD)("projects.templateSettings"),N=(0,p.Sh)({showExclusively:!0}),Z=N.showNotification,y=N.hideNotifications,S=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.ZP.logClosingModalWithError(null==t?void 0:t.message),(0,o.Mr)(),Z("error",null==t?void 0:t.message);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function D(e){var t=e.rootFolderId,n=e.rootFolderPath,a=e.permission,i=(0,b.C)(a),c=(0,O.i)(),l=(0,f.useProjectTemplate)(t,{onError:S}),p=l.data,N=l.isLoading,Z=(0,f.useProjectTemplateMutation)(t),D=Z.mutate,R=Z.reset,C=(0,g.Z)({updateTemplate:D,resetTemplateUpdate:R,resourceName:I.U.PROJECT,templateId:t}).onSubmit;return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,P("title"))),N?r.createElement("div",{className:"PM3VC2sSO9rLk9NAsJk3"},r.createElement(u.Z,null)):p&&r.createElement(s.J9,{initialValues:{templateName:p.name,description:(null==p?void 0:p.description)||"",permissionsTemplate:null!=p&&p.permissionsTemplate?JSON.stringify(p.permissionsTemplate,null,"\t"):""},validationSchema:c,onSubmit:C,validateOnChange:!1,validateOnBlur:!1},r.createElement(s.l0,null,r.createElement(o.ZP.Body,null,r.createElement(v.Z,{folderId:t,folderPath:n,resourceName:I.U.PROJECT,disabled:!i,downloadLink:"/resource/SampleProjectTemplatePermissions.json",documentationLink:T.Z.project.templates})),r.createElement(o.ZP.Footer,null,r.createElement(m.Z,{type:m.Z.SECONDARY,onClick:function(){(0,o.Mr)(),y()}},(0,E.t)("button.label.cancel")),r.createElement(d.Z,{disabled:!i})))))}function R(e){var t=e.folderModel;a.ZP.logOpenTemplateSettingsModal(),(0,o.Ll)(r.createElement(D,{rootFolderId:t.get("id"),rootFolderPath:t.get("path"),permission:t.get("permission")}),{onRequestClose:o.GZ,withCloseButton:!0,size:o.ZP.sizes.XL,isScrollable:!0})}},400702:function(e,t,n){n.d(t,{P8:function(){return s},Ze:function(){return c},q6:function(){return l}});var r=n(204942),o=n(93433),a=n(610861),i=n(943886),c={general:"general",files:"files",address:"address",timeline:"timeline",location:"location"},l={location:a.ZP.sizes.XL,confirmation:a.ZP.sizes.M},s=function(){var e,t=(0,i.r0)("smartSpecFeatureEnabled");return e={},(0,r.Z)(e,c.general,["name"].concat((0,o.Z)(t?[]:["projectLogo"]),["projectId","customerName","description"])),(0,r.Z)(e,c.files,t?["specFiles","projectLogo"]:[]),(0,r.Z)(e,c.address,["location.streetAddress1","location.streetAddress2","location.city","location.state","location.country","location.postalCode"]),(0,r.Z)(e,c.timeline,["status","startDate","completionDate"]),e}},763302:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(667294),o=n(32570);function a(){return r.createElement("div",{className:"cTXHhmoKv3TQq0p3HQ3w"},r.createElement(o.Z,null))}},261157:function(e,t,n){n.d(t,{Q:function(){return l},Z:function(){return c}});var r=n(529439),o=n(667294),a=n(610861),i=(0,o.createContext)();function c(e){var t=e.title,n=e.children,c=(0,o.useState)(t),l=(0,r.Z)(c,2),s=l[0],u=l[1],m=(0,o.useCallback)((function(){return u(t)}),[t]);return o.createElement(i.Provider,{value:{title:s,setTitle:u,resetTitle:m}},o.createElement(a.ZP.Header,null,o.createElement(a.ZP.Title,null,s)),n)}var l=function(){return(0,o.useContext)(i)}},945205:function(e,t,n){n.d(t,{Y:function(){return r}});var r={add:"ADD",edit:"EDIT"}},685773:function(e,t,n){n.d(t,{V:function(){return i}});var r=n(154177),o=n(397404),a=(0,o.Sh)({namespace:"projects/location"}).showNotification;function i(e){var t=function(e){return{message:(0,r.FU)(e).map((function(e){return e.msg})).join(". ")||e.message}}(e),n=t.message;a(o.em.error,n)}},780851:function(e,t,n){n.d(t,{H0:function(){return i},cv:function(){return c}});var r=n(93433),o=n(400702);function a(e){var t=(0,o.P8)();return t[o.Ze.general].includes(e)?o.Ze.general:t[o.Ze.files].includes(e)?o.Ze.files:t[o.Ze.timeline].includes(e)?o.Ze.timeline:t[o.Ze.address].includes(e)?o.Ze.address:void 0}function i(e){for(var t=(0,o.P8)(),n=Object.keys(e||{}),i=[].concat((0,r.Z)(t[o.Ze.general]),(0,r.Z)(t[o.Ze.files]),(0,r.Z)(t[o.Ze.timeline]),(0,r.Z)(t[o.Ze.address])),c=0;c<=i.length;c+=1){var l=i[c];if(n.includes(l))return a(l)}}function c(e,t){return null==e?void 0:e.filter((function(e){var n=e.id;return!(null!=t&&t.some((function(e){return e.id===n})))}))}},11196:function(e,t,n){n.d(t,{q:function(){return o}}),n(601714);var r=n(776327);function o(e){var t=e.path;r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REFRESH),r.ZP.trigger(r.ZP.Events.Storage.FOLDER_TREE.FOLDER_REFRESH,{path:t})}n(13764)},72722:function(e,t,n){n.d(t,{ZP:function(){return b}});var r=n(204942),o=n(667294),a=n(869417),i=n(762074),c=n(230238),l=n(823592),s=n(922545),u=n(604769),m=n(716962),d=n(48633),p=n(176314),E=n(675619);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=e.selectedItems,n=(0,l.xH)(t),r=(0,d.Z)(n),f=r.mutate,b=r.isLoading;return(0,o.useMemo)((function(){return function(e){var t=e.selectedItems,n=e.isLoading,r=e.markAsProjectsMultipleFolders;return(0,u.hV)({permissions:[m.W.MARK_AS_PROJECT],id:"markAsProject",label:(0,i.t)("actions.folderActions.markAsProject",{count:t.length}),icon:a.S,onClick:function(e){var t=e.selectedItems,n=(0,l.xH)(t);if((0,p.ay)({items:n.map((function(e){return{id:e.id,path:e.path}}))}),1===n.length){var o=n[0],a=o.id,i=o.parentId,u=o.name,m=o.path;(0,c.Z)({parentFolderId:i,folderId:a,folderName:u,folderPath:m,onProjectMutationSuccess:function(){(0,p.fo)({items:[{id:a,path:m}]})}})}n.length>1&&r(n.map((function(e){var t=e.id,n=e.path;return O(O({},E.s),{},{projectFolderId:t,name:(0,s.Z)(n).fileName})})))},disabledReason:n?(0,i.t)("actions.folderActions.inProgress"):void 0})}({selectedItems:t,isLoading:b,markAsProjectsMultipleFolders:f})}),[t,b,f])}},544663:function(e,t,n){n.d(t,{Z:function(){return p},t:function(){return d}});var r=n(529439),o=n(704548),a=n(762074),i=n(515917),c=n(319783),l=n(42594),s=n(604769),u=n(716962),m=n(729625),d="teamManagement";function p(e){var t=e.resource,n=e.portalKey;return(0,s.hV)({permissions:[u.W.FOLDER_PERMISSIONS],id:d,label:(0,a.t)("storage.actions.teamManagementV2"),tooltip:(0,a.t)("storage.actionsInfo.teamManagement"),icon:o.mc,onClick:function(e){var o=e.selectedItems,a=(0,r.Z)(o,1)[0],i=a.attributes;(0,m.Z)({baseFolderId:t.rootFolderId,basePath:(0,c.dX)(t.path,{prependSlash:!0,appendSlash:!1}),folderPath:(0,c.mB)(t.path,(0,l.DW)(a)),name:i.name,resourceId:t.id,portalName:n})},"data-tid":"team-management","data-pendoid":i.e.CONTEXT_MENU.TEAM_MANAGEMENT})}},824063:function(e,t,n){n.d(t,{iV:function(){return O},jG:function(){return f}});var r=n(667294),o=n(999932),a=n(762074),i=n(604769),c=n(809981),l=n(397404),s=n(32570),u=n(57324),m=n(716962),d=n(236305),p=n(986619),E=n(675356),f="copyUrlFileLink";function O(e){var t=e.selectedItem,n=(0,p.A)({selectedItems:[t]}).CopyUrlFileLink,O=(0,u.cX)(t),b=O.url,v=O.path,I=(0,E.q)(b,{enabled:n.allowed&&(0,d.ry)(v)&&!!b}),T=I.isError,g=I.isLoading,P=I.data;return function(e){var t=e.urlFile,n=e.isLoading,u=e.isError;return(0,i.hV)({permissions:[m.W.COPY_URL_FILE_LINK],id:f,label:(0,a.t)("button.label.copyUrl"),tooltip:n?r.createElement(s.Z,{size:s.Z.SMALL}):t,disabledReason:u?(0,a.t)("error.failedToFetchFileContent"):void 0,icon:c.O,onClick:function(){t&&(0,o.Z)(t,{onSuccess:function(){return(0,l.c0)(l.em.success,(0,a.t)("actions.share.copyURL.success"))}})}})}({urlFile:void 0===P?"":P,isLoading:g,isError:T})}},98922:function(e,t,n){n.d(t,{Z:function(){return ae}});var r=n(204942),o=n(115861),a=n(529439),i=n(364687),c=n.n(i),l=n(667294),s=n(153672),u=n(610861),m=n(660819),d=n(403455),p=n(735691),E=n(534733),f=n(32570),O=n(821442),b=n(579621),v=n(531926),I=n(397404),T=n(762074),g=n(136030),P=n(632417),N=n(933705),Z=n(23947),y=n(727484),S=n.n(y),D=n(154177),R=n(441680),C=n(893274),A=n(936),h=n(40023),M=n(438044),k=n(934244),L=n(87796),j=n(698607),w=n(799532),_=n(581355),F=n(806510),U=n(460474),V=n(266606),x=n(294184),W=n.n(x),z=n(113491),G=n(289098),B=n(117863),Y={select:"kJpQ3M2p6xQIJ_TmE24w",userExpiryType:"WSHCFHWtsI8d9pIRCluJ",fieldRowMargin:"LLO0rSITDQo4xZJfjEPl",accessProtectSwitchWrapper:"l05sYzDAzxrFNKyHvtFk",accessProtectSwitchLabel:"xihFKIsO2gh7Pp3tg_UA",divider:"gQKNawcA4kC7RrkfghAF"},H=(0,T.nD)("users.actions.addNewUser");function Q(e){var t=e.userType,n=e.isServiceAccount,r=e.isUserCollaborateRolesEnabled,o=e.isUserProtectRolesEnabled,a=e.isAuthTypeEnabled,i=e.isIdpUsernameEnabled,c=e.isLdapUserIdEnabled,s=e.userCollaborateRoles,u=e.userProtectRoles,m=e.defaultUserProtectRoles,p=e.isProtectAutoProvisionEnabled,f=e.authTypeOptions,O=(0,d.u6)(),b=O.values,v=b.password,I=b.userName,g=b.email,P=b.expiryType,N=b.personalMessageEnabled,Z=b.authType,y=b.canAccessProtect,D=O.setFieldValue,R=[C.Fd.DELETE_ON_EXPIRY,C.Fd.DISABLE_ON_EXPIRY].includes(P),x=(0,U.Z)("standardUserManagementEnabled"),Q=(0,B.HT)({authType:Z,isServiceAccount:n}),K=(0,l.useMemo)((function(){return t===E.$A.STANDARD?[{value:C.Fd.NEVER,label:H("fields.expiryType.options.never")},{value:C.Fd.DISABLE_ON_EXPIRY,label:H("fields.expiryType.options.deactivateOnDate")},x&&{value:C.Fd.DISABLE_INACTIVE,label:H("fields.expiryType.options.deactivateAfter")},{value:C.Fd.DELETE_ON_EXPIRY,label:H("fields.expiryType.options.deleteOnDate")}].filter(Boolean):[]}),[x,t]),X=(0,l.useMemo)((function(){return[{value:"DISABLE_INACTIVE_1M",label:H("fields.periodOfInactivity.options.1Month")},{value:"DISABLE_INACTIVE_3M",label:H("fields.periodOfInactivity.options.3Months")},{value:"DISABLE_INACTIVE_6M",label:H("fields.periodOfInactivity.options.6Months")},{value:"DISABLE_INACTIVE_12M",label:H("fields.periodOfInactivity.options.12Months")}]}),[]);return l.createElement(l.Fragment,null,l.createElement(A.Z,{name:"firstName",label:H("fields.firstName")}),l.createElement(A.Z,{name:"lastName",label:H("fields.lastName")}),l.createElement(A.Z,{name:"email",label:H("fields.email"),infoTooltip:n?H("serviceAccount.emailTooltip"):null,onBlur:function(){I||D("userName",(0,B.kR)(g))},required:!0}),l.createElement(A.Z,{name:"userName",label:H("fields.username"),required:!0}),Q&&l.createElement(l.Fragment,null,l.createElement(A.Z,{type:"password",name:"password",label:H("fields.password"),required:!0,alert:v&&(0,z.x)(v)}),l.createElement(A.Z,{type:"password",name:"confirmPassword",label:H("fields.confirmPassword"),required:!0})),r&&l.createElement("div",{className:W()(Y.fieldRowMargin,Y.select)},l.createElement(h.Z,{name:"connectRoles.id",label:H(o?"fields.collaborateRoles":"fields.userRole"),options:s})),o&&l.createElement(l.Fragment,null,l.createElement("div",{className:Y.divider}),l.createElement("div",{className:Y.accessProtectSwitchWrapper},l.createElement(M.Z,{name:"canAccessProtect",checked:y,onChange:function(){D("canAccessProtect",!y),D("protectRoles",y?[]:m),V.Z.track("User Directory Unification: Can access S&G toggle ".concat(y?"OFF":"ON"))},suffix:"",label:l.createElement("div",{className:Y.accessProtectSwitchLabel},l.createElement("span",null,H("fields.canAccessProtect.label")),p&&l.createElement(j.Z,{tooltip:H("fields.canAccessProtect.tooltipMessage")},l.createElement("div",null,l.createElement(w.Z,{"data-tid":"protect-auto-provision-icon",icon:_.yo,className:Y.icon,size:w.Z.sizes.M}))))})),y&&l.createElement("div",{className:Y.select},l.createElement(G.MultiSelect,{name:"protectRoles",label:H("fields.protectRoles"),options:u,placeholder:(0,T.t)("roles.placeholder"),isClearable:!1})),l.createElement("div",{className:Y.divider})),a&&l.createElement(l.Fragment,null,l.createElement("div",{className:W()(Y.fieldRowMargin,Y.select)},l.createElement(h.Z,{name:"authType",label:H("fields.authType.label"),options:f})),i&&l.createElement(A.Z,{name:"idpUserName",label:H("fields.idpUserName")}),c&&l.createElement(A.Z,{name:"ldapUserId",label:H("fields.ldapUserId")})),K.length?l.createElement("div",{className:Y.userExpiryType},l.createElement("div",{className:Y.select},l.createElement(h.Z,{name:"expiryType",label:H("fields.expiryType.label"),options:K})),P===C.Fd.DISABLE_INACTIVE&&l.createElement("div",{className:Y.select},l.createElement(h.Z,{name:"periodOfInactivity",label:H("fields.periodOfInactivity.label"),options:X})),R&&l.createElement("div",{"data-tid":"expiry-datepicker"},l.createElement(F.Z,{label:"",name:"expiryValue",dayPickerProps:{disabledDays:{before:S()().add(1,"days").toDate()}}}))):null,!n&&l.createElement(l.Fragment,null,l.createElement(k.Z,{name:"personalMessageEnabled",label:H("fields.personalMessage.label")}),N&&l.createElement(L.Z,{"aria-label":"Custom email message",name:"personalMessage",label:"",placeholder:H("fields.personalMessage.placeholder"),rows:8})))}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var X=(0,T.nD)("users.actions.addNewUser"),q=(0,T.nD)("global"),J=(0,T.nD)("error"),$=(0,T.nD)("roles"),ee=(0,I.Sh)({showExclusively:!0}),te=ee.showNotification,ne=ee.hideNotifications,re=function(e){var t=e.isServiceAccount,n=void 0!==t&&t;return p.Ry().shape({email:p.Z_().required(),userName:p.Z_().required(),password:p.nK().when("authType",{is:function(e){return(0,B.HT)({authType:e,isServiceAccount:n})},then:p.Z_().required()}),confirmPassword:p.nK().when("authType",{is:function(e){return(0,B.HT)({authType:e,isServiceAccount:n})},then:p.Z_().required().test({name:"password_not_equal",test:function(e,t){return e===t.parent.password},message:J("password_not_equal")})}),protectRoles:p.nK().when("canAccessProtect",{is:!0,then:p.IX().min(1,J("roleRequired"))})})};function oe(e){var t=e.userType,n=e.email,i=void 0===n?"":n,p=e.isServiceAccount,I=e.onUserCreated,y=e.requireConfirmation,A=e.folderName,h=e.setUsernameOnInit,M=e.modalHeader,k=(0,s.Lb)("{\n        user.typeName,\n        ui.availableValues,\n        ui.workgroupDisplay.roles,\n        ui.display.userAndGroupDisplaySettings.ssoIdpUsername,\n        features.directory.UnifiedDirectoryServiceEnabled\n    }"),L=(0,a.Z)(k.data,5),j=L[0],w=L[1],_=L[2],F=L[3],U=L[4],V=(0,l.useMemo)((function(){var e,n;return null!==(e=null==w||null===(n=w[t])||void 0===n?void 0:n.authTypes)&&void 0!==e?e:[]}),[w,t]),x=t===E.$A.POWER&&j===E.$A.ADMIN&&_,W=U&&t!==E.$A.STANDARD&&!p&&_,z=(0,l.useMemo)((function(){return V.some((function(e){return[C.fh.AD,C.fh.SSO].includes(e)}))}),[V]),G=(0,g.dc)({enabled:x&&!U}),Y=G.data,H=void 0===Y?[]:Y,J=G.isLoading,ee=(0,g.K2)({},{enabled:W}),oe=ee.data,ae=void 0===oe?[]:oe,ie=ee.isLoading,ce=(0,g.as)({},{enabled:U&&x}),le=ce.data,se=void 0===le?[]:le,ue=ce.isLoading,me=(0,P.m)({enabled:U}),de=me.data,pe=me.isLoading,Ee=U?N.ZP.createUserV2:N.ZP.createUserV1,fe=(0,N.tE)(Ee).mutate,Oe=function(){var e=(0,o.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!y,e.t0){e.next=5;break}return e.next=4,(0,R.My)({usersEmails:[t.email],folderName:A});case 4:e.t0=e.sent;case 5:if(e.t0){e.next=8;break}return e.abrupt("return");case 8:fe(t,n);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=(0,l.useMemo)((function(){return z?V.map((function(e){return{label:X("fields.authType.options.".concat(e)),value:e}})):[]}),[V,z]),ve=(0,l.useMemo)((function(){return de?(0,B.I5)({userType:t,userTypesSettings:de,unifiedDirectoryServiceEnabled:U}):{isEnabled:!1,defaultProtectRoles:[]}}),[t,de,U]),Ie=ve.isEnabled,Te=ae.map((function(e){return{label:e.name,value:e.id,isDisabled:e.id===Z.v.DATA_OWNER||e.id===(null==ve?void 0:ve.protectRoleType)&&Ie,tooltip:e.id===Z.v.DATA_OWNER&&$("cannotAddDataOwnerUser")}})),ge=U?null==se?void 0:se.map((function(e){return{label:e.name,value:e.id}})):H,Pe=J||ue||ie||pe;return l.createElement(l.Fragment,null,l.createElement(u.ZP.Header,null,null!=M?M:l.createElement(u.ZP.Title,null,X("title.".concat(t),{context:p?"service":""}))),l.createElement(d.J9,{enableReinitialize:!0,initialValues:{firstName:"",lastName:"",email:i,userName:h?(0,B.kR)(i):"",password:"",confirmPassword:"",periodOfInactivity:"DISABLE_INACTIVE_1M",expiryType:C.Fd.NEVER,expiryValue:null,authType:C.kF,idpUserName:"",ldapUserId:"",personalMessageEnabled:!1,personalMessage:"",canAccessProtect:Ie,connectRoles:{id:C.if},protectRoles:Ie?ve.defaultProtectRoles:[]},validationSchema:re({isServiceAccount:p}),onSubmit:function(e,n){var o=n.setSubmitting,a=n.setStatus,i=e.firstName,c=e.lastName,s=e.email,d=e.userName,E=e.password,f=e.periodOfInactivity,b=e.expiryType,v=e.expiryValue,T=e.personalMessageEnabled,g=e.personalMessage,P=e.authType,Z=e.idpUserName,y=e.ldapUserId,R=e.connectRoles,A=e.protectRoles,h=(0,B.HT)({authType:P,isServiceAccount:p}),M=(0,B.d$)({authType:P,isSSOIdpUsernameEnabled:F}),k=(0,B.qv)({authType:P}),L=U?"connectRoles":"role",j=U?Object.values(R):R,w=A.length?A.map((function(e){return e.value})):null,_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}((0,r.Z)({isServiceAccount:p,typeName:t,firstName:i,lastName:c,email:s,userName:d,expiryType:b===C.Fd.DISABLE_INACTIVE?f:b,authType:P,password:h?E:void 0,expiryValue:b===C.Fd.NEVER&&b===C.Fd.DISABLE_INACTIVE?null:S()(v).startOf("day").valueOf(),personalMessage:T?g:void 0,idpUserName:M?Z:void 0,ldapUserId:k?y:void 0},L,j),U&&{protectRoles:w});Oe(_,{onSuccess:function(e){(0,N.YA)(),null==I||I(e),te("success",X("successNotification",{userName:d,userId:e.id,class:"add-user-to-group",addToGroupsLink:l.createElement(O.Z,{onClick:function(){(0,u.Ll)(l.createElement(m.Z,{user:e,closeModal:u.Mr}),{onRequestClose:u.Mr})}},X("successNotificationLinkLabel",{userName:d}))})),(0,u.GZ)()},onError:function(e){var t=(0,D.lt)(e);t?(a({errors:t}),"typeName"in t&&te("error",t.typeName)):te("error",(0,D.e$)(e)),o(!1)}})}},(function(e){var n=e.values.authType,r=(0,B.d$)({authType:n,isSSOIdpUsernameEnabled:F}),o=(0,B.qv)({authType:n});return l.createElement(d.l0,null,l.createElement(u.ZP.Body,null,Pe?l.createElement("div",{className:"xs9fCNbmK2yl00Iwn4YH"},l.createElement(f.Z,null)):l.createElement(Q,{userType:t,isAuthTypeEnabled:z,isServiceAccount:p,isUserCollaborateRolesEnabled:x,isUserProtectRolesEnabled:W,authTypeOptions:be,userCollaborateRoles:ge,userProtectRoles:Te,defaultUserProtectRoles:ve.defaultProtectRoles,isProtectAutoProvisionEnabled:Ie,isIdpUsernameEnabled:r,isLdapUserIdEnabled:o})),l.createElement(u.ZP.Footer,null,l.createElement("div",{className:"u3YeWBKaMohj5zQhaV_D"},l.createElement(O.Z,{as:"a",href:q("privacyPolicyUrl"),target:"_blank"},q("privacyPolicy"))),l.createElement(b.Z,{type:b.Z.SECONDARY,onClick:function(){(0,u.GZ)(),ne()}},(0,T.t)("button.label.cancel")),l.createElement(v.Z,null)))})))}function ae(e){var t=e.userType,n=e.email,r=e.isServiceAccount,o=e.onUserCreated,a=e.requireConfirmation,i=e.folderName,c=e.setUsernameOnInit,s=void 0!==c&&c,m=e.modalHeader;(0,u.Ll)(l.createElement(oe,{userType:t,email:n,isServiceAccount:r,onUserCreated:o,requireConfirmation:a,folderName:i,setUsernameOnInit:s,modalHeader:m}),{onRequestClose:u.GZ,size:u.ZP.sizes.M,withCloseButton:!0,shouldCloseOnOverlayClick:!1})}},117863:function(e,t,n){n.d(t,{HT:function(){return d},I5:function(){return f},d$:function(){return p},kR:function(){return m},qv:function(){return E},wQ:function(){return b}});var r=n(93433),o=n(529439),a=n(914578),i=n.n(a),c=n(401552),l=n(534733),s=n(23947),u=n(893274);function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null!==(e=(t||"").split("@")[0].replace(/\+/g,"_"))&&void 0!==e?e:""}function d(e){var t=e.authType;return!(!e.isServiceAccount||t!==u.fh.EGNYTE)}function p(e){var t=e.authType,n=e.isSSOIdpUsernameEnabled;return t===u.fh.SSO&&n}function E(e){return e.authType===u.fh.AD}function f(e){var t=e.userType,n=e.userTypesSettings;if(e.unifiedDirectoryServiceEnabled){if(t===l.$A.ADMIN){var r=n.adminUserSettings.protectAutoProvision;return{isEnabled:r,protectRoleType:s.v.ADMIN,defaultProtectRoles:r?[{label:"Admin",value:s.v.ADMIN}]:[]}}if(t===l.$A.POWER){var o=n.powerUserSettings.protectAutoProvision;return{isEnabled:o,protectRoleType:s.v.POWER_USER,defaultProtectRoles:o?[{label:"Power User",value:s.v.POWER_USER}]:[]}}}return{isEnabled:!1,defaultProtectRoles:[]}}function O(e,t){var n,a=null!==(n=c.hD[e])&&void 0!==n?n:{},i=a[t]||[];return Object.entries(a).forEach((function(e){var n=(0,o.Z)(e,2),a=n[0],c=n[1];"~"===a[0]&&a!=="~".concat(t)&&i.push.apply(i,(0,r.Z)(c))})),Array.from(new Set(i))}function b(e){var t=e.users,n=e.userResourceActions,a=e.canDisplayUserRoles,s=e.canManagePowerUsers,m=e.isServiceAccountAllowed,d=e.currentUserType,p=new Set,E=t.map((function(e){var t=e.status,E=e.authType,f=e.typeName,b=e.resourcePermissions,v=e.permissions;return p.add(f),function(e){var t,n=e.userResourceActions,a=void 0===n?{}:n,s=e.resourcePermissions,m=void 0===s?u.RQ:s,d=e.status,p=e.permissions,E=void 0===p?[]:p,f=e.authType,b=e.typeName,v=e.canDisplayUserRoles,I=e.canManagePowerUsers,T=e.isServiceAccountAllowed,g=e.currentUserType,P=null!==(t=a[m])&&void 0!==t?t:[],N=[].concat((0,r.Z)(O("status",d)),(0,r.Z)(O("authType",f)),(0,r.Z)(O("typeName",b)));return Object.entries(c.Z7).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];P.includes(n)||(N=i().difference(N,r))})),N=function(e){var t=e.actions,n=e.currentUserType,r=e.typeName,o=e.canDisplayUserRoles,a=e.canManagePowerUsers,s=e.isServiceAccountAllowed,u=!(o&&n!==l.$A.ADMIN),m=!(o&&n===l.$A.POWER&&!a),d=!(o&&r===l.$A.POWER&&n===l.$A.POWER),p=s&&n===l.$A.ADMIN,E=[!u&&c.ZP.ACTION_CHANGE_TYPE_ADMIN,!m&&c.ZP.ACTION_CHANGE_TYPE_POWER,!d&&c.ZP.ACTION_CHANGE_EMAIL,!p&&c.ZP.ACTION_TOGGLE_SERVICE_ACCOUNT].filter(Boolean);return i().difference(t,E)}({actions:N,currentUserType:g,typeName:b,canDisplayUserRoles:v,canManagePowerUsers:I,isServiceAccountAllowed:T}),i().union(N,P,E||[])}({status:t,authType:E,typeName:f,resourcePermissions:b,permissions:v,userResourceActions:n,canDisplayUserRoles:a,canManagePowerUsers:s,isServiceAccountAllowed:m,currentUserType:d})}));return i().intersection.apply(i(),(0,r.Z)(E)).filter((function(e){return!(p.has(l.$A.ADMIN)&&e===c.ZP.ACTION_CHANGE_TYPE_ADMIN||p.has(l.$A.POWER)&&e===c.ZP.ACTION_CHANGE_TYPE_POWER||p.has(l.$A.STANDARD)&&e===c.ZP.ACTION_CHANGE_TYPE_STANDARD)}))}},986619:function(e,t,n){n.d(t,{A:function(){return T}});var r=n(667294),o=n(823592),a=n(136988),i=n(982925),c=n(223901),l=n(946264),s=n(221752),u=n(116514),m=n(784936),d=n(904975),p=n(415992),E=n(190544),f=n(601714),O=n(833331),b=n(963648),v=n(460474),I=n(641822);function T(e){var t=e.selectedItems,n=e.location,T=void 0===n?a.GJ.STORAGE:n,g=(0,u.Z)().canViewKnowledgeBase,P=(0,v.Z)("qualityDocsEnabled"),N=(0,s.ah)({includePlaceholderData:!1,includePrompts:null,sortBy:d.K0.CREATED_ON,sortDirection:p.B.ASC,status:O.B.ACTIVE},{retry:!1,staleTime:20*E.A_,enabled:g&&!f.Z.isSnapshotPreview()}),Z=N.data,y=void 0===Z?[]:Z,S=N.isLoading,D=(0,i.Z0)().data,R=void 0===D?[]:D,C=(0,c.Wm)().data,A=void 0===C?[]:C,h=(0,m.Z)({enabled:!!f.Z.isSnapshotPreview()}).restorations,M=void 0===h?[]:h,k=(0,r.useMemo)((function(){return(0,o.xH)(t)}),[t]),L=(0,l.q9)({folderId:1===k.length?k[0].id:""},{enabled:1===k.length&&"folder"===k[0].type}).data,j=void 0===L?[]:L,w=(0,b.vP)({enabled:P&&!(0,I.jl)()}).data,_=void 0===w?[]:w;return(0,r.useMemo)((function(){return(0,a.ZP)(k,{kbListData:!g||S?[]:(null==y?void 0:y.content)||[],location:T,projects:R,documentRooms:A,uploadRequestTemplates:j,snapshotRestorations:M,managedFolders:_})}),[k,g,S,y,T,R,A,j,M,_])}},681304:function(e,t,n){function r(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.userAgent)}n.d(t,{e:function(){return r},x:function(){return o}});var o=function(e){return{RENAME:e?" Return":" Enter",DOWNLOAD:e?" D":"Alt + D",COPY_MOVE:e?" M":"Alt + M",SHARE:e?" S":"Alt + S",DELETE:e?"Delete":"Backspace"}}},660819:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(529439),o=n(667294),a=n(617928),i=n(762074),c=n(307179),l=n(610861),s=n(579621),u=n(758542),m=n(465249),d=n(145218),p=n(933705),E=n(397404),f=n(405510),O=n(727530),b=function(e){var t=e.success,n=e.errors,r=e.closeModal;return o.createElement(o.Fragment,null,o.createElement(l.ZP.Header,null,o.createElement(l.ZP.Title,null,(0,i.t)("users.bulkAlertTitle"))),o.createElement(l.ZP.Body,null,t.length?o.createElement(f.Z,{color:f.Z.SUCCESS},(0,i.t)("users.bulkAlertContentSuccess",{count:t.length})):null,o.createElement("p",{className:"eIyUIkLRaMi6cJ09YpRg"},(0,i.t)("users.bulkAlertContentError")),o.createElement("ul",{className:"aCdXyqHUV3Hvn9ihxamH"},n.map((function(e){return o.createElement("li",{key:e.msg},o.createElement("div",{className:"cKbyHXqEnxmYF8ev6t3p"},e.resource.fullName),o.createElement("div",{className:"l7Kq_x4mpoYv22DHge3Y"},e.msg))}))),o.createElement(O.Z,null)),o.createElement(l.ZP.Footer,null,o.createElement(s.Z,{onClick:r},(0,i.t)("button.label.ok"))))},v=(0,E.Sh)({showExclusively:!0}).showNotification,I=function(e){var t=e.closeModal,n=e.user,E=e.onSuccess,f=e.excludeGroups,O=(0,o.useState)([]),I=(0,r.Z)(O,2),T=I[0],g=I[1],P=(0,o.useState)(void 0),N=(0,r.Z)(P,2),Z=N[0],y=N[1],S=(0,c.oY)(n),D=(0,a.yr)(),R=(0,d.useMutation)({mutationFn:function(){return p.ZP.addToGroups(n.id,T.map((function(e){return{id:e.value.id}})))},onSuccess:function(e){var n=e.success,r=e.errors;r.length?(0,l.h7)(o.createElement(b,{success:n,errors:r,closeModal:t}),{onRequestClose:t}):(function(e,t,n){v("success",(0,i.t)("users.actions.addGroups.successNotification",{count:e.length,groupName:t[0].value.name,userName:n}))}(n,T,S),t(),null==E||E())},onSettled:D}),C=R.mutate,A=R.isLoading,h=R.isSuccess,M=R.isError;return o.createElement(o.Fragment,null,o.createElement(l.ZP.Header,null,o.createElement(l.ZP.Title,null,(0,i.t)("users.actions.addGroups.title",{userName:S}))),o.createElement(l.ZP.Body,null,o.createElement(u.Z,{autoFocus:!0,isMulti:!0,value:T,queryUsers:!1,builtinGroups:!1,onChange:g,filterOption:f?function(e){return!f.includes(e.value.id)}:void 0,onFocus:function(){y(void 0)},className:Z&&"wCDZ4bCp75lshr109NTg"}),o.createElement("span",{className:"RvJxr3q4Q1b77srMuOK0"},Z)),o.createElement(l.ZP.Footer,null,o.createElement(s.Z,{type:s.Z.SECONDARY,onClick:t},(0,i.t)("button.label.cancel")),o.createElement(m.Z,{onClick:function(){T.length?C():y((0,i.t)("error.required"))},isSubmitting:A,failed:M||!!Z,succeeded:h,stateToLabel:function(e){return e===m.Z.STATES.DEFAULT?(0,i.t)("button.label.save"):void 0}})))}}}]);