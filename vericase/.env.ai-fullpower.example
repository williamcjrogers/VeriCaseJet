# =============================================================================
# VeriCase AI FULL POWER Environment Template
# =============================================================================
# Copy to .env or merge with your existing .env to enable all AI capabilities.
# This template unlocks every AI provider, every feature flag, and max settings.
#
# SECURITY: Never commit real API keys! Keep keys in .env or use AWS Secrets Manager.
# =============================================================================

# =============================================================================
# ENVIRONMENT + AWS MODE
# =============================================================================
ENVIRONMENT=development
# Set to true for S3, Bedrock, Textract, Comprehend; false for local MinIO
USE_AWS_SERVICES=true
AWS_REGION=eu-west-2
AWS_DEFAULT_REGION=eu-west-2

# =============================================================================
# AI MODEL API KEYS — 6 PROVIDERS
# =============================================================================
# Obtain keys from each provider's console and paste below.
# See AI_KEY_MANAGEMENT.md and docs/AI_CONFIGURATION_GUIDE.md for URLs.

# OpenAI (GPT-5.x, GPT-4o, o1, embeddings)
# Console: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic (Claude 4.x, Sonnet, Opus, Haiku)
# Console: https://console.anthropic.com/
CLAUDE_API_KEY=
# Optional alias supported in multiple deployment paths
ANTHROPIC_API_KEY=

# Google (Gemini 3/2.5 Pro, Flash, Lite)
# Console: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=

# xAI (Grok 4.x — 2M context, cheapest premium model)
# Console: https://console.x.ai/
XAI_API_KEY=
# Optional alias
GROK_API_KEY=

# Perplexity (Sonar — real-time web search + citations)
# Console: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=

# =============================================================================
# AMAZON BEDROCK (Claude via AWS, Nova models, Titan embeddings)
# =============================================================================
# Bedrock uses IAM credentials (IRSA, instance profile, or keys) — NOT an API key.
BEDROCK_ENABLED=true
BEDROCK_REGION=eu-west-2

# Route Claude requests through Bedrock instead of direct Anthropic API (cost savings)
BEDROCK_ROUTE_CLAUDE=true

# Bedrock Knowledge Base (RAG) — optional
BEDROCK_KB_ID=
BEDROCK_DS_ID=
BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0
BEDROCK_EMBEDDING_MODEL=cohere.embed-english-v3

# =============================================================================
# EMBEDDING / VECTOR SEARCH
# =============================================================================
# Provider: "bedrock" (Cohere Embed v3) or "sentence-transformers" (local)
EMBEDDING_PROVIDER=bedrock
# Enable multi-vector semantic search (content, participant, temporal, attachment)
MULTI_VECTOR_ENABLED=true

# =============================================================================
# AI FEATURE FLAGS — ALL ENABLED
# =============================================================================
ENABLE_AI_AUTO_CLASSIFY=true
ENABLE_AI_DATASET_INSIGHTS=true
ENABLE_AI_NATURAL_LANGUAGE_QUERY=true
AI_WEB_ACCESS_ENABLED=true

# Default model for quick tasks (options: gemini, openai, anthropic, bedrock, xai, perplexity)
AI_DEFAULT_MODEL=gemini

# Task complexity default: basic | moderate | deep_research | advanced
AI_TASK_COMPLEXITY_DEFAULT=advanced

# =============================================================================
# AI FALLBACK + ROUTING + ORCHESTRATION
# =============================================================================
# Enable automatic provider failover when one fails
AI_FALLBACK_ENABLED=true
AI_FALLBACK_LOG_ATTEMPTS=true

# Routing strategy: performance | cost | latency | quality | balanced | pinned | fallback
AI_ROUTING_STRATEGY=balanced

# Prefer Bedrock models (cost optimization)
AI_PREFER_BEDROCK=true

# Enable multi-model orchestration (parallel calls to multiple providers)
AI_ENABLE_MULTI_MODEL=false

# Enable validation phase (second model checks first model's output)
AI_ENABLE_VALIDATION=true

# =============================================================================
# AWS AI SERVICES — ALL ENABLED
# =============================================================================
USE_TEXTRACT=true
AWS_REGION_FOR_TEXTRACT=eu-west-2
USE_COMPREHEND=true
USE_KNOWLEDGE_BASE=true
MACIE_ENABLED=true

# =============================================================================
# SIGPARSER (Email Threading)
# =============================================================================
SIGPARSER_API_KEY=
SIGPARSER_BASE_URL=https://api.sigparser.com
SIGPARSER_ENABLED=true

# =============================================================================
# DATABASE / STORAGE / SERVICES (adjust per environment)
# =============================================================================
# For local Docker dev:
DATABASE_URL=postgresql+psycopg2://vericase:vericase@postgres:5432/vericase
REDIS_URL=redis://redis:6379/0
OPENSEARCH_HOST=opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_USE_SSL=false
OPENSEARCH_VERIFY_CERTS=false
OPENSEARCH_INDEX=emails
TIKA_URL=http://tika:9998

# MinIO (local) or S3 (AWS) — adjust per USE_AWS_SERVICES
MINIO_ENDPOINT=http://minio:9000
MINIO_PUBLIC_ENDPOINT=http://localhost:9002
MINIO_ACCESS_KEY=admin
MINIO_SECRET_KEY=changeme123
MINIO_BUCKET=vericase-docs
S3_BUCKET=vericase-docs

# =============================================================================
# SECURITY (CHANGE THESE!)
# =============================================================================
JWT_SECRET=REPLACE_WITH_SECURE_64_CHAR_SECRET__openssl_rand_-base64_48
JWT_ISSUER=vericase-pst-analysis
JWT_EXPIRE_MIN=7200
CORS_ORIGINS=http://localhost:8010,http://localhost:3000

# =============================================================================
# PRODUCTION NOTES
# =============================================================================
# 1. For production, use IAM roles instead of AWS_ACCESS_KEY_ID.
# 2. Store AI keys in AWS Secrets Manager:
#       AWS_SECRETS_MANAGER_AI_KEYS=vericase/ai-api-keys
# 3. Rotate JWT_SECRET and all API keys regularly.
# 4. See docs/AI_CONFIGURATION_GUIDE.md for full instructions.
# =============================================================================
