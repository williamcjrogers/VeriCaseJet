"use strict";(self.webpackChunkEgnyte_CommonUI=self.webpackChunkEgnyte_CommonUI||[]).push([[9716],{154865:function(e,t,n){function r(e){return 202!==e.status}n.d(t,{$:function(){return r}})},425404:function(e,t,n){n.d(t,{v:function(){return d},w:function(){return m}});var r=n(204942),o=n(145218),a=n(33142),i=n(240701),l=n(23661);function s(){return(0,l.ZP)(i.Z.ETMF.FILING_LEVELS)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){return(0,o.useQuery)(u({queryKey:a.M.studies.FILING_LEVELS,queryFn:s},(0,a.k)(e)))}function m(e,t){var n=e.studyId;return(0,o.useQuery)(u({queryKey:a.M.studies.LOCK_STATUS({studyId:n}),queryFn:function(){return function(e){var t=e.studyId;return(0,l.ZP)(i.Z.ETMF.STUDY_LOCK_STATUS(t))}({studyId:n})}},(0,a.k)(t)))}},179521:function(e,t,n){n.d(t,{$z:function(){return o},_y:function(){return a},oA:function(){return r}});var r={TRIAL:"TRIAL",COUNTRY:"COUNTRY",SITE:"SITE"},o={INACTIVE:"INACTIVE",ACTIVE:"ACTIVE",LOCKED:"LOCKED"},a={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"}},551266:function(e,t,n){n.d(t,{i:function(){return c}});var r=n(204942),o=n(145218),a=n(33142),i=n(240701),l=n(23661);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){var n=e.studyId,c=e.filingLevel,u=e.filingLevelId;return(0,o.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queryKey:a.M.milestones.LISTING({studyId:n,filingLevel:c,filingLevelId:u}),queryFn:function(){return function(e){var t=e.studyId,n=e.filingLevel,r=e.filingLevelId;return(0,l.ZP)(i.Z.ETMF.STUDY_MILESTONES({studyId:t,filingLevel:n,filingLevelId:r}))}({studyId:n,filingLevel:c,filingLevelId:u})}},(0,a.k)(t)))}},87554:function(e,t,n){n.d(t,{Ep:function(){return Z},P5:function(){return O},WR:function(){return h},k7:function(){return y}});var r=n(145987),o=n(115861),a=n(204942),i=n(93433),l=n(364687),s=n.n(l),c=n(776327),u=n(221842),d=n.n(u),m=n(145218),f=n(154177),p=n(945450),v=["onSuccess"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={base:["fsi"],fetchFolder:function(e,t){return[].concat((0,i.Z)(b.base),[e,t])}};function O(e,t){return(0,m.useQuery)(g(g({},t),{},{queryKey:b.fetchFolder(e.path,e.requestFields),queryFn:function(){return p.Wk(e.path,e.requestFields)}}))}function h(e,t){return(0,m.useQuery)(g(g({},t),{},{queryKey:b.fetchFolder(e.path),queryFn:(n=(0,o.Z)(s().mark((function t(){var n,r,o,a,i,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Wk(e.path,e.requestFields);case 3:return r=t.sent,t.abrupt("return",Promise.resolve({folder:r,isNew:!1}));case 7:t.prev=7,t.t0=t.catch(0),n=t.t0;case 10:if(t.prev=10,!(0,f.k0)(n)||404!==n.response.status){t.next=18;break}return a=e.path.split("/"),i=a.pop(),t.next=16,p.L6(e.parentFolderId)({name:i,parentPath:null!==(o=e.parentPath)&&void 0!==o?o:a.join("/")});case 16:return l=t.sent,t.abrupt("return",Promise.resolve({folder:l,isNew:!0}));case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(10),n=t.t1;case 23:return t.abrupt("return",Promise.reject(n));case 24:case"end":return t.stop()}}),t,null,[[0,7],[10,20]])}))),function(){return n.apply(this,arguments)})}));var n}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,n=(0,r.Z)(e,v);return(0,m.useMutation)(g(g({mutationFn:p.Z5},n),d()({onSuccess:function(){c.ZP.trigger(c.ZP.Events.Storage.FOLDER.REFRESH),c.ZP.trigger(c.ZP.Events.Storage.SEARCH_REFRESH)}},{onSuccess:t})))}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.useMutation)(g({mutationFn:p.gQ},e))}},156552:function(e,t,n){n.d(t,{VD:function(){return m},_1:function(){return c},ro:function(){return d}});var r=n(115861),o=n(364687),a=n.n(o),i=n(240701),l=n(23661),s=n(762074),c=function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.ZP)(i.Z.FSI.TRANSCRIPT.DOWNLOAD_TRANSCRIPT(t),{method:"POST"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=(0,s.nD)("error.contentIndexStatus"),d=function(e){var t=e.responseJSON,n=e.status,r=e.isTranscriptStatus;switch(null==t?void 0:t.status){case"INIT":case"IN_PROGRESS":return{message:u("inProcess",{context:r?"transcript":void 0}),title:u("inProcessTitle"),status:n};case"STATUS_NOT_FOUND":return{message:u("statusNotFound",{context:r?"transcript":void 0}),title:u("statusNotFoundTitle"),status:n};case"CONTENT_NOT_FOUND":return{message:u("noContent",{context:r?"transcript":void 0}),title:u("noContentTitle"),status:n};case"SKIPPED":return{message:u("ineligible",{context:r?"transcript":void 0}),title:u("ineligibleTitle"),status:n};case"OBJECT_NOT_FOUND":return{message:u("objectNotFound"),title:u("objectNotFoundTitle"),status:n};default:return{message:u("failed"),title:u("failedTitle"),status:n}}},m=function(){var e=(0,r.Z)(a().mark((function e(t){var n,o,s,c,u,m=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(m.length>1&&void 0!==m[1])||m[1],e.prev=1,e.next=4,(0,l.ZP)(i.Z.FSI.TRANSCRIPT.CONTENT_STATUS({entryId:t}),{},{getDataCallback:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if("SUCCESS"===(n=e.sent).status){e.next=5;break}throw{response:t,responseJSON:n};case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 4:return o=e.sent,e.abrupt("return",o);case 8:throw e.prev=8,e.t0=e.catch(1),s=e.t0,c=s.responseJSON,u=s.response,d({responseJSON:c,status:u.status,isTranscriptStatus:n});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},647360:function(e,t,n){n.d(t,{E:function(){return o},a:function(){return r}});var r={rule:{creation:"ruleCreation",application:"ruleApplication"}},o={FOLDER_ASSOCIATION_NOT_ALLOWED:function(e){return e===r.rule.creation?"error.folderAssociationNotAllowedDuringRuleCreation":"error.folderAssociationNotAllowed"}}},507646:function(e,t,n){n.d(t,{bd:function(){return h},M3:function(){return O},vH:function(){return y},Oo:function(){return Z},dW:function(){return g},fT:function(){return E},Y_:function(){return b}});var r=n(204942),o=n(145218),a=n(221842),i=n.n(a),l=n(145987),s=n(23661),c=n(240701),u=["ruleId"],d={fetchMetadataRules:function(){return(0,s.ZP)(c.Z.METADATA.METADATA_RULES)},fetchMetadataRule:function(e){return(0,s.ZP)(c.Z.METADATA.METADATA_RULE(e))},createMetadataRule:function(e){return(0,s.ZP)(c.Z.METADATA.METADATA_RULES,{method:"POST",body:e})},fetchFolderAssociatedMetadataRules:function(e){return(0,s.ZP)(c.Z.METADATA.FOLDER_ASSOCIATED_METADATA_RULES(e))},updateFolderAssociations:function(e){var t=e.body,n=e.folderId;return(0,s.ZP)(c.Z.METADATA.UPDATE_FOLDER_ASSOCIATED_METADATA_RULES(n),{method:"PATCH",body:t})},updateMetadataRules:function(e){var t=e.ruleId,n=(0,l.Z)(e,u);return(0,s.ZP)(c.Z.METADATA.UPDATE_METADATA_RULES(t),{method:"PATCH",body:n})},deleteMetadataRules:function(e){return(0,s.ZP)(c.Z.METADATA.UPDATE_METADATA_RULES(e),{method:"DELETE",headers:{"X-Egnyte-Force-Delete":"Yes"}})}},m=n(588367);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={METADATA_RULES:["metadata/rules"],METADATA_RULE:function(e){return["metadata/rules",e]},FOLDER_ASSOCIATED_METADATA_RULES:["folder-associated/metadata/rules"]};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useQuery)(p({queryKey:v.METADATA_RULES,queryFn:d.fetchMetadataRules},e))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.useQuery)(p({queryKey:v.METADATA_RULE(e),queryFn:function(){return d.fetchMetadataRule(e)}},t))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.useQueryClient)();return(0,o.useMutation)(p({mutationFn:function(e){var t=e.rule;return d.updateMetadataRules(t)}},i()({onSuccess:function(){n.invalidateQueries(v.METADATA_RULES),n.invalidateQueries(m.ad.NAMESPACES())}},t)))}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.useQueryClient)();return(0,o.useMutation)(p({mutationFn:function(){return d.deleteMetadataRules(e)}},i()({onSuccess:function(){n.invalidateQueries(v.METADATA_RULES),n.invalidateQueries(m.ad.NAMESPACES())}},t)))}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.useQueryClient)();return(0,o.useMutation)(p({mutationFn:function(e){return d.createMetadataRule(e)}},i()({onSuccess:function(){t.invalidateQueries(v.METADATA_RULES),t.invalidateQueries(m.ad.NAMESPACES())}},e)))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.useQuery)(p({queryKey:v.FOLDER_ASSOCIATED_METADATA_RULES,queryFn:function(){return d.fetchFolderAssociatedMetadataRules(e)}},t))}var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.useQueryClient)();return(0,o.useMutation)(p({mutationFn:function(e){return d.updateFolderAssociations(e)}},i()({onSuccess:function(){t.invalidateQueries(v.FOLDER_ASSOCIATED_METADATA_RULES)}},e)))}},544095:function(e,t,n){n.d(t,{Gs:function(){return r.Gs},Kx:function(){return r.Kx},Ok:function(){return r.Ok},PF:function(){return r.PF},TE:function(){return r.TE},_E:function(){return r._E},bY:function(){return r.bY},c_:function(){return r.c_},hX:function(){return r.hX},i6:function(){return r.i6},qf:function(){return r.qf},r:function(){return r.r},r2:function(){return r.r2},zx:function(){return r.zx}});var r=n(416214);n(298755)},416214:function(e,t,n){n.d(t,{Gs:function(){return R},Kx:function(){return S},Ok:function(){return I},PF:function(){return A},TE:function(){return M},_E:function(){return P},bY:function(){return L},c_:function(){return w},hX:function(){return T},i6:function(){return C},qf:function(){return k},r:function(){return D},r2:function(){return N},zx:function(){return F}});var r=n(93433),o=n(115861),a=n(145987),i=n(204942),l=n(364687),s=n.n(l),c=n(145218),u=n(221842),d=n.n(u),m=n(460474),f=n(427691),p=n(298755),v=["enabled"],E=["enabled"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O="tcms",h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[O].concat(t).map(String)},y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.apply(void 0,["classifier"].concat(t))},Z={TRAINABLE_CLASSIFIERS:h("listing"),TRAINABLE_CLASSIFIER_DETAILS:function(e){return y(e,"details")},TRAINABLE_CLASSIFIER_CANDIDATES:function(e){return y(e,"candidates")},FOLDER_ASSOCIATIONS:function(e){return h("folderAssociations",e)}};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:p.oc},d()({onSuccess:function(){return t.invalidateQueries(Z.TRAINABLE_CLASSIFIERS)}},e)))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.useQuery)(b({queryKey:Z.TRAINABLE_CLASSIFIER_DETAILS(e),queryFn:function(){return(0,p.ks)(e)}},t))}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:function(t){return(0,p.Su)(e,t)}},d()({onSuccess:function(){n.invalidateQueries(Z.TRAINABLE_CLASSIFIERS),n.invalidateQueries(Z.TRAINABLE_CLASSIFIER_DETAILS(e))}},t)))}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,r=(0,a.Z)(e,v),o=(0,m.Z)("trainableClassifiersEnabled"),i=o&&n;return(0,c.useQuery)(b({queryKey:Z.TRAINABLE_CLASSIFIERS,queryFn:p.I6,enabled:i},r))}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:p.Wj},d()({onSuccess:function(){return t.invalidateQueries(Z.TRAINABLE_CLASSIFIERS)}},e)))}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:p.wH},d()({onSuccess:function(){return t.invalidateQueries(Z.TRAINABLE_CLASSIFIERS)}},e)))}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:p.Qp},d()({onSuccess:function(){return t.invalidateQueries(Z.TRAINABLE_CLASSIFIERS)}},e)))}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:p.FE},d()({onSuccess:function(){return t.invalidateQueries(Z.TRAINABLE_CLASSIFIERS)}},e)))}function R(e){var t=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:p.KK},d()({onSuccess:function(){return t.invalidateQueries(Z.TRAINABLE_CLASSIFIERS)}},e)))}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.useQuery)(b({queryKey:Z.TRAINABLE_CLASSIFIER_CANDIDATES(e),queryFn:function(){return(0,p.Q)(e)}},t))}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:function(t){return(0,p.u0)(e,t)},onSuccess:function(){n.invalidateQueries(Z.TRAINABLE_CLASSIFIERS),n.invalidateQueries(Z.TRAINABLE_CLASSIFIER_DETAILS(e))}},t))}function F(e){var t,n=e.folderFileLimit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},l=d()(i,a);return(0,c.useMutation)(b({mutationFn:(t=(0,o.Z)(s().mark((function e(t){var o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.next=3,Promise.all(t.map((function(e){return(0,f.MZ)(e,{type:f.PP.FILE,limit:n})})));case 3:if(!(a=e.sent)){e.next=7;break}return i=a.reduce((function(e,n,a){var i=n.contents.results;return 0===i.length?(o.push(t[a]),e):[].concat((0,r.Z)(e),(0,r.Z)(i))}),[]),e.abrupt("return",{files:i,emptyFolders:o});case 7:return e.abrupt("return",{files:[],emptyFolders:o});case 8:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},l))}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enabled,r=void 0===n||n,o=(0,a.Z)(t,E),i=(0,m.Z)("trainableClassifiersEnabled"),l=i&&r;return(0,c.useQuery)(b({queryKey:Z.FOLDER_ASSOCIATIONS(e),queryFn:function(){return(0,p.CL)(e)},enabled:l},o))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.useQueryClient)();return(0,c.useMutation)(b({mutationFn:function(t){return(0,p.Wv)(e,t)}},d()({onSuccess:function(){n.invalidateQueries(Z.FOLDER_ASSOCIATIONS(e))}},t)))}},298755:function(e,t,n){n.d(t,{CL:function(){return E},FE:function(){return m},I6:function(){return s},KK:function(){return f},Q:function(){return p},Qp:function(){return d},Su:function(){return l},Wj:function(){return c},Wv:function(){return g},ks:function(){return i},oc:function(){return a},u0:function(){return v},wH:function(){return u}});var r=n(23661),o=n(240701);function a(e){return(0,r.ZP)(o.Z.TCMS.CLASSIFIERS,{method:"POST",body:e})}function i(e){return(0,r.ZP)(o.Z.TCMS.CLASSIFIER(e),{method:"GET"})}function l(e,t){return(0,r.ZP)(o.Z.TCMS.CLASSIFIER(e),{method:"PUT",body:t})}function s(){return(0,r.ZP)(o.Z.TCMS.CLASSIFIERS,{method:"GET"}).then((function(e){return e.results}))}function c(e){return(0,r.ZP)(o.Z.TCMS.ACTIVATE_CLASSIFIER(e),{method:"POST"})}function u(e){return(0,r.ZP)(o.Z.TCMS.DEACTIVATE_CLASSIFIER(e),{method:"POST"})}function d(e){return(0,r.ZP)(o.Z.TCMS.RETRY_CLASSIFIER(e),{method:"POST"})}function m(e){return(0,r.ZP)(o.Z.TCMS.ROLLBACK_CLASSIFIER(e),{method:"POST"})}function f(e){return(0,r.ZP)(o.Z.TCMS.CLASSIFIER(e),{method:"DELETE"})}function p(e){return(0,r.ZP)(o.Z.TCMS.CLASSIFIER_CANDIDATES(e),{method:"GET"})}function v(e,t){return(0,r.ZP)(o.Z.TCMS.ANSWERS(e),{method:"POST",body:{answers:t}})}function E(e){return(0,r.ZP)(o.Z.TCMS.FOLDER_ASSOCIATIONS(e))}function g(e,t){return(0,r.ZP)(o.Z.TCMS.FOLDER_ASSOCIATIONS(e),{method:"PATCH",body:t})}},491188:function(e,t,n){n.d(t,{LS:function(){return r},gf:function(){return o},nr:function(){return a}});var r={CREATING:"CREATING",FAILED:"FAILED",INACTIVE:"INACTIVE",ACTIVE:"ACTIVE",ROLLING_BACK:"ROLLING_BACK"},o={SELECTED_FILES:"SELECTED_FILES",FILES_FROM_TRAINING:"FILES_FROM_TRAINING"},a={MATCHED:"MATCHED",NOT_MATCHED:"NOT_MATCHED"}},649453:function(e,t,n){n.d(t,{EY:function(){return g},xR:function(){return O},d5:function(){return v},W1:function(){return E},SF:function(){return b}});var r=n(204942),o=n(93433),a=n(318450),i=n(240701),l=n(190544),s=n(23661);function c(e){var t=e.portalEntryId,n=e.resourceTypeKey,r=e.resourceId,o=e.folderPath,a=e.portalName;return(0,s.ZP)(i.Z.EXTERNAL_PORTAL.PROXY.PARTICIPANT_ITEMS({portalName:a,portalEntryId:t,resourceTypeKey:n,resourceId:r,folderPath:o}))}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m="users",f="groups",p={all:["folderManagement"],fullUserList:function(e){return[].concat((0,o.Z)(p.all),["fullUserList",e])},groupsList:function(e){return[].concat((0,o.Z)(p.all),["groupsList",e])},folders:function(e){return[].concat((0,o.Z)(p.all),["folders",e])}};function v(e){var t=e.resourceId,n=e.portalName,r=e.nameFilterValue,c=void 0===r?"":r,u=e.typeFilterValue,m=void 0===u?"":u,f=e.sortOptions,v=void 0===f?{id:"",desc:!1}:f,E=e.options,g=void 0===E?{}:E;return(0,a.useQuery)(d({queryKey:[].concat((0,o.Z)(p.fullUserList(t)),[c,m,"".concat(v.id,"-").concat(v.desc),v.toString()]),queryFn:function(){return(0,s.ZP)(i.Z.EXTERNAL_PORTAL.PROXY.PARTICIPANTS({portalName:n,resourceId:t,query:c,type:m,sort:v}))},staleTime:10*l.A_,refetchOnWindowFocus:!1,refetchOnMount:"always"},g))}function E(e){var t=e.resourceId,n=e.portalName,r=e.options,c=void 0===r?{}:r;return(0,a.useQuery)(d({queryKey:[].concat((0,o.Z)(p.groupsList(t)),[n]),queryFn:function(){return(0,s.ZP)(i.Z.EXTERNAL_PORTAL.PROXY.PARTICIPANTS({portalName:n,resourceId:t,query:null,type:"GROUP",sort:null}))},staleTime:10*l.A_,refetchOnWindowFocus:!1,refetchOnMount:"always"},c))}function g(e){var t=e.isGroup,n=void 0!==t&&t,r=e.portalEntryId,i=e.resourceId,l=e.folderPath,s=e.portalName,u=e.options,v=void 0===u?{}:u,E=n?f:m;return(0,a.useQuery)(d({queryKey:[].concat((0,o.Z)(p.folders(i)),[E,r,l]),queryFn:function(){return c({portalEntryId:r,resourceTypeKey:E,resourceId:i,folderPath:l,portalName:s})},refetchOnWindowFocus:!1,refetchOnMount:"always"},v))}function b(e){var t=e.resourceId,n=e.isGroup,r=e.portalEntryId,i=e.folderPath,l=(0,a.useQueryClient)(),s=n?f:m;return function(){l.invalidateQueries([].concat((0,o.Z)(p.folders(t)),[s,r,i]))}}function O(e){var t=e.isGroup,n=e.portalEntryId,r=e.resourceId,o=e.portalName,i=e.options,l=void 0===i?{}:i;return(0,a.useMutation)(d({mutationFn:function(e){return c({portalEntryId:n,resourceTypeKey:t?f:m,resourceId:r,folderPath:e,portalName:o})}},l))}},912024:function(e,t,n){n.d(t,{ZP:function(){return C}});var r=n(487462),o=n(145987),a=n(667294),i=n(494090),l=n(698607),s=n(652421),c=n(294595),u=n(799532),d=n(499345),m=n(40509),f=n(137958),p=n(460474),v=n(579648),E=n(583599),g=["id","label","description","icon","iconUrl","count","shortcut","onClick","tooltip","disabledReason","tooltipProps","permissions","tidPrefix","type","variant"],b=["id","label","icon","iconUrl","description","count","shortcut","onClick","actions","tooltip","disabledReason","tidPrefix","type","sort"],O=["id","actions","tidPrefix","sort"],h=function(e,t){return e?"".concat(e,"--").concat(t):t};function y(e){var t=e.count;return a.createElement(s.Z,{color:s.Z.BLUE,type:s.Z.types.FILLED},t)}var Z=(0,a.memo)((function(e){var t=e.iconUrl;return a.createElement("div",{className:"KGtx33DE0v9vCwpDI0bg"},a.createElement(c.Z,{iconUrl:t,variant:u.Z.variants.INFO,size:"20px"}))})),I=(0,a.memo)((function(e){var t=e.label,n=e.description,r=e.icon,o=e.iconUrl,l=e.count,s=e.shortcut,c=e.disableTooltip;return a.createElement(a.Fragment,null,r&&a.createElement(i.Z.Icon,{size:"20px",icon:r}),o&&a.createElement(Z,{iconUrl:o}),a.createElement(i.Z.Content,null,a.createElement(i.Z.Label,null,a.createElement(d.Z,{disableTooltip:c},t)),n&&a.createElement(i.Z.Description,null,n)),!!l&&a.createElement(y,{count:l}),!(null==s||!s.label)&&a.createElement(m.Z.Paragraph,{type:"p2",color:"grey600"},s.label))}));function S(e){var t=e.id,n=e.label,s=e.description,c=e.icon,u=e.iconUrl,d=e.count,m=e.shortcut,E=e.onClick,b=e.tooltip,O=e.disabledReason,y=e.tooltipProps,Z=(e.permissions,e.tidPrefix),S=(e.type,e.variant),P=(0,o.Z)(e,g),N=(0,v.J)(),C=N.onAction,D=N.onClickProps,T=O||b,A=(0,p.Z)("contextMenuShortcutsEnabled"),R=h(Z,t),w=function(){E(D),null==C||C({id:t,label:n})},L=A&&!O&&(null==m?void 0:m.keys);return(0,f.bx)({shortcut:L?m.keys:void 0,onShortcut:L?w:void 0}),a.createElement(l.Z,(0,r.default)({tooltip:T},y),a.createElement(i.Z,(0,r.default)({onClick:w,disabled:!!O,"data-tid":R,role:"menuitem",variant:S},P),a.createElement(I,{label:n,description:s,icon:c,iconUrl:u,count:d,disableTooltip:!!T,shortcut:O?void 0:m})))}function P(e){var t=e.id,n=e.label,l=e.icon,s=e.iconUrl,c=e.description,u=e.count,d=e.shortcut,m=e.onClick,E=e.actions,g=e.tooltip,O=e.disabledReason,y=e.tidPrefix,Z=(e.type,e.sort,(0,o.Z)(e,b)),S=(0,v.J)(),P=S.onAction,N=S.onClickProps,D=(0,p.Z)("contextMenuShortcutsEnabled"),T=m?function(){null==m||m(N),null==P||P({id:t,label:n})}:void 0,A=h(y,t),R=O||g,w=D&&!O&&(null==d?void 0:d.keys)&&T;return(0,f.bx)({shortcut:w?d.keys:void 0,onShortcut:w?T:void 0}),a.createElement(i.Z.Nested,(0,r.default)({content:a.createElement(I,{label:n,description:c,icon:l,iconUrl:s,count:u,disableTooltip:!!R,shortcut:O?void 0:d}),onClick:T,tooltipProps:{tooltip:R},disabled:!!O,"data-tid":A},Z),E.map((function(e){return a.createElement(C,{key:"".concat(t,"-").concat(e.id),item:e,tidPrefix:A})})))}function N(e){var t=e.id,n=e.actions,l=e.tidPrefix,s=(e.sort,(0,o.Z)(e,O)),c=h(l,t);return a.createElement(i.Z.Group,(0,r.default)({"data-tid":c},s),n.map((function(e){return a.createElement(C,{key:"".concat(t,"-").concat(e.id),item:e,tidPrefix:c})})))}function C(e){var t=e.item,n=e.tidPrefix;switch(t.type){case E.K.ACTION:return a.createElement(S,(0,r.default)({},t,{tidPrefix:n}));case E.K.GROUP:return a.createElement(N,(0,r.default)({},t,{tidPrefix:n}));case E.K.SUBMENU:return a.createElement(P,(0,r.default)({},t,{tidPrefix:n}));default:return null}}},583599:function(e,t,n){n.d(t,{K:function(){return r}});var r={ACTION:"action",GROUP:"group",SUBMENU:"submenu"}},690602:function(e,t,n){n.d(t,{JO:function(){return i},dg:function(){return a}});var r=n(667294),o=(0,r.createContext)(null);function a(e){var t=e.children,n=e.value,a=(0,r.useMemo)((function(){return n}),[n]);return r.createElement(o.Provider,{value:a},t)}function i(){var e=(0,r.useContext)(o);if(!function(e){return null!==e}(e))throw new Error("useActionListContext must be used within ActionListContext");return e}},579648:function(e,t,n){n.d(t,{J:function(){return r.JO},d:function(){return r.dg}});var r=n(690602)},163537:function(e,t,n){n.d(t,{m:function(){return d}});var r=n(204942),o=n(799443),a=n(583599);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e,t){if(null!=e&&e.length){var n,r,o=s(e);try{for(o.s();!(r=o.n()).done;){var a=t[r.value];if(null!=a&&a.allowed)return;!n&&null!=a&&a.reason&&(n=a.reason)}}catch(e){o.e(e)}finally{o.f()}return n}};function d(e,t){var n,r=[],o=s(e);try{for(o.s();!(n=o.n()).done;){var a=m(n.value,t);a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}return r}function m(e,t){switch(e.type){case a.K.ACTION:return function(e,t){var n;if(null!==(n=e.permissions)&&void 0!==n&&n.length&&!(0,o.od)(t,e.permissions))return null;var r=u(e.permissions,t);return r?l(l({},e),{},{disabledReason:r}):e}(e,t);case a.K.GROUP:return function(e,t){var n=d(e.actions,t);return n.length?l(l({},e),{},{actions:e.sort?n.sort(e.sort):n}):null}(e,t);case a.K.SUBMENU:return function(e,t){var n;if(null!==(n=e.permissions)&&void 0!==n&&n.length&&!(0,o.od)(t,e.permissions))return null;var r=d(e.actions,t);return r.length?l(l({disabledReason:u(e.permissions,t)},e),{},{actions:e.sort?r.sort(e.sort):r}):null}(e,t);default:return null}}},604769:function(e,t,n){n.d(t,{mz:function(){return u.m},hV:function(){return l},sS:function(){return s},Ge:function(){return c},Gt:function(){return p}});var r=n(204942),o=n(583599);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return i({type:o.K.ACTION},e)}function s(e){return i({type:o.K.GROUP},e)}function c(e){return i({type:o.K.SUBMENU},e)}var u=n(163537);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{for(o.s();!(n=o.n()).done;){var a=v(n.value,t);a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}return r}function v(e,t){if(t.includes(e.id))return null;switch(e.type){case o.K.ACTION:return e;case o.K.GROUP:case o.K.SUBMENU:return function(e,t){var n=p(e.actions,t);return n.length?m(m({},e),{},{actions:n}):null}(e,t);default:return null}}},491568:function(e,t,n){n.d(t,{S:function(){return i}});var r=n(667294),o=n(690602),a=n(912024);function i(e){var t=e.schema,n=e.onAction,i=e.tidPrefix,l=e.onClickProps;return r.createElement(o.dg,{value:{onAction:n,onClickProps:l}},t.map((function(e){return r.createElement(a.ZP,{key:e.id,item:e,tidPrefix:i})})))}},55034:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(667294),o=n(930652),a=n(762074),i=n(610861),l=n(821442),s=n(579621),c=n(451545),u=(0,a.nD)("draftDocuments.warningModal");function d(e){var t=e.onConfirm;return r.createElement(r.Fragment,null,r.createElement(i.ZP.Header,null,r.createElement(i.ZP.Title,null,u("title"))),r.createElement(i.ZP.Body,null,r.createElement("div",{className:"DlxxDKbrSI7Gv3fAUagG"},u("body")),r.createElement(l.Z,{as:"a",href:o.Z.helpdesk.ARTICLES.DRAFT_MODE,target:"_blank"},r.createElement(l.Z.Icon,{icon:c.g}),(0,a.t)("button.label.learnMore"))),r.createElement(i.ZP.Footer,null,r.createElement(s.Z,{type:s.Z.SECONDARY,onClick:i.GZ,disabled:!1},(0,a.t)("button.label.cancel")),r.createElement(s.Z,{variant:s.Z.variants.DESTRUCTIVE,onClick:function(){(0,i.GZ)(),t()}},(0,a.t)("button.label.confirm"))))}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};(0,i.h7)(r.createElement(d,{onConfirm:e}))}},344606:function(e,t,n){n.d(t,{w:function(){return d}});var r=n(115861),o=n(364687),a=n.n(o),i=n(534733),l=n(441680),s=n(319783),c=n(99815),u=n(676409);function d(e){var t=(0,u.KN)();return function(){var n=(0,r.Z)(a().mark((function n(o){var u,d,m,f,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=o.filter(c.S_),d=o.filter(c.kO),n.next=4,Promise.all(u.map(function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.name,e.next=3,t(n);case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,hasStandardUsers:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:if(m=n.sent,f=m.filter((function(e){return e.hasStandardUsers})).map((function(e){return e.name})),p=d.filter((function(e){return e.role===i.$A.STANDARD})).map(c.gV),f.length||p.length){n.next=9;break}return n.abrupt("return",!0);case 9:if(!f.length){n.next=11;break}return n.abrupt("return",(0,l.sx)({groupNames:f,userEmails:p}));case 11:return n.abrupt("return",(0,l.My)({usersEmails:p,folderName:(0,s.dX)(e,{appendSlash:!1}),variant:l.ZC.ADD}));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},465428:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(667294),o=n(381859),a=n(289098),i=n(762074),l=n(963170),s=n(495032),c=n(528058),u=n(403455),d={groupSection:"bxpTCFPJqrYogMIc3LS7",groupName:"bIjMqizeZWwsMMxE_jHw",permissionDropdown:"fRBpZMXfHdux42JAX5gA"},m=(0,i.nD)("components.createNewGroupForm.groupSection");function f(){var e=(0,u.u6)(),t=e.setFieldValue,n=e.values,o=(0,s.J)({type:c.BX.GROUP});return r.createElement("div",{"data-tid":"newGroupWithUsersForm--group-info-section",className:d.groupSection},r.createElement("div",{className:d.groupName},r.createElement(a.Text,{className:d.groupNameTextInput,name:"name",type:"text",label:m("groupNameLabel"),placeholder:m("groupNamePlaceholder")})),r.createElement("div",{className:d.permissionDropdown},r.createElement(l.Z,{selectedPermission:n.permission,options:o,onChange:function(e){t("permission",e)},isGroup:!0,outline:!0})))}var p=n(93433),v=n(529439),E=n(758542),g=n(579621),b=n(51505),O=(0,i.nD)("components.createNewGroupForm.groupMembersSection");function h(){var e=(0,u.u6)(),t=e.setFieldValue,n=e.values,o=(0,r.useState)(),a=(0,v.Z)(o,2),l=a[0],s=a[1],c=function(e){var t=e.value;return!n.users.find((function(e){return e.value.id===t.id}))};return r.createElement("div",{"data-tid":"newGroupWithUsersForm--users-search-section",className:"xvkdeKAdhthCiBxEucnq"},r.createElement("div",{className:"xofdP61GTRi6ZhjUkabE vlpHvsjgdbzjuadKPQ3e C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6"},O("userSearchLabel")),r.createElement("div",{className:"g1VzSQXkqygxEiWQT8aF"},r.createElement("div",{className:"lVEvSnjisoe92YF0Uqqq"},r.createElement(E.Z,{value:l,onChange:function(e){s(e)},queryGroups:!1,stagingUsers:!0,placeholder:O("userSearchPlaceholder"),filterOption:c,isClearable:!0})),r.createElement(g.Z,{onClick:function(){l&&c(l)&&t("users",[l].concat((0,p.Z)(n.users))),s(null)},disabled:!l},r.createElement(g.Z.Icon,{icon:b.IH}),(0,i.t)("button.label.add"))))}var y=n(568874),Z=n(204942),I=n(434986),S=n(534733),P=n(240701),N=n(225364);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=(0,i.nD)("components.createNewGroupForm.groupMembersSection.userGrid"),A=n(615788),R=(0,i.nD)("components.createNewGroupForm.groupMembersSection.userGrid");var w=n(124333),L=(0,i.nD)("components.createNewGroupForm.groupMembersSection");function F(){var e=(0,u.u6)().values.users,t=function(e){var t,n,o,a,l,s,c,d=(t=(0,u.u6)(),n=t.values.users,o=t.setFieldValue,a=(0,r.useCallback)((function(e){var t=n.filter((function(t){return t.value.id!==e.value.id}));o("users",t)}),[o,n]),(0,r.useMemo)((function(){return[{id:"user",label:T("user"),enableSorting:!0,enableResizing:!0,minSize:250,accessorFn:function(e){return e},filter:(0,y.oy)({placeholder:T("searchPlaceholder")}),cell:(0,y.lv)({getAcronym:function(e){var t=e.value,n=t.first,r=t.name,o=t.username;return(0,I.e5)({first:n,name:r,username:o})},getLabel:function(e){return e.label},getSrc:function(e){var t=e.value;if(void 0!==t.avatarEosObjectId&&t.avatarEosObjectId){var n=t.id,r=t.avatarEosObjectId;return P.Z.USERS.AVATAR({userId:n,objectId:r})}},getMeta:function(e){var t=e.value;return"email"in t?t.email:t.displayEmail}})},{id:"type",label:T("type"),enableSorting:!0,size:130,accessorFn:function(e){return e},filter:(0,y.e$)({placeholder:T("typePlaceholder"),options:[{value:null,label:T("filterTypeAny")},{value:S.$A.ADMIN,label:(0,i.t)("users.userType.admin")},{value:S.$A.POWER,label:(0,i.t)("users.userType.user")},{value:S.$A.STANDARD,label:(0,i.t)("users.userType.guest")}]}),cell:(0,y.Op)({getLabel:function(e){var t=e.value.role;return(0,i.t)("users.userType.".concat(t))}})},D({},(0,y.hp)({getChildren:function(e){return r.createElement(y.ZP.Table.RowActions.ActionCellContainer,null,r.createElement(y.ZP.Table.RowActions.Action,{icon:N._I,"aria-label":"Remove",onClick:function(){return a(e)}},(0,i.t)("button.label.remove")))}}))]}),[a])),m=(0,r.useMemo)((function(){return{Table:function(){return r.createElement(y.ZP.Table,{maxHeight:"370px"})},EmptyView:function(){return r.createElement(y.ZP.Table.EmptyView,{title:R("emptyStateTitle"),description:R("emptyStateDescription"),illustration:A.Z.types.BOX})}}}),[]),f=(0,y.AY)(),E=(0,v.Z)(f,1)[0],g=(0,y.q7)({columnId:"user",columnFilters:E}),b=(0,y.q7)({columnId:"type",columnFilters:E}),O=function(e,t){return e.filter((function(e){var n=e.value.role;return!t||!(t!==S.$A.ADMIN||!n.includes(S.$A.ADMIN))||n===t}))}((l=g,e.filter((function(e){var t=e.label,n=e.value.displayEmail;if(!l)return!0;var r=l.toLowerCase(),o=t.toLowerCase().includes(r),a=n.toLowerCase().includes(r);return o||a}))),b),h=(0,y.rK)(),Z=(s=O,(c=(0,v.Z)(h,1)[0][0])?(0,p.Z)(s).sort((function(e,t){return"user"===c.id?(c.desc?-1:1)*e.label.localeCompare(t.label):"type"===c.id?(c.desc?-1:1)*e.value.role.localeCompare(t.value.role):0})):(0,p.Z)(s));return{data:Z,columns:d,getRowId:function(e){return e.value.displayEmail},filtering:f,components:m,isEmpty:0===Z.length,sort:h}}(e),n=t.data,o=t.columns,a=t.getRowId,l=t.filtering,s=t.components,c=t.isEmpty,d=t.sort;return r.createElement("div",{"data-tid":"newGroupWithUsersForm--users-grid"},e.length?r.createElement(y.ZP,{data:n,columns:o,getRowId:a,filtering:l,components:s,isEmpty:c,sorting:d}):r.createElement("div",{className:"nkanDnNzrgXk5R4ukTUz"},r.createElement(w.Z,{illustration:A.Z.types.BOX},r.createElement(w.Z.Heading,null,L("emptyStateMessage")))))}function M(){return r.createElement(r.Fragment,null,r.createElement(h,null),r.createElement(F,null))}function k(e){var t=e.withUsers,n=void 0!==t&&t;return r.createElement("div",{"data-tid":"newGroupWithUsersForm",className:"OxIjkfgGPXEjKSnGW86i"},r.createElement(f,null),n&&r.createElement(r.Fragment,null,r.createElement(o.Z,{margin:o.Z.margin.XXL}),r.createElement(M,null)))}},112730:function(e,t,n){n.d(t,{t:function(){return a}});var r=n(735691),o=(0,n(762074).nD)("error");function a(){return r.Ry().shape({name:r.Z_().required(o("required")).max(255).min(2),permission:r.Z_().required(o("required")),users:r.IX().of(r.Ry().shape({label:r.Z_(),value:r.Ry()})),prefix:r.O7().test("variablesListOption",o("variablesListOptionRequired"),(function(e){var t=this.parent.variablesListOption;return!e||e&&t})),variablesListOption:r.Z_()})}},528466:function(e,t,n){n.d(t,{WX:function(){return l},eJ:function(){return c},gE:function(){return u},k_:function(){return s}});var r=n(727484),o=n.n(r),a=n(392348),i=(0,n(762074).nD)("storage.columnFilter.dateRangeFilter"),l=function(e,t){var n=function(e){return o()(Number(e)).format(a.Jn.date)};return e&&!t?i("customRange.afterDate",{date:n(e)}):!e&&t?i("customRange.beforeDate",{date:n(t)}):e&&t?o()(e).isSame(o()(t),"day")?i("customRange.onDate",{date:n(e)}):i("customRange.betweenDates",{fromDate:n(e),toDate:n(t)}):i("custom")},s=function(e,t,n){return{dateKey:n,label:l(e,t),from:e?Number(e):void 0,to:t?Number(t):void 0}},c=function(e,t){var n=t.dateResolver(),r=n.from,o=n.to;return{dateKey:e,label:t.label,from:r,to:o}},u=function(e,t){var n=function(e){return o()(e).format(a.Jn.date)};if(!e&&!t)return"";if(e&&!t)return i("customRange.afterDate",{date:n(e)});if(!e&&t)return i("customRange.beforeDate",{date:n(t)});if(e&&t){var r=n(e),l=n(t);return o()(e).isSame(t,"day")?i("customRange.onDate",{date:r}):i("customRange.betweenDates",{fromDate:r,toDate:l})}return""}},265860:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(487462),o=n(667294),a=n(499345),i=n(788228),l={breadcrumbsContainer:"weFU9rckvPFjT4pm8Gor",linkSeparator:"BNmzt5DtjjRXk6XVWzDA eugzcnL4uVMlgbRkfTqa",tooltipLink:"B_EfC4Lj5LJeEEVFIFMi",currentFolderPath:"Y3M4hbTMtgDFdeZxBQR9 eugzcnL4uVMlgbRkfTqa",activeFolderPath:"OR6OhwHnYcQBs5tVOqy9"},s=n(204942),c=n(294184),u=n.n(c),d=n(821442),m=function(e,t){return e===t.length-1},f=n(93433);function p(e){var t=e.folderPath,n=e.onFolderSelect,c=function(e){return(0,o.useMemo)((function(){var t="";return e.split("/").filter(Boolean).reduce((function(e,n){return t+="/".concat(n),[].concat((0,f.Z)(e),[{name:n,hashbang:t}])}),[])}),[e])}(t),p=function(e){var t=e.breadcrumbs,n=e.folderPath,r=e.onFolderSelect,a=t.length>1;return(0,o.useCallback)((function(e){return{forceShowTooltip:a,tooltipProps:{interactive:!0,placement:"bottom",appendTo:document.body},tooltip:t.map((function(a,i){var c;return o.createElement("span",{key:"".concat(a.hashbang,"-").concat(a.name)},o.createElement(d.Z,{className:u()(l.tooltipLink,(c={},(0,s.Z)(c,l.currentFolderPath,e===a.hashbang),(0,s.Z)(c,l.activeFolderPath,n===a.hashbang),c)),key:a.name,onClick:function(){return m(i,t)?null:r(a.hashbang)}},a.name),m(i,t)?"":o.createElement("span",{className:l.linkSeparator}," / "))}))}}),[t,n,r,a])}({folderPath:t,breadcrumbs:c,onFolderSelect:n});return o.createElement(i.Z,{onBackClick:function(){var e;return n(null===(e=c[c.length-2])||void 0===e?void 0:e.hashbang)},showFoldedMenuOnHover:!0,className:l.breadcrumbsContainer},c.map((function(e,t){var s=e.name,u=e.hashbang;return m(t,c)?o.createElement(i.Z.Item,{key:u,ellipsis:!1,className:l.activeItem,"aria-label":s},o.createElement(a.Z,p(u),s)):o.createElement(i.Z.Item,(0,r.default)({key:u,onClick:function(){return n(u)},"aria-label":s},p(u)),s)})))}},27212:function(e,t,n){n.d(t,{O:function(){return d}});var r,o=n(204942),a=n(667294),i=n(652421),l=n(762074),s=n(534733),c=(r={},(0,o.Z)(r,s.Nj.ACTIVE,i.Z.GREEN),(0,o.Z)(r,s.Nj.DEACTIVATED,i.Z.RED),(0,o.Z)(r,s.Nj.PENDING,i.Z.YELLOW),(0,o.Z)(r,s.Nj.DELETED,i.Z.RED),(0,o.Z)(r,s.Nj.UNKNOWN,i.Z.GREY),(0,o.Z)(r,s.Nj.LOCKED,i.Z.GREY),r),u=function(e){return c[e]},d=function(e){var t=e.status;return a.createElement(i.Z,{size:i.Z.sizes.MEDIUM,color:u(t),type:i.Z.types.OUTLINED,uppercase:!1},(0,l.t)("components.statusBadge.".concat(t)))}},482282:function(e,t,n){n.d(t,{W:function(){return A},n:function(){return R}});var r=n(667294),o=n(943886),a=n(136988),i=n(57324),l=n(610861),s=(n(19309),n(986456)),c=n.n(s),u=n(579621),d=n(762074),m=n(307179),f=n(373897),p="OrtasbUcEufY9DOLNgZ3",v=(0,d.nD)("unlock.unlockFilesModal"),E=function(e){var t=e.item.get("lock.owner");return r.createElement(r.Fragment,null,r.createElement("p",{className:p},v("userStartedCoEditing",{fullname:r.createElement("span",{className:"Umi8sGUYDdxxgvYaZrpQ"},(0,m.v2)(t)),email:t.email,context:(0,f.$)(t)?"you":""})),r.createElement("p",{className:p},v("unlockCanCauseDataLoss")))},g=(0,d.nD)("unlock.unlockFilesModal.fileList"),b=function(e){var t=e.filename,n=e.lockOwner;return r.createElement("li",{key:t,className:"BIuuhSc2zfZyto97cenQ"},g("item",{filename:r.createElement("span",{className:"AXJNTCfKvG6uSt8dVuQQ"},t),fullname:(0,m.v2)(n),email:n.email,context:(0,f.$)(n)?"you":""}))},O={list:"njVibHh80nG0yVaMfyyY"},h=(0,d.nD)("unlock.unlockFilesModal"),y=function(e){var t=e.items;return r.createElement(r.Fragment,null,r.createElement("p",null,h("unlockingEndsCoeditingSession")),r.createElement("p",{className:O.text},h("fileList.coeditingSession",{count:t.length})),r.createElement("ul",{className:O.list},t.map((function(e){return r.createElement(b,{key:e.get("id"),filename:e.get("name"),lockOwner:e.get("lock.owner")})}))))},Z=(0,d.nD)("unlock.unlockFilesModal"),I=function(e){var t=e.items;return r.createElement(r.Fragment,null,r.createElement("p",null,Z("noUnlockPermissionMessage")),r.createElement("p",{className:"rHfiTtdDhiwB1WAqbWn1"},Z("fileList.noUnlockPermission",{count:t.length})),r.createElement("ul",{className:"PC6gkl16DOAeuOy_C2rq"},t.map((function(e){return r.createElement(b,{key:e.get("id"),filename:e.get("name"),lockOwner:e.get("lock.owner")})}))))},S=(0,d.nD)("unlock.unlockFilesModal"),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.unlockItems,o=t.filter((function(e){return e.isLocked()})),i=o.filter((function(e){return e.isCollaborationOngoing()})),s=o.filter((function(e){return(0,a.ZP)(e).Unlock.allowed})),m=c().difference(o,s),f=c().difference(i,m),p=1===o.length&&1===i.length;function v(){n(s),(0,l.Mr)()}function g(){return p?"button.label.unlock":f.length>0?"button.label.unlockEndCoediting":"button.label.unlockOtherSelected"}function b(){return p?"title.singleCollaborationFiles":f.length&&!m.length?"title.multipleCollaborationFile":!f.length&&m.length?"title.noUnlockPermission":"title.collaborationAndNoUnlockPermissions"}var O=p?r.createElement(E,{item:i[0]}):r.createElement(r.Fragment,null,!!f.length&&r.createElement(y,{items:f}),!!m.length&&r.createElement(I,{items:m}));return r.createElement(r.Fragment,null,r.createElement(l.ZP.Header,null,r.createElement(l.ZP.Title,null,S(b()))),r.createElement(l.ZP.Body,null,O),r.createElement(l.ZP.Footer,null,r.createElement(u.Z,{type:u.Z.SECONDARY,onClick:l.Mr},(0,d.t)("button.label.cancel")),r.createElement(u.Z,{variant:f.length?u.Z.variants.DESTRUCTIVE:void 0,onClick:v},(0,d.t)(g()))))},N=(0,d.nD)("unlock.unlockFilesModal"),C=function(e){var t=e.items;return r.createElement(r.Fragment,null,r.createElement("p",null,N("unlockWhenCollabSessionEnds",{count:t.length})),r.createElement("ul",{className:"tyujQdjmRMlS2iuREAJk"},t.map((function(e){return r.createElement(b,{key:e.get("id"),filename:e.get("name"),lockOwner:e.get("lock.owner")})}))))},D=(0,d.nD)("unlock.unlockFilesModal"),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.unlockItems,o=t.filter((function(e){return e.isLocked()})),s=o.filter((function(e){return(0,a.ZP)(e).Unlock.allowed})),c=o.filter((function(e){return e.isCollaborationOngoing()})),m=o.filter((function(e){return!(0,i.Uw)(e)&&!(0,a.ZP)(e).Unlock.allowed}));function f(){n(s),(0,l.Mr)()}function p(){return c.length&&!m.length?"title.multipleCollaborationFile":!c.length&&m.length?"title.noUnlockPermission":"title.collaborationAndNoUnlockPermissions"}return r.createElement(r.Fragment,null,r.createElement(l.ZP.Header,null,r.createElement(l.ZP.Title,null,D(p()))),r.createElement(l.ZP.Body,null,!!c.length&&r.createElement(C,{items:c}),!!m.length&&r.createElement(I,{items:m})),r.createElement(l.ZP.Footer,null,r.createElement(u.Z,{type:u.Z.SECONDARY,onClick:l.Mr},(0,d.t)("button.label.cancel")),r.createElement(u.Z,{type:u.Z.PRIMARY,onClick:f},(0,d.t)("button.label.unlockOtherSelected"))))};function A(e){var t=e.filter(i.p1),n=t.filter((function(e){return(0,a.ZP)(e).Unlock.allowed})),r=n.length===t.length,l=!!n.length,s=(0,o.Jo)().features.collaborativeEditingUnlockingFilesEnabled,c=n.filter(i.Uw);return l&&!r||s&&c.length>0}function R(e){var t=e.items,n=e.unlockItems;(0,o.Jo)().features.collaborativeEditingUnlockingFilesEnabled?(0,l.h7)(r.createElement(P,{items:t,unlockItems:n}),{onRequestClose:l.Mr}):(0,l.h7)(r.createElement(T,{items:t,unlockItems:n}),{onRequestClose:l.Mr})}},648543:function(e,t){t.Z={UI_INTEGRATE:{ACTION:"uintegrate",ACTION_TYPE_OPEN:"open",ACTION_TYPE_SHARE:"share",ACTION_SPLITER:":"},MENU_POSITIONING:{MARGIN_TOP:45,MARGIN_BOTTOM:0,ARROW_OFFSET_CORRECTION:10}}},517935:function(e,t,n){var r,o=n(93433),a=n(204942),i=n(266606),l=n(680252),s=n(441043),c=n(57324),u=n(601714),d=n(316074),m=n(704899),f=n(79145),p=n(922222),v=n.n(p);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(r={},(0,a.Z)(r,s.Z.LOCATION_STORAGE,(function(){return"file_listing".concat(u.Z.isEmbedded()?"_embedded":"")})),(0,a.Z)(r,s.Z.LOCATION_SEARCH,(function(){return"search_results"})),(0,a.Z)(r,s.Z.LOCATION_TRASH,(function(){return"trash"})),(0,a.Z)(r,s.Z.LOCATION_PROJECT_CENTER,(function(){return"project_center"})),r);function O(){if((0,m.TY)())return f.iR;var e=s.Z.getCurrentLocation(),t=e?b[e]:void 0;return null==t?void 0:t()}var h={actionClicked:function(e,t,n,r){var a;i.Z.track("Context Menu: Clicked",g(g({},null!=r&&r.version?{version:r.version}:{}),{},{checked_items:v().underscored(n.type),item_count:t.length,type:v().capitalize(e),comment_count:"comments"===e&&t[0]&&(0,c.zE)(t[0])?(null===(a=t[0].notes)||void 0===a?void 0:a.count)||0:void 0,Page_type:O(),file_ids:t.filter(c.zE).map((function(e){return e.id})),folder_ids:t.filter(c.qR).map((function(e){return e.id})),fileTypes:t.map((function(e){return e.type})),fileExtensions:(0,o.Z)(new Set(t.map((function(e){return(0,d.Z)(e.path)})))).filter(Boolean)},(0,l.zs)()))}};t.Z=h},594695:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(667294),o=n(499345),a=n(343697),i=n(823592),l=n(294184),s=n.n(l),c=n(583025),u=n(294595),d=n(648543),m=n(517935),f={action:"AKebY_rtB3HB0wytsnX8",description:"POcCOQFI4h9e8fNjPNWg",icon:"BYGGQPov41LPFDS6ZKrY",iconImg:"fjWPYOUF033uBcr0djXA",badge:"rJFeG14sNeuJCb4Y39vL",button:"DuUHOuCGenQwhhXSSOg_"};function p(e){var t=e.token,n=e.action,l=e.label,p=e.icon,v=e.hint,E=e.iconClass,g=e.iconUrl,b=e.isAllowed,O=void 0===b||b,h=e.disabledReason,y=e.onboarding,Z=e.description,I=e.onClick,S=e.selectedItems,P=e.selectionInfo,N=e.testId,C=e.children,D=e.env,T=e.tooltipAction,A=e["data-pendoid"],R=(0,r.useCallback)((function(){m.Z.actionClicked(t.startsWith(d.Z.UI_INTEGRATE.ACTION)?l:t,(0,i.xH)(S),P),I({token:t,action:n,selectedItems:S,env:D})}),[I,S,P,l,t,n,D]),w=h||v;return r.createElement(c.Z,{onClick:R,icon:p,disabled:!!h||!O,buttonClassName:f[t],"data-pendoid":A,"data-tid":N||t?"context-menu--action-".concat(N||t):null,tooltipProps:{tooltip:w,actions:T}},r.createElement("span",{className:s()(f.action,(0,a.H0)(t)),"data-onboarding":y||""},g&&r.createElement(u.Z,{iconUrl:g,className:s()(f.icon,E,f.iconImg)}),C||r.createElement(o.Z,{tooltip:l,disableTooltip:!!w,actions:T},r.createElement("span",{"data-tid":"context-menu--action-title"},l),Z&&r.createElement("span",{className:f.description},Z))))}},353487:function(e,t,n){n.d(t,{Dt:function(){return h},Sc:function(){return g},j:function(){return b},jC:function(){return y}});var r=n(93433),o=n(667294),a=n(401552),i=n(604769),l=n(51505),s=n(200406),c=n(2764),u=n(381908),d=n(823592),m=n(112290),f=n(954033),p=n(762074),v=n(494090),E=n(151548),g="integrations-submenu",b="integration-",O=function(e){return"isAllowed"in e};function h(e){var t=e.selectedItems,n=e.integrations,o=e.placement,c=void 0===o?f.Z.CONTEXT_MENU:o,u=e.integrationCallbacks,E=void 0===u?{}:u,h=function(e){var t=e.selectedItems,n=e.placement;if(!(0,m.W)()||!a.ZP.isAdmin())return null;var r=(0,m.Z)();return(0,i.hV)({id:"add-more",label:(0,p.t)("actions.integrations.addMore"),icon:l.hd,variant:v.Z.variants.BRAND,onClick:function(){return r.action({fileExtensions:(0,d.nX)(t),placement:n})}})}({selectedItems:t,placement:c});return(0,i.Ge)({id:g,label:(0,p.t)("actions.integrations.submenu"),icon:s.V,count:n.length,actions:[(0,i.sS)({id:"integrations-list",actions:n.filter((function(e){return O(e)?e.isAllowed:!e.disabled})).map((function(e){return(0,i.hV)({id:"".concat(b).concat(e.appId,"_").concat(e.entryActionId),label:e.text||e.editorName||e.appName,iconUrl:e.iconUrl,onClick:O(e)?e.action:function(){return e.action(E)},tooltip:e.tooltip})}))})].concat((0,r.Z)(h?[h]:[]))})}function y(e){var t=e.selectedItems,n=e.integrationCallbacks,a=void 0===n?{}:n,i=(0,o.useMemo)((function(){return(0,d.xH)(t)}),[t]),l=(0,o.useMemo)((function(){return[].concat((0,r.Z)((0,u.n)({getIntegrationActions:c.Z.getShareActions.bind(c.Z),folderItems:i,integrationCallbacks:a,placement:f.Z.CONTEXT_MENU})),(0,r.Z)((0,E.d)(t)?(0,u.n)({getIntegrationActions:c.Z.getOpenInActions.bind(c.Z),folderItems:i,integrationCallbacks:a,placement:f.Z.CONTEXT_MENU}):[]),(0,r.Z)((0,u.n)({getIntegrationActions:c.Z.getUncategorizedActionsForSelection.bind(c.Z),folderItems:i,integrationCallbacks:a,placement:f.Z.CONTEXT_MENU})))}),[i,a,t]),s=(0,o.useMemo)((function(){return(0,u.n)({getIntegrationActions:c.Z.getCollaborationActions.bind(c.Z),folderItems:i,integrationCallbacks:{},placement:f.Z.CONTEXT_MENU})}),[i]),m=(0,o.useMemo)((function(){return l.filter((function(e){return!s.find((function(t){return"".concat(t.appId,"_").concat(t.entryActionId)==="".concat(e.appId,"_").concat(e.entryActionId)}))}))}),[l,s]),p=(0,o.useMemo)((function(){return m.sort((function(e,t){return e.text.localeCompare(t.text)}))}),[m]);return(0,o.useMemo)((function(){return h({selectedItems:t,integrations:p})}),[p,t])}},151548:function(e,t,n){n.d(t,{d:function(){return i}});var r=n(529439),o=n(13764),a=n(57324),i=function(e){if(1!==e.length)return!1;var t=(0,r.Z)(e,1)[0],n=e.every((function(e){return(0,o.zm)(e.get("permission"))})),i=(0,a.dQ)(t)||(0,a.rJ)(t);return n&&!i}},143046:function(e,t,n){n.d(t,{HG:function(){return v},KD:function(){return c},Tn:function(){return d},ae:function(){return g},e3:function(){return E},fK:function(){return m},wn:function(){return p},xE:function(){return u},xf:function(){return f}});var r,o,a=n(204942),i=n(34418),l=n(179755),s=n(652421),c="contract",u={CREATED:"CREATED",ACTIVE:"ACTIVE",DELETED:"DELETED",ARCHIVED:"ARCHIVED",DRAFT:"DRAFT",INACTIVE:"INACTIVE"},d={PLACEHOLDER_IT:"PLACEHOLDER_IT",USER_DEFINED:"USER_DEFINED",PLACEHOLDER_BENEFITS:"PLACEHOLDER_BENEFITS",CONTRACTS_PLACEHOLDER:"CONTRACTS_PLACEHOLDER",CODEBOOKS_AGENT:"CODEBOOKS_AGENT",INACTIVE:"INACTIVE",DRAFT:"DRAFT",QUESTIONNAIRE_AGENT:"QUESTIONNAIRE_AGENT",EXTRACTION_AGENT:"EXTRACTION_AGENT"},m=(r={},(0,a.Z)(r,u.ACTIVE,s.Z.GREEN),(0,a.Z)(r,u.CREATED,s.Z.YELLOW),(0,a.Z)(r,u.DELETED,s.Z.RED),(0,a.Z)(r,u.ARCHIVED,s.Z.RED),(0,a.Z)(r,u.DRAFT,s.Z.RED),(0,a.Z)(r,u.INACTIVE,s.Z.RED),r),f=[u.ARCHIVED,u.DELETED],p=[u.CREATED,u.DRAFT],v=(o={},(0,a.Z)(o,c,i.W),(0,a.Z)(o,"kba",l.L8),(0,a.Z)(o,"agent",l.L8),o),E={VALID:"VALID",PARTIAL_INVALID:"PARTIAL_INVALID",INVALID:"INVALID"},g={FILE:"FILE",FOLDER:"FOLDER"}},568070:function(e,t,n){n.d(t,{F8:function(){return a},aF:function(){return i}});var r=n(667294),o=(0,r.createContext)(void 0);function a(){return(0,r.useContext)(o)}function i(e){var t=e.children,n=e.selectedItems,a=e.handleSelection,i=e.isContractsCopilotOpen,l=(0,r.useMemo)((function(){return{selectedItems:n,handleSelection:a,isContractsCopilotOpen:i}}),[n,a,i]);return r.createElement(o.Provider,{value:l},t)}},166823:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(667294),o=n(610861),a=n(529439),i=n(735691),l=n(403455),s=n(776327),c=n(153672),u=n(579621),d=n(698607),m=n(499345),f=n(799532),p=n(531081),v=n(984481),E=n(836096),g=n(289098),b=n(839470),O=n(531926),h=n(762074),y=n(319783),Z=n(57324),I=n(363675),S=n(204942),P=n(145218),N=n(240701),C=n(23661);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){return(0,P.useMutation)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mutationFn:function(e){return function(e){return(0,C.ZP)(N.Z.CONVERSION.CONVERT,{method:"POST",body:e})}(e)}},e))}var A=n(520788),R=n(397404),w=n(154177),L=n(512994),F={label:"v9y9PbxXyGGKrtqwTvtI",locationBox:"DXDbNpL_mmFQCiKs0NSW",folderIcon:"enQzabTzkePG60PRCVdx",folderInfo:"LLIcNOOi2vmqr1ww48MY",folderLocation:"Xso6zbOfnimVJoF51u1r qqGfbuN2RooWpKmkockU",info:"T6aMMiS8n6uZ6NNVhIXb"},M=n(266606),k=(0,h.nD)("actions.documentConversion.convertModal"),j=i.Ry().shape({fileName:i.Z_().required(k("fileNameRequired"))}),_=function(e){var t=e.file,n=e.targetExtension,i=(0,c.ZP)().data,S=(0,r.useState)((0,y.XX)(t.path)),P=(0,a.Z)(S,2),N=P[0],C=P[1],D=i.ui.documentConversionSupportedFileTypeDetails,_=T({}).mutate,x=(0,r.useCallback)((function(){s.ZP.trigger(s.ZP.Events.Storage.FOLDER.REFRESH),(0,o.GZ)()}),[]),U=(0,r.useCallback)((function(e,o){var a,i=e.fileName,l=o.setSubmitting,s=o.setErrors,c="".concat(i.trim(),".").concat(n),u={entryId:t.entryId,fileName:c,convertTo:n.toUpperCase(),targetLocation:N},d=(0,A.cd)({extension:n,allowedExtensions:D}).type.toUpperCase();a={sourceFileExtension:t.extension,sourceFileSize:t.size,convertedFileExtension:n},M.Z.track("Document Conversion : Opened  Conversion",{"Source file extension":a.sourceFileExtension,"Source file size":a.sourceFileSize,"Converted file extension":a.convertedFileExtension}),_(u,{onSuccess:function(){x(),(0,R.c0)(R.em.success,r.createElement("div",null,r.createElement("span",null,k("successNotification1")),r.createElement("span",{className:F.semiBold},"".concat(L.OS["".concat(d,"_EXTENSION")]," ").concat(k("file"))),r.createElement("span",null,k("successNotification2"))))},onError:function(e){if((0,w.k0)(e)){var t=(0,w.FU)(e),n=t.length>0?t[0].code:"";n===L.Qz.INVALID_ENTRY_ID?(x(),(0,R.c0)(R.em.error,r.createElement("div",null,r.createElement("span",null,k("fileDeleted1")),r.createElement("span",{className:F.semiBold},c),r.createElement("span",null,k("fileDeleted2"))))):(0,A.dS)({errorCode:n,setErrors:s,closeModal:x})}else x(),(0,R.c0)(R.em.error,k("errorNotification"))},onSettled:function(){l(!1)}})}),[D,x,_,t,N,n]);return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,k("convertFile"))),r.createElement(l.J9,{initialValues:{fileName:(0,v.Z)(t.name)},validationSchema:j,onSubmit:U},(function(e){var a=e.setErrors,i=e.values,s=(0,A.cd)({extension:n,allowedExtensions:D}).type.toUpperCase();return r.createElement(l.l0,null,r.createElement(o.ZP.Body,null,r.createElement("div",{className:F.info},k("info1"),r.createElement("span",{className:F.semiBold},' "'.concat(t.name,'" ')),k("info2",{extension:L.OS["".concat(s,"_EXTENSION")]})),r.createElement("div",{className:F.label},r.createElement(g.Text,{name:"fileName",label:k("fileName"),suffix:".".concat(n),immediateError:!0})),r.createElement("div",{className:F.label},r.createElement("span",null,k("fileLocation"))),r.createElement("div",{className:F.locationBox},r.createElement("div",{className:F.folderIcon},r.createElement(f.Z,{icon:p.P9,size:f.Z.sizes.L})),r.createElement("div",{className:F.folderInfo},r.createElement("div",{className:F.folderName},r.createElement(m.Z,null,(0,E.Z)(N))),r.createElement("div",{className:F.folderLocation},r.createElement(m.Z,null,(0,Z.p5)({path:N})))),r.createElement(u.Z,{type:u.Z.TERTIARY,onClick:function(){return function(e){(0,o.Ll)(r.createElement(I.Z,{modalUniqueId:"modal_".concat((0,b.Z)()),saveUniqueId:"save_".concat((0,b.Z)()),fileTargetLocation:N,rootPath:N,onTargetLocationChange:function(t){e({fileName:""}),C(t)}}))}(a)}},(0,h.t)("button.label.change")))),r.createElement(o.ZP.Footer,null,r.createElement(u.Z,{type:u.Z.SECONDARY,onClick:o.GZ},(0,h.t)("button.label.cancel")),r.createElement(d.Z,{disabled:!!i.fileName.trim(),tooltip:k("fileNameTooltip")},r.createElement(O.Z,{disabled:!i.fileName.trim(),idleText:k("convert"),processingText:k("converting"),errorText:k("convert"),failed:!1}))))})))};function x(e){var t=e.file,n=e.targetExtension;(0,o.h7)(r.createElement(_,{file:t,targetExtension:n}),{onRequestClose:o.GZ,size:o.ZP.sizes.M,withCloseButton:!0,"data-tid":"document-convert-modal"})}},461188:function(e,t,n){n.d(t,{C:function(){return a},I:function(){return o}});var r=n(266606);function o(){r.Z.track("Publish document: Open modal")}function a(e){r.Z.track("Publish document: Success",{isDefaultLocationChanged:e})}},880159:function(e,t,n){n.d(t,{f:function(){return o}});var r=n(13764),o=function(e){return function(t){return(0,r.zm)(t.permission)?{disabled:!1}:{disabled:!0,tooltip:e("permissionDisabled",{context:"folder"})}}}},179565:function(e,t,n){n.d(t,{Z:function(){return B}});var r=n(667294),o=n(610861),a=n(762074),i=n(821442),l=n(579621),s=n(141797),c=n(809742),u=n(289098),d=n(403455),m=n(204942),f=n(145218),p=n(23661),v=n(240701);function E(e){return function(t){return(0,p.ZP)(v.Z.DRAFT_DOCUMENTS.PUBLISH_DRAFT(e),{method:"POST",body:t})}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(351910),h=n(531926),y=n(397404),Z=n(346734),I=n(264928),S=n(154177),P=n(735691),N=(0,a.nD)("error"),C=(0,a.nD)("draftDocuments.publishDocumentModal"),D=P.Ry().shape({fileName:P.Z_().trim().required().folderItemName(),location:P.Ry().required().test("location","",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:"",id:""},t=arguments.length>1?arguments[1]:void 0,n=t.path,r=t.createError;return null!=e&&e.path?!!e.path.startsWith("".concat(O.W_,"/"))||r({path:n,message:C("invalidPathSelection")}):r({path:n,message:N("required")})}))}),T=n(395765),A=(0,a.nD)("draftDocuments.publishConflictModal"),R=(0,a.nD)("button.label");function w(e){var t=e.fileName,n=e.location,a=e.onMergeConfirmation;return r.createElement(r.Fragment,null,r.createElement(s.Z.Header,null,r.createElement(s.Z.Title,null,A("title"))),r.createElement(s.Z.Body,null,r.createElement(c.Z,{type:T.e.WARN,fullWidth:!0},A("warningMessage",{fileName:t,location:n})),r.createElement("br",null),A("content")),r.createElement(s.Z.Footer,null,r.createElement(l.Z,{type:l.Z.SECONDARY,onClick:o.Mr,className:"SSqcpL5OCIZCrEk5hUCB"},R("cancel")),r.createElement(l.Z,{type:l.Z.SECONDARY,onClick:o.GZ},A("editNameOrLocationActionButton")),r.createElement(l.Z,{type:l.Z.PRIMARY,onClick:function(){(0,o.GZ)(),a()}},A("mergeActionButton"))))}var L=n(647512),F=n(880159),M=(0,a.nD)("draftDocuments.publishDocumentModal"),k=(0,a.nD)("storage.actions");function j(e){var t=e.name,n=e.disabled;return r.createElement(L.Z,{name:t,label:M("location"),disabled:n,folderTreeProps:{includePrivateFolders:!1,getPathConfig:(0,F.f)(k)}})}var _=n(461188),x=(0,y.Sh)({showExclusively:!0}).showNotification,U=(0,a.nD)("draftDocuments.publishDocumentModal"),G=(0,a.nD)("button.label");function V(e){var t=e.documentName,n=e.fileGroupId,m=(0,r.useRef)(!1),g=(0,Z.q)(),P=function(e,t){return(0,f.useQuery)(b({queryKey:["publishFolderMetadata",e],queryFn:function(){return t=e,(0,p.ZP)(v.Z.DRAFT_DOCUMENTS.GET_PUBLISH_FOLDER_METADATA(t));var t}},t))}(n),N=P.data,C=P.isLoading,T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.useMutation)(b({mutationFn:E(e)},t))}(n),A=T.mutate,R=T.isLoading,L=C||R;return r.createElement(d.J9,{initialValues:{fileName:t,location:{id:(null==N?void 0:N.folderId)||"",path:(null==N?void 0:N.folderPath)||O.W_}},validationSchema:D,enableReinitialize:!0,onSubmit:function(e,t){var n=e.fileName,l=e.location,c=t.setSubmitting,u=t.setStatus,d=t.submitForm;A({fileName:n,publishFolderId:l.id,override:m.current},{onSuccess:function(){(0,o.GZ)(),g(),x(y.em.success,U("publishSuccess",{location:r.createElement(i.Z,{as:"a",href:(0,I.do)(l.path),onClick:function(){return(0,y.yK)()}},l.path)}),{persist:!0}),(0,_.C)((null==N?void 0:N.folderPath)!==l.path)},onError:function(e){var t;if((0,S.k0)(e)){var i,f=null==e||null===(t=e.data)||void 0===t?void 0:t.code,p=U("error",{context:f});switch(c(!1),f){case"FORBIDDEN_PUBLISH_LOCATION":case"NO_PERMISSIONS_IN_PUBLISH_FOLDER":u({errors:{location:p}});break;case"CONFLICT_WITH_EXISTING_FILE":i={fileName:n,location:l.path,onMergeConfirmation:function(){m.current=!0,d()}},(0,o.Ll)(r.createElement(w,i),{size:s.Z.sizes.XL,onRequestClose:o.GZ});break;default:x(y.em.error,p,{persist:!0})}}else x("error",(0,a.t)("error.default"))}})}},r.createElement(d.l0,null,r.createElement(s.Z.Header,null,r.createElement(s.Z.Title,null,U("title",{documentName:t}))),r.createElement(s.Z.Body,null,r.createElement(c.Z,{type:c.Z.types.WARN,className:"Ptl0233E5p9o7OeJ_Qur",fullWidth:!0},U("content")),r.createElement(u.Text,{name:"fileName",label:U("name"),disabled:L}),r.createElement(j,{name:"location",disabled:L})),r.createElement(s.Z.Footer,null,r.createElement(l.Z,{type:l.Z.SECONDARY,onClick:o.GZ},G("cancel")),r.createElement(h.Z,{disabled:L,idleText:U("publishAction")}))))}function B(e){(0,o.Ll)(r.createElement(V,e),{onRequestClose:o.GZ})}},176964:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(667294),o=n(134059);function a(e){var t=e.milestoneNumber,n=e.milestoneName,a=e.studyId,i=e.filingLevel,l=e.filingLevelId;return r.createElement(r.Fragment,null,null!==n&&null!==t?r.createElement(r.Fragment,null,r.createElement(o.Z,{milestoneNumber:t,milestoneName:n,studyId:a,filingLevel:i,filingLevelId:l})," ",n):null)}},134059:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(667294),o=n(45697),a=n.n(o),i=n(551266),l=n(147593),s=n(223957),c=n(921802);function u(e){var t=e.milestoneNumber,n=function(e){var t=e.milestoneNumber,n=e.milestoneName,r=e.studyId,o=e.filingLevel,a=e.filingLevelId,s=(0,l.O)(),u=(0,c.Z)(s),d=(0,i.i)({studyId:r||(null==s?void 0:s.studyId),filingLevel:o||u.filingLevel,filingLevelId:a||u.filingLevelId},{staleTime:1/0}).data,m=(void 0===d?[]:d).filter((function(e){return e.milestoneNumber===t})).findIndex((function(e){return e.name===n}));if(-1!==m)return m+1}({milestoneNumber:t,milestoneName:e.milestoneName,studyId:e.studyId,filingLevel:e.filingLevel,filingLevelId:e.filingLevelId});return r.createElement(r.Fragment,null,"#",t,n&&".".concat(n))}function d(e){var t=e.milestoneNumber,n=e.milestoneName,o=e.studyId,a=e.filingLevel,i=e.filingLevelId;return(0,s.X9)({milestoneNumber:t})?r.createElement(u,{milestoneNumber:t,milestoneName:n,studyId:o,filingLevel:a,filingLevelId:i}):r.createElement(r.Fragment,null,"#",t)}u.propTypes={milestoneNumber:a().number.isRequired,milestoneName:a().string.isRequired,studyId:a().string,filingLevel:a().string,filingLevelId:a().string}},486008:function(e,t,n){n.d(t,{B:function(){return m}});var r,o=n(204942),a=n(667294),i=n(762074),l=n(652421),s=n(330906),c=n(87439),u=(0,i.nD)("eTMF"),d=(r={},(0,o.Z)(r,s.Rx.BLINDED,l.Z.COOL_GRAY),(0,o.Z)(r,s.Rx.UNBLINDED,l.Z.CYAN),r);function m(e){var t=e.isUnblinded?s.Rx.UNBLINDED:s.Rx.BLINDED;return a.createElement(c.Z,{statusColorMap:d,status:t},u("blindingStatus",{context:t}))}},87439:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(667294),o=n(652421),a=n(621465),i=n(779210),l=n(337995),s=n(583025),c=n(294184),u=n.n(c),d="cqdBKkiDEO6XxvptpGdT",m=(0,r.forwardRef)((function(e,t){var n=e.statusColorMap,c=void 0===n?{}:n,m=e.status,f=e.children,p=e.optionText,v=e.onOptionClick,E=null==c?void 0:c[m];return E&&f?p?r.createElement(i.Z,{trigger:r.createElement(o.Z,{className:u()(d,"b5dYGPLRtMOiHhRBWF94"),tabIndex:0,role:"button",color:E,uppercase:!1},f," ",r.createElement(o.Z.Icon,{icon:a.Dd}))},r.createElement(l.Z,null,r.createElement(s.Z,{onClick:v},p))):r.createElement(o.Z,{ref:t,color:E,uppercase:!1,className:u()(d)},f):null}))},360476:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(529439),o=n(667294),a=n(397404),i=n(316074),l=n(840048),s=(n(962029),n(579621)),c=n(599351),u=n(839435),d=n(762074),m=n(425099),f=(0,a.Sh)({namespace:"etmf/upload"}).showNotification;function p(e){var t=e.onFiles,n=e.isMultiple,p=void 0===n||n,v=e.accept,E=(0,o.useState)(!1),g=(0,r.Z)(E,2),b=g[0],O=g[1],h=(0,m.S)({onFiles:t,multiple:p,destroyOnUnmount:!1,accept:v}),y=(0,r.Z)(h,1)[0],Z=(0,o.useCallback)((function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=null!==(t=null==v?void 0:v.split(",").map((function(e){return e.trim()})))&&void 0!==t?t:[],o=e.every((function(e){var t=".".concat((0,i.Z)(e.name));return 0===r.length||r.includes(e.type)||r.includes(t)}));return o?!!p||1===n:(v&&f(a.em.error,(0,d.t)("eTMF.invalidFileTypes"),{persist:!1}),!1)}),[p,v]),I=(0,l.LW)({accept:l.V5.FILE,canDrop:function(e){return Z(e.files,e.items.length)},collect:function(e){return{isOver:e.canDrop()&&e.isOver({shallow:!0})}}}),S=(0,r.Z)(I,2),P=S[0].isOver,N=S[1];return(0,o.useEffect)((function(){var e;return u.Z.initDragAndDropUpload("page",{multiple:p}).then((function(n){e=n,O(!0),n.bind("change drop",(function(){setTimeout((function(){var e=n.files;Z(e)&&t(e)}))}))})),function(){var t;return null===(t=e)||void 0===t?void 0:t.destroy()}}),[t,p,Z]),(0,o.useEffect)((function(){return N(document.body),function(){N(null)}}),[N]),o.createElement("div",{className:"Db24qkXzxvMNDQiihJWs"},o.createElement(c.Z,{fullWidth:!0,highlighted:P,isDndSupported:b,isSingleFile:!p},o.createElement(s.Z,{id:y},(0,d.t)(p?"upload.content.chooseFilesBtn":"upload.content.chooseSingleFileBtn"))))}function v(e){return o.createElement(l.WG,null,o.createElement(p,e))}},147593:function(e,t,n){n.d(t,{O:function(){return a}});var r=n(667294),o=(0,r.createContext)();function a(){return(0,r.useContext)(o)||{}}t.Z=o},921802:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(667294),o=n(179521);function a(e){var t=e.trialId,n=e.countryId,a=void 0===n?null:n,i=e.siteId,l=void 0===i?null:i;return(0,r.useMemo)((function(){return function(e){var t=e.trialId,n=e.countryId,r=e.siteId;return r?{filingLevel:o.oA.SITE,filingLevelId:r}:n?{filingLevel:o.oA.COUNTRY,filingLevelId:n}:{filingLevel:o.oA.TRIAL,filingLevelId:t}}({trialId:t,countryId:a,siteId:l})}),[t,a,l])}},720261:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(204942),o=n(145218),a=n(33142),i=n(240701),l=n(23661);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=n(667294),u=n(847505);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=e.studyId,n=e.filingLevel,d=e.filingLevelId,f=function(e,t){var n=e.studyId,c=e.filingLevel,u=e.filingLevelId;return(0,o.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queryKey:a.M.artifacts.ARTIFACTS_CONFIG_FILING_LEVEL({studyId:n,filingLevel:c,filingLevelId:u}),queryFn:function(){return function(e){var t=e.studyId,n=e.filingLevel,r=e.filingLevelId;return(0,l.ZP)(i.Z.ETMF.ARTIFACTS_CONFIG(t,n,r))}({studyId:n,filingLevel:c,filingLevelId:u})}},(0,a.k)(t)))}({studyId:t,filingLevel:n,filingLevelId:d},{enabled:!!(t&&n&&d)}),p=f.data,v=(void 0===p?{}:p).milestones,E=void 0===v?[]:v,g=f.isLoading,b=f.isSuccess,O=(0,u.Tb)(),h=O.data,y=(void 0===h?{}:h).requireArtifactOnUpload,Z=void 0===y||y,I=O.isLoading,S=g||I,P=(0,c.useMemo)((function(){var e=new Set;return E.map((function(e){return e.artifacts})).flat().filter((function(t){return!e.has(t.referenceModelArtifactId)&&(e.add(t.referenceModelArtifactId),!0)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[E]),N=(0,c.useMemo)((function(){return P.reduce((function(e,t){return m(m({},e),{},(0,r.Z)({},t.referenceModelArtifactId,t))}),{})}),[P]),C=(0,c.useMemo)((function(){return E.reduce((function(e,t){return m(m({},e),{},(0,r.Z)({},t.id,t))}),{})}),[E]),D=(0,c.useMemo)((function(){return E.reduce((function(e,t){var n=e;return t.artifacts.forEach((function(e){e.referenceModelArtifactId in n?n[e.referenceModelArtifactId].push(t):n[e.referenceModelArtifactId]=[t]})),n}),{})}),[E]),T=(0,c.useMemo)((function(){return E.reduce((function(e,t){var n=e;return n[t.id]=t.artifacts,n}),{})}),[E]),A=(0,c.useCallback)((function(e){var t;return e&&null!==(t=D[e])&&void 0!==t?t:[]}),[D]),R=(0,c.useCallback)((function(e){var t;return e&&null!==(t=T[e])&&void 0!==t?t:[]}),[T]),w=(0,c.useCallback)((function(e){var t;return e&&null!==(t=N[e])&&void 0!==t?t:null}),[N]),L=(0,c.useCallback)((function(e){var t;return e&&null!==(t=C[e])&&void 0!==t?t:null}),[C]);return{isLoading:S,isSuccess:b,isArtifactRequiredOnUpload:Z,milestones:E,artifacts:P,getMilestonesByArtifact:A,getArtifactsByMilestone:R,getArtifact:w,getMilestone:L}}},449428:function(e,t,n){n.d(t,{w:function(){return o},z:function(){return r}});var r={SELECT_METADATA_FILES:"SELECT_METADATA_FILES",REVIEW_INITIATE_UPLOAD:"REVIEW_INITIATE_UPLOAD",CANCELLATION_PROMPT:"CANCELLATION_PROMPT"},o={NONE:"NONE",DEVICE:"DEVICE",SELECT:"SELECT"}},582278:function(e,t,n){n.d(t,{VT:function(){return mt},cL:function(){return nn},wM:function(){return Et.w}});var r=n(487462),o=n(145987),a=n(667294),i=n(141797),l=n(579621),s=n(762074),c=n(610861),u=n(204942),d=n(93433),m=n(529439),f=n(720261),p=n(403455),v=n(223957),E=n(264802),g=n(929674),b=n(546138),O=n(425404);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,r=(0,O.v)({enabled:n}),o=r.isLoading,i=r.data,l=void 0===i?{}:i,s=l.hasStudies,c=void 0!==s&&s,d=l.studies,m=void 0===d?[]:d,f=(0,a.useMemo)((function(){return{isStudiesInaccessible:c&&0===m.length,isStudiesNotFound:!c&&0===m.length}}),[c,m]),p=f.isStudiesNotFound,v=f.isStudiesInaccessible,E=(0,a.useMemo)((function(){return m.map((function(e){return e.filingLevels})).flat().reduce((function(e,t){return y(y({},e),{},(0,u.Z)({},t.filingLevelId,t))}),{})}),[m]),g=(0,a.useMemo)((function(){return m.reduce((function(e,t){return y(y({},e),{},(0,u.Z)({},t.id,t))}),{})}),[m]),b=(0,a.useCallback)((function(e){var t;return e&&null!==(t=g[e])&&void 0!==t?t:null}),[g]),h=(0,a.useCallback)((function(e){var t,n;return e&&null!==(t=null===(n=g[e])||void 0===n?void 0:n.filingLevels)&&void 0!==t?t:[]}),[g]),Z=(0,a.useCallback)((function(e){var t;return e&&null!==(t=E[e])&&void 0!==t?t:null}),[E]);return{isLoading:o,isStudiesNotFound:p,isStudiesInaccessible:v,studies:m,getStudyDetails:b,getStudyFilingLevels:h,getFilingLevel:Z}}var I=n(397404),S=n(260554),P=n(388767),N=n(33142),C=n(847505);function D(e){return e.uploadType===b.Fd.DEVICE}function T(e){return e.uploadType===b.Fd.EGNYTE}var A=n(176964),R=n(134130),w=n(32570);function L(){return a.createElement("div",{className:"f2z2m0IB0PJDne3h9ltz"},a.createElement(w.Z,null))}var F=(0,a.createContext)(null);function M(){var e=(0,a.useContext)(F);if(null===e)throw new Error("'useUploadDocumentContext' must be used within 'UploadDocumentProvider'");return e}function k(){return(0,p.u6)()}var j=F.Provider,_=n(115861),x=n(364687),U=n.n(x),G=n(425099),V=n(914578),B=n(621465),H=n(476839),z=n(955010),W=n(317268),q=n(264928),K=n(821442),Y=n(405510),Q=n(294184),X=n.n(Q),J=n(779210),$=n(367283),ee=n(337995),te=n(583025),ne=n(331067),re=n(499345),oe=function(e){return function(t){return t===e}},ae=oe(b.zK.IDLE),ie=oe(b.zK.IN_PROGRESS),le=oe(b.zK.FAILED),se=oe(b.zK.COMPLETED),ce="QzZn2C_V64jvO4ENjdIv",ue="WbL90MW3bFgPWZB4VzCX";function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=(0,s.nD)("eTMF");function pe(e){var t=e.title,n=e.subtitle;return a.createElement("div",{className:"GumKpSWrnMYJwFKdCrTY"},a.createElement("span",{className:"dTqCNG_WC4ajl0ZkeFuN"},t),a.createElement("span",{className:"Ku10_aqHtij6Y6X9uC82"},n))}var ve=function(e){return ie(e)||se(e)||le(e)};function Ee(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.value,r=n.modify,o=n.subArtifactGroupId,i=n.subArtifacts,l=void 0===i?[]:i,s=n.disabled,c=n.status;return a.createElement("div",{className:ue},a.createElement(J.Z,{trigger:a.createElement($.Z,{disabled:ve(c)||s,className:ce},a.createElement(re.Z,null,(null===(e=l.find((function(e){return e.subArtifactGroupId===o})))||void 0===e?void 0:e.name)||fe("newDocument"))),strategy:"fixed"},a.createElement(ee.Z,null,a.createElement(te.Z,{onClick:function(){return r((function(e){return me(me({},e),{},{subArtifactGroupId:null})}))},checked:!o},a.createElement(pe,{title:fe("newDocument"),subtitle:fe("newDocumentDescription")})),!!l.length&&a.createElement(ne.Z,{menuItemProps:{checked:o,title:a.createElement(pe,{title:fe("newVersion"),subtitle:fe("newVersionDescription")})}},l.map((function(e){var t=e.name,n=e.subArtifactGroupId;return a.createElement(te.Z,{onClick:function(){return r((function(e){return me(me({},e),{},{subArtifactGroupId:n})}))},key:n,checked:n===o},a.createElement(re.Z,{maxLength:50},t))}))))))}var ge=n(579099);function be(e){var t=e.value;return a.createElement(a.Fragment,null,a.createElement("div",{className:"OE_WcRMkjtRX35s9PBHm"},a.createElement(ge.Z,{type:ge.Z.types.FILE,name:t})),a.createElement(W.hI,{"data-tid":"filename",value:t}))}var Oe=n(233897);function he(e){var t=e.value;return a.createElement(W.hI,{value:(0,Oe.W)(t)})}var ye,Ze=n(799532),Ie=n(460019),Se=n(379499),Pe=n(777814),Ne=n(722610),Ce=(0,s.nD)("eTMF");function De(e){var t=e.onClick;return a.createElement("button",{type:"button","aria-label":Ce("removeFile"),onClick:t,className:"GKIdm8Icivu4RUo5UrsY"},a.createElement(Ze.Z,{icon:Ne.xv}))}var Te=(0,s.nD)("eTMF"),Ae=(ye={},(0,u.Z)(ye,b.zK.FAILED,(function(){return a.createElement(Ze.Z,{icon:Se.nL,className:"ynhfRaBvgYAy1MtGGI75 JVnhPSLp8rMpMNNAUG6G"})})),(0,u.Z)(ye,b.zK.COMPLETED,(function(){return a.createElement(Ze.Z,{icon:Ie.Nw,className:"RRx08ol9OddLhbDqN9oO JVnhPSLp8rMpMNNAUG6G"})})),ye);function Re(e){var t=e.value,n=void 0===t?{}:t,r=n.status,o=n.progress,i=void 0===o?0:o,s=n.retry,c=n.remove,u=Ae[r],d=Math.floor(i),m=100===d;return a.createElement(a.Fragment,null,u&&a.createElement(u,null),ie(r)?a.createElement(a.Fragment,null,a.createElement("div",{className:"RIydIlQ11I6a5At_zyzH"},a.createElement("div",{className:"cHKSRmTAJczzChvEjqyV"},a.createElement("span",null,d,"% ",Te("complete"))),a.createElement("div",{className:"xYpR9yiDl2cc1LV9QRnT"},a.createElement("div",{style:{width:"".concat(d,"%")},className:"ULCrPQxl0RzUO8H8OVjm"}))),!m&&a.createElement(De,{onClick:c})):a.createElement("div",{className:"tcmiVwc5eMCXP0Vi9lun"},se(r)&&a.createElement("span",{className:"scNVzrMbJdp4SDFT3zmP JVnhPSLp8rMpMNNAUG6G"},Te("uploadComplete")),le(r)&&a.createElement(a.Fragment,null,a.createElement("span",{className:"YJhktYB5BIvQd7caR1nP JVnhPSLp8rMpMNNAUG6G"},Te("uploadFailed")),a.createElement("div",{className:"pHhDtwC8_xxKACpNLo4l"},a.createElement(l.Z,{type:l.Z.SECONDARY,onClick:s},a.createElement(l.Z.Icon,{icon:Pe.b}),Te("retry")),a.createElement(De,{onClick:c}))),ae(r)&&a.createElement(De,{onClick:c})))}var we=n(698607),Le=n(581355);function Fe(e){var t=e.name,n=e.tooltip;return a.createElement("div",{className:"wbyj5H0XQjnMVjo5nEDq"},t,a.createElement(we.Z,{tooltip:n},a.createElement(Ze.Z,{icon:Le.yo})))}var Me=(0,s.nD)("eTMF");function ke(e){var t=e.path;return a.createElement(K.Z,{as:"a",href:(0,q.do)(t)},t)}var je=function(e){return D(e)?{filename:"filename",size:"size"}:T(e)?{filename:"file.name",size:"file.size"}:{filename:null,size:null}},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var r=je(n)[e];return r?(0,V.get)(n,r):t}};function xe(e){var t=e.files,n=e.subArtifacts,r=void 0===n?[]:n,o=e.onUploadClick,i=M(),c=i.goToSelectMetadataFiles,d=i.onFilesAdded,f=i.isDeviceMode,p=i.labels,v=i.resetCaches,E=i.onModalClose,g=k().values.studyId,O=(0,a.useMemo)((function(){return[t.some((function(e){var t=e.status;return ie(t)})),t.some((function(e){var t=e.status;return le(t)})),t.some((function(e){var t=e.status;return ie(t)||se(t)||le(t)})),t.every((function(e){var t=e.status;return se(t)||le(t)}))]}),[t]),h=(0,m.Z)(O,4),y=h[0],Z=h[1],I=h[2],S=h[3],P=function(e){var t,n=e.isAnyFileInProgress,r=e.areAllFilesFinished,o=e.files,i=e.defaultLabel,l=null===(t=o.find((function(e){return!!e.folderPath})))||void 0===t?void 0:t.folderPath;if(r){var c=o.filter((function(e){var t=e.status;return se(t)})).length,u=o.length;return{primaryButtonText:(0,s.t)("button.label.done"),statusText:l?Me("partiallyUploadedAtPath",{count:c,outOf:u,path:a.createElement(ke,{path:l})}):Me("partiallyUploaded",{count:c,outOf:u})}}return n?{primaryButtonText:(0,s.t)("button.label.uploading"),statusText:l?Me("uploadingFilesAtPath",{count:o.length,path:a.createElement(ke,{path:l})}):Me("uploadingFiles",{count:o.length})}:{primaryButtonText:i,statusText:Me("filesReadyToUpload",{count:o.length})}}({isAnyFileInProgress:y,areAllFilesFinished:S,files:t,defaultLabel:p.actions.upload}),N=P.primaryButtonText,C=P.statusText,D=(0,a.useMemo)((function(){return[{accessor:_e("filename"),Header:Me("fileName"),Cell:be,width:220,minWidth:220},{accessor:_e("size"),Header:Me("size"),Cell:he,width:70,minWidth:70},!!r.length&&{id:"documentType",accessor:function(e){return{subArtifactGroupId:e.subArtifactGroupId,modify:e.modify,status:e.status,subArtifacts:r,disabled:I}},Header:function(){return a.createElement(Fe,{name:Me("documentType"),tooltip:Me("documentTypeTooltip")})},Cell:Ee},{id:"status",accessor:function(e){return{status:e.status,progress:e.progress,remove:e.remove,retry:e.retry}},Header:I?Me("status"):"",Cell:Re,width:200,minWidth:150}].filter(Boolean)}),[I,r]),T=!f||y||Z,A=(0,G.S)({onFiles:d,disabled:T}),R=(0,m.Z)(A,1)[0],w=(0,a.useCallback)((function(e){var t=e.row.original,n=t.status,r=t.errorMessage;return n===b.zK.FAILED?a.createElement("div",{"data-tid":"error-alert",className:"CWLWopl1lBuUTeoWQo1V"},a.createElement(Y.Z,{color:Y.Z.DANGER},r||(0,s.t)("error.default"))):null}),[]);return(0,a.useEffect)((function(){S&&v()}),[S,g,v]),a.createElement("div",{className:"uvoUORlBKQ8Ik6RwLpXD"},a.createElement("div",{className:"radbSuO8sDkLPBx0hXt3"},C),a.createElement(W.ZP,{columns:D,data:t,getRowProps:function(){return{className:"zOm9YlXjdmPkwKQ6JVNd"}},renderRowSubComponent:w}),a.createElement("div",{className:"zn8NJqDrLW7HsXNUMCUb"},a.createElement("div",null,!I&&!f&&a.createElement(l.Z,{type:l.Z.SECONDARY,onClick:c},a.createElement(l.Z.Icon,{icon:B.Mn}),(0,s.t)("button.label.back")),a.createElement(l.Z,{className:X()((0,u.Z)({},"G2CikadHmB1wm9eK9Trb",!f)),type:l.Z.SECONDARY,id:R,disabled:T},a.createElement(l.Z.Icon,{icon:H.RH}),Me("addMoreFiles"))),a.createElement("div",{className:"pQ8fnxwNJ3wf5ktPBa10"},!I&&a.createElement(l.Z,{type:l.Z.SECONDARY,onClick:E},(0,s.t)("button.label.cancel")),a.createElement(l.Z,{type:l.Z.PRIMARY,onClick:S?E:o,disabled:y},N,y&&a.createElement(l.Z.Icon,{icon:z.V,spin:!0})))))}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=(0,s.nD)("eTMF"),Be=(0,I.Sh)({namespace:"etmf/upload"}).showNotification,He=function(e){return D(e)?e.uid:T(e)?e.file.id:null};function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.successCount,n=void 0===t?1:t,r=e.totalItemsCount,o=void 0===r?1:r;n&&Be("success",n===o?Ve("fullyUploaded",{count:n}):Ve("partiallyUploaded",{count:n,outOf:o}))}function We(e){var t=e.studyId,n=e.filingLevel,r=e.filingLevelId,o=e.milestoneId,i=e.artifactUniqueId,l=M(),s=l.files,u=l.onFilesChange,d=(0,a.useRef)(s);(0,a.useEffect)((function(){d.current=s}),[s]);var m=(0,C.tb)({studyId:t,filingLevel:n,filingLevelId:r,milestoneId:o,artifactUniqueId:i},{onError:function(){(0,c.Mr)(),Be("error",Ve("failedToLoadSubArtifacts"))}}),f=m.data,p=void 0===f?[]:f,v=m.isLoading,E=m.isSuccess,g=(0,a.useCallback)((function(e,t){u((function(n){return n.map((function(n,r){return r===e?t(n):n}))}))}),[u]),O=(0,a.useCallback)(function(){var e=(0,_.Z)(U().mark((function e(a){var l,s,c,u,m,f,p;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=d.current[a],s=l.status,c=l.subArtifactGroupId,u=l.uploadAPIAccessor,![b.zK.COMPLETED,b.zK.IN_PROGRESS].includes(s)){e.next=4;break}return e.abrupt("return",{});case 4:return e.prev=4,g(a,(function(e){return Ge(Ge({},e),{},{status:b.zK.IN_PROGRESS,progress:0})})),e.next=8,(0,G.x)(Ge(Ge({},(T(l),{uploadType:l.uploadType,file:l.file})),{},{studyId:t,milestoneId:o,artifactUniqueId:i,subArtifactGroupId:c,filingLevel:n,filingLevelId:r,onProgress:function(e){var t=e.progress;g(a,(function(e){return Ge(Ge({},e),{},{progress:t})}))},uploadAPIAccessor:u}));case 8:return m=e.sent,f=m.folderPath,g(a,(function(e){return Ge(Ge({},e),{},{status:b.zK.COMPLETED,progress:100,folderPath:f})})),e.abrupt("return",!0);case 14:e.prev=14,e.t0=e.catch(4),p=e.t0 instanceof Error?e.t0.message:null,g(a,(function(e){return Ge(Ge({},e),{},{status:b.zK.FAILED,progress:0,errorMessage:p})}));case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),[t,i,o,g,n,r]),h=(0,a.useCallback)((0,_.Z)(U().mark((function e(){var t;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=0;case 2:if(!(t<d.current.length)){e.next=10;break}if(!d.current[t].uploadAPIAccessor.isAborted){e.next=5;break}throw new DOMException("Upload has been aborted!");case 5:return e.next=7,O(t);case 7:t+=1,e.next=2;break;case 10:u((function(e){return ze({successCount:e.filter((function(e){return e.status===b.zK.COMPLETED})).length,totalItemsCount:e.length}),e})),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])}))),[u,O]);return a.createElement(a.Fragment,null,v&&a.createElement("div",{className:"oTvpGYJ67t6KkwRDJHt2"},a.createElement(w.Z,null)),E&&a.createElement(xe,{files:s.map((function(e,t){return Ge(Ge({},e),{},{retry:function(){return(0,_.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:if(!e.sent){e.next=4;break}ze();case 4:case"end":return e.stop()}}),e)})))()},remove:function(){u((function(t){return t.filter((function(t){var n,r;return He(t)!==He(e)||(null===(n=(r=t.uploadAPIAccessor).abort)||void 0===n||n.call(r),!1)}))}))},modify:function(t){u((function(n){return n.map((function(n){return He(n)===He(e)?t(n):n}))}))}})})),subArtifacts:p,onUploadClick:h}))}var qe=(0,s.nD)("eTMF"),Ke=function(){var e,t,n,r,o,i=M().isDefaultMode,l=Z(),s=l.isLoading,c=l.getStudyDetails,u=l.getFilingLevel,d=k().values,m=d.studyId,p=d.filingLevel,E=d.filingLevelId,g=d.milestoneId,b=d.artifactId,O=(0,f.Z)({studyId:m,filingLevel:p,filingLevelId:E}),h=O.isLoading,y=O.getArtifact,I=s||h,S=(0,O.getMilestone)(g),P=y(b),N=!(0,v.dn)(b),C=null!==(e=null===(t=(0,v.Oy)(b))||void 0===t?void 0:t.referenceModelArtifactId)&&void 0!==e?e:null,D=c(m),T=u(E);return I?a.createElement(L,null):a.createElement(a.Fragment,null,a.createElement(R.Z,null,i&&a.createElement(a.Fragment,null,a.createElement(R.S,{"data-tid":"study-metadata",label:qe("study")},null==D?void 0:D.name),a.createElement(R.S,{"data-tid":"filing-level-metadata",label:qe("filingLevel")},null==T?void 0:T.name)),a.createElement(R.S,{"data-tid":"artifact-metadata",label:qe("artifact")},(null==P?void 0:P.name)||(null===(n=(0,v.Oy)(b))||void 0===n?void 0:n.name)),a.createElement(R.S,{"data-tid":"milestone-metadata",label:qe("milestone")},S&&m&&p&&E?a.createElement(A.Z,{milestoneName:S.name,milestoneNumber:S.number,studyId:m,filingLevel:p,filingLevelId:E}):qe("milestoneNotSet"))),m&&p&&E&&a.createElement(We,{studyId:m,filingLevel:p,filingLevelId:E,milestoneId:null!==(r=null==S?void 0:S.id)&&void 0!==r?r:null,artifactUniqueId:null!==(o=N?C:null==P?void 0:P.referenceModelArtifactId)&&void 0!==o?o:null}))},Ye=n(369702),Qe=n(45596),Xe=n(360476),Je=n(40023),$e=n(179521),et=n(124333),tt=(0,s.nD)("eTMF");function nt(e){var t=e.title,n=e.description;return a.createElement("div",{className:"Lz8HFdhd7LpwBxAvsGWX"},a.createElement(et.Z,{illustration:"sad-whale"},a.createElement("div",{className:"P18Fb2SGDjxNtkgqxNtc DjBes9t5ENd6DFQP1lbE vSadc0pqvD7KtbqURZCR"},t),a.createElement("div",{className:"i5vG96qTuTx_ckNJT_Ag vlpHvsjgdbzjuadKPQ3e C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6"},n)))}function rt(e){return e.isStudiesInaccessible?a.createElement(nt,{title:tt("selectStudyFilingLevels.noPermission.title"),description:tt("selectStudyFilingLevels.noPermission.description")}):a.createElement(nt,{title:tt("selectStudyFilingLevels.noStudies.title"),description:tt("selectStudyFilingLevels.noStudies.description")})}var ot=(0,s.nD)("eTMF"),at=function(e){var t=e.studyName,n=void 0===t?"studyId":t,r=e.filingLevelName,o=void 0===r?"filingLevel":r,i=e.filingLevelIdName,l=void 0===i?"filingLevelId":i,s=e.onStudyChange,c=e.onFilingLevelChange,u=(0,p.U$)(n),d=(0,m.Z)(u,1)[0].value,f=(0,p.U$)(o),v=(0,m.Z)(f,3)[2],E=v.setValue,g=v.setTouched,b=(0,p.U$)(l),O=(0,m.Z)(b,3)[2],h=O.setValue,y=O.setTouched,I=Z(),S=I.isLoading,P=I.isStudiesInaccessible,N=I.studies,C=I.getStudyFilingLevels,D=I.getFilingLevel,T=(0,a.useMemo)((function(){return N.map((function(e){var t=e.status!==$e.$z.ACTIVE;return{label:e.name,value:e.id,isDisabled:t,tooltip:t?ot("selectStudyFilingLevels.studyInactive"):void 0}}))}),[N]),A=(0,a.useMemo)((function(){return C(d).map((function(e){var t=e.status!==$e._y.ACTIVE;return{label:e.name,value:e.filingLevelId,isDisabled:t,tooltip:t?ot("selectStudyFilingLevels.filingLevelInactive"):void 0}}))}),[d,C]),R=(0,a.useCallback)(function(){var e=(0,_.Z)(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=C(t),null==s||s(t),1!==n.length){e.next=10;break}return e.next=5,h(n[0].filingLevelId);case 5:return y(!0),e.next=8,E(n[0].filingLevel);case 8:return g(!0),e.abrupt("return");case 10:return e.next=12,h(null);case 12:return y(!0),e.next=15,E(null);case 15:g(!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,C,E,h,y,g]),w=(0,a.useCallback)(function(){var e=(0,_.Z)(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=D(t),null==c||c(t),!n){e.next=7;break}return e.next=5,E(n.filingLevel);case 5:return g(!0),e.abrupt("return");case 7:return e.next=9,E(null);case 9:g(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[D,E,g,c]);return a.createElement(a.Fragment,null,a.createElement(Je.Z,{required:!0,noOptionsMessage:function(){return a.createElement(rt,{isStudiesInaccessible:P})},name:n,label:ot("study"),isLoading:S,options:T,placeholder:ot("selectStudy"),onChange:R}),d&&a.createElement(Je.Z,{required:!0,name:l,label:ot("filingLevel"),options:A,placeholder:ot("selectAFilingLevel"),onChange:w}))},it=n(839470);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=function(e){return!!e};function ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return st({errorMessage:null,folderPath:null,subArtifactGroupId:null,status:b.zK.IDLE,progress:0,uploadAPIAccessor:{isAborted:!1,abort:void 0}},e)}function dt(e){return st(st({},ut()),{},{uploadType:b.Fd.DEVICE,uid:e.uid||(0,it.Z)(),filename:e.name,size:e.size,file:e})}function mt(e){return st(st({},ut()),{},{uploadType:b.Fd.EGNYTE,file:e})}var ft=(0,s.nD)("eTMF");function pt(){var e=M(),t=e.isDefaultMode,n=e.isSelectMode,r=e.isDeviceMode,o=e.modalSize,i=e.files,l=e.folder,s=e.onFolderChange,c=e.onFilesChange,u=e.onFilesAdded,d=(0,p.u6)(),m=d.values,f=m.studyId,E=m.filingLevel,g=m.filingLevelId,b=m.artifactId,O=m.milestoneId,h=d.initialValues,y=h.artifactId,Z=h.milestoneId,I=h.isUnblindedArtifact,S=d.setFieldValue,P=!(0,v.dn)(b),N=!(!b||!P&&!O),C=n&&N,D=r&&N&&!i.length,A=(0,a.useMemo)((function(){if(function(e){return e.every((function(e){return T(e)}))}(i))return i.map((function(e){return e.file}))}),[i]),R=(0,a.useCallback)((function(){S("artifactId",y),S("milestoneId",Z),S("isUnblindedArtifact",I)}),[S,y,Z,I]);return a.createElement(a.Fragment,null,t&&a.createElement(a.Fragment,null,a.createElement("div",{className:"FzO8k5GZyzddmYIBCMfA di8dHEGxZgrT5KjDiNkg vSadc0pqvD7KtbqURZCR"},ft("filingDetails")),a.createElement(at,{onStudyChange:R,onFilingLevelChange:R})),f&&E&&g?a.createElement(Ye.Z,{studyId:f,filingLevel:E,filingLevelId:g,artifactName:"artifactId",milestoneName:"milestoneId",hasUnblindedAccess:!0,isDocumentClassified:!1}):null,C&&a.createElement(Qe.Z,{key:o,className:"kO3dXswig_cnfqf4U8VQ",defaultValue:A,isMultiple:!0,onChange:function(e){c(e.map(mt))},defaultFolder:l,onFolderChange:s}),D&&a.createElement(Xe.Z,{onFiles:u}))}function vt(){var e=M(),t=e.isSelectMetadataFilesVisible,n=e.isReviewInitiateUploadVisible,r=e.isUploadReady;return a.createElement(a.Fragment,null,t&&a.createElement(pt,null),n&&r?a.createElement(Ke,null):null)}var Et=n(449428),gt=n(809742),bt=n(87554),Ot=n(154177),ht=n(970770),yt=n(354111),Zt=["type"],It=["Header"];function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt=(0,s.nD)("eTMF.etmfDataGrid");function Ct(e){var t=e.type,n=(0,o.Z)(e,Zt);return function(e){var r=e.Header,a=(0,o.Z)(e,It);return Pt(Pt({type:t,Header:r||Nt("columns.".concat(t,".title"))},n),a)}}function Dt(e){var t=e.value;return a.createElement(we.Z,null,a.createElement("span",null,t))}var Tt=Ct({id:"text",type:"text",Cell:Dt,minWidth:120,width:120});function At(e){var t=e.value;return a.createElement(a.Fragment,null,a.createElement("div",{className:"gFs0pJwMMG_8H2N5BCbt","data-tid":"extension"},a.createElement(ge.Z,{type:ge.Z.types.FILE,name:t})),a.createElement(W.hI,{"data-tid":"file-name",value:t}))}var Rt=Ct({id:"fileName",type:"fileName",Cell:At,minWidth:200,width:200});function wt(e){var t=e.value;return a.createElement(W.hI,{value:(0,Oe.W)(t)})}var Lt=Ct({id:"fileSize",type:"fileSize",Cell:wt,minWidth:100,width:100}),Ft=n(799756);function Mt(e){var t=e.value;return a.createElement("div",{className:"AREGGM_RdClMEEpz0hww"},a.createElement("span",{className:"Eye7CtfrzWKvJ5H5tdd9"},a.createElement(Ft.Z,{maxLinesCount:1,trimWhitespace:!0},t)))}var kt=Ct({id:"itemPath",type:"itemPath",Cell:Mt,minWidth:180,width:180});function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt={TextCell:Dt,FileNameCell:At,FileSizeCell:wt,ItemPathCell:Mt},Ut=Object.assign((function(e){var t=e["data-tid"],n=e.name,r=e.columns,o=e.data,i=e.isLoading,l=void 0!==i&&i,s=e.noData,c=void 0===s?null:s,u=e.configuration,d=void 0===u?{}:u,m=e.features,f=void 0===m?{}:m;return!c||l||null!=o&&o.length?a.createElement(yt.Z,{"data-tid":t,name:n,noData:c,data:o,columns:r,features:_t({columnResize:!0,stickyHeader:!0,sort:!0,pagination:!0,persistState:!0},f),isLoading:l,configuration:d}):a.createElement(a.Fragment,null,c)}),{cells:xt,columns:{textColumn:Tt,fileNameColumn:Rt,fileSizeColumn:Lt,itemPathColumn:kt}}),Gt=n(307179),Vt=n(153672),Bt=(0,s.nD)("eTMF.deleteSourceDocumentsModal");function Ht(e){var t=e.documents,n=(0,Vt.Lb)("user"),r=(0,m.Z)(n.data,1)[0],o=(0,a.useMemo)((function(){return[Ut.columns.fileNameColumn({accessor:function(e){return e.name}}),Ut.columns.fileSizeColumn({accessor:function(e){return e.size}}),Ut.columns.itemPathColumn({id:"originalLocation",accessor:function(e){return e.path},Header:Bt("originalLocation")}),Ut.columns.textColumn({id:"deletedBy",accessor:function(){return(0,Gt.oY)(r)},Header:Bt("deletedBy")})]}),[r]);return a.createElement(Ut,{name:"eTMF/deletedSourceDocuments",data:t,columns:o})}var zt=(0,s.nD)("eTMF.deleteSourceDocumentsModal");function Wt(e){var t=e.documents,n=(0,a.useState)(!1),r=(0,m.Z)(n,2),o=r[0],i=r[1],u=(0,bt.k7)({onSuccess:function(e){e.errors.length&&(0,I.c0)(I.em.error,zt("notifications.deleteFailed",{count:e.errors.length}))},onError:function(e){(0,Ot.k0)(e)?(0,I.c0)(I.em.error,(0,Ot.e$)(e,"")):(0,I.c0)(I.em.error,(0,s.t)("error.default"))}}),d=u.data,f=u.mutate,p=u.isLoading,v=u.isSuccess,E=(0,a.useMemo)((function(){if(!d)return[];var e=new Set;return d.errors.forEach((function(t){var n;null!==(n=t.resource)&&void 0!==n&&n.path&&e.add(t.resource.path)})),t.filter((function(t){return!e.has(t.path)}))}),[t,d]),g=(0,a.useCallback)((0,_.Z)(U().mark((function e(){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.map((function(e){return e.path})),f({paths:n}),i(!0);case 3:case"end":return e.stop()}}),e)}))),[t,f]);return(0,a.useLayoutEffect)((function(){var e=o?c.ZP.sizes.XL:c.ZP.sizes.L;(0,c.Gc)({size:e})}),[o]),(0,a.useEffect)((function(){v&&!E.length&&(0,c.Mr)()}),[v,E]),a.createElement(a.Fragment,null,a.createElement(c.ZP.Header,null,a.createElement(c.ZP.Title,null,zt("title"))),a.createElement(c.ZP.Body,null,a.createElement("div",{className:"YqntSUtHqE2Y4VtmMjaV"},v?a.createElement(a.Fragment,null,E.length?a.createElement(gt.Z,{type:gt.Z.types.SUCCESS},zt("notifications.deleteSuccess",{count:E.length,trashPage:a.createElement(K.Z,{as:"a",href:ht.Z.STORAGE.TRASH},zt("trashPage"))})):null,a.createElement(Ht,{documents:E})):a.createElement(a.Fragment,null,a.createElement("div",null,zt("description",{count:t.length})),a.createElement("div",null,zt("prompt",{count:t.length}))))),a.createElement(c.ZP.Footer,null,a.createElement(l.Z,{type:l.Z.SECONDARY,onClick:c.Mr},(0,s.t)("button.label.close")),!v&&a.createElement(l.Z,{variant:l.Z.variants.DESTRUCTIVE,onClick:g,disabled:p},p&&a.createElement(l.Z.Icon,{icon:z.V,spin:!0}),p?(0,s.t)("button.label.deleting"):(0,s.t)("button.label.deleteSourceFiles"))))}function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yt,Qt=(0,s.nD)("eTMF"),Xt=(0,s.nD)("eTMF.uploadDocumentModal");function Jt(){var e;null===(e=Yt)||void 0===e||e()}function $t(e){var t=e.mode,n=e.defaultArtifactId,r=void 0===n?null:n,o=e.defaultMilestoneId,l=void 0===o?null:o,u=e.studyId,O=void 0===u?null:u,h=e.filingLevel,y=void 0===h?null:h,A=e.filingLevelId,R=void 0===A?null:A,w=e.files,F=void 0===w?[]:w,M=e.labels,k=void 0===M?{}:M,_=k.title,x=k.actions,U=(void 0===x?{}:x).upload,G=void 0===U?(0,s.t)("button.label.upload"):U,V=e.children,B=(0,P.useQueryClient)(),H=(0,a.useState)(i.Z.sizes.XL),z=(0,m.Z)(H,2),W=z[0],q=z[1],K=(0,a.useState)(null),Y=(0,m.Z)(K,2),Q=Y[0],X=Y[1],J=(0,a.useState)(F),$=(0,m.Z)(J,2),ee=$[0],te=$[1],ne=(0,a.useState)([]),re=(0,m.Z)(ne,2),oe=re[0],ae=re[1],ie=(0,a.useState)(Et.z.SELECT_METADATA_FILES),le=(0,m.Z)(ie,2),se=le[0],ce=le[1],ue=(0,a.useState)(!1),de=(0,m.Z)(ue,2),me=de[0],fe=de[1],pe=(0,a.useMemo)((function(){return{isUploadReady:!(!me||!ee.length),isDefaultMode:t===Et.w.NONE,isSelectMode:t===Et.w.SELECT,isDeviceMode:t===Et.w.DEVICE,isSelectMetadataFilesVisible:se===Et.z.SELECT_METADATA_FILES,isReviewInitiateUploadVisible:se===Et.z.REVIEW_INITIATE_UPLOAD,isCancellationPromptVisible:se===Et.z.CANCELLATION_PROMPT,goToSelectMetadataFiles:function(){return ce(Et.z.SELECT_METADATA_FILES)},goToReviewInitiateUpload:function(){return ce(Et.z.REVIEW_INITIATE_UPLOAD)},goToCancellationPrompt:function(){return ce(Et.z.CANCELLATION_PROMPT)}}}),[t,me,ee,se]),ve=pe.isUploadReady,Ee=pe.isDefaultMode,ge=pe.isSelectMode,be=pe.isDeviceMode,Oe=pe.isSelectMetadataFilesVisible,he=pe.isReviewInitiateUploadVisible,ye=pe.isCancellationPromptVisible,Ze=pe.goToSelectMetadataFiles,Ie=pe.goToCancellationPrompt,Se=pe.goToReviewInitiateUpload,Pe=(0,a.useRef)({studyId:O,filingLevel:y,filingLevelId:R,artifactId:r,milestoneId:l,isUnblindedArtifact:null}),Ne=(0,f.Z)({studyId:O,filingLevel:y,filingLevelId:R}),Ce=Ne.isLoading,De=Ne.isArtifactRequiredOnUpload,Te=Z({enabled:Ee}),Ae=Te.isLoading,Re=Te.studies,we=Ce||Ae,Le=(0,a.useMemo)((function(){return _||Xt("title",{context:y})}),[_,y]),Fe=(0,a.useCallback)((function(e){te((function(t){var n=new Set(t.map((function(e){return e.file.name}))),r=e.map(dt).filter((function(e){var t=e.file;return!n.has(t.name)})),o=e.length-r.length;return o&&(0,I.c0)(I.em.information,Qt("uploadFileDuplicateRemoved",{count:o})),[].concat((0,d.Z)(t.filter((function(e){return e.status!==b.zK.COMPLETED}))),(0,d.Z)(r))}))}),[]),Me=(0,a.useCallback)((function(){O&&(B.invalidateQueries(N.M.COMPLETENESS_REPORT_ARTIFACTS),B.invalidateQueries(N.M.REQUIRED_DOCS_ARTIFACTS),B.invalidateQueries(N.M.MILESTONES_PROGRESS),(0,C.Ed)({studyId:O}))}),[B,O]),ke=(0,a.useMemo)((function(){return{isSelectMetadataFilesVisible:Oe,isReviewInitiateUploadVisible:he,isCancellationPromptVisible:ye,isUploadReady:ve,isDefaultMode:Ee,isSelectMode:ge,isDeviceMode:be,isUploadEnabled:!Ee||!(!Array.isArray(Re)||!Re.length),mode:t,title:Le,labels:{actions:{upload:G}},modalSize:W,content:we?a.createElement(L,null):a.createElement(vt,null),goToSelectMetadataFiles:Ze,goToCancellationPrompt:Ie,goToReviewInitiateUpload:Se,files:ee,folder:Q,onFilesChange:te,onFilesAdded:Fe,onFolderChange:X,onModalClose:Jt,resetCaches:Me}}),[we,Oe,he,ye,ve,Ee,ge,be,Re,t,ee,Q,Le,G,W,Fe,Ze,Ie,Se,Me]),je=(0,a.useMemo)((function(){return oe.filter(T).filter((function(e){return!e.file.path.startsWith(b.GT)})).map((function(e){return e.file}))}),[oe]),_e=(0,a.useCallback)((function(){var e;je.length&&(e={documents:je},(0,c.h7)(a.createElement(Wt,e),{onRequestClose:c.Mr,withCloseButton:!0}))}),[je]),xe=(0,a.useCallback)((function(){return ye?a.createElement(g.Z,{onConfirm:function(){return ce(Et.z.REVIEW_INITIATE_UPLOAD)},onCancel:function(){ee.forEach((function(e){var t,n;null===(t=(n=e.uploadAPIAccessor).abort)||void 0===t||t.call(n),e.uploadAPIAccessor.isAborted=!0})),je.length?_e():(0,c.Mr)()},messages:{title:Qt("uploadCancelationConfirmation.title"),body:Qt("uploadCancelationConfirmation.body"),cancel:Qt("uploadCancelationConfirmation.cancel"),confirm:Qt("uploadCancelationConfirmation.confirm")}}):"function"==typeof V?V(ke):V}),[ye,ke,V,ee,je,_e]);Yt=(0,a.useCallback)((function(){ee.some((function(e){return e.status===b.zK.IN_PROGRESS}))?ce(Et.z.CANCELLATION_PROMPT):je.length?_e():(0,c.Mr)()}),[ee,je,_e]);var Ue=(0,a.useMemo)((function(){return Kt(Kt({},Pe.current),{},{artifactId:Pe.current.artifactId||(De?null:(0,v.yK)({isUnblinded:!1}).referenceModelArtifactId),milestoneId:Pe.current.milestoneId||null})}),[Pe,De]);return(0,a.useLayoutEffect)((function(){var e=be?i.Z.sizes.M:i.Z.sizes.XL,t=he&&!ye?i.Z.sizes.XXL:e;(0,c.Gc)({size:t,withCloseButton:!ye}),q(t)}),[he,ye,be]),(0,a.useEffect)((function(){be&&ve&&Oe&&Se()}),[be,ve,Oe,Se]),(0,a.useEffect)((function(){!ve&&he&&(Ee?((0,I.c0)(I.em.information,Xt("messages.noUploadFiles")),(0,c.Mr)()):Ze())}),[ve,Ee,he,Ze]),(0,a.useEffect)((function(){ee.length&&ae((function(e){var t=e.map((function(e){return D(e)?e.uid:T(e)?e.file.id:null})).filter(ct),n=(0,d.Z)(e);return ee.forEach((function(e){e.status===b.zK.COMPLETED&&(D(e)&&!t.includes(e.uid)||T(e)&&!t.includes(e.file.id))&&n.push(e)})),n}))}),[ee]),(0,a.useEffect)((function(){return Me}),[Me]),a.createElement(j,{value:ke},a.createElement(p.J9,{initialValues:Ue,onSubmit:E.Z,enableReinitialize:!0},(function(e){var t=e.values;return Pe.current=t,a.createElement(p.l0,null,xe(),a.createElement(S.Z,{runOnInit:!0,onChange:function(e){var t=e.nextValues,n=t.studyId,r=t.filingLevel,o=t.filingLevelId,a=t.artifactId,i=t.milestoneId,l=!(0,v.dn)(a),s=!(!(n&&r&&o)||De&&!a||!l&&!i);me!==s&&fe(s)}}))})))}var en=["mode","defaultArtifactId","defaultMilestoneId","labels"];function tn(e){var t=e.mode,n=void 0===t?Et.w.NONE:t,c=e.defaultArtifactId,u=void 0===c?null:c,d=e.defaultMilestoneId,m=void 0===d?null:d,f=e.labels,p=(0,o.Z)(e,en);return a.createElement($t,(0,r.default)({labels:f,defaultArtifactId:u,defaultMilestoneId:m,mode:n},p),(function(e){var t=e.isDefaultMode,n=e.isUploadReady,r=e.isDeviceMode,o=e.isSelectMetadataFilesVisible,c=e.isUploadEnabled,u=e.title,d=e.content,m=e.goToReviewInitiateUpload;return a.createElement(a.Fragment,null,a.createElement(i.Z.Header,null,a.createElement(i.Z.Title,null,u)),a.createElement(i.Z.Body,null,d),o&&!r&&a.createElement(i.Z.Footer,null,a.createElement(l.Z,{type:l.Z.SECONDARY,onClick:Jt},(0,s.t)("button.label.cancel")),a.createElement(l.Z,{disabled:!n||!c,onClick:m},(0,s.t)(t?"button.label.next":"button.label.select"))))}))}function nn(e){(0,c.h7)(a.createElement(tn,e),{onRequestClose:Jt})}},369702:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(93433),o=n(529439),a=n(667294),i=n(40023),l=n(762074),s=n(720261),c=n(176964),u=n(223957),d=n(403455),m=n(546138),f=n(486008),p=(0,l.nD)("eTMF"),v=function(e){return!!e},E=(0,a.forwardRef)((function(e,t){var n=e.studyId,l=e.hasUnblindedAccess,E=e.isDocumentClassified,g=e.filingLevel,b=e.filingLevelId,O=e.milestoneName,h=void 0===O?"milestone":O,y=e.artifactName,Z=void 0===y?"artifact":y,I=e.isUnblindedArtifactName,S=void 0===I?"isUnblindedArtifact":I,P=(0,d.U$)(h),N=(0,o.Z)(P,3),C=N[1].initialValue,D=void 0===C?null:C,T=N[2],A=T.setValue,R=T.setTouched,w=(0,d.U$)(Z),L=(0,o.Z)(w,3),F=L[0].value,M=L[1].initialValue,k=void 0===M?null:M,j=L[2].setValue,_=(0,d.U$)(S),x=(0,o.Z)(_,3),U=x[1].initialValue,G=void 0===U?null:U,V=x[2].setValue,B=(0,s.Z)({studyId:n,filingLevel:g,filingLevelId:b}),H=B.isArtifactRequiredOnUpload,z=B.artifacts,W=B.getMilestonesByArtifact,q=B.getArtifact,K=(0,a.useMemo)((function(){return(F?W(F):[]).map((function(e){return{label:a.createElement(c.Z,{milestoneName:e.name,milestoneNumber:e.number,studyId:n,filingLevel:g,filingLevelId:b}),value:e.id}}))}),[n,g,b,W,F]),Y=(0,a.useMemo)((function(){var e=[(0,u.yK)({isUnblinded:!1}),(0,u.yK)({isUnblinded:!0})],t=[].concat((0,r.Z)(H?[]:e),(0,r.Z)(z)).filter(v),n=function(e){return(0,u.qo)({isUnblinded:e.isUnblinded,hasUnblindedAccess:l})};return t.map((function(e){var t;return{label:e.name,value:e.referenceModelArtifactId,isDisabled:n(e),isUnblinded:null!==(t=e.isUnblinded)&&void 0!==t&&t,tooltip:n(e)?p("classifyDocument.targetUnblindedPermission",{context:E?m.uy.RECLASSIFY:m.uy.CLASSIFY}):void 0}}))}),[H,E,l,z]),Q=(0,a.useCallback)((function(e){var t=e.label,n=e.isUnblinded;return a.createElement("span",{"aria-label":t},a.createElement("span",{className:"f0kJgtgxvsB3y3TBQUbK"},t)," ",a.createElement(f.B,{isUnblinded:n}))}),[]),X=(0,a.useMemo)((function(){return[Y.length?a.createElement(i.Z,{key:"artifact",required:H,isSearchable:!0,name:Z,label:p("artifact"),options:Y,placeholder:p("selectAnArtifact"),formatOptionLabel:Q,onChange:function(e){var t,n,r=q(e),o=null!==(t=(0,u.dn)(e)?null==r?void 0:r.isUnblinded:null===(n=(0,u.Oy)(e))||void 0===n?void 0:n.isUnblinded)&&void 0!==t&&t;V(o);var a=W(e);1!==a.length?A(null).then((function(){return R(!0)})):A(a[0].id).then((function(){return R(!0)}))}}):null,K.length?a.createElement(i.Z,{key:"milestone",required:!0,name:h,label:p("milestone"),options:K,placeholder:p("selectMilestone")}):null]}),[H,Z,h,Y,K,q,V,R,A,W,Q]);return(0,a.useImperativeHandle)(t,(function(){return{reset:function(){j(k),A(D),V(G)}}}),[k,D,G,j,A,V]),a.createElement(a.Fragment,null,X)}))},425099:function(e,t,n){n.d(t,{S:function(){return E},x:function(){return p}});var r=n(529439),o=n(115861),a=n(364687),i=n.n(a),l=n(667294),s=n(839435),c=n(839470),u=(n(962029),n(485343)),d=n(945450),m=n(656733),f=n(546138);function p(e){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(i().mark((function e(t){var n,r,o,a,l,s,c,p,v,E,g,b,O,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.studyId,o=t.milestoneId,a=t.artifactUniqueId,l=t.subArtifactGroupId,s=t.onProgress,c=t.uploadAPIAccessor,p=t.filingLevel,v=t.filingLevelId,e.next=3,(0,m.P0)({studyId:r,milestoneId:o,artifactUniqueId:a,subArtifactGroupId:l,filingLevel:p,filingLevelId:v,fileName:n.name,sourceFileGroupId:t.uploadType===f.Fd.EGNYTE?t.file.id:void 0});case 3:if(E=e.sent,g=E.subArtifactId,b=E.destinationPath,O=E.token,t.uploadType!==f.Fd.DEVICE){e.next=10;break}return e.next=10,(0,u.c)({file:t.file,destinationPath:b,additionalHeaders:{"X-Egnyte-PrivilegeContext":O},onProgress:s,uploadAPIAccessor:c,extraFormData:{id:t.file.uid,modifiedTime:+t.file.lastModifiedDate,protocolVersion:1}});case 10:if(t.uploadType!==f.Fd.EGNYTE){e.next=15;break}return h=t.file,null==s||s({progress:100}),e.next=15,(0,d.JG)({type:"file",id:h.id,name:h.name,path:h.path,destinationPath:b});case 15:return e.next=17,(0,m.f$)({studyId:r,documentId:g});case 17:return e.abrupt("return",{folderPath:b});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=e.onFiles,n=e.disabled,o=e.multiple,a=void 0===o||o,i=e.destroyOnUnmount,u=void 0===i||i,d=e.accept,m=(0,l.useState)(c.Z),f=(0,r.Z)(m,1)[0],p=(0,l.useRef)(null);return(0,l.useEffect)((function(){return s.Z.initClickUpload(f,{multiple:a,accept:d}).done((function(e){p.current=e,e.bind("change",(function(e){var n=e.target;t(n.files)}))})),function(){var e,t;u?null===(e=p.current)||void 0===e||e.destroy():null===(t=p.current)||void 0===t||t.disable(!0)}}),[u,f,t,a,d]),(0,l.useEffect)((function(){var e;null===(e=p.current)||void 0===e||e.disable(n)}),[n]),[f]}},302782:function(e,t,n){n.d(t,{Z:function(){return Ge}});var r,o=n(19309),a=n(667294),i=n(610861),l=n(369889),s=n(96506),c=n(529439),u=n(601714),d=n(762074),m=n(401552),f=n(13764),p=n(368354),v=n(155570),E=n(339594),g=n(987407),b=n(579621),O=n(943886),h=n(57324),y=n(204942),Z=n(145218),I=n(206143),S=n(317268),P=n(190544),N=n(294184),C=n.n(N),D=n(986456),T=n.n(D),A=n(119179),R=n(307179),w=n(609777),L=n(921758),F=n(730824),M=n(225364),k=n(799532),j=n(581355),_=n(652421),x=n(499345),U=n(698607),G=n(787781),V=function(e){var t=e.label,n=e.onClick,r=e.icon,o=e.disabled,i=void 0!==o&&o,l=e.disabledContext,s=void 0===l?"notAllowed":l,c=(0,d.t)("storage.versionModal.tooltip.".concat(t),i?{context:s}:{}),u=!i&&n?n:void 0;return a.createElement(U.Z,{tooltip:c},a.createElement("button",{type:"button",className:C()("se9BAVsdJM7FVsaPElgn",i&&"Hi9h8l7Rm4UCfpcusGpG"),onClick:u,"aria-label":t},a.createElement(k.Z,{icon:r})))},B={DOWNLOAD:"download",COPY_VERSION_ID:"copyVersionId",MAKE_CURRENT:"makeCurrent",DELETE:"delete"},H=(r={},(0,y.Z)(r,B.DOWNLOAD,w.LR),(0,y.Z)(r,B.COPY_VERSION_ID,L.in),(0,y.Z)(r,B.MAKE_CURRENT,F.kp),(0,y.Z)(r,B.DELETE,M._I),r);function z(e){var t=e.row.original;return a.createElement("div",{className:"nowrap"},(0,A.jQ)(t.updatedAt),t.isCurrent&&a.createElement(_.Z,{color:_.Z.GREEN,className:"LCVJ4MYqkUc75LtOjEiP"},(0,d.t)("storage.versionModal.grid.current")))}function W(e){var t=e.row.original;return a.createElement(x.Z,null,(0,A.jQ)(t.createdAt))}function q(e){var t=e.row.original,n=t.derived,r=t.createdBy,o=n?(0,d.t)("storage.versionModal.grid.systemUser"):(0,R.v2)(r);return a.createElement(x.Z,null,a.createElement("span",null,o,n&&a.createElement(U.Z,{tooltip:(0,d.t)("storage.versionModal.tooltip.system_SnG")},a.createElement(k.Z,{icon:j.n3,className:"qne9lBlgFxy8bLMENkJr"}))))}function K(e){var t=e.column,n=e.row;return t.props.displaySize&&a.createElement(x.Z,null,G.ZP.dataSize(n.original.size))}function Y(e){var t,n,r,o=e.row.original,i=e.column.props,l=i.controller,s=i.versions,d=i.onRefetch,m=i.isDisabled,f=i.isViewerOnly,p=i.isFileVersionUI,v=i.isInInactive,E=i.isCollaborationOngoing,g=(0,O.Jo)().features.fileVersionInFileAuditEnabled,b=!p&&!u.Z.isSnapshotPreview(),h=!u.Z.isSnapshotPreview()&&!(null===(t=o._self.linkedResources)||void 0===t||!t.itemDelete),y=!(null===(n=o._self.linkedResources)||void 0===n||!n.itemMakeCurrent),Z=!p&&!u.Z.isSnapshotPreview(),I=(0,a.useState)(!1),S=(0,c.Z)(I,2),P=S[0],N=S[1];v?r="inactive":E&&(r="collaboration");var T=[{label:B.DOWNLOAD,handler:l.download,disabled:f||v&&!o.isCurrent,disabledContext:v?"inactive":void 0},g&&{label:B.COPY_VERSION_ID,handler:l.copyVersionId,disabled:f},Z&&{label:B.DELETE,handler:l.deleteVersion,disabled:!h||f||v||E,disabledContext:r},!o.isCurrent&&b&&{label:B.MAKE_CURRENT,handler:function(){return N(!0),l.makeCurrent.apply(l,arguments).always((function(){N(!1)}))},disabled:P||!y||f||v||E,disabledContext:r}].filter(Boolean);return a.createElement("div",{className:C()("de1Oq0DbQRAL1B2lrkRv",p&&"z64Rio236_bFPO2VUmYi")},T.map((function(e){var t=e.label,n=e.handler,r=e.disabled,i=e.disabledContext;return a.createElement(V,{key:t,label:t,onClick:(0,D.debounce)((function(){return n(o,s,d)}),400,!0),icon:H[t],disabled:r||m,disabledContext:i})})))}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var X="versions",J=(0,d.nD)("storage.versionModal.grid"),$=function(e){var t=e.id,n=e.displaySize,r=e.controller,o=e.maxRevisionsCount,i=e.resultsPerPage,l=e.logger,s=e.isViewerOnly,m=e.isFileVersionUI,f=e.isInInactive,p=e.isCollaborationOngoing,v=(0,Z.useQueryClient)(),E=(0,a.useState)(1),g=(0,c.Z)(E,2),b=g[0],O=g[1],h={id:t,limit:i,offset:(b-1)*i},N=(0,Z.useQuery)({queryKey:[X,b,h],queryFn:function(){return u.Z.isSnapshotPreview()?(0,I.O)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mountId:u.Z.getUrlParams().mountId},h)):(0,I.y)(h)},select:function(e){var t=e.results,n=e.count;return 1===b&&(t[0].isCurrent=!0),{versions:t,count:n}},staleTime:P.iL,keepPreviousData:!0}),C=N.data,D=void 0===C?{versions:[],count:0}:C,T=N.isLoading,A=N.isFetching,R=N.refetch;(0,a.useEffect)((function(){return function(){return v.removeQueries(X)}}),[v]),(0,a.useEffect)((function(){D.versions.length>0&&l.log.logOpen({versions:D.versions,actionSource:l.actionSource})}),[D.versions,l]);var w=(0,a.useMemo)((function(){return[{Header:J("modified"),accessor:"modified",Cell:z,minWidth:220,width:220,props:{versions:D}},{Header:J("uploaded"),accessor:"uploaded",Cell:W,minWidth:190,width:190},{Header:J("uploadedBy"),accessor:"uploadedBy",Cell:q,minWidth:190,width:190},{Header:J("size"),accessor:"size",Cell:K,minWidth:90,width:90,props:{displaySize:n}},{accessor:"actions",disableResizing:!0,Cell:Y,minWidth:110,width:110,props:{controller:r,isDisabled:A,versions:{count:D.count,versions:D.versions},isViewerOnly:s,onRefetch:function(){v.removeQueries(X),R()},isFileVersionUI:m,isInInactive:f,isCollaborationOngoing:p}}]}),[r,n,D,R,A,v,s,m,f,p]);return a.createElement("div",null,a.createElement("p",{className:"AvejMLe3vzB5Fp0to15b","data-tid":"helper"},(0,d.t)("storage.versionModal.helper",{count:o,context:o>=0?"":"unlimited"})),a.createElement(S.ZP,{maxHeight:"260px",columns:w,data:D.versions,isLoading:T,onPageChange:function(e){return O(e)},features:{pagination:!0,columnResize:!0},configuration:{initialState:{pageIndex:0},pageSize:i,manualPagination:!0,pageCount:Math.ceil(D.count/i)}}))},ee=n(388767),te=n(115861),ne=n(364687),re=n.n(ne),oe=n(301158),ae=n(240701),ie=n(154177),le=n(32570),se=(0,d.nD)("storage.versionModal.history");function ce(){return a.createElement("div",{className:"iSJO7vSnNkQQbR_TsRKk"},se("empty"))}var ue=function(e){var t,n=e.id,r=e.isAdmin,o=e.isFileVersionUI,i=[{Header:se("date"),accessor:"accessTimestamp",minWidth:200,width:200,Cell:S.hI},{Header:se("accessor"),accessor:"accessor",minWidth:300,Cell:S.hI}],l=(0,ee.useQuery)(["getHistory",n],(function(){return function(e){return oe.Z.get(ae.Z.FSI.HISTORY(e)).then((function(e){return e.json()})).catch(function(){var e=(0,te.Z)(re().mark((function e(t){var n;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.json();case 2:throw n=e.sent,new ie.ZP(t,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(n).then((function(e){return function(e){return e.map((function(e){return{accessTimestamp:(0,A.jQ)(e.accessTimestamp),accessor:e.linkInfo||(0,R.v2)(e.accessingUser)}}))}(e)}))})),s=l.data;return l.isLoading?a.createElement("div",{className:"nONb0M1aDWAQ2CCRHR4g"},a.createElement(le.Z,null)):a.createElement("div",null,a.createElement("p",{className:"OtNy9YYiukvxxButsACN"},a.createElement("span",null,1===(t=s).length?se("oneItemInfo"):t.length>1?se("itemInfo",{items:t.length}):50===t.length?se("maxItemsInfo"):se("empty")),r&&!o&&a.createElement("span",null,se("link"),a.createElement("a",{href:"#settings/reports/audit/file/"},se("auditReports")))),a.createElement(S.ZP,{className:"hdnyjHbMEA79UKrx_7Xw",columns:i,data:s,maxHeight:"260px",noData:a.createElement(ce,null)}))},de="versions-modal",me={versions:"versions",history:"history"},fe=function(e){var t=e.model,n=e.controller,r=e.onClose,o=e.logger,l=e.onShowDetails,s=e.isFileVersionUI,y=e.resultsPerPage,Z=void 0===y?50:y,I=(0,a.useState)(me.versions),S=(0,c.Z)(I,2),P=S[0],N=S[1],C=t.get("permission")===f.vk.ViewerOnly,D=[{key:me.versions,label:(0,d.t)("storage.versionModal.versionsTab"),ComponentClass:$,componentProps:{logger:o,controller:n,id:t.id,displaySize:!(0,h.Oq)(t),maxRevisionsCount:u.Z.getMaxRevisionsCount(),resultsPerPage:Z,isViewerOnly:C,isFileVersionUI:s,isInInactive:(0,h.dQ)(t),isCollaborationOngoing:(0,h.Uw)(t)}},(0,O.Jo)().features.downloadHistoryEnabled?{key:me.history,label:(0,d.t)("storage.versionModal.historyTab"),ComponentClass:ue,componentProps:{id:t.id,isAdmin:m.ZP.isAdmin(),isFileVersionUI:s}}:null].filter(Boolean);return a.createElement(a.Fragment,null,a.createElement(i.ZP.Header,null,a.createElement(i.ZP.Title,null,(0,p.q)(t.get("name"))),a.createElement(v.Z,{tabsKey:de,selectedTabKey:P},D.map((function(e){var t=e.key,n=e.label;return a.createElement(E.Z,{key:t,tabKey:t,onClick:function(){return N(t)}},n)})))),a.createElement(i.ZP.Body,null,a.createElement("div",null,D.map((function(e){var t=e.key,n=e.ComponentClass,r=e.componentProps;return a.createElement(g.Z,{key:t,tabsKey:de,tabKey:t,selectedTabKey:P},a.createElement(n,r))})))),a.createElement(i.ZP.Footer,null,!s&&a.createElement(a.Fragment,null,a.createElement(b.Z,{onClick:l,type:b.Z.SECONDARY},(0,d.t)("button.label.fileDetails")),a.createElement(b.Z,{onClick:r,type:b.Z.SECONDARY},(0,d.t)("button.label.close")))))},pe=n(93433),ve=n(619755),Ee=n.n(ve),ge=n(776327),be=n(999932),Oe=n(397404),he=n(173069),ye=n(824802),Ze=o.Z.Model.extend({idAttribute:"entryId",url:function(){return ae.Z.FSI.VERSION({groupId:this.get("groupId"),entryId:this.get("entryId")})},getDownloadUrl:function(){var e=this.get("entryId"),t=(0,O.Jo)().mountId;return u.Z.isSnapshotPreview()?ae.Z.SNAPSHOTS.FILE_DOWNLOAD({mountId:t,entryId:e}):ae.Z.OPEN_DOCUMENT.DOWNLOAD(this.get("entryId"),this.get("name"))},makeCurrent:function(){return this.fetch({method:"POST"})}}),Ie=n(97311);function Se(e){var t=e.title,n=e.body,r=e.onCancelClick,o=e.onDeleteClick,l=(0,a.useState)(!1),s=(0,c.Z)(l,2),u=s[0],m=s[1];return a.createElement(a.Fragment,null,a.createElement(i.ZP.Header,null,a.createElement(i.ZP.Title,null,t)),a.createElement(i.ZP.Body,null,n),a.createElement(i.ZP.Footer,null,a.createElement(b.Z,{type:b.Z.SECONDARY,onClick:r},(0,d.t)("button.label.cancel")),a.createElement(Ie.Z,{onClick:function(){m(!0),o()},loading:u},(0,d.t)("button.label.delete"))))}var Pe=n(766334),Ne=(0,Oe.Sh)({namespace:"storage/versions"}).showNotification;var Ce=n(266606),De=n(680252);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re={create:function(e){return{log:function(t,n,r){var o=u.Z.get("user.id");Ce.Z.track(r,Ae({"Current Owner":o===e.get("owner.id"),"Revision Count":n.length,"Revision Owner":o===t.get("createdBy.id")},(0,De.zs)()))},logOpen:T().once((function(t){var n=t.versions,r=t.actionSource;Ce.Z.track(Re.MIXPANEL_EVENT.SHOW,Ae({"Current Owner":u.Z.get("user.id")===e.get("owner.id"),"Revision Count":n.length,"Coming From":r},(0,De.zs)()))})),logDownload:function(){Ce.Z.track(Re.MIXPANEL_EVENT.DOWNLOAD,Ae({},(0,De.zs)()))}}},MIXPANEL_EVENT:{SHOW:"Versions: Show revisions",DELETE:"Versions: Delete revision",REVERT:"Versions: Revert revision",DOWNLOAD:"Versions: Download revision"}},we=Re;function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me="storage.versionModal.makeCurrentError",ke=(0,Oe.Sh)({namespace:"storage/versions"}).showNotification;function je(e,t){var n,r,o,a,l,s,u=he.Z.parseXhrResponse(e&&e.responseText||t.responseText);u.results&&(u=(0,c.Z)(u.results,1)[0]);var m=Object.values(null!==(n=null===(r=u)||void 0===r?void 0:r.errors)&&void 0!==n?n:{}),f=Object.values(null!==(o=null===(a=u)||void 0===a?void 0:a.inputErrors)&&void 0!==o?o:{}),p=Object.values(null!==(l=null===(s=u)||void 0===s?void 0:s.formErrors)&&void 0!==l?l:{});m.length||f.length||p.length?[].concat(m,(0,pe.Z)(f.flat()),p).filter(Boolean).forEach((function(e){var t=(0,d.t)("error.".concat(e.code),{defaultValue:e.msg});ke(Oe.em.error,t)})):((0,i.Mr)(),ke(Oe.em.error,(0,d.t)("error.default")))}var _e=function(e,t){var n=function(e){return function(t){return t?function(e){return{modal:{title:"deleteFiles.content.title",content:"deleteFiles.content.deleteSingleFile"},successHandler:function(){e.collection.remove(e),ge.ZP.trigger(ge.ZP.Events.Storage.SEARCH_REFRESH),Ne(Pe.em.SUCCESS,(0,d.t)("deleteFiles.notices.singleFileSuccessfullyDeleted",{itemname:(0,p.q)(e.get("name"))})),(0,i.Mr)()}}}(e):function(e){return{modal:{title:"storage.versionModal.deleteTitle",content:"storage.versionModal.deleteContent"},successHandler:function(){e.fetch().done((function(){ge.ZP.trigger(ge.ZP.Events.Storage.SEARCH_REFRESH),(0,i.GZ)(),Ne(Pe.em.SUCCESS,(0,d.t)("storage.versionModal.versionDeleted"))}))}}}(e)}}(e);return{makeCurrent:function(e,n,r){var o=n.versions,a=new Ze(e);return a.makeCurrent().then((function(){r(),ge.ZP.trigger(ge.ZP.Events.Storage.FOLDER.REFRESH)}),(function(e){var t,n,r,o,a,i=(n=(t=he.Z.getFormErrors(e)[0]||{}).code,r=t.reason,o="".concat(Me,".").concat([n,r].filter(Boolean).join(".")),a=(0,d.t)(o,{returnObjects:!0}),(0,d.Gg)(o)&&"string"==typeof a?a:(0,d.t)("".concat(Me,".DEFAULT")));return ge.ZP.trigger(ge.ZP.Events.Storage.NOTIFICATION.SHOW,"error",i),Ee().when()})).then((function(){return t.log(a,o,we.MIXPANEL_EVENT.REVERT)}))},download:function(n){var r=new Ze(Fe(Fe({},n),{},{name:e.get("name")}));ye.Z.downloadFile("get",r.getDownloadUrl(),ge.ZP),t.logDownload()},deleteVersion:function(r,o,l){var s=o.versions,c=o.count,u=new Ze(r),m=1===c,f=n(m);(0,i.Ll)(a.createElement(Se,{title:(0,d.t)(f.modal.title),body:(0,d.t)(f.modal.content,{fileName:(0,p.q)(e.get("name")),itemname:e.get("name"),date:(0,A.jQ)(u.get("updatedAt"))}),onCancelClick:i.GZ,onDeleteClick:function(){u.destroy({wait:!0,success:function(){f.successHandler(),m||l()},error:je}),t.log(u,s,we.MIXPANEL_EVENT.DELETE)}}),{type:i.ZP.types.MODAL})},copyVersionId:function(e){var t=e.entryId;(0,be.Z)(t,{onSuccess:function(){ge.ZP.trigger(ge.ZP.Events.Storage.NOTIFICATION.SHOW,"success",(0,d.t)("storage.versionModal.copyVersionId.success"))}})}}},xe="haSOGSljExVupsgAOlDA",Ue="_0n4KLvc2t7Q1fD5HS2C";function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.actionSource,r=we.create(e),c=(0,s.QZ)();(0,i.h7)(a.createElement(fe,{model:e,controller:_e(e,r),onClose:i.Mr,logger:{log:r,actionSource:n},onShowDetails:function(){(0,i.Mr)(),l.ZP.run(e,new o.Z.Collection(e),{panelToOpen:l.ZP.PANELS.METADATA})},isFileVersionUI:c}),{size:i.ZP.sizes.XXL,onRequestClose:i.Mr,testId:"versions-modal",shouldCloseOnOverlayClick:!c,overlayClassName:c?xe:"",className:c?Ue:""})}},514803:function(e,t,n){n.d(t,{L:function(){return a}});var r=n(762074),o=n(647360);function a(e){var t,n,a,i=e.context,l=e.error,s=e.defaultMessage,c=void 0===s?null:s,u=e.options,d=null==l||null===(t=l.data)||void 0===t||null===(n=t.formErrors)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.code,m=c||(0,r.t)("error.default");if(d&&d in o.E){var f=o.E[d],p="function"==typeof f?f(i):f;return p?(0,r.t)(p,u):m}return m}},205339:function(e,t,n){n.d(t,{Z:function(){return Gt}});var r=n(667294),o=n(986456),a=n.n(o),i=n(762074),l=n(776327),s=n(57324),c=n(13764),u=n(619755),d=n.n(u),m=n(19309),f=n(751581),p=n(764063),v=n.n(p),E=n(601714),g=n(534733),b=n(943886),O=n(943439),h=n(914312),y=n(599417),Z=n(204942),I=n(266606);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t=e.getPermissions(),n=(0,b.Jo)().features.folderOptionsAdvanceManagementEnabled,r=E.Z.get("workgroup.folderOptionManagementType"),o=E.Z.get("user.typeName"),i=!(t.isOwner&&o!==g.$A.STANDARD&&(o===g.$A.ADMIN||!n||r===O.In.ADMINS_AND_OWNERS)),l=a().compact(["info","folderPath",!t.canChangeDescription&&"folderDescription",!t.canChangeNotificationOptions&&"userNotificationSettings",i&&"workgroupFolderSettings"]),s=d().extend(!0,{},a().omit(e.attributes,l));return s.userNotificationSettings&&(delete s.userNotificationSettings.notifyOnFolders,delete s.userNotificationSettings.overriddenByUser),null===s.inheritanceRule&&delete s.inheritanceRule,s}function N(e,t){if(!t)return e;var n,r={},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}((0,f.p8)(e));try{for(o.s();!(n=o.n()).done;){var i=n.value,l=(0,f.u9)(e,i),s=(0,f.u9)(t,i);v()(l,s)||(0,f.tP)(r,i,a().deepClone(l))}}catch(e){o.e(e)}finally{o.f()}return r}var C=m.Z.Model.extend({baseUrl:"/rest/public/2.0/folderoptions/",toJSON:function(){var e=P(this);return(0,y.Gd)({targetPhase:h.t.PHASE_3})&&this._originalPayload?N(e,this._originalPayload)||{}:e},getPermissions:function(){var e=this.get("info.permission"),t=(0,c.Jg)(e),n=this.get("userNotificationSettings.overriddenByUser"),r=this.get("userNotificationSettings.notifyOnFolders"),o=this.isUnderPrivate;return{canChangeDescription:t,canOverrideNotificationOptions:n,canChangeNotificationOptions:r===C.NOTIFY_ON_FOLDERS.WATCHED,isUnderPrivate:o,isOwner:(0,c.mF)(e)}},url:function(){return this.baseUrl+this.folderId},initialize:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m.Z.Model.prototype.initialize.apply(this,arguments),n.permission&&this.set("info.permission",n.permission),a().extend(this,n),this.on("sync",(function(){t._originalPayload=P(t)}))},save:function(e,t){e&&Object.keys(e).length>0&&this.set(e,{silent:!0});var n,r,o=N(P(this),this._originalPayload);n={inheritanceRule:null==e?void 0:e.inheritanceRule,diff:o},I.Z.track("Folder options changed",(r={},(0,Z.Z)(r,"Changed settings",n.diff),(0,Z.Z)(r,"Inheritance Rule",n.inheritanceRule||"-"),r));var i=a().defaults({type:"PUT"},t);return m.Z.Model.prototype.save.call(this,e,i)}},{NOTIFY_ON_FOLDERS:{NONE:"NONE",ALL:"ALL",WATCHED:"WATCHED"}}),D=C,T=n(610861),A=n(323063),R=n(173069),w=n(756698),L=n(529439),F=n(579621),M=n(32570),k=n(499345),j=n(536275),_=n(688146),x=function(e){var t=e.model,n=e.onSuccess,o=e.metadataController,a={model:t,onSuccess:n};return r.createElement("div",{className:"details-content"},r.createElement(_.Z,{controller:o,folderOptions:a}))},U=n(115861),G=n(364687),V=n.n(G),B=n(153672),H=n(403455),z=n(698607),W=n(934244),q=n(888249),K=n(294184),Y=n.n(K),Q=n(460474),X=n(397404),J=n(312937),$=(0,i.nD)("storage.folderOptions"),ee="admins-owners",te="admins-owners-full";function ne(e){var t=e.disabled;return r.createElement(J.Z,{name:"deletion",label:$("allowDeleteOrMove"),options:[{value:ee,label:$("adminsOwners")},{value:te,label:$("adminsOwnersFull")}],disabled:t})}var re=n(40023),oe=(0,i.nD)("storage.folderOptions"),ae="all",ie="files",le="none";function se(e){var t=e.disabled;return r.createElement(re.Z,{name:"allowPublicLinksFor",label:oe("allowPublicLinksFor"),options:[{value:ae,label:oe("filesAndFolders")},{value:ie,label:oe("filesOnly")},{value:le,label:oe("dontAllowLinks")}],className:"Yz25AJlNK57ZuqyXqdYJ",disabled:t})}var ce=n(330759),ue=n(552409),de=n(799532),me=n(460019),fe=n(722610),pe="SUCCESS",ve="ERROR";function Ee(e){var t=e.items;return t.length?r.createElement("div",{className:"HOekt1fFVoEhaelMULST"},t.map((function(e){var t;return r.createElement("div",{key:e.text,className:"PTMwMJNLQ0gxB2sGsyGz"},r.createElement(de.Z,{icon:e.status===pe?me.Nw:fe.UM,className:Y()("IRPP8AaAeAmRoRylpRYx",(t={},(0,Z.Z)(t,"kjOK6eKWgsVQyFwrL5zV",e.status===pe),(0,Z.Z)(t,"wJtC5HmSCaOmnQNWWvs_",e.status===ve),t)),size:de.Z.sizes.M}),r.createElement("p",{className:"ZpV1yNh5DlpNeOgr5ALt Er73cMkvdW7IEAv8y1uj m8RKLInoi4LLh_CKMjd0 cMD1Ln5gNqHc7P7v_G_6"},e.text))}))):null}var ge="aYUB33vHJrGLdvIHETEw",be="ShLxDoMtVjFuTShHgUsD gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa",Oe=(0,i.nD)("storage.folderOptions"),he="none",ye="files only",Ze="files and folders",Ie="THIS_FOLDER_ONLY",Se="THIS_FOLDER_AND_SUBFOLDERS_UNTIL_OVERRIDDEN",Pe="THIS_FOLDER_AND_SUBFOLDERS",Ne="LEGACY",Ce=[{value:Ie,header:Oe("scope.folderOnly"),description:Oe("scope.folderOnlyDescription"),enabled:h.t.PHASE_3},{value:Se,header:Oe("scope.folderAndSubfoldersUntilOverridden"),description:Oe("scope.folderAndSubfoldersUntilOverriddenDescription"),enabled:h.t.PHASE_3},{value:Pe,header:Oe("scope.folderAndAllSubfolders"),description:Oe("scope.folderAndAllSubfoldersDescription"),enabled:h.t.PHASE_4}];function De(e){return e.fileLinksDisallowed?he:e.folderLinksDisallowed?ye:Ze}function Te(e){switch(e){case he:return Oe("summary.dontAllowPublicLinks");case ye:return Oe("summary.allowPublicLinksFilesOnly");case Ze:return Oe("summary.allowPublicLinksFilesAndFolders");default:return e}}function Ae(e){var t,n,o=e.onApply,a=e.payload,l=e.initialValues,s=e.defaultScope,c=void 0===s?Se:s,u=function(e,t){var n=[];if(e.userNotificationSettings&&t.userNotificationSettings){var r=e.userNotificationSettings.crud,o=t.userNotificationSettings.crud,a=e.userNotificationSettings.download,i=t.userNotificationSettings.download;r!==o&&n.push({text:Oe(r?"summary.notifyAddUpdateRemove":"summary.dontNotifyAddUpdateRemove"),status:r?pe:ve}),a!==i&&n.push({text:Oe(a?"summary.notifyDownloadPreview":"summary.dontNotifyDownloadPreview"),status:a?pe:ve})}if(e.workgroupFolderSettings&&t.workgroupFolderSettings){var l=e.workgroupFolderSettings,s=t.workgroupFolderSettings;if(l.allFolderLinksDisallowed!==s.allFolderLinksDisallowed&&n.push({text:l.allFolderLinksDisallowed?Oe("summary.disallowFolderLinks"):Oe("summary.allowFolderLinks"),status:l.allFolderLinksDisallowed?ve:pe}),!l.allFolderLinksDisallowed){var c=De(l);c!==De(s)&&n.push({text:Te(c),status:c===he?ve:pe})}l.fixed!==s.fixed&&n.push({text:l.fixed?Oe("summary.deleteMoveAdminsOwners"):Oe("summary.deleteMoveAdminsOwnersFull"),status:pe})}return n}(a,l),d=Ce.filter((function(e){return(0,y.Gd)({targetPhase:e.enabled})})),m=d.length?d:Ce,f=null!==(t=null===(n=m.find((function(e){return e.value===c})))||void 0===n?void 0:n.value)&&void 0!==t?t:m[0].value,p=(0,r.useState)(f),v=(0,L.Z)(p,2),E=v[0],g=v[1];return r.createElement(r.Fragment,null,r.createElement(T.ZP.Header,null,r.createElement(T.ZP.Title,null,Oe("savingChanges"))),r.createElement(T.ZP.Body,null,r.createElement("div",{className:ge},r.createElement("div",{className:be},Oe("summary.optionsToApply")),r.createElement(Ee,{items:u})),r.createElement("div",{className:ge},r.createElement("div",{className:be},Oe("scope.title")),r.createElement("div",{className:"SmbDYyUiFQE8IiF6pfH5"},m.map((function(e){var t="scope-".concat(e.value),n=E===e.value;return r.createElement(ue.Z,{isSelected:n,htmlFor:t,key:e.value},r.createElement("div",{className:"Jzq88NarnFcPbFoz9zoO"},r.createElement(ce.Z,{id:t,name:"scope",value:e.value,checked:n,onChange:function(){return g(e.value)},label:e.header,caption:e.description})))}))))),r.createElement(T.ZP.Footer,null,r.createElement("div",{className:"bOpiesAsaWghYDVYgTBC"},r.createElement(F.Z,{type:F.Z.SECONDARY,onClick:function(){(0,T.GZ)()}},(0,i.t)("button.label.back")),r.createElement("div",{className:"lTYwonZZHBAGWzmjv8LM"},r.createElement(F.Z,{type:F.Z.SECONDARY,onClick:function(){(0,T.Mr)()}},(0,i.t)("button.label.cancel")),r.createElement(F.Z,{onClick:function(){o(E),(0,T.GZ)()}},(0,i.t)("button.label.apply"))))))}function Re(e){var t=e.onApply,n=e.payload,o=e.initialValues,a=e.defaultScope;(0,T.Ll)(r.createElement(Ae,{onApply:t,payload:n,initialValues:o,defaultScope:a}),{size:T.ZP.sizes.L,onRequestClose:T.Mr,withCloseButton:!0,"data-tid":"saving-folder-options-confirmation-modal"})}var we={notifyWhen:"WNFG2P1zBn020b8rOFza",form:"ONF3ZKQ4riH6bKkEHFld",optionsBlockDisabled:"WouBnvX3ISeaazgjrygJ",notifications:"WRyXlMCCuhB8rOWCyT0s",notificationsInfo:"wsJgINumiDyQVa7ysyG9",saveButtonContainer:"xPaRjwODVhXaQg2umn7d",saveButton:"aooifTj4YgemptphOwty",linksDisallowedExplanation:"FeyJXrzDrPXBFnBz9Ts6 qqGfbuN2RooWpKmkockU"};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=(0,i.nD)("storage.folderOptions");function ke(e,t){var n=t.notificationsOptionsEnabled,r=t.workgroupSettingsEnabled;return Fe(Fe({},n&&{userNotificationSettings:{crud:e.notifyOnCrud,download:e.notifyOnDownload}}),r&&{workgroupFolderSettings:{allFolderLinksDisallowed:!e.allowUsersToShareLinks,fileLinksDisallowed:e.allowPublicLinksFor===le,folderLinksDisallowed:e.allowPublicLinksFor!==ae,fixed:e.deletion===ee}})}var je="#settings/personal/preferences/";function _e(e){var t=e.children,n=e.className,o=e.enabled,a=e.tooltip,i=e.dataTid;return r.createElement(z.Z,{tooltip:a},r.createElement("div",{className:Y()(n,!o&&we.optionsBlockDisabled),"data-tid":i,"aria-disabled":!o},t))}var xe=(0,q.Z)((function(e){var t,n,o,a=e.model,l=e.onSuccess,s=(0,y.Gd)({targetPhase:h.t.PHASE_3}),c=(0,Q.Z)("folderOptionsAdvanceManagementEnabled"),u=a.getPermissions(),d=u.isOwner,m=u.isUnderPrivate,f=u.canOverrideNotificationOptions,p=void 0!==f&&f,v=u.canChangeNotificationOptions,b=(0,B.Lb)("{\n        user.typeName,\n        workgroup.folderOptionManagementType\n    }"),Z=(0,L.Z)(b.data,2),I=Z[0],S=Z[1],P=d&&I!==g.$A.STANDARD,N=c&&S===O.In.ADMINS_ONLY?P&&I===g.$A.ADMIN:P,C=p&&v,T=p&&!v,A=p?"":Me("noPermissionToOptions"),w=N?"":Me("noPermissionToOptions"),M={notifyOnCrud:a.get("userNotificationSettings.crud"),notifyOnDownload:a.get("userNotificationSettings.download"),allowUsersToShareLinks:!a.get("workgroupFolderSettings.allFolderLinksDisallowed"),allowPublicLinksFor:(t={filesDisallowed:a.get("workgroupFolderSettings.fileLinksDisallowed"),foldersDisallowed:a.get("workgroupFolderSettings.folderLinksDisallowed")},n=t.filesDisallowed,o=t.foldersDisallowed,!n&&o?ie:n||o?le:ae),deletion:a.get("workgroupFolderSettings.fixed")?ee:te,inheritanceRule:a.get("inheritanceRule")||Se};function k(){return k=(0,U.Z)(V().mark((function e(t){var n,r,o,i;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){return(i=(0,U.Z)(V().mark((function e(t){var r,o,i,s;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.save(Fe(Fe({},n),t&&{inheritanceRule:t}));case 3:l(t),e.next=13;break;case 6:e.prev=6,e.t0=e.catch(0),r=Object.values(R.Z.getFormErrors(e.t0)||{})[0],o=Object.values(R.Z.getInputErrors(e.t0)||{}).flat()[0],s=(null==(i=r||o)?void 0:i.msg)||e.t0.message,(0,X.c0)(X.em.error,s);case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},n=ke(t,{notificationsOptionsEnabled:C,workgroupSettingsEnabled:N}),r=ke(M,{notificationsOptionsEnabled:C,workgroupSettingsEnabled:N}),!s){e.next=8;break}Re({onApply:o,payload:n,initialValues:r,defaultScope:M.inheritanceRule}),e.next=10;break;case 8:return e.next=10,o(Ne);case 10:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}return r.createElement(H.J9,{initialValues:M,enableReinitialize:!0,onSubmit:function(e){return k.apply(this,arguments)}},(function(e){var t=e.values,n=e.dirty,o=e.submitForm;return r.createElement(H.l0,{className:we.form},r.createElement(_e,{enabled:C,tooltip:A,className:we.notifications,dataTid:"notifications-options"},r.createElement("div",{className:we.notifyWhen},Me("notifyWhen")),r.createElement(W.Z,{name:"notifyOnCrud",label:Me("addUpdateRemove"),disabled:!C}),!E.Z.isStandardUser()&&r.createElement(W.Z,{name:"notifyOnDownload",label:Me("downloadPreview"),disabled:!C}),T&&r.createElement("div",{className:we.notificationsInfo,"data-tid":"notifications-info"},function(e){switch(e.notifyOnFolders){case D.NOTIFY_ON_FOLDERS.ALL:return Me("notificationsForAllFolder",{preferencesLink:r.createElement("a",{href:je},Me("preferences"))});case D.NOTIFY_ON_FOLDERS.NONE:return Me("notificationsDisabled",{preferencesLink:r.createElement("a",{href:je},Me("preferences"))});default:return""}}({notifyOnFolders:a.get("userNotificationSettings.notifyOnFolders")})),r.createElement("div",{className:we.divider})),r.createElement(_e,{enabled:N,tooltip:w,dataTid:"workgroup-settings"},r.createElement(W.Z,{name:"allowUsersToShareLinks",label:Me("allFolderLinksDisallowedLabel"),disabled:!N}),r.createElement("div",{className:we.linksDisallowedExplanation},Me("allFolderLinksDisallowedExplanation")),function(e){return e.allowUsersToShareLinks}(t)&&r.createElement(se,{disabled:!N}),r.createElement(ne,{disabled:!N||m}),r.createElement("div",{className:we.saveButtonContainer},r.createElement(F.Z,{className:we.saveButton,disabled:!n,onClick:o},(0,i.t)("button.label.save")))))}))})),Ue=n(328912),Ge=n(647360),Ve=n(914578),Be=n(154177),He=n(821442),ze=n(278714),We=n(451545),qe=n(531926),Ke=n(93433),Ye=n(852298),Qe=n(79564),Xe={container:"M95HUw9jC8GiiMOy25AV",title:"Oqqgu1R_pCKV4hM4oPFh vlpHvsjgdbzjuadKPQ3e C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6",caption:"nc2TsmKVjQJ0BC5ZuRci Z3MFLDOuhAfuf_m3JCZI qqGfbuN2RooWpKmkockU cMD1Ln5gNqHc7P7v_G_6",metadataGroup:"a2phP6muWHw2z8u3tvcK",badgeGroup:"mHdvZ3MnXqnC2NabNCwZ",metadataMenu:"B52p4Za_9PPG9yKo43x2",searchInput:"dgD4S0RxJH8rPyl4kqF7",metadataMenuItem:"Q73pOW_Yznih1Pnqt_lL",metadataMenuItemLabel:"tadfsjfNFyN5DLczxg0T",metadataDropdown:"V1VsNImHT0NDPr8HRkwA",errorMessage:"uz3035WuRgP1fgGz8c8z",emptyText:"nHzHBjqCvCImp6V6CxZY",tooltipContainer:"m7rMqtrSWiH_U_ks5wQa"},Je=n(4845),$e=n(652421),et=n(638859),tt=n(300536),nt=n(532144),rt=n(222549),ot=n(731264),at=n(973935),it="I2RlTzKuFUG9tJPd1VE_",lt="YFN_19JSpTXrnyBqezeO NEl23SpAWOi7njWP_WLS qqGfbuN2RooWpKmkockU eugzcnL4uVMlgbRkfTqa",st=(0,i.nD)("metadataRules.modal"),ct=function(e){var t,n,o=e.target,a=e.metadata,i=e.learnMoreText,l=e.onViewMetadataClick,s=e.onHover,c=e.onBlur,u=(null!==(t=null===(n=a.criteria)||void 0===n?void 0:n.length)&&void 0!==t?t:0)-5,d=(0,r.useRef)(document.body),m=(0,ot.Z)(d,{class:"TN3qBGvdXpfjO9QXeU0I"});return(0,at.createPortal)(r.createElement(nt.Z,{referenceElement:o,onClose:c,popperOptions:{strategy:"fixed",placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,5]}},{name:"flip",options:{fallbackPlacements:["top"]}}]}},r.createElement("div",{className:"TaOJ6oMr1EYXb0Bf0c0I",onMouseEnter:s,onMouseLeave:c},r.createElement("div",{className:"e2l3ObxtU22tHKpMfJM7"},r.createElement("div",{className:it},r.createElement("span",{className:lt},st("appliedRulesLabel")),r.createElement($e.Z,{color:$e.Z.GRAY,size:$e.Z.sizes.SMALL,type:$e.Z.types.OUTLINED,uppercase:!1},a.label)),a.criteria&&r.createElement("div",{className:it},r.createElement("span",{className:lt},"Rule conditions:"),r.createElement(rt.Z,{minimized:!0,withHeader:!1,rule:a,maxRows:5})),Array.isArray(a.criteria)&&u>0&&l&&r.createElement("div",{className:"WAeecrTM6O65SM1QtNGl","data-tid":"more-rules"},r.createElement(He.Z,{onClick:function(){return l(a)}},"+",u," ",st("moreRulesCTA"),r.createElement(He.Z.Icon,{icon:We.g}))),i&&r.createElement("div",{className:"SlZxOiAv4jjAWgbALMf1"},i({metadata:a}))))),m.current)};function ut(e){var t=e.isEditMode,n=e.metadata,o=e.onRemoveClick,a=e.onHover,i=e.onBlur,l=(0,r.useRef)(null),s=n.name,c=n.isDisabled,u=n.disabledReason;return r.createElement(r.Fragment,null,r.createElement(z.Z,{tooltip:u,disabled:!c},r.createElement($e.Z,{ref:l,onMouseEnter:function(e){return a(e.currentTarget,n)},onMouseLeave:function(e){return i(e.currentTarget,n)},color:c?$e.Z.GREY:$e.Z.BLUE,size:$e.Z.sizes.MEDIUM,type:$e.Z.types.OUTLINED,uppercase:!1},s,!c&&t&&r.createElement(Je.Z,{"aria-label":"Remove metadata",icon:fe.xv,onClick:function(){return o(n)}}))))}var dt=function(e){var t=e.isEditMode,n=e.isDisabled,o=e.emptyText,a=e.selectedOptions,i=e.learnMoreText,l=e.onMetadataRemove,s=e.onViewMetadataClick,c=(0,et.Z)(),u=(0,r.useState)(!1),d=(0,L.Z)(u,2),m=d[0],f=d[1],p=(0,r.useState)(null),v=(0,L.Z)(p,2),E=v[0],g=v[1],b=(0,tt.Z)((function(e){c()&&(e||g(null),f(e))}),200),O=(0,r.useCallback)((function(){return b(!0)}),[b]),h=(0,r.useCallback)((function(){return b(!1)}),[b]);return(0,r.useEffect)((function(){m&&null!=E&&E.ref&&E.ref.click()}),[m,E]),r.createElement("div",{className:Xe.metadataGroup},Array.isArray(a)&&a.length||t?r.createElement("div",{className:Xe.badgeGroup},a.sort((function(e,t){return+t.isDisabled-+e.isDisabled})).map((function(e){return r.createElement(ut,{key:e.id,isEditMode:!n&&t,metadata:e,onRemoveClick:l,onHover:function(e,t){g({ref:e,metadata:t}),O()},onBlur:h})}))):r.createElement("p",{className:Xe.caption},o),m&&E&&!E.metadata.isDisabled&&r.createElement(ct,{onViewMetadataClick:s,target:E.ref,metadata:E.metadata,learnMoreText:i,onHover:O,onBlur:h}))},mt=n(779210),ft=n(499039),pt=n(681680),vt=n(576329),Et=n(337995),gt=(0,i.nD)("metadataRules.modal.dropdown"),bt=function(e){var t=e["aria-label"],n=e.searchPlaceholder,o=e.options,a=e.selectedOptionIds,i=e.noOptionsText,l=e.disabled,s=e.disabledReason,c=e.onOptionSelect,u=(0,r.useState)(""),d=(0,L.Z)(u,2),m=d[0],f=d[1],p=l||!o.length,v=l?s:i,E=(0,r.useMemo)((function(){return o.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())}))}),[o,m]),g=r.createElement(mt.Z,{maxSizeEnabled:!1,closeMenuOnClick:!1,onToggle:function(){return f("")},trigger:r.createElement(ft.Z,{"aria-label":t,className:Xe.metadataDropdown,type:ft.Z.ACTION,disabled:p},r.createElement("span",null,gt("select")))},r.createElement(Et.Z,{className:Xe.metadataMenu},r.createElement("div",{className:Xe.searchInput},r.createElement(pt.Z,{autoFocus:!0,value:m,onChange:function(e){f(e.target.value)},onClear:function(){return f("")},placeholder:n})),r.createElement("div",{className:Xe.labelContainer},E.length?E.map((function(e){return r.createElement(z.Z,{disabled:!e.isDisabled,placement:"left-start",tooltip:e.disabledReason,key:e.id},r.createElement("div",{className:Xe.metadataMenuItem,role:"menuitem"},r.createElement(vt.Z,{id:e.id,name:e.name,onChange:function(t){return c(e,t.target.checked)},checked:a.includes(e.id),disabled:e.isDisabled}),r.createElement("label",{htmlFor:e.id,className:Y()(Xe.metadataMenuItemLabel,e.isDisabled&&Xe.metadataMenuItemLabelDisabled)},r.createElement(k.Z,null,e.name))))})):r.createElement("div",{className:Xe.emptyText},gt("noResultsFound")))));return r.createElement("div",null,p?r.createElement(z.Z,{tooltip:v,placement:"right"},r.createElement("div",{className:Xe.tooltipContainer},g)):g)},Ot=(0,i.nD)("metadataRules.modal"),ht=function(e){var t=e["data-tid"],n=e.isEditMode,o=e.name,a=e.title,i=e.emptyText,l=e.options,s=e.disabled,c=void 0!==s&&s,u=e.disabledReason,d=e.infoTooltip,m=e.searchPlaceholder,f=void 0===m?Ot("dropdown.search"):m,p=e.noOptionsText,v=e.learnMoreText,E=e.onViewMetadataClick,g=(0,H.U$)(o),b=(0,L.Z)(g,3),O=b[0].value,h=void 0===O?[]:O,y=b[1].error,Z=b[2].setValue,I=(0,r.useMemo)((function(){return(0,Ke.Z)(l).sort((function(e,t){return+t.isDisabled-+e.isDisabled}))}),[l]),S=(0,r.useMemo)((function(){return I.filter((function(e){return h.includes(e.id)}))}),[h,I]),P=(0,r.useCallback)((function(e){Z(h.filter((function(t){return t!==e.id})))}),[h,Z]),N=(0,r.useCallback)((function(e,t){Z(t?[].concat((0,Ke.Z)(h),[e.id]):h.filter((function(t){return t!==e.id})))}),[h,Z]);return r.createElement("div",{className:Xe.container,"data-tid":t},r.createElement("p",{className:Xe.title},a," ",d&&r.createElement(Qe.Z,{size:de.Z.sizes.M},d)),n&&r.createElement(bt,{noOptionsText:p,"aria-label":"Select ".concat(o),searchPlaceholder:f,selectedOptionIds:h,options:I,onOptionSelect:N,disabled:c,disabledReason:u}),r.createElement(dt,{isDisabled:c,isEditMode:n,emptyText:i,selectedOptions:S,onMetadataRemove:P,onViewMetadataClick:E,learnMoreText:v}),y&&n&&r.createElement("div",{className:Xe.errorMessage},r.createElement(Ye.Z,{error:y,name:o})))},yt="rules",Zt="classifiers",It=(0,i.nD)("metadataRules.modal"),St=function(e){var t=e.isEditMode,n=e.isRulesEnabled,o=e.isRulesReadOnly,a=e.isClassifiersEnabled,l=e.isClassifiersReadOnly,s=e.onEditModeChange,c=e.rules,u=e.classifiers,d=e.onViewRuleMetadataClick,m=e.onViewClassifierClick,f=(0,H.u6)(),p=f.dirty,v=f.resetForm;return r.createElement("section",{className:"GybZ6vRNGWG3iRYGre8_"},r.createElement("div",{className:"fs4rcOfttCuSeX7x96_p"},!(o&&l)&&!t&&r.createElement(F.Z,{type:F.Z.TERTIARY,onClick:function(){return s(!0)}},r.createElement(F.Z.Icon,{icon:ze.T}),(0,i.t)("button.label.edit"))),n&&r.createElement(ht,{"data-tid":"rules-metadata",name:yt,isEditMode:t,disabled:o,disabledReason:It("rules.disabledReason.editPermission"),title:It("rules.title"),emptyText:It("rules.emptyText"),searchPlaceholder:It("rules.searchPlaceholder"),noOptionsText:It("rules.noOptionsText"),options:c,onViewMetadataClick:d}),a&&r.createElement(ht,{"data-tid":"classifiers-metadata",name:Zt,isEditMode:t,title:It("classifiers.title"),emptyText:It("classifiers.emptyText"),searchPlaceholder:It("classifiers.searchPlaceholder"),disabled:l,disabledReason:It("classifiers.disabledReason.editPermission"),noOptionsText:It("classifiers.noOptionsText"),infoTooltip:It("classifiers.infoTooltip"),options:u,learnMoreText:function(e){var t=e.metadata;return r.createElement(He.Z,{onClick:function(){return m(t)}},It("classifiers.learnMoreText")," ",r.createElement(de.Z,{icon:We.g}))}}),t&&r.createElement("div",{className:"X26obnYDe9zc7oscpJZm"},r.createElement(F.Z,{type:F.Z.SECONDARY,onClick:function(){s(!1),v({errors:{}})}},(0,i.t)("button.label.cancel")),r.createElement(qe.Z,{disabled:!p})))},Pt=n(514803),Nt=n(264928),Ct=n(970770),Dt=n(653712),Tt=n(507646),At=n(544095),Rt=n(491188),wt=n(405005);function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mt=(0,i.nD)("metadataRules.modal"),kt=(0,i.nD)("metadataRules.modal"),jt=function(e,t){var n=new Set(e),r=new Set(t);return{added:t.filter((function(e){return!n.has(e)})),removed:e.filter((function(e){return!r.has(e)}))}},_t=function(e){var t,n=e.folderId,o=e.permission,a=e.isInactiveItem,l=void 0!==a&&a,s=(0,r.useState)(!1),c=(0,L.Z)(s,2),u=c[0],d=c[1],m=(0,Q.Z)("metaDataRulesOverFileFoldersCount"),f=(0,wt.x)({isInactiveItem:l,permission:o}),p=f.isMetadataRulesEnabled,v=f.isClassifierLabelsEnabled,E=f.canEditClassifierLabels,g=f.canEditMetadataRules,b=function(e){var t=e.folderId,n=e.permission,o=e.isInactiveItem,a=void 0!==o&&o,l=(0,wt.x)({isInactiveItem:a,permission:n}),s=l.isMetadataRulesEnabled,c=l.isClassifierLabelsEnabled,u=(0,Tt.fT)({onError:function(e){var t=(e||{}).errorMessage;(0,Be.k0)(e)&&(t=(0,Be.e$)(e,t)),(0,X.c0)(X.em.error,t||(0,i.t)("error.default"),{persist:!1})},refetchOnWindowFocus:!1,enabled:s}),d=u.isLoading,m=u.data,f=void 0===m?[]:m,p=(0,At.r2)({select:function(e){return e.filter((function(e){return e.status===Rt.LS.ACTIVE}))},refetchOnWindowFocus:!1,enabled:c}),v=p.data,E=void 0===v?[]:v,g=p.isLoading,b=(0,At.TE)(t,{enabled:!!E.length}),O=b.data,h=void 0===O?[]:O,y=b.isLoading,I=(0,Tt.vH)(t,{onError:function(e){var t=(e||{}).errorMessage,n=void 0===t?(0,i.t)("error.default"):t;(0,X.c0)(X.em.error,n,{persist:!1})},enabled:!(null==f||!f.length),refetchOnWindowFocus:!1}),S=I.isLoading,P=I.data,N=void 0===P?[]:P,C=(0,Tt.Oo)().mutateAsync,D=(0,At.qf)(t).mutateAsync,T=d||S||g||y,A=(0,r.useMemo)((function(){if(S)return[];var e=N.reduce((function(e,t){return Ft(Ft({},e),{},(0,Z.Z)({},t.ruleId,t))}),{});return f.map((function(t){var n,r,o=!(null===(n=null===(r=e[t.ruleId])||void 0===r?void 0:r.editable)||void 0===n||n),a=o?Mt("rules.disabledReason.inheritedFromParent"):void 0;return{id:t.ruleId,name:t.ruleName,label:t.ruleLabel,criteria:t.criteria,isDisabled:o,disabledReason:a}}))}),[S,f,N]),R=(0,r.useMemo)((function(){if(y)return[];var e=h.reduce((function(e,t){return Ft(Ft({},e),{},(0,Z.Z)({},t.id,t))}),{});return E.map((function(t){var n,r,o=!(null===(n=null===(r=e[t.id])||void 0===r?void 0:r.editable)||void 0===n||n),a=o?Mt("classifiers.disabledReason.inheritedFromParent"):void 0;return{id:t.id,name:t.name,label:t.label,isDisabled:o,disabledReason:a}}))}),[y,h,E]);return{isLoading:T,initialSelectedRuleIds:(0,r.useMemo)((function(){return N.map((function(e){return e.ruleId}))}),[N]),initialSelectedClassifierIds:(0,r.useMemo)((function(){return h.map((function(e){return e.id}))}),[h]),rulesOptions:A,classifiersOptions:R,updateFolderRules:C,updateFolderClassifiers:D}}({folderId:n,permission:o,isInactiveItem:l}),O=b.isLoading,h=b.rulesOptions,y=b.classifiersOptions,I=b.initialSelectedRuleIds,S=b.initialSelectedClassifierIds,P=b.updateFolderClassifiers,N=b.updateFolderRules,C=(0,r.useCallback)(function(){var e=(0,U.Z)(V().mark((function e(t,o){var a,l,s,c,u,f,E,g,b,O,h,y,C,D,T,A,R,w,F,M,k,j,_;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.rules,l=t.classifiers,s=o.resetForm,c=o.setErrors,u=o.setFieldValue,e.prev=2,E=jt(I,a),g=E.added,b=E.removed,O=jt(S,l),h=O.added,y=O.removed,C=function(e){return(0,Pt.L)({context:Ge.a.rule.application,error:e,options:{count:m}})},D=!(!g.length&&!b.length),T=!(!h.length&&!y.length),e.next=10,Promise.allSettled([p&&D&&N({body:{ruleIdsToAssociate:g,ruleIdsToDissociate:b},folderId:n}),v&&T&&P({classifiersToAssociate:h,classifiersToDisassociate:y})]);case 10:if(A=e.sent,R=(0,L.Z)(A,2),w=R[0],F=R[1],"rejected"!==w.status||"rejected"!==F.status){e.next=19;break}return M={},(0,Z.Z)(M,yt,C(w.reason)),(0,Z.Z)(M,Zt,(0,Be.e$)(F.reason,"")),c(M),Ue.Z.detailsAndOptionsRulesSaved({isSuccessful:!1,errorMessage:C(w.reason),folderId:n}),e.abrupt("return");case 19:if(k={rules:I,classifiers:S},j={},"fulfilled"===w.status?(k.rules=a,Ue.Z.detailsAndOptionsRulesSaved({ruleCount:a.length,isSuccessful:!0,folderId:n})):(j.rules=C(w.reason),Ue.Z.detailsAndOptionsRulesSaved({isSuccessful:!1,errorMessage:C(w.reason),folderId:n})),"fulfilled"===F.status?k.classifiers=l:j.classifiers=(0,Be.e$)(F.reason,""),s({values:k,errors:j,submitCount:1,touched:(f={},(0,Z.Z)(f,yt,!0),(0,Z.Z)(f,Zt,!0),f)}),(0,Ve.isEmpty)(j)){e.next=29;break}return j.rules&&u(yt,a,!1),j.classifiers&&u(Zt,l,!1),(0,X.c0)(X.em.error,r.createElement(r.Fragment,null,kt("partialSaveErrorNotification",{title:r.createElement("strong",null,kt("partialSaveErrorTitle"))}))),e.abrupt("return");case 29:d(!1),(0,X.c0)(X.em.success,kt("successNotification"),{persist:!1}),e.next=38;break;case 33:e.prev=33,e.t0=e.catch(2),_=(0,i.t)("error.default"),(0,Be.k0)(e.t0)&&(_=(0,Be.e$)(e.t0,"")),(0,X.c0)(X.em.error,_);case 38:case"end":return e.stop()}}),e,null,[[2,33]])})));return function(t,n){return e.apply(this,arguments)}}(),[p,v,I,S,m,n,d,N,P]);return O?r.createElement("div",{className:"AIWAO5i2ET9U8veWw2Xk"},r.createElement(M.Z,null)):r.createElement(H.J9,{initialValues:(t={},(0,Z.Z)(t,yt,I),(0,Z.Z)(t,Zt,S),t),onSubmit:C},r.createElement(H.l0,null,r.createElement(St,{isEditMode:u,isRulesEnabled:p,isRulesReadOnly:!g,isClassifiersEnabled:v,isClassifiersReadOnly:!E,onEditModeChange:d,rules:h,classifiers:y,onViewRuleMetadataClick:function(e){return t=e.id,n=Dt.Z.addQueryParams(Ct.Z.SETTINGS.METADATA.RULES.ROOT,{expandedRuleId:t}),void(0,Nt.c4)(n,{trigger:!0});var t,n},onViewClassifierClick:function(e){return t=e.id,void(0,Nt.c4)(Ct.Z.SETTINGS.METADATA.AI_METADATA.ROOT({classifierId:t}),{});var t}})))},xt=function(e){var t=e.model,n=e.folderName,o=e.metadataController,a=e.onSuccess,l=e.onCancel,s=e.onFetchError,c=e.isInactiveItem,u=(0,r.useState)(!0),d=(0,L.Z)(u,2),m=d[0],f=d[1],p=o.folderItem.get("type")===A.dt.FOLDER,v=o.folderItem.get("permission"),E=(0,wt.x)({permission:v,isInactiveItem:c}),g=E.isMetadataRulesEnabled,b=E.isClassifierLabelsEnabled;return(0,r.useEffect)((function(){t.fetch({success:function(){f(!1)},error:function(e,t){s(t)}})}),[t,s]),r.createElement(r.Fragment,null,r.createElement(T.ZP.Header,null,r.createElement(T.ZP.Title,null,r.createElement(k.Z,null,n))),r.createElement(T.ZP.Body,null,r.createElement("div",{className:"gVxhNlpY2gyhtwEPx8m1"},m?r.createElement("div",{className:"W0j9x9LBkt0UibBv_NLo"},r.createElement(M.Z,null)):r.createElement(j.Z,{className:"AdjmaZWJ1iscKVxos1GA",tabs:[{id:"details",label:(0,i.t)("storage.folderOptions.details"),ComponentClass:x,componentProps:{model:t,metadataController:o,onSuccess:a}},!c&&{id:"options",label:(0,i.t)("storage.folderOptions.options"),ComponentClass:xe,componentProps:{model:t,onSuccess:a}},p&&(g||b)&&{id:"metadataRules",label:(0,i.t)("storage.folderOptions.rulesBasedMetadata"),ComponentClass:_t,componentProps:{folderId:t.folderId,permission:v,isInactiveItem:c}}].filter(Boolean)}))),r.createElement(T.ZP.Footer,null,r.createElement(F.Z,{type:F.Z.SECONDARY,onClick:l},(0,i.t)("storage.folderOptions.close"))))};function Ut(e){return e===Ie?(0,i.t)("storage.folderOptions.savedWithScope.folderOnly"):e===Se?(0,i.t)("storage.folderOptions.savedWithScope.folderAndSubfoldersUntilOverridden"):e===Pe?(0,i.t)("storage.folderOptions.savedWithScope.folderAndAllSubfolders"):(0,i.t)("storage.folderOptions.saved")}function Gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=e.toJSON(),o=(0,s.dQ)(n)||(0,s.rJ)(n);(0,T.h7)(r.createElement(xt,{model:new D(null,{permission:e.get("permission"),folderId:e.get("id"),isUnderPrivate:(0,s.Iw)(e)}),folderName:e.get("name"),metadataController:new w.Z({folderItem:e,namespaceDetails:{entityId:e.get("id"),entityType:A.dt.FOLDER},isInactiveItem:o}),onSuccess:function(e){t(),l.ZP.trigger(l.ZP.Events.Storage.FOLDER.REFRESH),l.ZP.trigger(l.ZP.Events.Storage.NOTIFICATION.SHOW,"success",Ut(e))},onFetchError:function(e){var t=R.Z.parseXhrResponse(e),n=t&&a().first(t.errors).msg;l.ZP.trigger(l.ZP.Events.Storage.NOTIFICATION.SHOW,"error",n),(0,T.Mr)()},onCancel:T.Mr,isInactiveItem:o}),{size:T.ZP.sizes.L,withCloseButton:!0,onRequestClose:T.Mr})}},267807:function(e,t,n){n.d(t,{$H:function(){return g},CG:function(){return v},G0:function(){return u},N3:function(){return p},OG:function(){return y},Pk:function(){return S},Ql:function(){return s},RC:function(){return b},S1:function(){return O},T6:function(){return c},UQ:function(){return d},Y0:function(){return N},dg:function(){return h},f3:function(){return m},fH:function(){return E},kE:function(){return Z},n2:function(){return I},q6:function(){return f},w:function(){return P}});var r=n(204942),o=n(266606),a="Assistant name",i="Identifier",l="Entry point";function s(e){o.Z.track("KBA: History icon clicked",(0,r.Z)({},l,e))}function c(){o.Z.track("KBA: History rename clicked")}function u(){o.Z.track("KBA: History rename saved")}function d(){o.Z.track("KBA: History delete clicked")}function m(){o.Z.track("KBA: History delete confirmed")}function f(){o.Z.track("KBA: History thread selected")}function p(){o.Z.track("KBA: Sidebar assistant opened")}function v(){o.Z.track("KBA: Sidebar assistant closed")}function E(){o.Z.track("KBA: Sidebar view all assistants clicked")}function g(e){o.Z.track("KBA: Sidebar assistant selected",(0,r.Z)({},"Selection way",(null==e?void 0:e.selectionWay)||"-"))}function b(){o.Z.track("KBA: Knowledge bases view opened")}function O(e){var t;o.Z.track("KBA: Initiate new knowledge base creation",(0,r.Z)({},l,null!==(t=e.entryPoint)&&void 0!==t?t:"-"))}function h(e){var t,n=e.filterName,a=e.filterValue;o.Z.track("KBA: Filter changed",(t={},(0,r.Z)(t,"Filter name",n),(0,r.Z)(t,"Filter value",null!=a?a:"Any"),t))}function y(e){var t,n;o.Z.track("KBA: Knowledge base creation clicked",(n={},(0,r.Z)(n,a,e.assistantName),(0,r.Z)(n,l,null!==(t=e.entryPoint)&&void 0!==t?t:"-"),n))}function Z(e){var t;o.Z.track("KBA: Edit knowledge base clicked",(t={},(0,r.Z)(t,a,e.assistantName),(0,r.Z)(t,i,e.identifier),t))}function I(e){var t;o.Z.track("KBA: Knowledge base edited",(t={},(0,r.Z)(t,a,e.assistantName),(0,r.Z)(t,i,e.identifier),t))}function S(e){var t;o.Z.track("KBA: Mark knowledge base as inactive clicked",(t={},(0,r.Z)(t,a,e.assistantName),(0,r.Z)(t,i,e.identifier),t))}function P(e){var t;o.Z.track("KBA: Knowledge base marked as inactive",(t={},(0,r.Z)(t,a,e.assistantName),(0,r.Z)(t,i,e.identifier),t))}function N(e){var t;o.Z.track("KBA: Navigate to knowledge base folder clicked",(t={},(0,r.Z)(t,a,e.assistantName),(0,r.Z)(t,i,e.identifier),(0,r.Z)(t,"Folder path",e.folderPath),t))}},97311:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(487462),o=n(145987),a=n(667294),i=n(579621),l=n(32570),s=["loading","disabled","children"],c=function(e){var t=e.loading,n=e.disabled,c=e.children,u=(0,o.Z)(e,s);return a.createElement(i.Z,(0,r.default)({},u,{disabled:t||n}),t&&a.createElement(l.Z,{className:"EBpvQCH7gO2dBH3UaksR",size:l.Z.SMALL}),c)}},822868:function(e,t,n){n.d(t,{Z:function(){return T}});var r=n(115861),o=n(529439),a=n(204942),i=n(364687),l=n.n(i),s=n(667294),c=(n(19309),n(136988)),u=n(57324),d=n(610861),m=n(579621),f=n(317268),p=n(698607),v=n(499345),E=n(799532),g=n(451545),b=n(762074),O=n(588765),h=n(307179),y=n(97311);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=(0,b.nD)("storage.mixedPermissions.modal"),P="delete";function N(e){return"mailto:".concat(e)}var C=[{Header:function(){return S("disabledItemsGrid.headers.fileName")},accessor:"fileName",minWidth:120,width:210,Cell:function(e){var t=e.value;return s.createElement(v.Z,{className:"qZz0V4QLXvAlNUDK0TvQ"},t)}},{Header:function(){return S("disabledItemsGrid.headers.lockReason")},accessor:"lockReason",minWidth:120,width:120,Cell:f.hI},{Header:function(){return S("disabledItemsGrid.headers.lockedBy")},accessor:"lockedBy",minWidth:120,width:120,Cell:function(e){var t=e.value;if(!t)return null;var n=t.fullName,r=t.email;return s.createElement("a",{className:"AlrGAAOJRt04kfC2ARCN",href:N(r)},s.createElement(p.Z,{tooltip:S("disabledItemsGrid.tooltip.mail",{email:r}),placement:"top"},s.createElement("span",{className:"XpVEOU4bFbWqAuAfaJFM"},s.createElement(v.Z,{disableTooltip:!0},n))),s.createElement(E.Z,{icon:g.b,className:"QseuNbruLFbm0PqQZeAY"}))}}];function D(e){var t=e.permissions,n=e.items,a=e.onSubmit,i=e.onError,p=(0,s.useState)(!1),v=(0,o.Z)(p,2),E=v[0],g=v[1],Z=(0,s.useMemo)((function(){var e=function(e,t){return e.map((function(e){var n,r=(0,c.ZP)(e);return(0,c.Yk)(r,t)?e:I(I({},(0,u.cX)(e)),{},{absenceReason:null===(n=r[t.find((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.reason}))])||void 0===n?void 0:n.reason})}))}(n,t),r=(0,O.uK)(e,(function(e){return!e.absenceReason})),a=(0,o.Z)(r,2);return{enabledItems:a[0],disabledItems:a[1]}}),[n,t]),N=Z.enabledItems,D=Z.disabledItems,T=(0,s.useMemo)((function(){return D.map((function(e){var t=e.absenceReason,n=e.name,r=e.lock.owner;return{id:e.id,fileName:n,lockReason:t,lockedBy:r?{email:r.email,fullName:(0,h.v2)(r)}:void 0}}))}),[D]),A=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,a(N);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),null==i||i(e.t0);case 9:return e.prev=9,g(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return s.createElement(s.Fragment,null,s.createElement(d.ZP.Header,null,s.createElement(d.ZP.Title,null,S("title.".concat(P)))),s.createElement(d.ZP.Body,null,s.createElement("div",{className:"xATQsDkuKdVoI9OEgT87"},S("message.".concat(P),{count:N.length})),s.createElement(f.ZP,{columns:C,data:T,name:"MixedPermissions/ConfirmActionModal"})),s.createElement(d.ZP.Footer,null,s.createElement(m.Z,{type:m.Z.SECONDARY,onClick:d.Mr},(0,b.t)("button.label.cancel")),s.createElement(y.Z,{onClick:A,loading:E},S(E?"submitting.".concat(P):"submit.".concat(P),{count:N.length}))))}var T=function(e){return(0,d.h7)(s.createElement(D,e),{size:d.ZP.sizes.L,onRequestClose:d.Mr})}},987518:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(776327),o=n(19309),a=n(610861),i=n(188382),l=n(526594),s=n(823592),c=n(667294),u=n(529439),d=n(266606),m=n(762074),f=n(557044),p=n(943886),v=n(579621),E=n(955010),g=n(368354),b=n(986456),O=n.n(b),h=n(690489);function y(e){var t=e.selectionInfo,n=e.items,o=e.model;return function(e,a,i){(0,h.ul)({selectionInfo:t,items:n,bulk:!0}),n.forEach((function(e){var t;null==o||o.items.remove(e),null!==(t=e.isFolder)&&void 0!==t&&t.call(e)&&r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REMOVE,e)}))}}var Z=n(805252),I=n(397404),S=(0,m.nD)("deleteFiles.content");function P(e){var t;return(null==e||null===(t=e.get)||void 0===t?void 0:t.call(e,"name"))||(null==e?void 0:e.name)}function N(e){var t=e.model,n=e.onSuccess,l=e.closeModal,s=(0,c.useState)(!1),b=(0,u.Z)(s,2),h=b[0],N=b[1],C=t.folderItems,D=t.folderItemsInfo,T=t.folder,A=function(e){var t=e.folderItems,n=e.folderItemsInfo,r=(0,p.Jo)().langContext;switch(!0){case n.singleFile:return S("deleteSingleFile",{itemname:(0,g.q)(P(t[0])),context:r});case n.singleFolder:return S("deleteSingleFolder",{itemname:P(t[0]),context:r});case n.multipleFiles:return S("deleteMultipleFiles",{count:t.length,context:r});case n.multipleFolders:return S("deleteMultipleFolders",{count:t.length,context:r});default:return S("deleteMultipleFilesAndFolders",{count:t.length,context:r})}}({folderItems:C,folderItemsInfo:D});function R(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.response,s=o.statusText,c=o.xhr,u=null==t||null===(e=t.get)||void 0===e?void 0:e.call(t,"taskId");t instanceof i.Z.DeleteFilesOperation&&u?r.ZP.trigger(r.ZP.Events.Operation.DELETE,{taskId:u,folder:T,folderItems:C}):y({selectionInfo:D,model:T,items:C})(a,s,c);var m=C.filter((function(e){return(0,Z.zD)(e.get("name"))})).length;m>0&&d.Z.track("Shortcut delete",{count:m}),null==n||n(),l()}function w(e,t){var n,a=t.responseText,s=t.status,c=t.statusText,u=t.xhr;if(200===s&&O().isEmpty(a))return R(e,{response:t,statusText:c,xhr:u});if(202===s)return l(),void(0,f.Z)({contentRows:[(0,m.t)("deleteFiles.async.deletingInBackground")],analyticsEvent:{name:"Async Delete: Dialog shown"}});try{n=JSON.parse(a)}catch(e){n=null}if(n){var d=n,p=d.errors,v=d.state;Array.isArray(p)?p.forEach((function(e){if(v){var t=v.failed,n=v.processed;if(Array.isArray(t)&&t.length>0){var a=new o.Z.Collection(C.filter((function(e){return t.includes(e.id)}))),l=i.Z.getDeletionInfo(t,a);r.ZP.trigger(r.ZP.Events.Storage.NOTIFICATION.SHOW,"error",i.Z.getErrorDeletionMessage(a,l,e))}if(Array.isArray(n)&&n.length>0){var s=new o.Z.Collection(C.filter((function(e){return n.includes(e.id)}))),c=i.Z.getDeletionInfo(n,s);T.items.remove(s.toArray()),T.items.trigger("sync"),r.ZP.trigger(r.ZP.Events.Storage.NOTIFICATION.SHOW,"success",i.Z.getSuccessDeletionMessage(s,c))}}else r.ZP.trigger(r.ZP.Events.Storage.NOTIFICATION.SHOW,"error",i.Z.getErrorDeletionMessage(C,D,e))})):i.Z.checkIfDeleteFailDueToLock(n)?(0,I.c0)("error",i.Z.getErrorDeletionMessage(C,D,{code:"LOCKED",msg:""}),{actionLinks:[{id:"lockSummaryReport",label:S("lockSummaryReport"),attr:{class:"lockSummaryReport"}}],namespace:"lockSummaryReport",events:{"click .lockSummaryReport":function(e){e.preventDefault(),(0,I.yK)(),window.location.href="/register.do?ref=reportLink&reportName=LockSummaryReport"}}}):i.Z.checkIfDeleteFailDueToPermissions(n)||(null==C?void 0:C.length)>0&&r.ZP.trigger(r.ZP.Events.Storage.NOTIFICATION.SHOW,"error",i.Z.getErrorDeletionMessage(C,D))}else r.ZP.trigger(r.ZP.Events.Storage.NOTIFICATION.SHOW,"error",i.Z.getErrorDeletionMessage(C,D));l()}return c.createElement(c.Fragment,null,c.createElement(a.ZP.Header,null,c.createElement(a.ZP.Title,null,S("title"))),c.createElement(a.ZP.Body,null,A),c.createElement(a.ZP.Footer,null,c.createElement(v.Z,{type:v.Z.SECONDARY,onClick:l},(0,m.t)("button.label.cancel")),c.createElement(v.Z,{onClick:function(){N(!0),t.commit({error:function(){return w.apply(void 0,arguments)},success:function(e,t,n){R(void 0,{response:e,statusText:t,xhr:n})}})},disabled:h},h&&c.createElement(v.Z.Icon,{icon:E.V,spin:!0}),(0,m.t)("button.label.delete"))))}var C=n(625735),D=n(737639),T=n(956729),A=n(822868),R={mixedHandler:function(e){var t=e.selectedItems,n=e.permissions;(0,A.Z)({permissions:n,items:t,onSubmit:function(e){return new Promise((function(n,l){var c=(0,s.Kp)(e),u=new o.Z.Collection(e),d=t[0].parentFolder,m=new i.Z({folder:d,folderItems:u,folderItemsInfo:c});u.each((function(e){e.set({processing:!0})})),m.commit({error:function(e,t,n,o){!function(e,t,n,r){e.each((function(e){e.set({processing:!1})}))}(e),l(o),r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REFRESH)},success:function(e,t,o){y({selectionInfo:c,items:u,model:d})(e,t,o),(0,a.Mr)(),n(),r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REFRESH),r.ZP.trigger(r.ZP.Events.Storage.SEARCH_REFRESH)}})}))},onError:function(e){Array.isArray(e.errors)?function(e){(0,C.w)(c.createElement(C.Z,{title:(0,m.t)("storage.actions.delete")},c.createElement(C.Z.Body,null,c.createElement(D.Z,{title:"deleteFiles.prevalidation.error.delete.title",messages:e})),c.createElement(C.Z.Footer,null,c.createElement(C.Z.CancelButton,{onClick:a.Mr}))))}((0,l.j)(e.errors).errors):(r.ZP.trigger(r.ZP.Events.Storage.NOTIFICATION.SHOW,"error",(0,h.ZW)(e)),(0,a.Mr)())}})},normalHandler:function(e){var t=e.selectedItems;!function(e,t,n){if(e.length){var r=(0,s.Kp)(e);!function(e){var t=e.model,n=e.onSuccess;(0,a.h7)(c.createElement(N,{model:t,onSuccess:n,closeModal:a.Mr}),{onRequestClose:a.Mr})}({model:new i.Z({folder:n,folderItems:e,folderItemsInfo:r}),onSuccess:t})}}(t,(function(){r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REFRESH),r.ZP.trigger(r.ZP.Events.Storage.SEARCH_REFRESH),(0,T.BT)()}),t[0].parentFolder)}}},216914:function(e,t,n){n.d(t,{aD:function(){return c},tS:function(){return S},eG:function(){return h}});var r=n(204942),o=n(762074),a=n(225364),i=n(987518);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={DELETE:"DELETE"},u=(0,r.Z)({},c.DELETE,s({icon:a.gt,label:(0,o.t)("storage.actions.delete"),token:"delete",permissions:["Delete"]},i.Z)),d=(0,r.Z)({},c.DELETE,"delete"),m=n(487462),f=n(667294),p=n(136988),v=n(594695),E=n(55034),g=n(823592);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){return e.filter((function(e){return(0,p.Yk)((0,p.ZP)(e),t)}))}var y=(0,o.nD)("storage.mixedPermissions");function Z(e,t,n){var r;if(0===h(e,t).length)return 1===e.length?null===(r=(0,p.ZP)(e[0])[function(e,t){return t.find((function(t){return(0,p.k3)((0,p.ZP)(e),t)}))}(e,t)])||void 0===r?void 0:r.reason:y("tooltip.disabled.".concat(n))}function I(e,t,n){var r=h(e,t).length;if(r!==e.length&&0!==r)return y("tooltip.enabled.".concat(n),{count:r})}var S=function(e,t){var n=d[e],r=s(s({},u[e]),undefined),o=r.permissions,a=r.mixedHandler,i=r.normalHandler;return O(O({},r),{},{render:function(e){var l=e.selectionInfo,s=e.selectedItems,c=e.onClick,u=e.env;if(!(0,p.od)(t,o))return null;function d(){var e=h(s,o);e.length>=1&&e.length<s.length?a({selectedItems:s,permissions:o}):i({selectedItems:s,permissions:o}),c()}return f.createElement(v.Z,(0,m.default)({},r,{key:r.token,disabledReason:Z(s,o,n),hint:I(s,o,n),onClick:function(){(0,g.gp)(u.user,s)?(0,E.Z)(d):d()},selectionInfo:l,selectedItems:s}))}})};n(822868)},680087:function(e,t,n){n.d(t,{S:function(){return R},T:function(){return G}});var r=n(667294),o=n(610861),a=n(762074),i=n(32570),l=n(499345),s=n(204942),c=n(145218),u=n(805091);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=n(529439),f=n(227052),p=n(38638),v=n(119930),E=n(799532),g=n(179755),b=n(921758),O=n(451545),h=n(581355),y=n(698607),Z=n(821442),I=n(266606),S=n(930652),P=n(233897),N=n(727484),C=n.n(N),D=n(392348);function T(e){return e.toLocaleString()}function A(e){return(0,P.W)(e)}var R={FOLDER_INSIGHTS_MODAL_OPENED:"Folder Insights: Folder insights modal opened",FOLDER_INSIGHTS_MODAL_OPENED_VIA_BADGE:"Folder Insights: Folder insights modal opened via badge",FOLDER_INSIGHTS_INCLUDE_SUBFOLDERS:"Folder Insights: Include subfolders option clicked",FOLDER_INSIGHTS_MANAGE_DATA_SPRAWL_LINK:"Folder Insights: Manage data sprawl link clicked",FOLDER_INSIGHTS_MANAGE_RETENTION_POLICY_LINK:"Folder Insights: Manage retention policy link clicked",FOLDER_INSIGHTS_MANAGE_DUPLICATE_CONTENT_LINK:"Folder Insights: Manage duplicate content link clicked"},w=n(14074),L=(0,a.nD)("protectAnalytics.errorMessages");function F(e){var t=e.errorCode,n=e.errorMessage;return r.createElement(w.Z.Container,null,r.createElement(w.Z.Illustration,{width:"200px",type:w.Z.Illustration.types["sad-whale"]}),t&&r.createElement(w.Z.Description,null,r.createElement("div",{className:"jEg7qAJwo54dNcvVn5Ni DjBes9t5ENd6DFQP1lbE vSadc0pqvD7KtbqURZCR"},L("error",{context:t})," ")),r.createElement(w.Z.Description,null,r.createElement("div",{className:"gqa3yijfqvl0Bl1Uj6B3"},n||L("description",{context:t}))))}var M="xViIcGnL1dHyAq6plUm0",k="lhdmPhcrJ70XNEGzAEdk",j=(0,a.nD)("protectAnalytics"),_=function(e){var t=e.data,n=(0,r.useState)(!0),o=(0,m.Z)(n,2),a=o[0],i=o[1],l=t.contentLifecycleInsight,s=l.folderInfo,c=l.status,u=l.lastUpdatedDate,d=l.links;if("DISABLED"===c)return r.createElement(F,{errorMessage:j("featureDisabled")});if("ENABLED_NOT_SCANNED"===c)return r.createElement(F,{errorCode:"E_FOLDER_NOT_SCANNED"});var P,N=s.contentLifecycleManagementLink,w=s.manageRetentionPolicyLink,L=s.aggregatedFolderInsight,_=s.rawFolderInsight,x=a?L:_,U=x.versionsInsight,G=x.duplicationInsight,V=x.retentionInsight,B={filesCountByTypes:U.filesByType,filesSizeByTypes:U.filesSizeByType};return r.createElement(r.Fragment,null,r.createElement("div",{className:"nUVMVklIb7XCSSBiy_Hn"},r.createElement("span",null,j("lastScan",{date:r.createElement("span",{className:"Qj4_XCDk7dbDS3xWp_yB eugzcnL4uVMlgbRkfTqa"},(P=u,C()(P).format(D.Jn.dateTimeWithTimeZone)))})),r.createElement("div",{className:"UzAS_Lx9yCQ1FZaJnYlx"},r.createElement(p.Z,{id:"includeSubfolders",name:"includeSubfolders",checked:a,onChange:function(e){var t=e.target;return I.Z.track(R.FOLDER_INSIGHTS_INCLUDE_SUBFOLDERS),i(t.checked)}}),r.createElement("label",{htmlFor:"includeSubfolders"},j("includeSubfoldersInformation")))),r.createElement(v.jm,{t:j,className:"PHvHKbzWff5Okja0swtT"},r.createElement(v.Sd,null,r.createElement(v.VQ,{state:v.Am.LOADED,data:U.dataAging,onProtectLinkClick:d||N?function(e){I.Z.track(R.FOLDER_INSIGHTS_MANAGE_DATA_SPRAWL_LINK);var t="CREATION"===e?null==d?void 0:d.DATA_AGE_BY_CREATION_DATE:null==d?void 0:d.DATA_AGE_BY_LAST_ACCESSED_DATE;return f.Z.openInWindow({customRedirectUrl:t||N})}:null})),r.createElement(v.Sd,null,r.createElement(v.E1,{state:v.Am.LOADED,data:B,onProtectLinkClick:d||N?function(e){I.Z.track(R.FOLDER_INSIGHTS_MANAGE_DATA_SPRAWL_LINK);var t="COUNT"===e?null==d?void 0:d.FILES_TYPE_BY_COUNT:null==d?void 0:d.FILES_TYPE_BY_SIZE;return f.Z.openInWindow({customRedirectUrl:t||N})}:null})),r.createElement(v.Sd,{lgMaxItems:2,mdMaxItems:2,smMaxItems:2,spacing:3},r.createElement(v.r6,{state:v.Am.LOADED,title:r.createElement(r.Fragment,null,j("totalFiles"),r.createElement("div",{className:M},r.createElement(E.Z,{"data-tid":"total-files-widget-icon",icon:g.Ci,size:"20px",color:"var(--sgColorsCyan300)"})))},T(U.fileCount)),r.createElement(v.r6,{state:v.Am.LOADED,title:r.createElement(r.Fragment,null,j("totalSize"),r.createElement("div",{className:M},r.createElement(E.Z,{"data-tid":"total-size-widget-icon",icon:b.b6,size:"20px",color:"var(--sgColorsCyan300)"})))},A(U.entrySize))),r.createElement(v.Sd,{lgMaxItems:2,mdMaxItems:2,smMaxItems:2,spacing:3},G&&r.createElement(v.r6,{state:v.Am.LOADED,title:r.createElement("span",{className:k},j("duplicateFiles"),r.createElement(y.Z,{interactive:!0,tooltip:r.createElement(Z.Z,{as:"a",href:S.Z.helpdesk.ARTICLES.DUPLICATE_FILES,target:"_blank"},j("learnMore"),r.createElement(Z.Z.Icon,{icon:O.g}))},r.createElement(E.Z,{icon:h.yo,"data-tid":"duplicate-files-widget-icon",size:E.Z.sizes.M}))),subtitle:r.createElement(Z.Z,{size:Z.Z.sizes.SMALL,onClick:function(){return I.Z.track(R.FOLDER_INSIGHTS_MANAGE_DUPLICATE_CONTENT_LINK),f.Z.openInWindow({customRedirectUrl:(null==d?void 0:d.DUPLICATE_FILES)||N})}},j("manageDuplicateContent"),r.createElement(Z.Z.Icon,{icon:O.g}))},"".concat(T(G.duplicateFilesCount)," | ").concat(A(G.duplicateFilesSize))),V&&r.createElement(v.r6,{state:v.Am.LOADED,title:r.createElement("span",{className:k},j("activeRetentionFiles"),r.createElement(y.Z,{interactive:!0,tooltip:r.createElement(Z.Z,{as:"a",href:S.Z.helpdesk.ARTICLES.CONTENT_LIFECYCLE_POLICIES,target:"_blank"},j("learnMore"),r.createElement(Z.Z.Icon,{icon:O.g}))},r.createElement(E.Z,{icon:h.yo,"data-tid":"retention-widget-icon",size:E.Z.sizes.M}))),subtitle:r.createElement(Z.Z,{size:Z.Z.sizes.SMALL,onClick:function(){return I.Z.track(R.FOLDER_INSIGHTS_MANAGE_RETENTION_POLICY_LINK),f.Z.openInWindow({customRedirectUrl:(null==d?void 0:d.MANAGE_RETENTION)||w})}},j("manageRetentionPolicy"),r.createElement(Z.Z.Icon,{icon:O.g}))},T(V.filesUnderRetention)))))},x=(0,a.nD)("protectAnalytics");function U(e){var t,n,a=e.name,m=e.path,f=(t=e.id,n={retry:!1,refetchOnWindowFocus:!1,cacheTime:0},(0,c.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queryKey:["protectAnalytics",t],queryFn:function(){return(0,u.Wz)(t)}},n))),p=f.data,v=f.error,E=f.isLoading,g=f.isError,b=f.isSuccess;return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,r.createElement(l.Z,null,x("title",{name:a}))),r.createElement(o.ZP.Subtitle,null,r.createElement(l.Z,{className:"c_CCbJ8LtKZtUGYs5Oug"},r.createElement("span",null,x("subtitle")," ",x("folderPath",{path:m}))))),r.createElement(o.ZP.Body,null,E&&r.createElement("div",{className:"Rnwl0HbYX8Gb9PbELF04"},r.createElement(i.Z,null)),g&&r.createElement(F,{errorCode:v.data.code}),b&&r.createElement(_,{data:p})))}function G(e){var t=e.name,n=e.path,a=e.id;return(0,o.h7)(r.createElement(U,{name:t,path:n,id:a}),{onRequestClose:o.Mr,shouldCloseOnOverlayClick:!1,size:o.ZP.sizes.XL,withCloseButton:!0})}},176314:function(e,t,n){n.d(t,{ay:function(){return i},fo:function(){return l},rO:function(){return s}});var r=n(266606),o="Mark as Project",a={CONTEXT_CLICKED:"".concat(o,": context menu clicked"),CONVERTED_SUCCESS:"".concat(o,": converted success"),CONVERTED_FAILED:"".concat(o,": converted failed")};function i(e){var t=e.items;r.Z.track(a.CONTEXT_CLICKED,{Items:t})}function l(e){var t=e.items;r.Z.track(a.CONVERTED_SUCCESS,{Items:t})}function s(e){var t=e.items;r.Z.track(a.CONVERTED_FAILED,{Items:t})}},675619:function(e,t,n){n.d(t,{s:function(){return r}});var r={projectLogo:"",projectId:"",customerName:"",description:"",location:{streetAddress1:"",streetAddress2:"",city:"",state:"",country:"",postalCode:""},status:n(982925).EQ.inProgress,projectFolderId:"",name:""}},48633:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(982925),o=n(956729),a=n(762074),i=n(776327),l=n(388767),s=n(397404),c=n(176314);function u(e){var t=(0,l.useQueryClient)(),n=(0,o.Vb)();return(0,r.Xq)({onSuccess:function(o){var l=e.filter((function(e,t){return"rejected"===o[t].status}));l.length?((0,s.c0)(s.em.error,(0,a.t)("projects.recommendation.notifications.recommendationAccept",{context:"error",count:l.length,total:e.length,path:l[0].path}),{persist:!0}),(0,c.rO)({items:l.map((function(e){return{id:e.id,path:e.path}}))})):(0,s.c0)(s.em.success,(0,a.t)("projects.recommendation.notifications.recommendationAccept",{context:"success",count:e.length}),{persist:!0}),e.length>l.length&&(t.invalidateQueries(r.VF.list()),n(),i.ZP.trigger(i.ZP.Events.Storage.SELECTION.DESELECT_ALL),(0,c.fo)({items:e.filter((function(e,t){return"fulfilled"===o[t].status})).map((function(e){return{id:e.id,path:e.path}}))}))}})}},495054:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(204942),o=n(115861),a=n(364687),i=n.n(a),l=n(667294),s=n(569748),c=n(266606),u=n(610861),d=n(735691),m=n(403455),f=n(832201),p=n(289098),v=n(531926),E=n(762074),g=n(397404),b=n(145218),O=n(23661),h=n(240701);function y(e){var t=e.folderId,n=e.reason,r=e.comments;return(0,O.ZP)(h.Z.INACTIVE_CONTAINER.REQUEST_TO_RESTORE,{method:"POST",body:{folderId:t,reason:n,comments:r}})}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.useMutation)(I({mutationFn:function(t){var n=t.reason,r=t.comments;return y({folderId:e,reason:n,comments:r})}},t))}var P=n(42594),N="OTHER";function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=(0,E.nD)("storage.requestAndRestore"),A=d.Ry().shape({folderPath:d.Z_().required(),reason:d.Z_().required(),comments:d.Z_().when("reason",{is:N,then:d.Z_().required()}).max(500)});function R(e){var t=e.folderId,n=e.folderPath,r=(0,P.pL)(),a=[{label:T("reasonOptions.projectReopened"),value:"PROJECT_REOPENED"},{label:T("reasonOptions.reference"),value:"REFERENCE"},{label:T("reasonOptions.other"),value:N}],d=S(t).mutateAsync,b=(0,l.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(t,n){var r,o,a,l,s,m,p,v,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setStatus,e.prev=1,e.next=4,d(t);case 4:(0,u.Mr)(),(0,g.c0)(g.em.success,T("notification.success")),c.Z.track("Request To Restore request submitted",t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),null!=(s=e.t0)&&null!==(o=s.data)&&void 0!==o&&null!==(a=o.inputErrors)&&void 0!==a&&a.folderId?(m=s.data.inputErrors.folderId,r((0,f.Px)({folderPath:m}))):null!=s&&null!==(l=s.data)&&void 0!==l&&l.inputErrors?r((0,f.Px)(s.data.inputErrors)):(p=s.data,v=(void 0===p?{}:p).errorMessage,E=void 0===v?T("notification.error"):v,(0,g.c0)(g.em.error,E),c.Z.track("Request To Restore request submission failed",D(D({},t),{},{errorMessage:E})));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[d]);return l.createElement(l.Fragment,null,l.createElement(u.ZP.Header,null,l.createElement(u.ZP.Title,null,T("title"))),l.createElement(m.J9,{initialValues:{folderPath:n,reason:"",comments:""},onSubmit:b,validationSchema:A},(function(e){var t=e.values;return l.createElement(m.l0,null,l.createElement(u.ZP.Body,null,l.createElement(s.$0,{subtitle:T("description"),dense:!0},l.createElement(p.Text,{name:"folderPath",label:T(r?"labels.documentRoomSelected":"labels.folderSelected"),readOnly:!0}),l.createElement(p.Select,{name:"reason",label:T("labels.reason"),placeholder:T("placeholder.reason"),required:!0,options:a}),l.createElement(p.Textarea,{name:"comments",label:T("labels.comments"),placeholder:T("placeholder.comments"),rows:8,required:t.reason===N}))),l.createElement(u.ZP.Footer,null,l.createElement(v.Z,{idleText:(0,E.t)("button.label.submit")})))})))}function w(e){var t=e.folderId,n=e.folderPath;(0,u.h7)(l.createElement(R,{folderId:t,folderPath:n}),{onRequestClose:u.Mr,size:u.ZP.sizes.M,withCloseButton:!0})}},771591:function(e,t,n){n.d(t,{av:function(){return R}});var r=n(115861),o=n(364687),a=n.n(o),i=n(667294),l=n(397404),s=n(610861),c=n(154177),u=n(762074),d=n(156552),m=n(821442),f=n(266606),p=n(264928),v=n(529439),E=n(579621),g=n(955010),b=n(762144),O=n(13764),h=n(698607),y=n(57324);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=(0,u.nD)("storage.saveTranscript.modal"),S=(0,u.nD)("button.label"),P=function(e){return!(0,y.qe)(e)&&(0,O.zm)(e.permission)};function N(e){var t,n=e.title,r=e.onSubmit,o=e.isLoading,a=void 0!==o&&o,l=e.parentFolder,c=(0,i.useState)((function(){return l?[l]:[]})),u=(0,v.Z)(c,2),d=u[0],m=u[1],f=(0,i.useMemo)((function(){return d.some((function(e){return!P(e)}))}),[d]),p=(0,i.useRef)(!0),O=(0,i.useRef)(null),y=(0,i.useRef)(!0),N=(0,i.useCallback)((function(e){m([e])}),[]),C=(0,i.useCallback)((function(){var e,t;if(O.current){var n,r=!1,o=O.current.querySelectorAll(".folder-item"),a=null===(e=d[0])||void 0===e||null===(t=e.path)||void 0===t?void 0:t.split("/").pop(),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(o);try{for(i.s();!(n=i.n()).done;){var l=n.value;if(l.innerText===a){l.scrollIntoView({behavior:"auto",block:"center"}),p.current=!1,r=!0;break}}}catch(e){i.e(e)}finally{i.f()}!r&&o.length>0&&o[o.length-1].scrollIntoView({behavior:"auto",block:"center"})}}),[d]);return(0,i.useEffect)((function(){if(O.current){var e=new MutationObserver((function(){var e;if(p.current&&null!==(e=d[0])&&void 0!==e&&e.path){var t=y.current?2500:100;setTimeout((function(){C(),y.current=!1}),t)}}));return e.observe(O.current,{subtree:!0,childList:!0}),function(){return e.disconnect()}}}),[d,C]),i.createElement(i.Fragment,null,i.createElement(s.ZP.Header,null,i.createElement(s.ZP.Title,null,n)),i.createElement(s.ZP.Body,null,i.createElement("div",null,i.createElement("p",null,I("subtitle"))),i.createElement("div",{className:"pJLN4TA3vk10GIKIis0l eugzcnL4uVMlgbRkfTqa",ref:O},i.createElement(b.Z,{className:"NqcyxenS8mDyIgYR_7fQ",mode:b.Z.MODES.SINGLESELECT,selectedFolders:d.map((function(e){return null==e?void 0:e.path})),onFolderSelect:N,includePrivateFolders:!0,getPathConfig:function(e){return{disabled:!P(e),tooltip:!P(e)&&I("tooltips.disabledSave")}},path:null===(t=d[0])||void 0===t?void 0:t.path}))),i.createElement(s.ZP.Footer,null,i.createElement(E.Z,{type:E.Z.SECONDARY,onClick:s.Mr},S("cancel")),i.createElement(h.Z,{tooltip:I("tooltips.disabledSave"),disabled:!f},i.createElement(E.Z,{type:E.Z.PRIMARY,disabled:f,onClick:function(){r(d[0])}},a&&i.createElement(E.Z.Icon,{icon:g.V,spin:!0}),S("save")))))}var C=(0,u.nD)("storage.saveTranscript.modal"),D=(0,u.nD)("button.label");function T(e){var t=e.parentPath,n=e.folderPath;return i.createElement("div",{className:"xXmN_4DffWAN3Nv56C7R"},i.createElement("span",null,C("messages.success",{folderPath:i.createElement("strong",null,n)})),(n!==t||!t)&&i.createElement(m.Z,{onClick:function(e){e.stopPropagation(),(0,p.uj)(n)}},D("goToFolder")))}function A(e){var t=e.entryId,n=e.fileName,o=e.parentFolder,u=function(){var e=(0,r.Z)(a().mark((function e(r){var u,m,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return(0,l.c0)(l.em.error,C("messages.noFolderSelected")),e.abrupt("return");case 3:return u=r.path,e.prev=4,e.next=7,(0,d._1)({entryId:t,fileName:n,folderPath:u});case 7:f.Z.track("Transcript saved"),(0,s.Mr)(),(0,l.c0)(l.em.success,i.createElement(T,{folderPath:u,parentPath:null==o?void 0:o.path})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),m=(0,c.FU)(e.t0).map((function(e){return C("error.".concat(e.code),{defaultValue:e.msg})})),p=m.join(". ")||e.t0.message,(0,l.c0)(l.em.error,p);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return i.createElement(N,{onSubmit:u,title:C("title",{fileName:n}),parentFolder:o})}var R=function(e){var t=e.entryId,n=e.fileName,r=e.parentFolder;(0,s.h7)(i.createElement(A,{entryId:t,fileName:n,parentFolder:r}))}},197147:function(e,t,n){n.d(t,{Z:function(){return ce}});var r=n(204942),o=n(529439),a=n(667294),i=n(610861),l=(0,a.createContext)(null);function s(){return(0,a.useContext)(l)}var c=n(762074),u=n(711413),d=n(487462),m=n(115861),f=n(364687),p=n.n(f),v=n(668477),E=n(727484),g=n.n(E),b=n(6587),O=n(403455),h=n(735691),y=n(579621),Z=n(943886),I=n(727724),S=n(776327),P=n(531926),N=n(799532),C=n(451545),D=n(266606),T=n(93433),A=n(145218),R=n(452776);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=n(32570),M=n(553883),k=n(405510),j=n(379499),_=(n(330030),(0,c.nD)("restore.newRestoreJob"));function x(e){var t,n,r=e.conflicts,o=e.className;return a.createElement(k.Z,{className:o,color:k.Z.LIGHT_WARN,icon:j.nL},(t=r.files.length,n=r.folders.length,0===t?_("conflictsWarning",{context:"foldersOnly",count:n}):0===n?_("conflictsWarning",{context:"filesOnly",count:t}):1===t&&1===n?_("conflictsWarningSingular"):_("conflictsWarning",{files:t,folders:n})))}var U=n(330759),G=n(652421),V="QwLoMwa6adQM0fMHqtuw gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa",B="KjIlYs_9UxkYJ1zhwz7Z",H="HOF4iarZQfinYVW87L9y Er73cMkvdW7IEAv8y1uj m8RKLInoi4LLh_CKMjd0 cMD1Ln5gNqHc7P7v_G_6",z=(0,c.nD)("restore.newRestoreJob");function W(e){return e.text.split("\n").map((function(e){return a.createElement("li",{key:e,dangerouslySetInnerHTML:{__html:e}})}))}function q(e){var t=e.items,n=e.mountReason,r=e.onChange,o=e.value,i=(0,a.useMemo)((function(){return t.some((function(e){return"folder"===e.attributes.type}))}),[t]);return n===u.mn.ACCIDENTAL_DELETION?a.createElement(Q,null):i?a.createElement(K,{onChange:r,value:o}):a.createElement(Y,null)}function K(e){var t=e.onChange,n=e.value,r="LINKS_PERMISSIONS_ENABLED";return a.createElement("div",null,a.createElement("div",{className:V},z("selectionTitle",{context:r})),a.createElement(U.Z,{className:B,id:"conflictResolutionOption:exclude",name:"conflictResolutionOption",checked:n===u.wj.IN_PLACE,onChange:function(){return t(u.wj.IN_PLACE)}},a.createElement("div",null," ",z("restoreOptions.optionInPlace",{context:r}),a.createElement(G.Z,null,z("restoreOptions.recommended"))),a.createElement("ul",{className:H},a.createElement(W,{text:z("restoreOptions.optionInPlaceDescription",{context:r})}))),a.createElement(U.Z,{className:B,id:"conflictResolutionOption:ignore",name:"conflictResolutionOption",checked:n===u.wj.RENAME_FOLDER,onChange:function(){return t(u.wj.RENAME_FOLDER)}},a.createElement("div",null," ",z("restoreOptions.optionNewFolder",{context:r})," "),a.createElement("ul",{className:H},a.createElement(W,{text:z("restoreOptions.optionNewFolderDescription",{context:r})}))))}function Y(){return a.createElement("div",null,a.createElement("div",{className:B},a.createElement("div",{className:V},z("selectionTitle",{context:"FILES_ONLY_LINKS_PERMISSIONS_ENABLED"})),a.createElement("ul",{className:H},a.createElement(W,{text:z("restoreOptions.optionInPlaceDescription",{context:"LINKS_PERMISSIONS_ENABLED"})}))))}function Q(){return a.createElement("div",null,a.createElement("div",{className:V},z("selectionTitle",{context:"FILES_ONLY_LINKS_PERMISSIONS_ENABLED"})),a.createElement("div",{className:B},a.createElement("ul",{className:H},a.createElement(W,{text:z("restoreOptions.optionAccidentalDeletionDescription",{context:"LINKS_PERMISSIONS_ENABLED"})}))))}var X=(0,c.nD)("restore.newRestoreJob");function J(){return a.createElement(k.Z,{icon:j.nL},X("noItemsWarning"))}var $=(0,c.nD)("restore.newRestoreJob"),ee=function(e){var t=e.onSuccess,n=e.onError,r=(0,Z.Jo)().mountId,o=s().items,l=void 0===o?[]:o,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,Z.Jo)().mountId,r=(0,a.useMemo)((function(){return[u.Xq,n].concat((0,T.Z)(e.slice(0,30))).join(",").slice(0,1e4)}),[e,n]);return(0,A.useQuery)(L({queryKey:r,queryFn:function(){return(0,I.p3)(n,{items:e})},select:function(t){var n=t.files,r=void 0===n?[]:n,o=t.folders,a=void 0===o?[]:o,i=0!==r.length||0!==a.length,l=(0,R.Di)(e,{files:r,folders:a,areAnyConflicts:i});return{files:r,folders:a,selectionConflictsRemoved:l,areAnyConflicts:i,areAnyNonConflictingItems:0!==l.FILES.length||0!==l.FOLDERS.length}}},t))}(l,{onError:function(e){var t;"FOLDERS_SIZE_THRESHOLD_REACHED_ERROR"===(null===(t=e.data)||void 0===t?void 0:t.customErrorCode)?n(e.message,$("modalTitle"),!0):n(e.message)}}),d=c.data,f=void 0===d?{}:d,v=f.files,E=f.folders,b=f.areAnyConflicts,y=f.areAnyNonConflictingItems,P=c.isSuccess,N=c.isLoading,C=(0,M.Z)(r,{onError:function(e){n(e.message)}}).data,w=(0,a.useMemo)((function(){return{initialValues:{jobName:[(null==C?void 0:C.name)||"",$("defaultJobName"),g()().format("MMDDYYYY-HHmmss")].filter(Boolean).join("-"),restoreType:u.wj.IN_PLACE},validationSchema:h.Ry({jobName:h.Z_().max(120).required()}),onSubmit:function(e){return(0,m.Z)(p().mark((function o(){var a,i;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=e.jobName,i=e.restoreType,o.prev=1,o.next=4,(0,I.XF)(r,{jobName:a,restoreType:i,items:l,conflicts:{areAnyConflicts:b,files:v,folders:E}});case 4:D.Z.track(u.FP.NEW_RESTORATION,{jobName:a,restoreType:i,totalItemsSelected:l.length}),t(),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),n(o.t0.message);case 11:case"end":return o.stop()}}),o,null,[[1,8]])})))()},onError:function(){S.ZP.trigger(S.ZP.Events.Storage.NOTIFICATION.SHOW,"error",$("formErrors.serverError"))}}}),[n,C,t,l,r,b,v,E]);return a.createElement("div",null,a.createElement(a.Fragment,null,a.createElement(i.ZP.Header,null,a.createElement(i.ZP.Title,null,$("modalTitle"))),N&&a.createElement(i.ZP.Body,null,a.createElement("div",{className:"PEQgatvwWr3ESqq_pv37"},a.createElement(F.Z,null))),P&&a.createElement(a.Fragment,null,y&&b&&a.createElement(x,{className:"YDBfX2JeU4YD0j21QYnA",conflicts:{files:v,folders:E}}),!y&&a.createElement(J,null),y&&a.createElement(O.J9,w,a.createElement(te,{items:l,mountReason:null==C?void 0:C.reasonCode})))))};function te(e){var t=e.items,n=e.mountReason,r=(0,O.u6)().isSubmitting;return a.createElement(O.l0,null,a.createElement(i.ZP.Body,null,a.createElement(v.ZP,{name:"jobName",inline:!0},a.createElement(v.ZP.Label,{className:"wIU2zSCJKmredh6eBbfh",required:!0},$("jobNameLabel")),a.createElement(v.ZP.Control,{immediateError:!0},(function(e){var t=e.hasError,n=e.field;return a.createElement("div",null,a.createElement(b.Z,(0,d.default)({id:n.name,className:"VTtt5SsRus1KdHC4BfGv",placeholder:$("jobNamePlaceholder"),hasError:t},n)))}))),a.createElement(v.ZP,{name:"restoreType"},a.createElement(v.ZP.Control,null,(function(e){var r=e.field,o=e.fieldHelpers.setValue;return a.createElement(q,(0,d.default)({items:t,mountReason:n},r,{onChange:function(e){return o(e)}}))})))),a.createElement(i.ZP.Footer,null,a.createElement("div",{className:"RseAP1X2xCT0U8zyNcKD"},a.createElement("a",{href:u.VO,rel:"noreferrer",target:"_blank"},a.createElement(N.Z,{icon:C.b}),$("learnMore")),a.createElement("div",{className:"Imyb_nLGH8S8cTRYC0cr"},a.createElement(y.Z,{type:y.Z.SECONDARY,onClick:i.Mr,disabled:r},$("cancelButton")),a.createElement(P.Z,{idleText:$("submitButton"),errorText:$("errorsFoundButton")})))))}var ne=n(81809),re=(0,c.nD)("restore.newRestoreJob.successModal"),oe=function(e){var t=e.onSuccess;return a.createElement(a.Fragment,null,a.createElement(i.ZP.Header,null,a.createElement(i.ZP.Title,null,re("title"))),a.createElement(i.ZP.Body,null,re("description")),a.createElement(i.ZP.Footer,null,a.createElement(y.Z,{type:y.Z.SECONDARY,onClick:t},re("closeCta")),a.createElement(y.Z,{as:"a",target:"_blank",rel:"noreferrer",href:"".concat(ne.Z,"#settings/restore/restorations")},re("goToRestorations"))))},ae=(0,c.nD)("restore.newRestoreJob.errorModal"),ie=function(e){var t=e.onRetry,n=e.onCancel,r=s(),o=r.reason,l=r.errorTitle,c=r.isRetryHidden;return a.createElement(a.Fragment,null,a.createElement(i.ZP.Header,null,a.createElement(i.ZP.Title,null,l||ae("title"))),a.createElement(i.ZP.Body,null,a.createElement("span",{dangerouslySetInnerHTML:{__html:ae("description",{reason:o})}})),a.createElement(i.ZP.Footer,null,a.createElement(y.Z,{type:y.Z.SECONDARY,onClick:n},ae("closeCta")),!c&&a.createElement(y.Z,{type:y.Z.PRIMARY,onClick:t},ae("retryCta"))))},le=(0,c.nD)("restore.newRestoreJob.errorModal"),se={RESTORE:Symbol("initial restore form modal"),SUCCESS:Symbol("success modal"),ERROR:Symbol("error modal")},ce=function(e){var t=e.items,n=(0,a.useState)(""),s=(0,o.Z)(n,2),c=s[0],d=s[1],m=(0,a.useState)(le("title")),f=(0,o.Z)(m,2),p=f[0],v=f[1],E=(0,a.useState)(!1),g=(0,o.Z)(E,2),b=g[0],O=g[1],h=(0,a.useState)({}),y=(0,o.Z)(h,2),Z=y[0],I=y[1],S=(0,a.useState)(se.RESTORE),P=(0,o.Z)(S,2),N=P[0],C=P[1],D=(0,a.useState)(u.wj.IN_PLACE),T=(0,o.Z)(D,2),A=T[0],R=T[1],w=(0,a.useMemo)((function(){var e;return e={},(0,r.Z)(e,se.RESTORE,{Component:ee,props:{onSuccess:function(){return C(se.SUCCESS)},onError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le("title"),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(t),d(e),O(n),C(se.ERROR)}}}),(0,r.Z)(e,se.SUCCESS,{Component:oe,props:{items:t,onSuccess:function(){(0,i.Mr)()}}}),(0,r.Z)(e,se.ERROR,{Component:ie,props:{onCancel:function(){return(0,i.Mr)()},onRetry:function(){v(""),d(""),O(!1),C(se.RESTORE)}}}),e}),[d,C,t]),L=w[N],F=L.Component,M=L.props,k=(0,a.useMemo)((function(){return{items:t,reason:c,conflictingItems:Z,restoreType:A,setConflictingItems:I,setRestoreType:R,errorTitle:p,isRetryHidden:b}}),[t,c,Z,A,b,p]);return a.createElement(l.Provider,{value:k},a.createElement(F,M))}},330030:function(e,t,n){var r=n(45697),o=n.n(r);o().arrayOf(o().shape({id:o().string,attributes:o().shape({type:o().string})})).isRequired},784936:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(529439),o=n(727724),a=n(667294),i=n(145218),l=n(711413),s=function(e){return e.some((function(e){return[l.ps.IN_PROGRESS,l.ps.PENDING].includes(e.status)}))};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,c=(0,a.useState)(!0),u=(0,r.Z)(c,2),d=u[0],m=u[1],f=(0,i.useQuery)({queryKey:[l.U4],queryFn:o.tH,refetchInterval:!!d&&5e3,enabled:n}),p=f.data,v=void 0===p?{}:p,E=v.results,g=void 0===E?[]:E,b=f.isSuccess,O=f.isLoading;return(0,a.useEffect)((function(){m(s(g))}),[g]),{restorations:g,isSuccess:b,isLoading:O}}},373687:function(e,t,n){n.d(t,{d:function(){return i},j:function(){return l}});var r=n(667294),o=n(466986),a=(0,r.createContext)({resourceId:"",folderPath:"",folderId:"",selectedUser:void 0,availableGroups:[],portalName:o.v8.PROJECT});function i(e){var t=e.children,n=e.resourceId,o=e.folderPath,i=e.folderId,l=e.selectedUser,s=e.availableGroups,c=e.portalName,u=(0,r.useMemo)((function(){return{resourceId:n,folderPath:o,folderId:i,selectedUser:l,availableGroups:s,portalName:c}}),[n,o,i,s,l,c]);return r.createElement(a.Provider,{value:u},t)}function l(){var e=(0,r.useContext)(a);return{resourceId:e.resourceId,folderPath:e.folderPath,folderId:e.folderId,availableGroups:e.availableGroups,selectedUser:e.selectedUser,portalName:e.portalName}}},205753:function(e,t,n){n.d(t,{Aq:function(){return l},FP:function(){return o},Hr:function(){return a},L$:function(){return c},Zn:function(){return i},mr:function(){return s}});var r=n(190544),o={OPEN:"Team Management Modal: modal opened",RECENT_TAB_OPENED:"Team management: opened tab",SELECTED_FOLDER:"Team management - by folders: selected folder",DETAILS_MODAL_OPENED:"Team management: user details opened",GROUP_MODAL_OPENED:"Team management: group members opened",NO_PERMISSION_VIEW:"Team management: no permission view opened",FILTERS_CHANGED:"Team management: filters changed",USER_OR_GROUP_SELECTED:"Team management - by users: user or group selected",PERMISSION_REMOVED:"Team management - by users: permission removed",BY_USERS_PERMISSION_CHANGED:"Team management - by users: permission changed",BY_USERS_PERMISSION_ADDED:"Team management - by users: permission added",BY_FOLDERS_PERMISSION_CHANGED:"Team management - by folders: permission changed",BY_FOLDERS_USER_INVITED:"Team management - by folders: user invited",BY_FOLDERS_GROUP_CREATED:"Team management - by folders: group created",BY_FOLDERS_GROUP_ADDED:"Team management - by folders: group added",BY_FOLDERS_USER_ADDED:"Team management - by folders: user added"},a={users:"users",folders:"folders"},i={USER:"user",GROUP:"group"},l={NAME:"name",TYPE:"type"},s={NAME:"name",TYPE:"type",USER_STATUS:"userStatus",PERMISSION:"permission"},c=1.5*r.NO},576415:function(e,t,n){n.d(t,{me:function(){return E}});var r=n(204942),o=n(529439),a=n(77259),i=n(982925),l=n(466986),s=n(223901),c=n(42594),u=n(301245),d=n(155561),m=n(19057),f=n(433357);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.folderId,n=e.folderPath,r=e.permission,p=void 0===r?a._I.NONE:r,E=(0,m.Z)(["teamViewEnabled","teamManagementImprovementsEnabled","projectFoldersEnabled","documentRoomEnabled","projectHomePageEnabled"]),g=(0,o.Z)(E,5),b=g[0],O=g[1],h=g[2],y=g[3],Z=g[4],I=(0,i.Z0)({enabled:h,select:function(e){return new Map(e.map((function(e){return[e.rootFolderId,v({folderPath:(0,c.yY)(e.path)},e)]})))}}),S=I.data,P=void 0===S?new Map:S,N=(0,s.Wm)({options:{enabled:y,select:function(e){return new Map(e.map((function(e){return[e.rootFolderId,v({folderPath:(0,c.yY)(e.path)},e)]})))}}}).data,C=void 0===N?new Map:N,D=(0,f.Y)({folderId:t,folderPath:n,projectsMap:P}),T=D.isFolderInProject,A=D.parentProject,R=(0,u.Hi)({folderId:t,folderPath:n,documentRoomsMap:C}),w=R.isFolderInDocumentRoom,L=R.parentDocumentRoom,F=null!=A?A:L,M=A?l.v8.PROJECT:l.v8.DOCUMENT_ROOM,k=(0,d.F)({permission:p,resourceType:M});if(!b)return{showTeamManagement:!1};var j=O&&w,_=Z&&O?T:!!P.get(t);return{showTeamManagement:k&&(_||j),resource:F,portalKey:M}}n(319743),n(19072),n(523348),n(190217),n(827095),n(669039)},19072:function(e,t,n){n.d(t,{Y:function(){return a}});var r=n(121988),o=n(205753),a=function(e){return(0,r.Z)(e&&e.length>=2&&e.length<=100?e:void 0,null!=e&&e.length?o.L$:0)}},319743:function(e,t,n){n.d(t,{jx:function(){return g}});var r=n(115861),o=n(529439),a=n(93433),i=n(204942),l=n(364687),s=n.n(l),c=n(667294),u=n(649453),d=n(373687);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.folder,n=e.folders,r=n.findIndex((function(e){return e.folderId===t.folderId})),o=n.slice(0,r+1),i=n.slice(r+2,n.length).findIndex((function(e){return e.level<=t.level})),l=i<0?[]:n.slice(i+2+r,n.length);return o[r]=f(f({},o[r]),{},{isExpanded:!1}),[].concat((0,a.Z)(o),(0,a.Z)(l))},v=function(e){var t=e.folder,n=e.data,r=e.folders,o=r.findIndex((function(e){return e.folderId===t.folderId})),i=r.slice(0,o),l=r.slice(o+1,r.length),s=n.children.map((function(e){return f(f({},e),{},{id:e.folderId,level:t.level+1,isExpanded:!1})}));return[].concat((0,a.Z)(i),[f(f({},n),{},{level:t.level,id:t.folderId,isExpanded:!0})],(0,a.Z)(s),(0,a.Z)(l))},E=function(e){var t,n=e.folder,r=e.data,o=e.folders,i=(0,a.Z)(o),l=o.findIndex((function(e){return e.folderId===n.folderId})),s=f(f(f({},n),r),{},{groupPriv:r.groupPriv,id:r.folderId});return i[l]=s,n.isExpanded&&o.length>1&&(i=p({folder:n,folders:o}),null!==(t=r.children)&&void 0!==t&&t.length&&(i=v({folder:n,data:s,folders:i}))),i},g=function(e){var t=e.initialPath,n=e.isGroup,i=e.resourceId,l=e.portalEntryId,m=(0,c.useState)([]),g=(0,o.Z)(m,2),b=g[0],O=g[1],h=(0,d.j)().portalName;(0,c.useEffect)((function(){O([])}),[i]);var y=(0,u.EY)({isGroup:n,resourceId:i,portalEntryId:l,folderPath:t,portalName:h,options:{onSuccess:function(e){return I(e)}}}).isFetching,Z=(0,u.xR)({isGroup:n,portalEntryId:l,resourceId:i,portalName:h}).mutateAsync,I=(0,c.useCallback)((function(e){var t,n;e&&O([f(f({},e),{},{level:0,isExpanded:!0,id:e.folderId})].concat((0,a.Z)(null!==(t=null===(n=e.children)||void 0===n?void 0:n.map((function(e){return f(f({},e),{},{level:1,isExpanded:!1,children:[],id:e.folderId})})))&&void 0!==t?t:[])))}),[]),S=(0,c.useCallback)((function(e){var t=e.folder,n=e.data;return O(v({folder:t,data:n,folders:b}))}),[b]),P=(0,c.useCallback)((function(e){var t=e.folder;return O(p({folder:t,folders:b}))}),[b]),N=(0,c.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isExpanded){e.next=7;break}return e.next=3,Z(t.folderPath);case 3:(null==(r=e.sent)||null===(n=r.children)||void 0===n?void 0:n.length)>0&&S({folder:t,data:r}),e.next=8;break;case 7:P({folder:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Z,S,P]),C=(0,c.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t.folderPath);case 2:n=e.sent,O((function(e){return E({folder:t,data:n,folders:e})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Z]);return{folders:b,isLoading:y,onToggle:N,onFolderChange:C}}},523348:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(528058),o=n(466986),a=n(101507);function i(e){var t=e.path,n=e.resourceId,i=e.portalName,l=(0,o.Yq)({resourceId:n,path:t,portalName:i,options:{select:function(e){return(0,a.cQ)(e.groups.filter((function(e){return e.id&&!r.Gg.includes(e.name)})))}}}).data;return void 0===l?[]:l}},190217:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(528058),o=n(649453);function a(e){var t=e.resourceId,n=e.portalName,a=(0,o.W1)({resourceId:t,portalName:n,options:{select:function(e){return e.groups.filter((function(e){return e.id&&!r.Gg.includes(e.name)}))}}}).data;return void 0===a?[]:a}},827095:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(204942),o=n(667294),a=n(466986),i=n(649453),l=n(669039),s=n(397404),c=n(474824),u=n(77259),d=n(154177),m=n(568063),f=n(84066),p=n(500140),v=n(676409),E=n(307179),g=n(373687);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){var t=e.folder,n=e.onFolderChange,O=e.isGroup,h=e.logOnChangeCallback,y=void 0===h?function(){}:h,Z=(0,g.j)(),I=Z.resourceId,S=Z.availableGroups,P=Z.selectedUser,N=Z.portalName,C=(0,v.m5)(),D=(0,l.Z)({folderId:t.id,resourceId:I,path:t.folderPath,portalName:N,onFolderChange:function(){return n(t)}}).removePermission,T=(0,i.SF)({resourceId:t.id,folderPath:t.folderPath,isGroup:O,portalEntryId:I}),A=(0,a.If)({resourceId:I,portalName:N,folderId:t.id,path:t.folderPath,logCallback:y,options:{onSuccess:function(){T(),n(t),(0,s.c0)(s.em.success,(0,c.t)("teamManagement.notifications.permissionUpdated",{name:P&&(0,m.TZ)(P)?P.name:(0,E.Gf)(P)}))}}}).mutateAsync,R=(0,u.nJ)({id:t.id,path:t.folderPath,options:{onSuccess:function(){T(),n(t),(0,s.c0)(s.em.success,(0,c.t)("teamManagement.notifications.addedToGroup",{name:P&&(0,m.TZ)(P)?P.name:(0,E.Gf)(P)}))},onError:function(e){var t=function(){if(C)return(0,c.t)("error.FAILOVER_WRITES_FORBIDDEN");var t=(0,d.k0)(e)&&(0,p.oA)(e.data)&&(0,p.mo)(e.data);return t?t.msg:(0,d.k0)(e)&&(0,p.oA)(e.data)&&(0,p.sy)(e.data)?(0,c.t)("teamManagement.notifications.groupNotFound"):(0,c.t)("teamManagement.notifications.actionNotAllowed")}();(0,s.c0)(s.em.error,t)}}}).mutateAsync,w=(0,o.useCallback)((function(e){P&&A(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,m.HV)([P],e)))}),[P,A]),L=(0,o.useCallback)((function(e){null!=P&&P.id&&R({userId:P.id,groupId:e})}),[P,R]),F=(0,o.useCallback)((function(){null!=P&&P.id&&D(P)}),[P,D]),M=(0,o.useMemo)((function(){return P?(0,f.LF)(P):[]}),[P]),k=(0,o.useMemo)((function(){return null==S?void 0:S.filter((function(e){return!!e.id&&!e.isSystemGroup}))}),[S]);return{onAddToGroup:L,onRemove:F,onChange:w,options:M,selectedUser:P,availableGroups:k}}},669039:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(667294),o=n(77259),a=n(397404),i=n(762074),l=n(466986),s=n(154177),c=n(500140),u=n(568063),d=n(101507),m=n(610861),f=n(80373),p=n(579621),v=n(266606),E=n(680252),g=n(205753),b=(0,i.nD)("teamManagement.deleteModal");function O(e){var t=e.displayName,n=e.onSubmit,o=e.isGroup,a=void 0!==o&&o;return r.createElement(f.Z,{onCancel:m.GZ,onConfirm:function(){n(),v.Z.track(g.FP.PERMISSION_REMOVED,(0,E.zs)()),(0,m.GZ)()},messages:{title:b("title"),body:r.createElement(r.Fragment,null,r.createElement("p",null,b("info",{context:a&&"group"})),r.createElement("p",null,b("revoke",{userName:r.createElement("span",{className:"n1zgGds8iI_MFIDWRJi9"},t)}))),cancel:(0,i.t)("button.label.cancel"),confirm:b("deleteConfirmationButton")},confirmButtonVariant:p.Z.variants.DESTRUCTIVE})}function h(e){var t=e.folderId,n=e.resourceId,f=e.path,p=e.portalName,v=e.onFolderChange,E=void 0===v?function(){}:v,g=(0,l.If)({resourceId:n,portalName:p,folderId:t,path:f,options:{onSuccess:function(){E(),(0,a.c0)(a.em.success,(0,i.t)("teamManagement.notifications.permissionRemoved"))},onError:function(e){var t,n=(t=(0,s.k0)(e)&&(0,c.oA)(e.data)&&(0,c.mo)(e.data))?t.msg:(0,i.t)("teamManagement.notifications.permissionRemovalError");(0,a.c0)(a.em.error,n)}}}).mutateAsync,b=(0,r.useCallback)((function(e){!function(e){var t=e.displayName,n=e.isGroup,o=void 0!==n&&n,a=e.onSubmit;(0,m.Ll)(r.createElement(O,{isGroup:o,displayName:t,onSubmit:a}),{shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,onRequestClose:function(){(0,m.GZ)()}})}({displayName:(0,d.oY)(e),isGroup:(0,d.S_)(e),onSubmit:function(){return g((0,u.HV)([e],o._I.NONE))}})}),[g]);return{removePermission:b}}},729625:function(e,t,n){n.d(t,{Z:function(){return yr}});var r=n(667294),o=n(610861),a=n(204942),i=n(266606),l=n(205753);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t,n){i.Z.track(l.FP.FILTERS_CHANGED,c(c({},e),{},{"Recent tab":t,"Portal name":n}))},d=function(e){var t=e.count,n=e.portalName;i.Z.track(l.FP.BY_FOLDERS_USER_INVITED,{"Portal name":n,count:t})},m=function(e){var t=e.membersCount,n=e.portalName;i.Z.track(l.FP.BY_FOLDERS_GROUP_CREATED,{"Portal name":n,membersCount:t})},f=function(e,t,n){i.Z.track(l.FP.BY_FOLDERS_GROUP_ADDED,{"Portal name":n,path:e,permission:t})},p=function(e,t,n){i.Z.track(l.FP.BY_FOLDERS_USER_ADDED,{"Portal name":n,path:e,permission:t})},v=n(155570),E=n(339594),g=n(987407),b=n(722610),O=n(579621),h=n(499345),y=n(762074),Z=n(460474),I=n(529439),S=n(762144),P=n(255725),N=n(986456),C=n.n(N),D=n(240701),T=n(42594),A=n(347392);function R(e){C().extend(this,e)}C().extend(R,{CONTENT_TYPE_ITEM_SIMPLE_QUERY:"application/vnd.egnyte.fsi.item.simple.query+json",CONTENT_TYPE_ITEM_QUERY:"application/vnd.egnyte.fsi.item.query+json",CONTENT_TYPE_ITEM_CREATE:"application/vnd.egnyte.fsi.item.create+json",CONTENT_TYPE_ITEM_UPDATE:"application/vnd.egnyte.fsi.item.update+json"});R.prototype={read:function(e,t,n){n.contentType=n.simple?R.CONTENT_TYPE_ITEM_SIMPLE_QUERY:R.CONTENT_TYPE_ITEM_QUERY},url:function(){var e=this.id,t=this.path,n=this.resourceId,r=this.proxyPortalName;return(0,T.pL)()&&(r="vdr-portal"),(0,A.GB)()&&(r="document-portal"),D.Z.EXTERNAL_PORTAL.PROXY.FSI({portalName:r,resourceId:n,folderId:e,path:t})}};var w=R,L=n(956688),F=n(252534),M=n(683680),k=n(982925),j=n(223901),_=n(549998),x=n(466986);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=(0,r.createContext)({resourceId:"",folderPath:"",folderId:"",activeFolder:{id:"",ourPermissions:_.Hz.VIEWER,isLoading:!0},portalName:x.v8.PROJECT,setActiveFolder:function(){}});function B(e){var t=e.children,n=e.resourceId,o=e.folderPath,a=e.folderId,i=e.portalName,l=(0,r.useState)({id:a,ourPermissions:_.Hz.OWNER,isLoading:!0}),s=(0,I.Z)(l,2),c=s[0],u=s[1],d=(0,r.useMemo)((function(){return{resourceId:n,folderPath:o,folderId:a,activeFolder:c,setActiveFolder:u,portalName:i}}),[n,o,a,c,i]);return r.createElement(V.Provider,{value:d},t)}function H(){var e=(0,r.useContext)(V);return{resourceId:e.resourceId,folderPath:e.folderPath,folderId:e.folderId,activeFolder:e.activeFolder,setActiveFolder:e.setActiveFolder,portalName:e.portalName}}function z(){var e=(0,r.useContext)(V),t=e.activeFolder,n=e.setActiveFolder,o=(0,r.useCallback)((function(e){return n((function(t){return G(G({},t),{},{isLoading:e})}))}),[n]);return{activeFolder:t,setActiveFolder:n,setLoading:o,isLoading:t.isLoading}}var W=function(e){var t=e.folderId,n=e.folderPath,o=e.resourceId,a=e.onFolderSelect,s=e.selectedPath,c=e.portalName,u=z(),d=u.setActiveFolder,m=u.setLoading,f=(0,r.useRef)(null),p=(0,r.useCallback)((function(e){var t=e.path;m(!0),a(t),function(e){var t=e.path,n=e.portalName;i.Z.track(l.FP.SELECTED_FOLDER,{"Folder path":t,"Portal name":n})}({path:t,portalName:c})}),[a,m,c]),v=(0,r.useCallback)((function(e){var t=e.id,n=e.permission;return d({id:t,ourPermissions:n,isLoading:!1})}),[d]),E=(0,P.Z)({path:n,id:t,resourceId:o,proxyPortalName:c,customAdapter:w}),g=(0,L.Or)(M.j.TEAM_VIEW_TREE),b=g.width,O=g.setWidth,h=(0,r.useCallback)((function(e){O(e)}),[O]),y=(0,k.Z0)({select:function(e){return new Set(e.map((function(e){return e.rootFolderId})))}}),Z=y.data,I=(0,j.Wm)({options:{select:function(e){return new Set(e.map((function(e){return e.rootFolderId})))}}}).data;return r.createElement(L._2,{className:"VxiU_mdHZM5EcbGEj2uw",side:L._2.sides.LEFT,width:b,minWidth:250,maxWidth:500,onWidthChange:h,endDragOnMinWidth:!0},r.createElement(F.tn,{ref:f,"data-tippy-scroll-container":"true",className:"Rl2V5s1ghNpBZ8EiBA9J"},r.createElement(S.Z,{container:f.current,path:s,TreeControllerComponent:E,customAdapter:w,onFolderSelect:p,showProjectIcons:!0,projectFolderIds:Z,documentRoomIds:I,onNewPath:v})))},q=(0,r.createContext)(void 0);function K(e){var t=e.children,n=(0,r.useState)({});return r.createElement(q.Provider,{value:n},t)}function Y(){var e=(0,r.useContext)(q);return{permissionStatuses:(0,I.Z)(e,1)[0]}}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t,n=(t=(0,r.useContext)(q),{setPermissionStatuses:(0,I.Z)(t,2)[1]}).setPermissionStatuses;return{addStatuses:(0,r.useCallback)((function(t){var r=Object.fromEntries(t.map((function(t){return[t.id+e,(n=t,r=n.id,o=n.mutation,a=n.oldPermission,i=void 0===a?void 0:a,{id:r,mutation:o,timestamp:Date.now(),oldPermission:i})];var n,r,o,a,i})));n((function(e){return X(X({},e),r)}))}),[e,n])}}var $=n(265860),ee=n(115861),te=n(364687),ne=n.n(te),re=n(403455),oe=n(812493),ae=n(324176),ie=n(397404);function le(e){var t=e.inheritsPermissions,n=e.isLoading,o=H(),a=o.resourceId,i=o.folderId,l=o.folderPath,s=o.portalName,c=(0,x.If)({resourceId:a,portalName:s,folderId:i,path:l}).mutateAsync,u=(0,r.useRef)(void 0),d=function(){var e=(0,ee.Z)(ne().mark((function e(n){var r,o;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.inheritsPermissions,o=u.current,r!==t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,c({inheritsPermissions:r,keepParentPermissions:o,users:[],groups:[]},{onSuccess:function(){(0,ie.c0)(ie.em.success,(0,y.t)("storage.folderPermissions.inheritance.notifications.success",{context:r?"added":!r&&o?"removedKeep":"removedDiscard"}))},onError:function(){(0,ie.c0)(ie.em.error,(0,y.t)("storage.folderPermissions.inheritance.notifications.error",{context:r?"add":"remove"}))}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{className:"cE0k0ggv8XgzHrlOJ4Gj"},n?r.createElement("div",{className:"uzz_xZgyBRcn20hjxTZH"},r.createElement(oe.Z,null)):r.createElement(re.J9,{initialValues:{inheritsPermissions:t},enableReinitialize:!0,onSubmit:d},r.createElement(re.l0,null,r.createElement(ae.Z,{onRemovePermissionInheritance:function(e){var t=e.keepParentPermissions;u.current=t},onAddPermissionInheritance:function(){u.current=void 0},isModificationAllowed:!0}))))}var se=n(779210),ce=n(499039),ue=n(337995),de=n(583025),me=n(51505),fe=n(704548),pe=n(13764),ve=n(698607),Ee=n(27103),ge=n(992163),be=n(153672),Oe=n(296924),he=n(224912),ye=n(93433),Ze=n(617928),Ie=n(531926),Se=n(244507),Pe=n(495032),Ne=n(99815),Ce=n(528058),De=n(676409),Te=n(568063),Ae=n(523348),Re=n(154177),we=n(500140),Le=n(965965);function Fe(e){var t=e.error,n=e.isInReadonlyMode,o=e.names;if(n)return(0,y.t)("error.FAILOVER_WRITES_FORBIDDEN");var a=(0,Re.k0)(t)&&(0,we.oA)(t.data)&&(0,we.mo)(t.data);return a?a.msg:0===o.length?(0,y.t)("storage.folderPermissions.grantPermission.generalErrorMessage"):(0,y.t)("storage.folderPermissions.grantPermission.errorMessage",{name:r.createElement("span",{className:Le.Z.highlighted},o[0]),amount:r.createElement("span",{className:Le.Z.highlighted},o.length),count:o.length})}var Me=n(344606),ke=n(534733),je=n(441680),_e=n(77259),xe=n(621465),Ue=n(838831),Ge=n(693652),Ve=n(8316),Be=n(319783),He="added",ze="changed",We=(0,y.nD)("teamManagement.inviteNewUsers");function qe(e){var t=e.addStatuses,n=e.folderPath,a=e.resourceId,i=e.userEmailAddress,l=e.onClose,s=e.isInInactiveContainer,c=void 0!==s&&s,u=e.withBackButton,m=void 0!==u&&u,f=e.portalName,p=(0,x.Bm)({resourceId:a,path:n,portalName:f}),v=(0,Ve.Z)(i),E=(0,Ae.Z)({path:n,resourceId:a,portalName:f}),g=(0,Be.dX)(n,{appendSlash:!1}),b=(0,r.useCallback)((function(){(0,o.Yu)(),null==l||l()}),[l]);function h(){return h=(0,ee.Z)(ne().mark((function e(r,o){var i,l,s,c,u,m,v,E;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.setStatus,l=o.setFieldValue,!(s=r.users.filter((function(e){return e.userType===ke.$A.STANDARD}))).length){e.next=8;break}return e.next=5,(0,je.My)({usersEmails:s.map((function(e){return e.email})),folderName:g});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return i({}),e.next=11,(0,Ge.kh)({folderPath:n,values:r,resourceId:a,portalName:f});case 11:c=e.sent,u=c.isSuccess,m=c.errors,v=c.succeededItemsIndexes,(E=c.succeededItemsIds).length&&t(E.map((function(e){return{id:e,mutation:He}}))),u?(p(),(0,_e.Ce)({folderPath:n}),d({count:v.length,portalName:f}),b(),(0,ie.c0)("success",We("usersCreatedSuccessfully"))):(i({errors:m}),v.forEach((function(e){return l("users[".concat(e,"].isSaved"),!0)})));case 18:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}return r.createElement(re.J9,{initialValues:v,validationSchema:(0,Ge.th)(),onSubmit:function(e,t){return h.apply(this,arguments)}},(function(e){var t=e.isSubmitting;return r.createElement(re.l0,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,We("modalHeader"))),r.createElement(o.ZP.Body,null,r.createElement(Ue.v,{subtitle:We("subtitle",{name:g}),groups:E,isInInactiveContainer:c,disabled:t})),r.createElement(o.ZP.Footer,null,r.createElement("div",{className:"tLNuoGaLJHEhx8_MBsRs"},r.createElement("div",{className:"RK96mfzGpAz5330CvGMO"},r.createElement(O.Z,{type:O.Z.SECONDARY,onClick:b,disabled:t},(0,y.t)("button.label.close")),r.createElement(Ie.Z,{"data-onboarding":"[createSharedFolder.invitedUser_new]",idleText:We("saveButton")})),m&&r.createElement(O.Z,{type:O.Z.SECONDARY,onClick:function(){return(0,o.GZ)()},disabled:t},r.createElement(O.Z.Icon,{icon:xe.Mn}),(0,y.t)("button.label.back")))))}))}function Ke(e){(0,o.Ll)(r.createElement(qe,e),{size:o.ZP.sizes.XL,withCloseButton:!0,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,onRequestClose:function(){var t;(0,o.GZ)(),null===(t=e.onClose)||void 0===t||t.call(e)}})}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=(0,y.nD)("teamManagement.inviteNewUsers");function Je(e){var t=e.addStatuses,n=e.resourceId,a=e.folderId,i=e.folderPath,l=e.portalName,s=Pe.n.VIEWER.value,c=(0,De.m5)(),u={usersOrGroups:[],permission:s,groupId:""},d=(0,x.Bm)({resourceId:n,path:i,portalName:l}),m=(0,Me.w)(i),v=(0,x.If)({resourceId:n,portalName:l,folderId:a,path:i}).mutateAsync,E=(0,Ze.Mk)({onSuccess:function(){d()}}).mutateAsync,g=(0,Ae.Z)({resourceId:n,path:i,portalName:l}),b=function(){var e=(0,ee.Z)(ne().mark((function e(n,r){var a,s,u,d,g,b,O,h,Z,I,S,P;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.usersOrGroups,s=n.permission,u=n.groupId,d=r.setSubmitting,g=r.resetForm,a){e.next=4;break}return e.abrupt("return");case 4:if(b=a.map((function(e){return e.value})),!u){e.next=19;break}return e.prev=6,e.next=9,E({groupId:u,data:{resources:(0,ye.Z)(b.map((function(e){return{id:Number(e.id)}})))}});case 9:t([{id:u,mutation:Ce.lZ.USER_ADDED}]),(0,ie.c0)(ie.em.success,(0,y.t)("storage.folderPermissions.addedToGroup")),g(),(0,o.GZ)(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),d(!1);case 18:return e.abrupt("return");case 19:return e.next=21,m(b);case 21:if(e.sent){e.next=23;break}return e.abrupt("return");case 23:return e.prev=23,e.next=26,v(Qe({},(0,Te.HV)(b,s)));case 26:b.length&&(O=b.filter((function(e){return null!=e.id})).map((function(e){return{id:String(e.id),mutation:Ce.lZ.ADDED}}))).length>0&&t(O),b.forEach((function(e){(0,Ne.S_)(e)?f(i,s,l):p(i,s,l)})),g(),h=b.filter(Ne.S_).length,Z=b.filter(Ne.kO).length,I=h>0&&Z>0?"mixed":h>0?Ce.BX.GROUP:Ce.BX.USER,(0,ie.c0)(ie.em.success,(0,y.t)("storage.folderPermissions.grantPermission.successMessage",{context:I,count:h+Z})),(0,o.GZ)(),e.next=42;break;case 36:e.prev=36,e.t1=e.catch(23),d(!1),S=b.map(Ne.oY),P=Fe({error:e.t1,isInReadonlyMode:c,names:S}),(0,ie.c0)(ie.em.error,P);case 42:case"end":return e.stop()}}),e,null,[[6,15],[23,36]])})));return function(t,n){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(re.J9,{onSubmit:b,initialValues:u},(function(e){var a=e.setFieldValue,s=e.values,c=e.errors;return r.createElement(re.l0,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,Xe("title"))),r.createElement(o.ZP.Body,null,r.createElement(Se.Z,{setValue:a,values:s,errors:c,openUserInvitationModal:function(){return Ke({addStatuses:t,folderPath:i,resourceId:n,withBackButton:!0,portalName:l})},groups:g,isMulti:!0})),r.createElement(o.ZP.Footer,null,r.createElement(O.Z,{type:O.Z.SECONDARY,onClick:o.GZ},(0,y.t)("button.label.close")),r.createElement(Ie.Z,{disabled:!s.usersOrGroups.length,processingText:(0,y.t)("button.label.adding"),idleText:(0,y.t)("button.label.add")})))})))}var $e=n(112730),et=n(465428),tt=n(809742),nt=n(495238);function rt(e){var t=e.error,n=(0,r.useMemo)((function(){return function(e){if(!(!e||(0,Re.k0)(e)&&(0,Re.lt)(e)))return(0,Re.k0)(e)?(0,Re.e$)(e):(0,y.t)("error.default")}(t)}),[t]);return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:"j9OgTY2PuNTypeJPsFNC","data-tid":"createNewGroupWithUsers--inline-notification"},r.createElement(tt.Z,{icon:nt.K,type:tt.Z.types.ERROR},n)))}var ot=(0,y.nD)("teamManagement.createNewGroup");function at(e){var t=e.onClose,n=e.folderId,a=e.addStatuses,i=e.resourceId,l=e.folderPath,s=e.portalName,c=(0,Ze.Xs)(),u=c.mutateAsync,d=c.error,f=c.reset,p=(0,x.Bm)({resourceId:i,path:l,portalName:s}),v=(0,r.useCallback)((function(){(0,o.Yu)(),null==t||t()}),[t]),E=function(){var e=(0,ee.Z)(ne().mark((function e(t,r){var o,i,l,c,d,E,g,b;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.name,i=t.permission,l=t.users,c=r.setStatus,d=r.setErrors,f(),c({}),e.prev=4,E={name:o,priv:(0,_e.P5)(i),users:l.map((function(e){return Number(e.value.id)}))},e.next=8,u({body:E,folderId:n});case 8:g=e.sent,p(),m({membersCount:l.length,portalName:s}),a([{id:g.id,mutation:Ce.lZ.ADDED}]),(0,ie.c0)("success",ot("successNotification")),v(),e.next=22;break;case 16:if(e.prev=16,e.t0=e.catch(4),(0,Re.k0)(e.t0)){e.next=20;break}return e.abrupt("return");case 20:(b=(0,Re.lt)(e.t0))&&d(b);case 22:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t,n){return e.apply(this,arguments)}}();return r.createElement(re.J9,{initialValues:{name:"",permission:_e._I.VIEWER,users:[]},validationSchema:(0,$e.t)(),onSubmit:E},(function(e){var t=e.isSubmitting;return r.createElement(re.l0,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,ot("modalHeader"))),r.createElement(o.ZP.Body,null,r.createElement(rt,{error:d}),r.createElement(et.Z,{withUsers:!0})),r.createElement(o.ZP.Footer,null,r.createElement(O.Z,{type:O.Z.SECONDARY,onClick:v,disabled:t},(0,y.t)("button.label.close")),r.createElement(Ie.Z,{idleText:ot("saveButton")})))}))}var it=(0,y.nD)("teamManagement"),lt=function(){var e=z(),t=e.activeFolder,n=t.id,a=t.ourPermissions,i=e.isLoading,l=(0,be.ZP)().data,s=J(n).addStatuses,c=H(),u=c.resourceId,d=c.folderId,m=c.folderPath,f=c.portalName,p=(0,ge.O)(),v=!p||i,E=!((0,pe.mF)(a)||(0,Oe.GJ)(l))||i,g=(0,he.x)().canInviteNewUsers;return r.createElement("div",{className:"s1iTu46TVwqoFvPDSM7x"},r.createElement(se.Z,{trigger:r.createElement(ce.Z,{type:ce.Z.TERTIARY,disabled:E},r.createElement(ve.Z,{placement:Ee.Z.placements.STATIC.RIGHT,tooltip:it("addUserOrGroup.disabledDropdownButtonTooltip"),disabled:!E},r.createElement("div",{className:"o1BXMTZaRvNbkXO9F9is"},r.createElement(ce.Z.Icon,{icon:me.hd}),it("labels.addUserOrGroup"))))},r.createElement(ue.Z,null,r.createElement(de.Z,{onClick:function(){!function(e){var t=e.addStatuses,n=e.resourceId,a=e.folderId,i=e.folderPath,l=e.portalName;(0,o.Ll)(r.createElement(Je,{addStatuses:t,resourceId:n,folderId:a,folderPath:i,portalName:l}),{size:o.ZP.sizes.L,onRequestClose:o.GZ,withCloseButton:!0})}({addStatuses:s,resourceId:u,folderId:d,folderPath:m,portalName:f})},icon:me.hd},it("addUserOrGroup.existingUserOrGroup")),g&&r.createElement(de.Z,{onClick:function(){Ke({addStatuses:s,resourceId:u,folderPath:m,portalName:f})},icon:fe.$$},it("addUserOrGroup.inviteNewUser")),p&&r.createElement(ve.Z,{placement:Ee.Z.placements.STATIC.RIGHT,tooltip:it("createNewGroup.disabledDropdownButtonTooltip"),disabled:!v},r.createElement(de.Z,{disabled:v,onClick:function(){var e;e={addStatuses:s,folderId:n,resourceId:u,folderPath:m,portalName:f},(0,o.Ll)(r.createElement(at,e),{onRequestClose:o.GZ,size:o.ZP.sizes.L,withCloseButton:!0,"data-tid":"create-new-group-with-users-modal"})},icon:fe.Fs},it("addUserOrGroup.createNew"))))))},st=n(145987),ct=n(101507),ut=n(568874),dt=n(124333),mt="AQHbKJCsRsbP2Sn2402G",ft=(0,y.nD)("teamManagement.restrictedView"),pt=function(){var e=H().portalName;return(0,r.useEffect)((function(){!function(e){var t=e.portalName;i.Z.track(l.FP.NO_PERMISSION_VIEW,{"Portal name":t})}({portalName:e})}),[]),r.createElement("div",{className:mt},r.createElement(dt.Z,{illustration:"sad-whale"},r.createElement(dt.Z.Heading,null,ft("title")),r.createElement(dt.Z.Description,null,ft("description"))))},vt=n(821442),Et=(0,r.createContext)(void 0);function gt(e){var t=e.children,n=e.initialTab,o=(0,r.useState)(n);return r.createElement(Et.Provider,{value:o},t)}function bt(){var e=(0,r.useContext)(Et);if(!e)throw new Error("useTeamManagementContext must be used within a TeamManagementProvider");return e}function Ot(){var e=bt();return(0,I.Z)(e,2)[1]}var ht=(0,y.nD)("teamManagement.noResults"),yt=function(e){var t=e.clearFilters,n=Ot();return r.createElement("div",{className:mt},r.createElement(dt.Z,{illustration:"search"},r.createElement(dt.Z.Heading,null,ht("title")),r.createElement(dt.Z.Description,null,ht("description")),r.createElement(vt.Z,{onClick:t},ht("clearFilters")),r.createElement(vt.Z,{onClick:function(){return n(l.Hr.users)}},ht("goTo"))))},Zt=["showRestrictedView","showNoResultsView","clearFilters","isFetching"];function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt=function(e){var t=e.showRestrictedView,n=e.showNoResultsView,o=e.clearFilters,a=e.isFetching,i=(0,st.Z)(e,Zt),l=i.filtering,s=i.columns,c=i.data,u=i.sorting,d=i.highlight,m=(0,r.useMemo)((function(){return{Table:function(){return function(e){var t=e.showRestrictedView,n=e.showNoResultsView,o=e.clearFilters;return r.createElement(ut.ZP.Table,{maxHeight:"70vh"},t&&r.createElement(pt,null),n&&r.createElement(yt,{clearFilters:o}),r.createElement(ut.ZP.Table.BodyVirtualized,null))}({showRestrictedView:t,showNoResultsView:n,clearFilters:o})},Header:St({},t&&{Toolbar:null})}}),[t,n,o]),f=(0,ut.MD)(),p=(0,I.Z)(f,2)[1];return(0,r.useEffect)((function(){t&&p(!1)}),[p,t]),r.createElement("div",{className:"VggkHoES88TuW_422dWL"},r.createElement(ut.ZP,{isLoading:a,filtering:l,columns:s,data:c,sorting:u,components:m,highlight:d,getRowId:function(e){return(0,ct.x3)(e)},columnFiltersVisibility:f}))},Nt=n(794631),Ct=n(19072),Dt=n(581355),Tt=n(434986),At=n(936),Rt=n(798399),wt=n(27212),Lt=function(e){var t=e.user;return r.createElement("div",{className:"vT3l6jGzF7PxVHlTmP_d"},r.createElement(Rt.Z,{acronym:(0,Tt.e5)(t),src:t.avatarUri,size:Rt.Z.sizes.L}),r.createElement("div",{className:"lDQjdyIp7qG4py3dhdpb gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa"},(0,ct.oY)(t)),r.createElement(wt.O,{status:t.status}))};function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=(0,y.nD)("teamManagement.userDetails");function jt(e){var t,n=e.user,a=Mt(Mt({},n),{},{type:(0,y.t)("teamManagement.types.".concat(n.role)),email:null!==(t=n.email)&&void 0!==t?t:n.unverifiedEmail});return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,kt("title"))),r.createElement(o.ZP.Body,null,r.createElement(Lt,{user:n}),r.createElement(re.J9,{initialValues:a,onSubmit:function(){}},r.createElement(re.l0,{className:"zS1abPxXRYz8MG6rf7i8"},r.createElement(At.Z,{name:"email",label:kt("email"),readOnly:!0}),r.createElement(At.Z,{name:"username",label:kt("userName"),readOnly:!0}),r.createElement(At.Z,{name:"firstName",label:kt("firstName"),readOnly:!0}),r.createElement(At.Z,{name:"lastName",label:kt("lastName"),readOnly:!0}),r.createElement(At.Z,{name:"type",label:kt("role"),readOnly:!0})))),r.createElement(o.ZP.Footer,null,r.createElement(O.Z,{type:O.Z.SECONDARY,onClick:o.GZ},(0,y.t)("button.label.close"))))}var _t=function(e){var t,n,a,s=e.user;return t={tabName:e.tabName,portalName:e.portalName},n=t.tabName,a=t.portalName,i.Z.track(l.FP.DETAILS_MODAL_OPENED,{"Recent tab":n,"Portal name":a}),(0,o.Ll)(r.createElement(jt,{user:s}),{size:o.ZP.sizes.L,onRequestClose:o.GZ,withCloseButton:!0})},xt=n(615788),Ut=n(141797),Gt=n(734474),Vt=n(381859),Bt=n(154865),Ht=n(307179),zt="name",Wt="type",qt=n(121988),Kt=n(487462),Yt=n(225364),Qt=n(832201);function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $t=(0,y.nD)("teamManagement"),en=n(933705);function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rn=n(294184),on=n.n(rn),an="L1nFb7lUUMkqznAvaue4",ln=(0,y.nD)("teamManagement.noUsersFound");function sn(e){var t=e.clearFilters,n=e.isCondensed,o=void 0!==n&&n;return r.createElement("div",{className:on()(o&&"AaCRtbOZoc5tpS9JKEKI",an)},r.createElement(dt.Z,{illustration:"search"},r.createElement(dt.Z.Heading,null,ln("title")),r.createElement(dt.Z.Description,null,ln("description")),r.createElement(vt.Z,{onClick:t},ln("clearFilters"))))}var cn=n(735691),un=n(758542),dn=n(819082),mn=(0,y.nD)("teamManagement.groupDetails"),fn={selectedUser:null},pn=cn.Ry().shape({selectedUser:cn.Ry().nullable().required(mn("userRequired"))});function vn(e){var t=e.onAddUserToGroup,n=e.existingUserIds,o=void 0===n?[]:n,a=function(e){var t=e.value;return!o.some((function(e){return e===t.id}))},i=function(){var e=(0,ee.Z)(ne().mark((function e(n,r){var o,a;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.resetForm,a=r.setSubmitting,n.selectedUser){e.next=3;break}return e.abrupt("return");case 3:return a(!0),e.prev=4,e.next=7,t(n.selectedUser);case 7:o();case 8:return e.prev=8,a(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[4,,8,11]])})));return function(t,n){return e.apply(this,arguments)}}();return r.createElement(re.J9,{initialValues:fn,validationSchema:pn,validateOnChange:!1,onSubmit:i},(function(e){var t=e.values;return r.createElement(re.l0,null,r.createElement("div",{"data-tid":"groupDetailsModal--users-search-section",className:"kSk7iSH5EJG0MjCfiWdW"},r.createElement("div",{className:"MPV3z2J4zdGZgKr4_hP7 vlpHvsjgdbzjuadKPQ3e C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6"},mn("userSearchLabel")),r.createElement("div",{className:"X4lCjGH1ozTHZfTEmMqT"},r.createElement("div",{className:"e8RRUZ8ftLyPDNlo5NaF"},r.createElement(dn.Z,{name:"selectedUser",type:dn.Z.TYPES.TEXT,control:function(e){var t=e.field,n=e.fieldHelpers;return r.createElement(un.Z,(0,Kt.default)({className:"KCrBl_7mmXm2E_YzhIlw"},t,{onChange:function(e){n.setValue(e)},queryGroups:!1,stagingUsers:!0,placeholder:mn("userSearchPlaceholder"),filterOption:a,isClearable:!0}))}})),r.createElement(Ie.Z,{disabled:!t.selectedUser,idleText:r.createElement(r.Fragment,null,(0,y.t)("button.label.add")),processingText:(0,y.t)("button.label.adding"),iconProps:{idle:{icon:me.IH}}}))))}))}var En=(0,y.nD)("teamManagement.groupDetails");function gn(e){var t=e.groupId,n=e.groupName,a=e.tabName,i=e.portalName,l=(0,Z.Z)("teamManagementImprovementsEnabled"),s=(0,Ze.d8)(t,{onSuccess:function(e){var t,r;if((0,Bt.$)(e)){var o=!!e.success[0],a=(null===(t=e.success[0])||void 0===t?void 0:t.resource)||(null===(r=e.errors[0])||void 0===r?void 0:r.resource),i=a?(0,Ht.Gf)(a):"";o?(0,ie.c0)(ie.em.success,(0,y.t)("users.actions.removeUserGroup.successNotification",{userName:i,groupName:n})):(0,ie.c0)(ie.em.error,(0,y.t)("users.actions.removeUserGroup.errorNotification",{userName:i,groupName:n}))}},onError:function(e){(0,ie.c0)(ie.em.error,(0,Re.k0)(e)?(0,Re.e$)(e,(0,y.t)("error.default")):(0,y.t)("error.default"))}}),c=s.mutate,u=(0,r.useCallback)((function(e){c([e])}),[c]),d=function(e){var t=e.groupId,n=function(e){var t=e.tabName,n=e.portalName,o=e.handleRemoveUser,a=(0,Z.Z)("teamManagementImprovementsEnabled"),i=(0,be.ZP)().data.ui.display.canManageGroups,l=void 0!==i&&i,s=(0,r.useMemo)((function(){return[{label:$t("labels.name"),accessorFn:function(e){return e},accessorKey:zt,enableResizing:!0,enableSorting:!0,filter:(0,ut.oy)({placeholder:$t("placeholders.searchByName")}),size:265,cell:(0,ut.lv)({getAcronym:function(e){return(0,Tt.e5)(e)},getSrc:function(e){var t,n,r;return null==e||null===(t=e._self)||void 0===t||null===(n=t.linkedResources)||void 0===n||null===(r=n.itemAvatar)||void 0===r?void 0:r.url},getLabel:function(e){return(0,Ht.Gf)(e)},getMeta:function(e){return(null==e?void 0:e.email)||(null==e?void 0:e.unverifiedEmailAddress)||""}})},{label:$t("labels.type"),accessorKey:Wt,enableResizing:!0,enableSorting:!0,size:140,cell:(0,ut.Op)({getLabel:function(e){return $t("labels.".concat(e))}}),filter:(0,ut.e$)({placeholder:$t("placeholders.filter"),options:[{value:null,label:$t("labels.any")},{value:ke.$A.POWER,label:$t("labels.user")},{value:ke.$A.STANDARD,label:$t("labels.guest")}]})},Jt(Jt({},(0,ut.hp)({getChildren:function(e){var i,s,c=Jt(Jt({},e),{},{name:(0,Ht.Gf)(e),avatarUri:null===(i=e._self.linkedResources)||void 0===i||null===(s=i.itemAvatar)||void 0===s?void 0:s.url,role:e.typeName,permission:pe._I.NONE,username:e.userName,unverifiedEmail:e.unverifiedEmailAddress,type:e.typeName});return r.createElement(ut.ZP.Table.RowActions.ActionCellContainer,null,r.createElement(ut.ZP.Table.RowActions.Action,{icon:Dt.yo,onClick:function(){return _t({user:c,tabName:t,portalName:n})}},$t("actions.details")),a&&l&&r.createElement(ut.ZP.Table.RowActions.IconAction,(0,Kt.default)({icon:Yt._I,tooltip:{tooltip:$t("groupDetails.removeTooltip")},"aria-label":"Remove",onClick:function(){return o(e.id)},variant:de.Z.variants.ERROR},Qt.d5)))}})),{},{maxSize:100})]}),[t,o,a,n,l]);return{columns:s}}({tabName:e.tabName,portalName:e.portalName,handleRemoveUser:e.handleRemoveUser}),o=n.columns,a=(0,ut.AY)(),i=(0,I.Z)(a,2),l=i[0],s=i[1],c=(0,ut.rK)(),u=(0,I.Z)(c,1)[0],d=(0,ut.q7)({columnId:zt,columnFilters:l}),m=(0,ut.q7)({columnId:Wt,columnFilters:l}),f=function(e){var t=e.groupId,n=e.sortOptions,o=e.nameFilterValue,a=e.typeFilterValue,i=(0,ut.h0)({pageIndex:0,pageSize:10}),l=(0,I.Z)(i,2),s=l[0],c=l[1],u=(0,en.yM)({groupIds:[t],offset:10*s.pageIndex,limit:10,sortBy:null!=n&&n.id&&(null==n?void 0:n.id)===zt?"fullName":"typeName",sortDirection:null!=n&&n.desc&&null!=n&&n.desc?"desc":"asc",filters:{q:o,userCriteria:a}},{select:function(e){var n;return{count:(null==e?void 0:e[t].count)||0,users:null==e||null===(n=e[t].users)||void 0===n?void 0:n.map((function(e){return nn(nn({},e),{},{type:e.typeName})}))}}}),d=u.data,m=u.isLoading,f=null!=d&&d.count?Math.ceil((null==d?void 0:d.count)/10):0;return(0,r.useEffect)((function(){if(void 0!==(null==d?void 0:d.count)){var e=(null==d?void 0:d.users)&&d.users.length>0,t=s.pageIndex>=f;if(!e&&t&&f>0){var n=f-1;c((function(e){return nn(nn({},e),{},{pageIndex:n})}))}}}),[null==d?void 0:d.users,null==d?void 0:d.count,s.pageIndex,f,c]),{usersAndGroupsList:null==d?void 0:d.users,isLoading:m,pagination:i,pageCount:f}}({groupId:t,sortOptions:u[0],nameFilterValue:(0,qt.Z)(d,1500),typeFilterValue:m}),p=f.usersAndGroupsList,v=void 0===p?[]:p,E=f.isLoading,g=f.pagination,b=f.pageCount,O=(0,r.useCallback)((function(){s([])}),[s]);return{data:v,columns:o,pagination:{state:g,pageCount:b},sorting:c,filtering:a,isLoading:E,showNoUsersView:!E&&!v.length&&!!l.length,showEmptyView:!E&&!v.length&&!l.length,clearFilters:O}}({groupId:t,tabName:a,portalName:i,handleRemoveUser:u}),m=d.columns,f=d.data,p=d.filtering,v=d.pagination,E=d.sorting,g=d.isLoading,b=d.showNoUsersView,h=d.showEmptyView,S=d.clearFilters,P=(0,r.useMemo)((function(){return{Table:function(){return function(e){var t=e.isLoading,n=e.showNoUsersView,o=e.clearFilters;return r.createElement(ut.ZP.Table,{maxHeight:"395px"},n&&r.createElement(sn,{clearFilters:o,isCondensed:!0}),t?r.createElement(Gt.Z,null):r.createElement(ut.ZP.Table.BodyVirtualized,null))}({isLoading:g,showNoUsersView:b,clearFilters:S})},EmptyView:function(){return r.createElement(ut.ZP.Table.EmptyView,{title:En("emptyStateTitle"),description:En("emptyStateDescription"),illustration:xt.Z.types.BOX})}}}),[g,b,S]),N=(0,r.useMemo)((function(){return f.map((function(e){return e.id}))}),[f]),C=(0,Ze.Mk)({onSuccess:function(e){var t,r;if((0,Bt.$)(e)){var o=!!e.success[0],a=(null===(t=e.success[0])||void 0===t?void 0:t.resource)||(null===(r=e.errors[0])||void 0===r?void 0:r.resource),i=a?(0,Ht.Gf)(a):"";if(o)(0,ie.c0)(ie.em.success,(0,y.t)("users.actions.addToGroup.successNotification",{userName:i,groupName:n}));else{var l,s=(null===(l=e.errors[0])||void 0===l?void 0:l.msg)||(0,y.t)("users.actions.addToGroup.errorNotification",{userName:i,groupName:n});(0,ie.c0)(ie.em.error,s)}}},onError:function(e){(0,ie.c0)(ie.em.error,(0,Re.k0)(e)?(0,Re.e$)(e,En("addedToGroupFailed")):En("addedToGroupFailed"))}}),D=C.mutateAsync,T=function(){var e=(0,ee.Z)(ne().mark((function e(n){return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.some((function(e){return e===n.value.id}))){e.next=4;break}return(0,ie.c0)(ie.em.information,En("userAlreadyInGroup")),e.abrupt("return");case 4:return e.next=6,D({groupId:t,data:{resources:[{id:Number(n.value.id)}]}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(Ut.Z.Header,null,r.createElement(Ut.Z.Title,null,En("title",{groupName:n}))),r.createElement(Ut.Z.Body,null,l&&r.createElement(vn,{onAddUserToGroup:T,existingUserIds:N}),r.createElement(Vt.Z,{margin:Vt.Z.margin.XXL}),r.createElement("div",{className:"vR27KlShFtv22CZ9cKiB"},r.createElement(ut.ZP,{columns:m,data:f,filtering:p,pagination:v,sorting:E,components:P,getRowId:function(e){return e.id.toString()},isEmpty:h}))),r.createElement(Ut.Z.Footer,null,r.createElement(O.Z,{type:O.Z.SECONDARY,onClick:o.GZ},(0,y.t)("button.label.close"))))}function bn(e){var t=e.groupId,n=e.groupName,a=e.tabName,s=e.portalName;!function(e){var t=e.tabName,n=e.portalName;i.Z.track(l.FP.GROUP_MODAL_OPENED,{"Recent tab":t,"Portal name":n})}({tabName:a,portalName:s}),(0,o.Ll)(r.createElement(gn,{groupId:t,groupName:n,tabName:a,portalName:s}),{size:Ut.Z.sizes.L,onRequestClose:o.GZ,withCloseButton:!0})}var On=n(84066),hn=n(652421),yn=n(799532),Zn=n(963170),In=n(669039);function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pn=(0,y.nD)("teamManagement.notifications");function Nn(e){var t=e.selectedPermission,n=e.user,o=e.groups,s=void 0===o?[]:o,c=e.folderId,u=void 0===c?"":c,d=H(),m=d.resourceId,f=d.folderPath,p=d.portalName,v=z(),E=v.activeFolder.ourPermissions,g=v.isLoading,b=J(u).addStatuses,O=(0,In.Z)({folderId:u,resourceId:m,path:f,portalName:p}).removePermission,h=(0,x.If)({resourceId:m,portalName:p,folderId:u,path:f,logCallback:function(){return function(e){var t=e.path,n=e.portalName;i.Z.track(l.FP.BY_FOLDERS_PERMISSION_CHANGED,{"Portal name":n,path:t})}({path:f,portalName:p})},options:{onSuccess:function(){(0,ie.c0)(ie.em.success,Pn("permissionUpdated",{name:(0,ct.S_)(n)?n.name:(0,Ht.Gf)(n)})),b([{id:n.id,mutation:ze,oldPermission:n.permission}])},onError:function(e){var t,n=(t=(0,Re.k0)(e)&&function(e){return!(!e||!e.formErrors&&!e.inputErrors)}(e.data)&&function(e){var t=e.formErrors;return(void 0===t?[]:t).find((function(e){return e.code===_e.LF.NOT_ALLOWED_TO_MANAGE_LARGE_GROUP_PERMISSION}))}(e.data),t?t.msg:(0,Re.k0)(e)?(0,Re.e$)(e):Pn("permissionUpdateError"));(0,ie.c0)(ie.em.error,n)}}}),I=h.mutateAsync,S=(0,x.Bm)({resourceId:m,path:f,portalName:p}),P=(0,_e.nJ)({id:u,path:f,options:{onSuccess:function(){S(),(0,ie.c0)(ie.em.success,(0,y.t)("teamManagement.notifications.addedToGroup",{name:(0,ct.S_)(n)?n.name:(0,Ht.Gf)(n)}))}}}).mutateAsync,N=(0,r.useCallback)((function(e){n.permission!==e&&I(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,Te.HV)([n],e)))}),[I,n]),C=(0,r.useCallback)((function(e){n.id&&P({userId:n.id,groupId:e})}),[P,n]),D=(0,r.useCallback)((function(){O(n)}),[n,O]),T=(0,On.JY)(n),A=(0,ct.S_)(n),R=(0,Z.Z)("teamManagementEnabled"),w=!!n.id&&R&&E===pe._I.OWNER&&!g,L=!(0,ct.S_)(n)&&n.status===ke.Nj.DEACTIVATED;return w?r.createElement(Zn.Z,{onChange:N,onAddToGroup:C,onRemove:D,isUserDisabled:L,outline:!1,groups:s,selectedPermission:t,isGroup:A,options:T,trigger:r.createElement("div",{className:"wZ9i3ZsPiU8Fg7vRgIeQ","data-tid":"permission-dropdown"},r.createElement(hn.Z,{size:hn.Z.sizes.MEDIUM,color:hn.Z.WHITE,type:hn.Z.types.OUTLINED,uppercase:!1},r.createElement(r.Fragment,null,n.permission,r.createElement(yn.Z,{icon:xe.Dd,size:yn.Z.sizes.M}))))}):r.createElement(hn.Z,{size:hn.Z.sizes.MEDIUM,color:hn.Z.WHITE,type:hn.Z.types.OUTLINED,uppercase:!1},r.createElement(r.Fragment,null,n.permission))}var Cn=(0,y.nD)("teamManagement");function Dn(e){var t=e.item,n=e.folderId,o=(e.enabled,e.isInvited),a=function(e,t,n,o){var a,i,l=(0,ct.kO)(e),s=(0,ct.ny)(e),c=(a=e.id+t,i=Y().permissionStatuses,a?i[a]:void 0);return l&&e.status===ke.Nj.DEACTIVATED?{content:Cn("labels.deactivated"),color:hn.Z.RED}:(null==c?void 0:c.mutation)===ze&&e.permission!==c.oldPermission?{content:Cn("labels.changedFrom",{status:r.createElement("span",{className:"vXuwWWXrnsWde8iAlg9X"},c.oldPermission)}),color:hn.Z.BLUE}:(null==c?void 0:c.mutation)===He?{content:Cn("labels.added"),color:hn.Z.BLUE}:"userAdded"===(null==c?void 0:c.mutation)?{content:Cn("labels.userAdded"),color:hn.Z.BLUE}:l&&!s?{content:Cn("labels.nonEmployee"),color:hn.Z.COOL_GRAY}:o?{content:Cn("labels.invited"),color:hn.Z.BLUE}:null}(t,n,0,void 0!==o&&o);return r.createElement(r.Fragment,null,a&&r.createElement("div",{className:"Q2P98Lyn62VT8xMLBX7F"},r.createElement(hn.Z,{uppercase:!1,color:a.color,size:hn.Z.sizes.MEDIUM},a.content)))}function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=(0,y.nD)("teamManagement"),wn=5*n(190544).NO,Ln=function(e){return Object.values(e).filter((function(e){return e&&Date.now()-e.timestamp<wn})).map((function(e){return null==e?void 0:e.id.toString()}))};var Fn=function(e){var t=e.resourceId,n=e.selectedPath,o=e.onFolderSelect,a=(0,Z.Z)("teamManagementEnabled"),i=function(e){var t=e.resourceId,n=e.path,o=H().portalName,a=(0,ut.rK)(),i=(0,I.Z)(a,1)[0],s=(0,ut.AY)(),c=(0,I.Z)(s,2),d=c[0],m=c[1],f=i[0],p=(0,ut.q7)({columnId:l.mr.NAME,columnFilters:d}),v=(0,Ct.Y)(p),E=(0,ut.q7)({columnId:l.mr.TYPE,columnFilters:d}),g=(0,ut.q7)({columnId:l.mr.USER_STATUS,columnFilters:d}),b=(0,ut.q7)({columnId:l.mr.PERMISSION,columnFilters:d}),O=function(){var e=Y().permissionStatuses,t=void 0===e?{}:e,n=(0,ut.Dz)(),o=(0,I.Z)(n,2)[1];return(0,r.useEffect)((function(){var e,n=Ln(t);return(null==n?void 0:n.length)>0&&(o({rows:n}),e=setTimeout((function(){var e=Ln(t);o({rows:e})}),wn)),function(){return clearTimeout(e)}}),[t,o]),{highlight:n}}(),h=O.highlight;(0,r.useEffect)((function(){d.length&&u(d,l.Hr.folders,o)}),[d,o]);var y=(0,Nt.Yq)({resourceId:t,path:n,portalName:o,nameFilterValue:v,typeFilterValue:E,userStatusFilterValue:g,permissionFilterValue:b,sortOptions:null!=f&&f.id?"".concat(f.id,",").concat(f.desc?"desc":"asc"):null,options:{refetchOnWindowFocus:!1,select:function(e){return{permissions:[].concat((0,ye.Z)((0,ct.cQ)(e.groups)),(0,ye.Z)((0,ct.PW)(e.users))),folderId:e.folderId,inheritsPermissions:e.inheritsPermissions,permissionInheritanceEnabled:e.permissionInheritanceEnabled}}}}),S=y.isLoading,P=y.isFetching,N=y.data,C=void 0===N?{}:N,D=C.permissions,T=void 0===D?[]:D,A=C.folderId,R=void 0===A?"":A,w=C.inheritsPermissions,L=void 0!==w&&w,F=C.permissionInheritanceEnabled,M=y.isError,k=(0,Ae.Z)({resourceId:t,path:n,portalName:o}),j=(0,r.useCallback)((function(){m([])}),[m]),_=function(e){var t=e.groups,n=e.folderId,o=e.portalName,a=(0,Z.Z)("viewerOnlyPrivEnabled"),i=(0,Z.Z)("teamManagementImprovementsEnabled"),s=(0,r.useMemo)((function(){return[{accessorFn:function(e){return e},id:"name",label:Rn("columns.name"),enableResizing:!0,enableSorting:!0,maxSize:1e3,minSize:350,filter:(0,ut.oy)({placeholder:Rn("placeholders.searchByName")}),cell:function(e){var t=e.getValue();return(0,ct.kO)(t)?(0,ut.lv)({getAcronym:function(e){return(0,Tt.e5)(e)},getSrc:function(e){return null==e?void 0:e.avatarUri},getLabel:function(e){return(0,ct.oY)(e)},getMeta:function(e){return(null==e?void 0:e.email)||(null==e?void 0:e.unverifiedEmail)||""},getChildren:function(e){return r.createElement(Dn,{item:e,folderId:n,enabled:!0,isInvited:!1})}})(e):(0,ut.si)({getLabel:function(e){return e.name},getMeta:function(e){return Rn("labels.membersCount",{count:e.numberOfMembers})},getChildren:function(e){return r.createElement(Dn,{item:e,folderId:n,enabled:!0,isInvited:!1})}})(e)}},{accessorFn:function(e){return e},id:"type",label:Rn("columns.type"),enableResizing:!0,enableSorting:!0,minSize:100,maxSize:200,cell:(0,ut.K1)({getLabel:function(e){return(0,ct.S_)(e)?Rn("types.group"):Rn("types.".concat(e.role))}}),filter:(0,ut.e$)({placeholder:Rn("placeholders.filter"),options:[{value:null,label:Rn("labels.any")},{value:"GROUP",label:Rn("types.group")},{value:"POWER",label:Rn("types.user")},{value:"STANDARD",label:Rn("types.guest")}]})},{accessorFn:function(e){return e},id:"userStatus",label:Rn("columns.status"),enableResizing:!0,enableSorting:!0,minSize:100,maxSize:200,cell:function(e){var t=(0,e.getValue)();if(t&&(0,ct.kO)(t)){var n=t.status;return r.createElement(wt.O,{status:n})}return Rn("status.group")},filter:(0,ut.e$)({placeholder:Rn("placeholders.filter"),options:[{value:null,label:Rn("labels.any")},{value:"ACTIVE",label:Rn("labels.active")},{value:"DEACTIVATED",label:Rn("labels.deactivated")},{value:"PENDING",label:Rn("labels.pending")}]})},{accessorFn:function(e){return e},id:"permission",label:Rn("columns.permissions"),enableResizing:!0,enableSorting:!0,minSize:100,maxSize:200,cell:function(e){var o=(0,e.getValue)();return r.createElement(Nn,{selectedPermission:o.permission,user:o,groups:t,folderId:n})},filter:(0,ut.e$)({placeholder:Rn("placeholders.filter"),options:[{value:null,label:Rn("labels.any")},{value:"OWNER",label:Rn("permissions.owner")},{value:"FULL",label:Rn("permissions.full")},{value:"EDITOR",label:Rn("permissions.editor")},{value:"VIEWER",label:Rn("permissions.viewer")},a&&{value:"VIEWER_ONLY",label:Rn("permissions.viewer_only")}].filter(Boolean)})},An({},(0,ut.hp)({getChildren:function(e){var t=(0,ct.kO)(e),n=!0;return(0,ct.S_)(e)&&(n=(i||e.numberOfMembers>0)&&!e.isSystemGroup),r.createElement(r.Fragment,null,e.id&&r.createElement(ut.ZP.Table.RowActions.ActionCellContainer,null,n&&r.createElement(ut.ZP.Table.RowActions.Action,{icon:Dt.yo,onClick:function(){return t?_t({user:e,tabName:l.Hr.folders,portalName:o}):bn({groupId:e.id,groupName:e.name,tabName:l.Hr.folders,portalName:o})}},Rn(t?"actions.details":"actions.members"))))}}))]}),[t,n,a,o,i]);return{columns:s}}({groups:k,folderId:R,portalName:o});return{data:M?[]:T,columns:_.columns,sorting:a,filtering:s,isLoading:S,isFetching:P,showRestrictedView:M,showNoResultsView:!S&&!T.length&&!M,highlight:h,clearFilters:j,inheritsPermissions:L,permissionInheritanceEnabled:F}}({resourceId:t,path:n}),s=i.inheritsPermissions,c=i.permissionInheritanceEnabled,d=i.isLoading,m=i.isFetching;return r.createElement("div",{className:"pqf5LIaHNmei6HCDXWT_"},r.createElement("div",{className:"r0nkRwc2HJ3PJamemxyD","data-tid":"team-management-contentHeader"},r.createElement($.Z,{folderPath:n,onFolderSelect:o}),a&&c&&r.createElement(le,{inheritsPermissions:s,isLoading:d||m})),a&&r.createElement(lt,null),r.createElement(Pt,i))},Mn=function(e){var t=e.baseFolderId,n=e.basePath,o=e.folderPath,a=e.resourceId,i=e.portalName,l=(0,r.useState)(o||n),s=(0,I.Z)(l,2),c=s[0],u=s[1],d=(0,r.useCallback)((function(e){u(e)}),[]);return r.createElement(B,{folderId:t,folderPath:c,resourceId:a,portalName:i},r.createElement("div",{className:"CBsYS93M27cvNg2PQ3UC","data-tid":"team-management-folders-tab"},r.createElement(W,{folderId:t,folderPath:n,resourceId:a,onFolderSelect:d,selectedPath:c,portalName:i}),r.createElement(K,null,r.createElement(Fn,{onFolderSelect:d,resourceId:a,selectedPath:c}))))},kn=n(190217),jn=n(373687),_n=(0,y.nD)("teamManagement"),xn=n(649453);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vn=function(e,t){return null==e?void 0:e.map((function(e){return Gn(Gn({},e),{},{type:t===l.Zn.USER&&(0,Te.V_)(e)?e.role:t})}))};var Bn=(0,y.nD)("teamManagement"),Hn=function(){var e=Ot();return r.createElement(ve.Z,{interactive:!0,tooltip:Bn("tooltips.addUserGoTo.text",{link:r.createElement(vt.Z,{as:"a",onClick:function(){return e(l.Hr.folders)},target:"_blank"},Bn("tooltips.addUserGoTo.link"))})},r.createElement("div",{className:"fnVanbCwFAoYGmZS3lZ4"},r.createElement(vt.Z,null,Bn("labels.howToAddButton")),r.createElement(yn.Z,{icon:Dt.yo,className:"Yf_plg52iP3r9o4uucDW"})))};function zn(){var e=(0,Z.Z)("teamManagementEnabled");return r.createElement(ut.ZP.Header.Toolbar,null,r.createElement(ut.ZP.Header.Toolbar.Group,{justifyContent:"left"},r.createElement("div",{className:"wuZm2QuVrLmLj2ERDjS2"},e&&r.createElement(Hn,null))),r.createElement(ut.ZP.Header.Toolbar.RightActions,null))}var Wn=function(e){var t=function(e){var t=e.onSelection,n=(0,jn.j)().portalName,o=function(){var e=(0,r.useMemo)((function(){return[{label:_n("columns.name"),accessorFn:function(e){return e},accessorKey:"name",id:"name",enableResizing:!0,enableSorting:!0,filter:(0,ut.oy)({placeholder:_n("placeholders.searchByName")}),size:265,cell:function(e){var t=e.getValue();return(0,Te.V_)(t)?(0,ut.lv)({getAcronym:function(e){return(0,Tt.e5)(e)},getSrc:function(e){return null==e?void 0:e.avatarUri},getLabel:function(e){return(0,Ht.Gf)(e)},getMeta:function(e){return(null==e?void 0:e.email)||(null==e?void 0:e.unverifiedEmail)||""},getChildren:function(){return null}})(e):(0,ut.si)({getLabel:function(e){return e.name},getMeta:function(e){return _n("labels.membersCount",{count:e.numberOfMembers})}})(e)}},{label:_n("columns.type"),accessorKey:"type",enableResizing:!0,enableSorting:!0,size:180,cell:(0,ut.Op)({getLabel:function(e){return _n("labels.".concat(e))}}),filter:(0,ut.e$)({placeholder:_n("placeholders.filter"),options:[{value:null,label:_n("labels.any")},{value:"GROUP",label:_n("labels.group")},{value:"POWER",label:_n("labels.user")},{value:"STANDARD",label:_n("labels.guest")}]})}]}),[]);return{columns:e}}(),a=o.columns,s=(0,ut.AY)(),c=(0,I.Z)(s,2),d=c[0],m=c[1],f=(0,ut.rK)(),p=(0,I.Z)(f,1)[0],v=(0,ut.Gt)({options:{enableMultiRowSelection:!1,enableRowSelection:function(e){return!!e.original.id}}}),E=(0,I.Z)(v,1)[0],g=(0,ut.q7)({columnId:l.Aq.NAME,columnFilters:d}),b=(0,ut.q7)({columnId:l.Aq.TYPE,columnFilters:d}),O=p[0],h=function(e){var t=e.nameFilterValue,n=e.typeFilterValue,r=e.sortOptions,o=(0,jn.j)(),a=o.resourceId,i=o.portalName,s=(0,xn.d5)({resourceId:a,portalName:i,nameFilterValue:t,typeFilterValue:n,sortOptions:r,options:{select:function(e){var t;return{groups:null!==(t=null==e?void 0:e.groups)&&void 0!==t?t:[],usersAndGroupsList:[].concat((0,ye.Z)(Vn(null==e?void 0:e.groups,l.Zn.GROUP)),(0,ye.Z)(Vn(null==e?void 0:e.users,l.Zn.USER)))}}}}),c=s.data,u=void 0===c?{}:c,d=u.usersAndGroupsList,m=void 0===d?[]:d,f=u.groups,p=void 0===f?[]:f;return{isLoading:s.isLoading,usersAndGroupsList:m,groups:p}}({nameFilterValue:(0,Ct.Y)(g),typeFilterValue:b,sortOptions:O}),y=h.usersAndGroupsList,Z=void 0===y?[]:y,S=h.isLoading,P=(0,r.useCallback)((function(){m([])}),[m]);return(0,r.useEffect)((function(){var e=Object.keys(E)[0];e&&(t(Z.find((function(t){var n;return(null==t||null===(n=t.id)||void 0===n?void 0:n.toString())===e}))),function(e){var t=e.portalName;i.Z.track(l.FP.USER_OR_GROUP_SELECTED,{"Portal name":t})}({portalName:n}))}),[E,Z,t,n]),(0,r.useEffect)((function(){d.length&&u(d,l.Hr.users,n)}),[d,n]),{data:Z,columns:a,sorting:f,filtering:s,rowSelection:v,isLoading:S,showNoUsersView:!S&&!Z.length,clearFilters:P}}({onSelection:e.onSelection}),n=t.columns,o=t.data,a=t.filtering,s=t.rowSelection,c=t.sorting,d=t.isLoading,m=t.clearFilters,f=t.showNoUsersView,p=(0,r.useMemo)((function(){return{Header:{Toolbar:function(){return r.createElement(zn,null)}},Table:function(){return function(e){var t=e.isLoading,n=e.showNoUsersView,o=e.clearFilters;return r.createElement(ut.ZP.Table,{maxHeight:"75vh"},n&&r.createElement(sn,{clearFilters:o}),t?r.createElement(Gt.Z,null):r.createElement(ut.ZP.Table.BodyVirtualized,null))}({isLoading:d,showNoUsersView:f,clearFilters:m})}}}),[d,f,m]);return r.createElement(ut.ZP,{columns:n,data:o,filtering:a,rowSelection:s,sorting:c,components:p,getRowId:function(e){var t,n;return null!==(t=null===(n=e.id)||void 0===n?void 0:n.toString())&&void 0!==t?t:""}})},qn=n(319743),Kn={badgeCellContent:"pg69USyU7fTCT5P6nlmV",warningSign:"tqrE9VXnoVGuDfvTbiSA",tooltipGroupListItem:"hpUS9Q1d1ADUFUS5FnzN"},Yn=(0,y.nD)("teamManagement");function Qn(e){var t=e.permission,n=e.callingUserPriv,o=e.groups,a=void 0===o?[]:o,i=e.isOverwritten,l=void 0!==i&&i,s=e.showChevron,c=void 0!==s&&s,u=(0,r.useMemo)((function(){return l?"tooltips.permissionsOverwritten":a.length>=2?"tooltips.moreGroupWarning":""}),[a,l]),d=(0,r.useCallback)((function(){switch(t){case _e._I.NAV:return r.createElement(r.Fragment,null,l&&r.createElement("div",{className:Kn.warningSign},r.createElement(ve.Z,{tooltip:Yn(u)},r.createElement(yn.Z,{size:yn.Z.sizes.M,icon:nt.O,variant:yn.Z.variants.WARN}))),Yn("permissions.nav"),r.createElement(ve.Z,{tooltip:Yn("tooltips.navOnly")},r.createElement(yn.Z,{icon:Dt.yo,size:yn.Z.sizes.M})));case _e._I.NONE:case void 0:return r.createElement(r.Fragment,null,"-");default:return r.createElement("div",{className:Kn.badgeCellContent},l||a.length>=2?r.createElement("div",{className:Kn.warningSign},r.createElement(ve.Z,{tooltip:Yn(u)},r.createElement(yn.Z,{size:yn.Z.sizes.M,icon:nt.O,variant:yn.Z.variants.WARN}))):null,r.createElement(ve.Z,{disabled:a.length<=1,tooltip:r.createElement(r.Fragment,null,Yn("tooltips.belongsToGroups"),r.createElement("ul",{className:Kn.tooltipGroupList},a.map((function(e){return r.createElement("li",{className:Kn.tooltipGroupListItem,key:e.groupId},"".concat(e.priv," ").concat(Yn("labels.permissionFromGroup",{group:e.groupName})," "))}))))},r.createElement(hn.Z,{size:hn.Z.sizes.MEDIUM,color:hn.Z.WHITE,type:hn.Z.types.OUTLINED,uppercase:!1,className:Kn.permissionBadge},r.createElement(r.Fragment,null,r.createElement(h.Z,{disableTooltip:a.length>1},r.createElement(r.Fragment,null,t," ",a.length>0?Yn("labels.permissionFromGroup",{group:a[0].groupName}):null," ",a.length>=2?Yn("labels.groupCount",{membersCount:a.length-1}):null)),c&&r.createElement(yn.Z,{icon:xe.Dd,size:yn.Z.sizes.M})))))}}),[a,l,t,u,c]);return n===_e._I.NAV||n===_e._I.VIEWER_ONLY?r.createElement(r.Fragment,null,Yn("permissions.none"),r.createElement(ve.Z,{tooltip:Yn("tooltips.noPermissions")},r.createElement(yn.Z,{icon:Dt.yo}))):r.createElement(r.Fragment,null,d())}var Xn=n(162134),Jn=n(531081);function $n(e){var t=e.showDocumentRoomIcon,n=void 0!==t&&t,o=e.showProjectIcon,a=void 0!==o&&o,i=e.noPermissions;return void 0!==i&&i?r.createElement("div",{className:"tS6WRW3l7jTIhqhLXGMC"},r.createElement(yn.Z,{icon:Jn.P9,size:yn.Z.sizes.L})):r.createElement("div",{className:"VCIix0U5gWZ5r9HCz5mr"},r.createElement(Xn.Z,{type:"folder",showDocumentRoomIcon:n,showProjectIcon:a}))}var er=n(827095);function tr(e){var t=e.folder,n=e.isGroup,o=void 0!==n&&n,a=e.selectedPermission,s=e.onFolderChange,c=e.isUserDisabled,u=void 0!==c&&c,d=(0,jn.j)().portalName,m=(0,er.Z)({folder:t,onFolderChange:s,isGroup:o,logOnChangeCallback:function(){return function(e){var t=e.path,n=e.portalName;i.Z.track(l.FP.BY_USERS_PERMISSION_CHANGED,{"Portal name":n,path:t})}({path:t.folderPath,portalName:d})}}),f=m.onChange,p=m.onAddToGroup,v=m.onRemove,E=m.options,g=m.selectedUser,b=m.availableGroups,O=(0,Z.Z)("teamManagementEnabled"),h=(0,r.useMemo)((function(){return a!==_e._I.NONE&&a!==_e._I.NAV&&t.callingUserPriv===_e._I.OWNER}),[t,a]);return(0,r.useMemo)((function(){return h&&(null==g?void 0:g.id)&&O}),[g,O,h])?r.createElement(Zn.Z,{onChange:f,onAddToGroup:p,onRemove:v,isUserDisabled:u,outline:!1,groups:b,selectedPermission:a,isGroup:o,options:E,trigger:r.createElement("div",{"data-tid":"permission-dropdown"},r.createElement(Qn,{permission:a,callingUserPriv:t.callingUserPriv,showChevron:!0}))}):r.createElement(Qn,{permission:a,callingUserPriv:t.callingUserPriv})}var nr=n(46326);function rr(e){var t=e.onChange,n=e.options,o=void 0===n?[]:n;return r.createElement(r.Fragment,null,o.map((function(e){return r.createElement(ut.ZP.Table.RowActions.MenuAction,{key:e.label,onClick:function(){t(e.value)}},r.createElement(nr.Z,{label:e.label,description:e.description}))})))}function or(e){var t=e.folder,n=e.onFolderChange,o=e.isGroup,a=void 0!==o&&o,s=(0,jn.j)().portalName,c=(0,er.Z)({folder:t,onFolderChange:n,isGroup:a,logOnChangeCallback:function(){return function(e){var t=e.path,n=e.portalName;i.Z.track(l.FP.BY_USERS_PERMISSION_ADDED,{"Portal name":n,path:t})}({path:t.folderPath,portalName:s})}}),u=c.onChange,d=c.options;return r.createElement(rr,{options:d,onChange:u})}var ar=n(474824);function ir(e){var t=e.forwardedRef,n=e.onClick;return r.createElement(ce.Z,{"data-tid":"add-permission-dropdown",chevron:!0,type:ce.Z.ACTION,ref:t,onClick:n},(0,ar.t)("teamManagement.actions.addPermissions"))}var lr=(0,r.forwardRef)((function(e,t){return r.createElement(ir,(0,Kt.default)({forwardedRef:t},e))}));function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=(0,y.nD)("teamManagement");var dr=(0,y.nD)("teamManagement");function mr(e){var t=e.resource,n=e.openModal,o=e.acronym,a=e.resourceName,i=e.resourceSubInfo,l=e.buttonIcon,s=e.buttonLabel,c=e.src,u=e.hideButton,d=void 0!==u&&u;return r.createElement(r.Fragment,null,r.createElement(Rt.Z,{acronym:o,src:c,size:Rt.Z.sizes.M}),r.createElement("div",{className:"aBWxryPYxNnNLrk3HRhf"},r.createElement("span",{className:"dCVlvhQV5VdoLouaV9Sp"},a),r.createElement("span",{className:"x5IF1WSy25v7jujMlWps QspI3Sow0uF6jJWV3_4r"},i)),!d&&r.createElement(O.Z,{type:O.Z.ACTION,className:"w2wGvHpEqrj7D6aSmgUp",onClick:function(){return n(t)}},r.createElement(O.Z.Icon,{icon:l}),s))}function fr(e){var t,n=e.selectedResource,o=(0,Z.Z)("teamManagementImprovementsEnabled"),a=(0,jn.j)().portalName,i=(0,r.useCallback)((function(e){var t;bn({groupId:(null===(t=e.id)||void 0===t?void 0:t.toString())||"",groupName:e.name,tabName:l.Hr.users,portalName:a})}),[a]),s=(0,r.useCallback)((function(e){_t({user:(0,ct.PW)([e])[0],tabName:l.Hr.users,portalName:a})}),[a]);return r.createElement(ut.ZP.Header.Toolbar,null,r.createElement(ut.ZP.Header.Toolbar.Group,{justifyContent:"left"},r.createElement("div",{className:"WPrBEHpccD0D17_MVb63"},(0,Te.TZ)(n)?r.createElement(mr,{resource:n,openModal:i,acronym:r.createElement(yn.Z,{size:yn.Z.sizes.M,icon:fe.Fs}),resourceName:n.name,resourceSubInfo:dr("labels.membersCount",{count:n.numberOfMembers}),buttonIcon:fe.Fs,buttonLabel:dr("actions.members"),hideButton:o?n.isSystemGroup:0===n.numberOfMembers||n.isSystemGroup}):r.createElement(mr,{resource:n,openModal:s,acronym:(0,Tt.e5)(n),src:n.avatarUri,resourceName:(0,Ht.oY)(n),resourceSubInfo:null!==(t=n.email)&&void 0!==t?t:n.unverifiedEmail,buttonIcon:Dt.yo,buttonLabel:dr("actions.details")}))))}function pr(e){var t,n=e.isGroup,o=e.selectedResource,a=function(e){var t=e.resourceId,n=e.isGroup,o=(0,jn.j)(),a=o.resourceId,i=o.folderPath,l=(0,qn.jx)({isGroup:n,resourceId:t,portalEntryId:a,initialPath:i}),s=l.folders,c=l.isLoading,u=function(e){var t=e.onFolderToggle,n=e.onFolderChange,o=(0,T.pL)(),a=(0,r.useMemo)((function(){return[{label:ur("columns.folder"),accessorFn:function(e){return e},id:"folderColumn",enableResizing:!0,size:350,minSize:350,maxSize:Number.MAX_SAFE_INTEGER,cell:(0,ut.uS)({onToggle:function(e){return t(e)},getIsExpandable:function(e){return e.hasSubfolders},getIsExpanded:function(e){return e.isExpanded},getLabel:function(e){return e.folderName},getFileIcon:function(e){return 0===e.level||e.callingUserPriv===pe._I.NONE?r.createElement($n,{showDocumentRoomIcon:0===e.level&&o,showProjectIcon:0===e.level&&!o,noPermissions:e.callingUserPriv===pe._I.NONE}):null}})},{label:ur("columns.individualPermissions"),accessorFn:function(e){return e},id:"individualPermissionsColumn",enableResizing:!0,minSize:100,maxSize:200,cell:function(e){var t=(0,e.getValue)();return r.createElement(tr,{folder:t,selectedPermission:t.userPriv,isUserDisabled:t.callingUserPriv!==pe._I.OWNER,isGroup:!1,onFolderChange:n})}},{label:ur("columns.permissionsByGroup"),id:"groupPermissionsColumn",accessorFn:function(e){return e},enableResizing:!0,minSize:250,size:250,maxSize:350,cell:function(e){var t,n,o=(0,e.getValue)();return r.createElement(Qn,{permission:null===(t=o.groupPriv)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.priv,callingUserPriv:o.callingUserPriv,groups:o.groupPriv,isOverwritten:(0,Te.lE)(o)})}},cr({},(0,ut.hp)({getChildren:function(e){var t=e.userPriv===pe._I.NONE||e.userPriv===pe._I.NAV,o=e.callingUserPriv===pe._I.OWNER;return r.createElement(r.Fragment,null,e.folderId&&o&&r.createElement(ut.ZP.Table.RowActions.ActionCellContainer,null,t&&r.createElement(ut.ZP.Table.RowActions.MenuContainer,{trigger:r.createElement(lr,null)},r.createElement(or,{folder:e,onFolderChange:n}))))}}))]}),[t,n,o]),i=(0,r.useMemo)((function(){return[{label:ur("columns.folder"),accessorFn:function(e){return e},id:"folderId",enableResizing:!0,size:350,minSize:350,maxSize:Number.MAX_SAFE_INTEGER,cell:(0,ut.uS)({onToggle:function(e){return t(e)},getIsExpandable:function(e){return e.hasSubfolders},getIsExpanded:function(e){return e.isExpanded},getLabel:function(e){return e.folderName},getFileIcon:function(e){return 0===e.level||e.callingUserPriv===pe._I.NONE?r.createElement($n,{showDocumentRoomIcon:0===e.level&&o,showProjectIcon:0===e.level&&!o,noPermissions:e.callingUserPriv===pe._I.NONE}):null}})},{label:ur("columns.permissions"),accessorFn:function(e){return e},id:"permissionsColumn",enableResizing:!0,minSize:100,maxSize:200,cell:function(e){var t,o,a=(0,e.getValue)();return r.createElement(tr,{folder:a,selectedPermission:a.groupPriv?null===(t=a.groupPriv)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.priv:pe._I.NONE,isUserDisabled:a.callingUserPriv!==pe._I.OWNER,isGroup:!0,onFolderChange:n})}},cr({},(0,ut.hp)({getChildren:function(e){var t,o,a,i,l=!e.groupPriv||(null===(t=e.groupPriv)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.priv)===pe._I.NONE||(null===(a=e.groupPriv)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.priv)===pe._I.NAV,s=e.callingUserPriv===pe._I.OWNER;return r.createElement(r.Fragment,null,l&&s&&r.createElement(ut.ZP.Table.RowActions.ActionCellContainer,null,r.createElement(ut.ZP.Table.RowActions.MenuContainer,{trigger:r.createElement(lr,null)},r.createElement(or,{folder:e,isGroup:!0,onFolderChange:n}))))}}))]}),[t,n,o]);return{columnsForUsers:a,columnsForGroups:i}}({onFolderToggle:l.onToggle,onFolderChange:l.onFolderChange}),d=u.columnsForUsers,m=u.columnsForGroups;return{data:s,columns:n?m:d,isLoading:c}}({resourceId:(null==o||null===(t=o.id)||void 0===t?void 0:t.toString())||"",isGroup:n}),i=a.data,l=a.columns,s=a.isLoading,c=(0,r.useMemo)((function(){return{Header:{Toolbar:function(){return r.createElement(fr,{selectedResource:o})}},Table:function(){return r.createElement(ut.ZP.Table,{maxHeight:"75vh"},r.createElement(ut.ZP.Table.BodyVirtualized,null))}}}),[o]);return r.createElement(ut.ZP,{columns:l,data:i,components:c,getRowId:function(e){return e.folderId},isLoading:s})}var vr=(0,y.nD)("teamManagement.noSelection");function Er(){return r.createElement("div",{className:an},r.createElement(dt.Z,{illustration:"select-an-option"},r.createElement(dt.Z.Heading,null,vr("title"))))}var gr=function(e){var t=e.folderId,n=e.folderPath,o=e.resourceId,a=e.portalName,i=(0,kn.Z)({resourceId:o,portalName:a}),l=(0,r.useState)(),s=(0,I.Z)(l,2),c=s[0],u=s[1],d=(0,L.Or)(M.j.TEAM_VIEW_PERMISSIONS),m=d.width,f=d.setWidth,p=(0,r.useCallback)((function(e){f(e)}),[f]);return r.createElement(jn.d,{resourceId:o,folderPath:n,folderId:t,selectedUser:c,availableGroups:i,portalName:a},r.createElement("div",{className:"zMkAvt_K45cT67W7qwQn","data-tid":"team-management-users-tab"},r.createElement(L._2,{className:"roJ9SVVOI4K18zTyKKnw",side:L._2.sides.LEFT,width:m,minWidth:250,maxWidth:500,onWidthChange:p,endDragOnMinWidth:!0},r.createElement(Wn,{onSelection:u})),r.createElement("div",{className:"nfTeeNAfIYGLDoRoIG1h"},null!=c&&c.id?r.createElement(pr,{isGroup:!!c&&(0,Te.TZ)(c),selectedResource:c}):r.createElement(Er,null))))},br=(0,y.nD)("teamManagement");function Or(e){var t,n=e.tabsKey,a=e.tabs,s=e.name,c=e.portalName,u=(t=bt(),(0,I.Z)(t,1)[0]),d=Ot(),m=(0,r.useCallback)((function(e){d(e),function(e){var t=e.key,n=e.portalName;i.Z.track(l.FP.RECENT_TAB_OPENED,{"Recent tab":t,"Portal name":n})}({key:e,portalName:c})}),[d,c]);return r.createElement(r.Fragment,null,r.createElement(o.ZP.Header,null,r.createElement(o.ZP.Title,null,r.createElement("div",{className:"J4cRg3O602Rx31o69nIz DjBes9t5ENd6DFQP1lbE vSadc0pqvD7KtbqURZCR"},r.createElement(h.Z,null,br("title",{name:s})),r.createElement(O.Z,{type:O.Z.TERTIARY,onClick:o.Mr,"aria-label":"close"},r.createElement(O.Z.Icon,{icon:b.xv})))),r.createElement(v.Z,{tabsKey:n,selectedTabKey:u},a.map((function(e){var t=e.key,n=e.label;return r.createElement(E.Z,{key:t,tabKey:t,onClick:function(){return m(t)}},n)})))),r.createElement("div",{className:"dOOzv7qBOlDt_7THoTjL"},r.createElement(o.ZP.Body,null,a.map((function(e){var t=e.key,o=e.Component,a=e.componentProps;return r.createElement(g.Z,{key:t,tabsKey:"".concat(n,"-").concat(t),tabKey:t,selectedTabKey:u},r.createElement(o,a))})))))}var hr=function(e){var t=e.baseFolderId,n=e.basePath,o=e.folderPath,a=e.name,i=e.resourceId,s=e.portalName,c=(0,Z.Z)("teamManagementImprovementsEnabled"),u=(0,r.useMemo)((function(){return[{key:l.Hr.users,label:br("tabs.users"),Component:gr,componentProps:{folderId:t,folderPath:n,resourceId:i,portalName:s}},{key:l.Hr.folders,label:br("tabs.folders"),Component:Mn,componentProps:{baseFolderId:t,basePath:n,folderPath:o,resourceId:i,portalName:s}}]}),[t,n,o,i,s]);return r.createElement(gt,{initialTab:c?l.Hr.folders:l.Hr.users},r.createElement(Or,{tabsKey:"team-management-tabs",tabs:u,name:a,portalName:s}))};function yr(e){var t=e.baseFolderId,n=e.basePath,a=e.name,s=e.folderPath,c=e.resourceId,u=e.portalName;!function(e){var t=e.portalName;i.Z.track(l.FP.OPEN,{"Portal name":t})}({portalName:u}),(0,o.h7)(r.createElement(hr,{baseFolderId:t,basePath:n,name:a,folderPath:s,resourceId:c,portalName:u}),{onRequestClose:o.Mr,keepVisibleInBackground:!0,size:o.ZP.sizes.FULLSCREEN,className:"LzGewBuSme4xq0k8PHXI"})}},84066:function(e,t,n){n.d(t,{JY:function(){return m},LF:function(){return f}});var r=n(762074),o=n(943886),a=n(77259),i=n(528058),l=n(101507),s=n(568063),c=[i.ZZ,i.Au],u=function(e){return!((0,l.kO)(e)&&!(0,l.ny)(e)||(0,l.S_)(e)&&c.includes(null==e?void 0:e.name))},d={OWNER:{value:a._I.OWNER,label:(0,r.t)("storage.folderPermissions.label.Owner"),description:(0,r.t)("storage.folderPermissions.subLabel.Owner")},FULL:{value:a._I.FULL,label:(0,r.t)("storage.folderPermissions.label.Full"),description:(0,r.t)("storage.folderPermissions.subLabel.Full")},EDITOR:{value:a._I.EDITOR,label:(0,r.t)("storage.folderPermissions.label.Editor"),description:(0,r.t)("storage.folderPermissions.subLabel.Editor")},VIEWER:{value:a._I.VIEWER,label:(0,r.t)("storage.folderPermissions.label.Viewer"),description:(0,r.t)("storage.folderPermissions.subLabel.Viewer")},VIEWER_ONLY:{value:a._I.VIEWER_ONLY,label:(0,r.t)("storage.folderPermissions.label.ViewerOnly"),description:(0,r.t)("storage.folderPermissions.subLabel.ViewerOnly")}},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,o.Jo)().features.viewerOnlyPrivEnabled,r=u(e);return[r&&d.OWNER,!t&&d.FULL,!t&&d.EDITOR,d.VIEWER,n&&d.VIEWER_ONLY].filter(Boolean)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,o.Jo)().features.viewerOnlyPrivEnabled,r=!((0,s.V_)(e)&&!(0,l.ny)(e)||(0,s.TZ)(e)&&c.includes(null==e?void 0:e.name));return[r&&d.OWNER,!t&&d.FULL,!t&&d.EDITOR,d.VIEWER,n&&d.VIEWER_ONLY].filter(Boolean)}},568063:function(e,t,n){n.d(t,{HV:function(){return s},TZ:function(){return l},V_:function(){return i},lE:function(){return c}});var r=n(77259),o=n(205753),a=n(101507);function i(e){return(null==e?void 0:e.type)===o.Zn.USER||Object.prototype.hasOwnProperty.call(e,"firstName")}function l(e){return(null==e?void 0:e.type)===o.Zn.GROUP||Object.prototype.hasOwnProperty.call(e,"numberOfMembers")}function s(e,t){var n=[],r=[];if(!e.length)throw new Error("items is required");return e.forEach((function(e){((0,a.kO)(e)||i(e))&&n.push({id:e.id,username:e.username,permission:t}),((0,a.S_)(e)||l(e))&&r.push({id:e.id,name:e.name,permission:t})})),{users:n,groups:r}}function c(e){var t,n,o=!(null===(t=e.groupPriv)||void 0===t||null===(n=t[0])||void 0===n||!n.priv),a=e.userPriv!==r._I.NAV,i=e.userPriv!==r._I.NONE;return o&&a&&i}},101507:function(e,t,n){n.d(t,{PW:function(){return f},S_:function(){return u},cQ:function(){return m},kO:function(){return c},ny:function(){return p},oY:function(){return d},x3:function(){return v}});var r=n(204942),o=n(307179),a=n(528058),i=n(534733);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){return(null==e?void 0:e.type)===a.BX.USER},u=function(e){return(null==e?void 0:e.type)===a.BX.GROUP},d=function(e){return u(e)?e.name:(0,o.Gf)(e)},m=function(e){return e.map((function(e){return s(s({},e),{},{type:a.BX.GROUP})}))},f=function(e){return e.map((function(e){return s(s({},e),{},{type:a.BX.USER})}))},p=function(e){var t=[i.$A.ADMIN,i.$A.POWER];return c(e)&&(t.includes(e.role)||e.role&&e.role.includes(i.$A.ADMIN))},v=function(e){var t,n;return c(e)?e.id.toString():null!==(t=null===(n=e.id)||void 0===n?void 0:n.toString())&&void 0!==t?t:e.name}},453461:function(e,t,n){n.d(t,{Re:function(){return a},aT:function(){return l},ji:function(){return i}});var r=n(266606);function o(e,t){r.Z.track("URL Files: ".concat(e),t)}function a(){o("create dialog shown")}function i(){o("created")}function l(e,t){o("edited",{isUrlEdited:e.url!==t.url,isFileNameEdited:e.name!==t.name})}},772299:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(115861),o=n(529439),a=n(364687),i=n.n(a),l=n(667294),s=n(240701),c=n(141797),u=n(579621),d=n(32570),m=n(154177),f=n(762074),p=n(610861),v=n(397404),E=n(838436),g=n(14186),b=n(675356),O=n(453461),h=(0,f.nD)("button.label"),y=(0,f.nD)("urlFile"),Z=(0,f.nD)("error"),I=(0,v.Sh)().showNotification;function S(e){var t=e.file,n=(0,b.A)(t).onEdit,a=(0,b.q)(s.Z.OPEN_DOCUMENT.DOWNLOAD(t.entryId,t.name)),f=a.isError,S=a.isLoading,P=a.data,N=void 0===P?"":P,C=(0,l.useState)(!1),D=(0,o.Z)(C,1)[0],T=function(){var e=(0,r.Z)(i().mark((function e(t,r){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(A,t);case 3:(0,p.Mr)(),I(v.em.success,y("notifications.urlUpdated")),(0,O.aT)(A,t),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),o=Z("default"),(0,m.k0)(e.t0)&&(o=(0,m.e$)(e.t0,Z("default")),(a=(0,m.lt)(e.t0))&&r.setErrors(a)),I(v.em.error,o);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();if(D||S)return l.createElement(l.Fragment,null,l.createElement(c.Z.Header,null,l.createElement(c.Z.Title,null,y("modal.editTitle"))),l.createElement(c.Z.Body,null,l.createElement("div",{className:"EZq58kqf9wvaT7Xg54E7"},l.createElement(d.Z,null))),l.createElement(c.Z.Footer,null,l.createElement(u.Z,{type:u.Z.SECONDARY,onClick:p.Mr},h("cancel")),l.createElement(u.Z,{disabled:!0},h("save"))));if(f)return l.createElement(l.Fragment,null,l.createElement(c.Z.Header,null,l.createElement(c.Z.Title,null,y("modal.editTitle"))),l.createElement(c.Z.Body,null,Z("failedToFetchFileContent"),Z("retryAfterError")),l.createElement(c.Z.Footer,null,l.createElement(u.Z,{onClick:p.Mr},h("ok"))));var A={name:t.name.replace(new RegExp(".".concat(E.Z.url,"$")),""),url:N};return l.createElement(g.M,{onSubmit:T,editMode:!0,initialData:A})}function P(e){(0,p.h7)(l.createElement(S,e),{onRequestClose:p.Mr})}},14186:function(e,t,n){n.d(t,{M:function(){return I},Z:function(){return S}});var r=n(204942),o=n(667294),a=n(647512),i=n(141797),l=n(579621),s=n(403455),c=n(531926),u=n(762074),d=n(289098),m=n(610861),f=n(880159),p=n(255725),v=n(735691),E=n(835147);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(0,u.nD)("button.label"),y=(0,u.nD)("storage.actions"),Z=(0,u.nD)("urlFile.modal");function I(e){var t=e.onSubmit,n=e.editMode,b=void 0!==n&&n,I=e.initialData,S=void 0===I?{name:"",url:""}:I,P=e.withLocationField,N=void 0!==P&&P,C=e.folderProps,D=void 0===C?{id:"",path:""}:C,T=function(e){return v.Ry().shape(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:v.Z_().folderItemName().max(245).required(),url:v.Z_().trim().transform((function(e){return(0,E.pW)(null!=e?e:"")?e:(0,E.Ae)(e)})).url().test("is-http(s)",(0,u.t)("urlFile.formErrors.notSupportedUrl"),(function(e){return"string"==typeof e&&e.startsWith("http")})).isValidUrl().max(2e3).required()},e&&{fsItem:v.nK().test("hasValue",(0,u.t)("error.required"),(function(e){var t;return(null==e||null===(t=e.path)||void 0===t?void 0:t.length)>0}))}))}(N),A=(0,p.Z)({id:D.id,path:D.path});return o.createElement(o.Fragment,null,o.createElement(i.Z.Header,null,o.createElement(i.Z.Title,null,Z(b?"editTitle":"createTitle"))),o.createElement(s.J9,{onSubmit:function(e,n){t(O(O({},e),{},{url:e.url.trim()}),n)},initialValues:S,validationSchema:T},o.createElement(s.l0,null,o.createElement(i.Z.Body,null,o.createElement("p",{"data-tid":"create-url-description",className:"hfTAnfvc_IROpm0SdLHc"},Z("description")),o.createElement(d.Text,{name:"url",label:Z("url"),required:!0,alert:Z("urlInfo")}),o.createElement(d.Text,{name:"name",label:Z("name"),required:!0,alert:Z("nameInfo")}),N&&o.createElement(a.Z,{name:"fsItem",label:Z("location"),folderTreeProps:O({includePrivateFolders:!1,getPathConfig:(0,f.f)(y)},D&&{TreeControllerComponent:A}),required:!0})),o.createElement(i.Z.Footer,null,o.createElement(l.Z,{type:l.Z.SECONDARY,onClick:m.Mr},h("cancel")),o.createElement(c.Z,null)))))}function S(e){(0,m.h7)(o.createElement(I,e),{onRequestClose:m.Mr})}},188382:function(e,t,n){var r=n(776327),o=n(240701),a=n(667294),i=n(19309),l=n(986456),s=n.n(l),c=n(762074),u=n(610861),d=n(174816),m=n(722332),f=n(653712),p=n(625735),v=n(737639),E=n(526594),g=n(690489),b=n(827276),O=i.Z.Model.extend({constructor:function(e){return s().extend(this,e),i.Z.Model.prototype.constructor.call(this,{})},isNew:function(){return!1},displayDeleteFailDueToPermissionsModal:function(e){var t=(0,E.j)(e.results).errors;(0,p.w)(a.createElement(p.Z,{title:(0,c.t)("storage.actions.delete")},a.createElement(p.Z.Body,null,a.createElement(v.Z,{title:"deleteFiles.prevalidation.error.delete.title",messages:t})),a.createElement(p.Z.Footer,null,a.createElement(p.Z.CancelButton,{onClick:u.Mr}))))},commit:function(e){var t=this,n=this.folderItems;return m.Z.bulkRemove(n,e).done((function(e){O.checkIfDeleteFailDueToPermissions(e)?t.displayDeleteFailDueToPermissionsModal(e):n.forEach((function(e){r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REMOVE,e)}))}))}});O.DeleteFilesOperation=i.Z.Model.extend({idAttribute:"taskId",url:function(){return o.Z.FILE_SYSTEM_OPERATIONS.DELETE.ROOT},constructor:function(e){return this.folderItems=e.folderItems||[],i.Z.Model.prototype.constructor.call(this,{ids:this.folderItems.map((function(e){return e.id}))})},beforeSaveSync:function(){}}),O.DeleteFileOperationItem=d.Z.OperationItem.extend({idAttribute:"taskId",iLastFakeProgress:0,url:function(){return o.Z.FILE_SYSTEM_OPERATIONS.DELETE.TASK_ID(f.Z.encodePathURIComponent(this.get("taskId")))},constructor:function(e){s().extend(this,{folder:e.folder,folderItems:e.folderItems}),d.Z.OperationItem.prototype.constructor.call(this,{taskId:e.taskId,type:e.type,name:this.getOperationName(),fileCount:this.folderItems.length,processedCount:0,waiting:!1,progress:0}),s().bindAll(this,"fetch")},start:function(){var e=this;d.Z.OperationItem.prototype.start.apply(this),this.folderItems.forEach((function(e){e.set({processing:!0})})),this.fetch({success:function(){e.makeDone()},error:function(t,n){var r;try{r=JSON.parse(n.responseText)}catch(e){r=null}e.makeFailed(r)}})},_progress:function(){},cancel:function(){var e=this;this.off("sync"),this.set("processedCount",0),this.folderItems.forEach((function(e){e.set({processing:!1})})),this.destroy({success:function(t){t.processed&&s().isArray(t.processed)&&(e.set("processedCount",t.processed.length),e.folder.items.remove(t.processed)),e.set("errorMessage",(0,c.t)("deleteFiles.notices.deletionCancelled"))},error:function(){e.set("errorMessage",(0,c.t)("deleteFiles.notices.deletionCancelled"))}}),d.Z.OperationItem.prototype.cancel.call(this,!0,(0,c.t)("operations.item.cancelling"))},destroy:function(e){this.sync("delete",this,e)},makeDone:function(){var e=this;this.set("processedCount",this.get("fileCount")),this.folderItems.forEach((function(t){t.set({processing:!1}),e.folder.items.remove(t),t.get("isFolder")&&r.ZP.trigger(r.ZP.Events.Storage.FOLDER.REMOVE,t)}));var t=this.folderItems,n=O.getDeletionInfo(t.map((function(e){return e.id})),t);this.done(O.getSuccessDeletionMessage(t,n,!0))},makeFailed:function(e){var t=this;this.set("processedCount",0),this.folderItems.forEach((function(e){e.set({processing:!1})}));var n=this.folderItems,r=O.getDeletionInfo(n.map((function(e){return e.id})),n),o=null;if(e){var a=e.errors,l=e.state;Array.isArray(a)?(o=[],a.forEach((function(e){if(l){var a=l.failed,c=l.processed;if(Array.isArray(c)&&c.length>0){t.set("processedCount",c.length);var u=new i.Z.Collection(n.filter((function(e){return s().contains(c,e.id)}))),d=O.getDeletionInfo(c,u);t.folder.items.remove(u.toArray()),o.push(O.getSuccessDeletionMessage(u,d,!0))}if(Array.isArray(a)&&a.length>0){var m=new i.Z.Collection(n.filter((function(e){return s().contains(a,e.id)}))),f=O.getDeletionInfo(a,m);o.push(O.getErrorDeletionMessage(m,f,e,!0))}}else o.push(O.getErrorDeletionMessage(n,r,e,!0))})),o=o.join(" ")):o=(0,g.ZW)()}else o=(0,g.ZW)();this.fail(o||(0,c.t)("deleteFiles.notices.deletionFailed"))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(n,r){e.get("inProgress")&&(s().isUndefined(r)||s().isUndefined(r.taskId)?s().isFunction(t.success)&&t.success(n,r,t):s().delay(e.fetch,500,t))},r=function(e,r){200===r.status&&s().isEmpty(r.responseText)?n(e,r):s().isFunction(t.error)&&t.error(e,r)};d.Z.OperationItem.prototype.fetch.call(this,s().extend({},t,{error:r,success:n}))},getOperationName:function(){var e=null,t=this.folderItems,n=O.getDeletionInfo(t.map((function(e){return e.id})),t);switch(!0){case n.multipleFiles:e=(0,c.t)("deleteFiles.notices.BULK.deletingFiles",{count:t.length});break;case n.multipleFolders:e=(0,c.t)("deleteFiles.notices.BULK.deletingFolders",{count:t.length});break;default:e=(0,c.t)("deleteFiles.notices.BULK.deletingItems",{count:t.length})}return e},isQualifiedPath:function(e){return this.folder?e===this.folder.get("path"):d.Z.OperationItem.prototype.isQualifiedPath.call(this,e)},parse:function(e){var t,n=s().clone(this.attributes);return e&&e.percentage&&((t=e.percentage/100)<0&&(t=Math.min(1,this.iLastFakeProgress+=.1*Math.random())),s().extend(n,{progress:t,loaded:t*n.size})),n}}),O.checkIfDeleteFailDueToLock=function(e){return e.results&&e.results.length&&423===e.results[0].status&&e.results[0].errors&&e.results[0].errors[0]&&"LOCKED"===e.results[0].errors[0].code},O.checkIfDeleteFailDueToPermissions=function(e){var t=/ReadWrite|RW|Owner|Full|Editor/i,n=s().chain(e.results);return n.map((function(e){return e.status})).flatten().any((function(e){return 403===e})).value()&&n.map((function(e){return e.errors})).flatten().map((function(e){return e.msg})).any((function(e){return t.test(e)})).value()},O.getErrorDeletionMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{code:"DEFAULT",msg:""},r=arguments.length>3?arguments[3]:void 0;return n.msg?(0,g.ZW)(n):(0,g.eo)({deletionInfo:t,error:n,items:e,bulk:r})},O.getSuccessDeletionMessage=function(e,t,n){return(0,g.Cb)({selectionInfo:t,items:e,bulk:n})},O.getDeletionInfo=function(e,t){var n={singleFile:!1,singleFolder:!1,multipleFiles:!1,multipleFolders:!1,filesAndFolders:!1};if(1===e.length)t.get(e[0]).get("isFolder")?s().extend(n,{singleFolder:!0,type:b.m.SINGLE_FOLDER}):s().extend(n,{singleFile:!0,type:b.m.SINGLE_FILE});else{for(var r=!1,o=!1,a=0;a<e.length;a+=1)t.get(e[a]).get("isFolder")?o=!0:r=!0;r&&!o?s().extend(n,{multipleFiles:!0,type:b.m.MULTIPLE_FILES}):o&&!r?s().extend(n,{multipleFolders:!0,type:b.m.MULTIPLE_FOLDERS}):s().extend(n,{filesAndFolders:!0,type:b.m.FILES_AND_FOLDERS})}return n},t.Z=O},449654:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(667294),o=n(45697),a=n.n(o),i=n(610861),l=n(143046),s=n(705391);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.folderDetails,n=e.name,o=e.description,a=e.subType,l=e.iconName,c=e.entryPoint;(0,i.h7)(r.createElement(s.Z,{onClose:i.Mr,name:n,iconName:l,description:o,subType:a,folderDetails:t,entryPoint:c}),{onRequestClose:i.Mr,size:i.ZP.sizes.XXL,withCloseButton:!0,isScrollable:!0})}c.propTypes={folderDetails:a().shape({id:a().string,name:a().string,path:a().string}),name:a().string,description:a().string,iconName:a().string,entryPoint:a().string,subType:a().oneOf(Object.values(l.Tn))}},882365:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(667294),o=n(762074),a=n(936),i=n(87796),l=n(284686),s=(0,o.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant");function c(){return r.createElement(r.Fragment,null,r.createElement(a.Z,{name:"name",label:s("name"),required:!0}),r.createElement(l.Z,{name:"iconName",placeholder:s("iconPicker.placeholder"),label:s("iconPicker.label"),required:!0,infoTooltip:s("iconPicker.iconInfo")}),r.createElement(i.Z,{name:"description",label:s("description"),rows:3}),r.createElement(i.Z,{infoTooltip:s("noResponseMessage.info"),name:"noResponseMessage",label:s("noResponseMessage.title"),rows:3,required:!0}))}},705391:function(e,t,n){n.d(t,{Z:function(){return he}});var r=n(93433),o=n(529439),a=n(667294),i=n(610861),l=n(601714),s=n(221752),c=n(397404),u=n(267807),d=n(154177),m=n(833331),f=n(904975),p=n(531081),v=n(420522),E=n(349905),g=n(762074),b=n(307179),O=n(143046),h=n(460474),y=n(869632),Z=n(762144),I=n(13764),S=n(403455),P=n(809742),N=n(32570),C=(0,g.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant"),D=(0,g.nD)("knowledgeBaseAssistant");function T(e){var t=e.mode,n=e.knowledgebases,i=e.onSelect,l=e.isLoading,s=e.selectedFolderDetails,c=(0,h.Z)("isKBAExcludedFoldersEnabled"),u=(0,S.U$)("scope"),d=(0,o.Z)(u,3),m=d[0].value,p=void 0===m?[]:m,v=d[2].setValue,E=(0,S.U$)("excludedScope"),g=(0,o.Z)(E,3),b=g[0].value,O=void 0===b?[]:b,y=g[2].setValue,T=t===f.Xy.EDIT,A=t===f.Xy.CREATE,R=function(e){var t,r,o=null===(t=e.path)||void 0===t?void 0:t.toLocaleLowerCase();return T?{disableCheckbox:!0,hint:C("edit.disableFolders")}:0===e.indentLevel?{disableCheckbox:!0,hint:C("create.disableTopLevelFolders")}:[I._I.OWNER,I._I.FULL].includes(e.permission)?null!=p&&null!==(r=p[0])&&void 0!==r&&r.path&&!"".concat(e.path,"/").startsWith("".concat(p[0].path,"/"))?{disableCheckbox:!0,hint:C("create.disableFolders")}:O.find((function(t){return!(!t.path||!t.indentLevel)&&"".concat(e.path,"/").startsWith("".concat(t.path,"/"))&&e.indentLevel>t.indentLevel}))?{disableCheckbox:!0,hint:C("deselectedPathSubfolder")}:n.foldersAreKnowledgeBase.find((function(e){return o===e}))||n.foldersAreKnowledgeBase.find((function(e){return o.startsWith(e)&&o.split("/").length>e.split("/").length}))?{disableCheckbox:!0,hint:D("alreadyCreated")}:n.foldersChildrenAreKnowledgeBase.find((function(e){return o===e}))?{disableCheckbox:!0,hint:D("childFolderHasKnowledgeBase")}:{disableCheckbox:!1,hint:""}:{disableCheckbox:!0,hint:C("permissionError")}},w=s&&s.totalFilesCount>s.fileCountLimit;return a.createElement("div",{className:"DwO8W3QqdaxtwLOs6qV7"},!T&&w&&a.createElement(P.Z,{type:P.Z.types.WARN,fullWidth:!0},D("fileLimit.message",{limit:null==s?void 0:s.fileCountLimit.toLocaleString()})),!T&&a.createElement(P.Z,{type:P.Z.types.INFO,fullWidth:!0},C("fullPermissionMessage")),a.createElement("div",null,a.createElement("div",{className:"UDLB0xwVVt5UNaLOvuQ8 di8dHEGxZgrT5KjDiNkg vSadc0pqvD7KtbqURZCR"},C("modal.select")),a.createElement("div",{className:"s8ZEA2YScyflNZJtxsig"},C("create.description"))),a.createElement("div",{className:"wMuBodmEK1b0EdFf28Mw eugzcnL4uVMlgbRkfTqa"},l&&a.createElement("div",{className:"TsuD43b5qfYosFJVjA9N"},a.createElement(N.Z,{size:N.Z.MEDIUM})),a.createElement(Z.Z,{unselectChildFoldersOnParentCheck:!1,mode:A&&!c?Z.Z.MODES.MULTISELECT_WITH_SUBFOLDERS:Z.Z.MODES.MULTISELECT,selectedFolders:p.map((function(e){return null==e?void 0:e.path})),deselectedFolders:O.map((function(e){return null==e?void 0:e.path})),className:"vV7F_2rcdG8h1YsbY_lU",onFolderCheck:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e[0],o=O.filter((function(t){return!e.find((function(e){return e.path===t.path}))})),a=n?Array.from(new Set([].concat((0,r.Z)(t),(0,r.Z)(o)))).filter((function(e){var t;return!e.isChecked&&e.path!==n.path&&(null===(t="".concat(e.path,"/"))||void 0===t?void 0:t.startsWith("".concat(n.path,"/")))})):[],l=a.filter((function(e){return!a.find((function(t){var n;return t.path&&(null===(n="".concat(e.path,"/"))||void 0===n?void 0:n.startsWith("".concat(t.path,"/")))&&t.path!==e.path}))}));v(e),T||(y(null!=l?l:[]),null==i||i(e))},includeInactiveFolders:!1,includePrivateFolders:!0,isFolderCheckboxDisabled:function(e){return R(e).disableCheckbox},getFolderCheckboxDisabledTooltip:function(e){return R(e).hint}})))}var A=n(882365),R=n(735691),w=(0,g.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant.modal"),L=R.Ry().shape({name:R.Z_().trim().ensure().required().min(2).max(128),description:R.Z_().optional().max(1e3),noResponseMessage:R.Z_().trim().ensure().required().max(1e3),iconName:R.Z_().required()}),F=R.Ry().shape({scope:R.IX().of(R.Ry().shape({id:R.Z_().required()}).required()).required().min(1,w("scopeError"))}),M=R.Ry().shape({prompts:R.IX().of(R.Ry().shape({promptId:R.Z_().required(),promptType:R.Z_().required()}))}),k=n(204942),j=n(294184),_=n.n(j),x=n(698607),U=n(681680),G=n(950455),V=n(38638),B=n(579621),H=n(590677),z=n(436942),W=n(724958),q=n(5567),K=n(124333),Y=(0,g.nD)("knowledgeBaseAssistant"),Q=n(210798),X=n(884436),J=(0,g.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant.prompts.noResults"),$=function(e){var t=e.promptsList,n=void 0===t?[]:t,r=e.filters,o=r.search,i=r.selectedType,l=r.selectedPrompts,s=r.selectedPromptsOnly,c=r.handlePromptSelect,u=function(e){var t=e.search,n=e.selectedType,r=e.selectedPromptsOnly,o=e.promptsList,a=e.selectedPrompts.map((function(e){return e.promptId}));if(r&&(o=o.filter((function(e){return a.includes(e.promptId)}))),t){var i=t.toLocaleLowerCase();o=o.filter((function(e){return e.title.toLocaleLowerCase().includes(i)}))}return n&&(o=o.filter((function(e){return(e.applicableTo||[]).includes(n)}))),{filteredList:o}}({search:o,selectedType:i,selectedPromptsOnly:s,selectedPrompts:l,promptsList:n}),d=u.filteredList,m=void 0===d?[]:d,f=l.map((function(e){return e.promptId})),p=!!(o||i||s)&&0===(null==m?void 0:m.length);return a.createElement("div",{className:_()(X.Z.promptsGridContainer,(0,k.Z)({},X.Z.removeScroll,p))},p?a.createElement("div",{className:X.Z.noResults},a.createElement(K.Z,{illustration:"search"},a.createElement(K.Z.Heading,null,J("title")),a.createElement(K.Z.Description,null,J("description")))):a.createElement("div",{className:X.Z.promptsGrid},m.map((function(e){var t=null!=e&&e.iconName?q[null==e?void 0:e.iconName]:"sparklesGradient",n=(null==e?void 0:e.applicableTo)||[];return a.createElement(W.Z,{isSelected:f.includes(e.promptId),key:e.promptId,onClick:function(){return c(e)},title:e.title,description:e.description,icon:t,"data-tid":"prompt"},n.length>0&&a.createElement("div",{className:X.Z.badgeWrapper},a.createElement(Q.Z,{data:n})))}))))};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var te=(0,g.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant"),ne=function(){var e,t,n,i,l,s,c,u=(0,H.Z)().canViewPrompts,d=(0,z.wt)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,k.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({enabled:!u},m.S)),f=(0,z.$1)({enabled:u}),p=d.isLoading||f.isLoading,v=u?[].concat((0,r.Z)((null==f||null===(e=f.data)||void 0===e||null===(t=e.categoryToPromptsMap)||void 0===t?void 0:t.SYSTEM)||[]),(0,r.Z)((null==f||null===(n=f.data)||void 0===n||null===(i=n.categoryToPromptsMap)||void 0===i?void 0:i.CUSTOM)||[])):null==d||null===(l=d.data)||void 0===l?void 0:l.prompts;v=null===(s=v)||void 0===s?void 0:s.sort((function(e,t){var n,r,o,a;return null==e||null===(n=e.title)||void 0===n||null===(r=n.toLocaleLowerCase)||void 0===r?void 0:r.call(n).localeCompare(null==t||null===(o=t.title)||void 0===o||null===(a=o.toLocaleLowerCase)||void 0===a?void 0:a.call(o))}));var E,g,b,O,h=(0,S.U$)("prompts"),y=(0,o.Z)(h,3),Z=y[0].value,I=void 0===Z?[]:Z,P=y[2].setValue,C=(0,a.useState)(""),D=(0,o.Z)(C,2),T=D[0],A=D[1],R=(0,a.useState)(!1),w=(0,o.Z)(R,2),L=w[0],F=w[1],M=(0,a.useState)(null),j=(0,o.Z)(M,2),W=j[0],q=j[1],K=(g=null==(E=v||[])?void 0:E.map((function(e){return e.applicableTo||[]})).flat(),b=new Set(g),O=[{id:"any",label:Y("options.any"),value:null}],[].concat(O,(0,r.Z)(Array.from(b).map((function(e){return{id:e,label:e,value:e}}))))),Q=I.length>0,J=te("prompts.selectedPromptsOnly"),ne=I.length?"".concat(J," (").concat(null==I?void 0:I.length,")"):J,re={handlePromptSelect:function(e){if(I.find((function(t){return t.promptId===e.promptId}))){var t=I.filter((function(t){return t.promptId!==e.promptId}));P(t)}else P([].concat((0,r.Z)(I),[e]))},search:T,selectedType:W,selectedPrompts:I,selectedPromptsOnly:L},oe=(null===(c=v)||void 0===c?void 0:c.length)||0,ae=oe>0?"(".concat(oe,")"):"";return a.createElement("div",{className:X.Z.container},a.createElement("h3",{className:X.Z.title},te("prompts.title")),a.createElement("h4",{className:X.Z.description},te("prompts.description")),a.createElement("p",{className:X.Z.subTitle},te("prompts.subTitle"),ae),a.createElement("div",{className:X.Z.filters},a.createElement("div",{className:X.Z.filterActions},a.createElement("span",{className:X.Z.search},a.createElement(U.Z,{value:T,placeholder:te("prompts.searchPlaceholder"),onChange:function(e){var t=e.target.value;A(t)},onClear:function(){return A("")}})),a.createElement("span",{className:X.Z.dropdown},a.createElement(G.Z,{options:K,value:W,onChange:function(e){q(e)},placeholder:te("prompts.labels")}))),a.createElement("div",{className:X.Z.actions},a.createElement(V.Z,{checked:L,suffix:a.createElement(x.Z,{disabled:Q,tooltip:te("prompts.noPromptsSelected")},a.createElement("span",{className:_()((0,k.Z)({},X.Z.pointer,!Q))},ne)),onChange:function(e){F(e.target.checked)}}),a.createElement(B.Z,{type:B.Z.TERTIARY,onClick:function(){P([])},disabled:!Q},a.createElement("span",{className:_()(X.Z.clear,(0,k.Z)({},X.Z.selectedFilter,Q))},te("prompts.clearSelected"))))),p?a.createElement("div",{className:X.Z.spinner},a.createElement(N.Z,null)):a.createElement($,{promptsList:v,filters:re}))},re=n(799532),oe=n(581355),ae=n(376593),ie=n(366123),le=n(308918),se=n(845062),ce=n(829427),ue=n(57676),de=(0,g.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant");function me(){var e=(0,S.U$)("prompts"),t=(0,o.Z)(e,3),n=t[0].value,i=void 0===n?[]:n,l=t[2].setValue,s=(0,H.Z)().canCreatePrompt,c=(0,a.useState)(!1),u=(0,o.Z)(c,2),d=u[0],m=u[1],f=(0,ue.J)({selectedPrompts:i,showSelectedPromptsOnly:d}),p=f.filteredPromptsData,v=f.isLoading,E=f.isError,g=f.primaryFilter,b=f.setPrimaryFilter,O=f.filters,h=f.setFilters,y=f.availableJobTypes,Z=f.availableTaskCategories,I=f.documentTypes,P=f.onCreateNewPrompt;return a.createElement("div",{className:"VvYO4u0dwVdY5NIwjPuA"},a.createElement("div",{className:"dKeup4cmjdGvAOcOgRCg"},a.createElement("h3",{className:"IIQtT0fTWeQZ8VLPf74q di8dHEGxZgrT5KjDiNkg vSadc0pqvD7KtbqURZCR"},de("prompts.title")),a.createElement(x.Z,{tooltip:de("prompts.description")},a.createElement(re.Z,{icon:oe.yo,size:re.Z.sizes.M}))),a.createElement("div",{className:"B0Bc4W4iFLuECqYOfD_g"},a.createElement(ae.Z,{selectedFilter:g,onFilterChange:function(e){return b(e)}}),a.createElement(ie.Z,null),a.createElement(le.Z,{documentTypes:I,jobTypes:y,taskCategories:Z,filters:O,setFilters:h,isViewPrompts:!0,showBottomBorder:!1})),a.createElement("div",{className:"dzvuqmmsPOj6xw_Uhzos"},a.createElement(V.Z,{checked:d,disabled:!i.length,suffix:a.createElement(x.Z,{disabled:i.length>0,tooltip:de("prompts.noPromptsSelected")},a.createElement("span",null,i.length>0?"".concat(de("prompts.selectedPromptsOnly")," (").concat(null==i?void 0:i.length,")"):de("prompts.selectedPromptsOnly"))),onChange:function(e){m(e.target.checked)}}),a.createElement(B.Z,{type:B.Z.TERTIARY,onClick:function(){l([]),m(!1)},disabled:!i.length},de("prompts.clearSelected"))),a.createElement("div",{className:"xI5rrHTSqYIFApPRQYLo"},a.createElement(se.Z,{isError:E,isLoading:v,prompts:p,primaryFilter:g,filters:O,onCreateNewPrompt:function(){P({shouldPushAndPopModal:!0})},canCreatePrompt:s,showSelectedPromptsOnly:d}),!(E||v||!p.length)&&a.createElement("div",{className:"aeVmNM5OcVdXE_yiiuZL"},p.map((function(e){var t=e.promptId;return a.createElement(ce.Z,{key:t,prompt:e,showActions:!1,selectedPrompt:i.find((function(e){return e.promptId===t})),setSelectedPrompt:function(){return function(e){var t=e.prompt,n=i.find((function(e){return e.promptId===t.promptId}));l(n?i.filter((function(e){return e.promptId!==t.promptId})):[].concat((0,r.Z)(i),[t]))}({prompt:e})}})})))))}var fe=function(e){var t=e.list,n=void 0===t?[]:t,r=new Set,o=new Set;return null==n||n.forEach((function(e){var t,n=null===(t=e.paths[0])||void 0===t?void 0:t.path;r.add(n.toLocaleLowerCase());var a=n.split("/");a.length>3&&function(e){var t=e.slice(1,e.length-1),n="";t.forEach((function(e,t){n+="/".concat(e),0!==t&&o.add(n.toLocaleLowerCase())}))}(a)})),{foldersAreKnowledgeBase:r,foldersChildrenAreKnowledgeBase:o}},pe=n(461498),ve=(Object.values({SELECT_FOLDER:"SELECT_FOLDER",BASIC_INFORMATION:"BASIC_INFORMATION"}),[pe.YN.ACTIVE,pe.YN.CREATED]),Ee=(0,g.nD)("knowledgeBaseAssistant.createKnowledgeBaseAssistant"),ge=[F,L,M],be=(0,c.Sh)().hideNotifications,Oe=function(e,t){return null!=t&&t.id?{initialScope:[t],initialExcludedScope:[]}:e?{initialScope:e.filter((function(e){return"EXCLUDED"!==e.status})),initialExcludedScope:e.filter((function(e){return"EXCLUDED"===e.status}))}:{initialScope:[],initialExcludedScope:[]}};function he(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,h.Z)("isPromptLibraryNewDesignEnabled"),g=(0,a.useState)(null),Z=(0,o.Z)(g,2),I=Z[0],S=Z[1],P=(0,h.Z)("isSmartAppCodebooksEnabled"),N=(0,s.ah)({},{select:function(e){return{content:e.content.filter((function(e){return ve.includes(e.status)})),fileLimit:e.fileLimit}},enabled:!0}),C=(0,s.cu)(),D=(0,s.f6)(),R=(0,s.sc)(),w=t.kbaId,L=t.name,F=void 0===L?"":L,M=t.description,k=void 0===M?"":M,j=t.folderDetails,_=void 0===j?null:j,x=t.noResponseMessage,U=void 0===x?"":x,G=t.paths,V=t.subType,B=t.iconName,H=void 0===B?"":B,z=t.entryPoint,W=void 0===z?"-":z,q=t.prompts,K=void 0===q?[]:q,Y=(0,a.useRef)(),Q=l.Z.get("user"),X=w?f.Xy.EDIT:f.Xy.CREATE,J=X===f.Xy.EDIT,$="".concat(Ee(J?"edit.edit":"create.new")),ee=Oe(G,_),te=ee.initialScope,re=ee.initialExcludedScope,oe=(0,a.useMemo)((function(){var e,t;return fe({list:P?null===(e=N.data)||void 0===e?void 0:e.content.filter((function(e){return e.subType!==O.Tn.CODEBOOKS_AGENT})):null===(t=N.data)||void 0===t?void 0:t.content})}),[null===(e=N.data)||void 0===e?void 0:e.content,P]),ae=oe.foldersAreKnowledgeBase,ie=oe.foldersChildrenAreKnowledgeBase,le=function(e,t){var n,o=t.setSubmitting,a=t.setStatus;if((0,c.yK)(),w){(0,u.n2)({assistantName:e.name,identifier:w});var l=e.excludedScope.map((function(e){return{folderId:e.folderId,status:m.B.EXCLUDED}}));n={name:e.name,description:e.description,kbaId:w,iconName:e.iconName,noResponseMessage:e.noResponseMessage,subType:e.subType,paths:l}}else{(0,u.OG)({assistantName:e.name,entryPoint:W});var s={folderId:e.scope[0].id},f=e.excludedScope.map((function(e){return{folderId:e.id,status:m.B.EXCLUDED}})),p=[s].concat((0,r.Z)(f));n={name:e.name,description:e.description,type:e.type,iconName:e.iconName,noResponseMessage:e.noResponseMessage,paths:p,subType:V||O.Tn.USER_DEFINED}}n.prompts=e.prompts,(0,(w?D:R).mutate)(n,{onSuccess:function(){(0,c.c0)(c.em.success,Ee(w?"edit.updated":"create.preparing")),(0,i.Mr)()},onError:function(e){if(o(!1),(0,d.k0)(e)){var t=(0,d.lt)(e),n=(0,d.e$)(e,"");n?(0,c.c0)(c.em.error,n):t&&a({errors:t})}else(0,c.c0)(c.em.error,Ee(w?"edit.error":"create.error"))}})},se=function(e){var t,n=e.length&&(null===(t=e[0])||void 0===t?void 0:t.id);n?C.mutate({folderIds:[n]},{onSuccess:function(e){S(e)}}):S(null)},ce=function(){return[{name:Ee("steps.folders"),component:a.createElement(T,{mode:X,knowledgebases:{foldersAreKnowledgeBase:Array.from(ae),foldersChildrenAreKnowledgeBase:Array.from(ie)},onSelect:se,selectedFolderDetails:I,isLoading:C.isLoading}),icon:p.Hf},{name:Ee("steps.basicInformation"),component:a.createElement(A.J,null),icon:v.rY},{name:Ee("steps.prompts"),component:n?a.createElement(me,null):a.createElement(ne,null),icon:E.x}]},ue={name:F,description:k,type:f.T5.KNOWLEDGE_BASE,scope:te,excludedScope:re,iconName:H,isEditMode:J,prompts:K,subType:V,noResponseMessage:U||Ee("defaultNoResponseMessage",{name:(0,b.v2)(Q),email:Q.mail})};return a.createElement(y.Z,{title:$,instanceRef:Y,initialValues:ue,validationSchemas:ge,onSubmit:le,steps:ce(),isLoading:C.isLoading,selectedFolderDetails:I,hideNotifications:be})}},210798:function(e,t,n){var r=n(884506),o=n(667294),a=n(698607),i=n(499345),l=n(652421),s=n(884436);function c(e){var t=e.data;return o.createElement("span",{className:s.Z.itemWrapper},t.map((function(e){return o.createElement(l.Z,{color:l.Z.WHITE,type:l.Z.types.OUTLINED,size:l.Z.sizes.MEDIUM,uppercase:!1,key:e},e)})))}t.Z=function(e){var t=e.data,n=(0,r.Z)(t),u=n[0],d=n.slice(1);return o.createElement(l.Z,{color:l.Z.COOL_GRAY,type:l.Z.types.OUTLINED,size:l.Z.sizes.MEDIUM,uppercase:!1,dataTid:"tile-badge"},o.createElement("div",{className:s.Z.badgeContent},o.createElement(i.Z,null,u),d.length?o.createElement(a.Z,{tooltip:o.createElement(c,{data:t})},o.createElement("span",{className:s.Z.labelsCount,"data-tid":"tile-badge-count"},"+".concat(d.length))):null))}},869632:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(145987),o=n(529439),a=n(667294),i=n(403455),l=n(610861),s=n(579621),c=n(531926),u=n(953848),d=n(762074),m=n(493589),f=n(506647),p=n(676839),v="lBpC1sEJkto2oDcqhWkG",E=n(80373),g=(0,d.nD)("knowledgeBaseAssistant.fileLimit");function b(e){var t=e.fileCount,n=e.onClose,r=e.onConfirm;return a.createElement(E.Z,{onCancel:n,onConfirm:function(){r({onClose:n})},messages:{title:g("title"),body:a.createElement("span",null,g("message",{limit:t})),cancel:(0,d.t)("button.label.goBack"),confirm:(0,d.t)("button.label.confirm")}})}var O=["values"];function h(e){var t=e.instanceRef,n=e.isLoading,E=e.title,g=e.initialValues,h=e.validationSchemas,y=e.onSubmit,Z=e.steps,I=e.selectedFolderDetails,S=e.lastStepButtonText,P=void 0===S?(0,d.t)("button.label.save"):S,N=e.hideNotifications,C=(0,a.useState)(0),D=(0,o.Z)(C,2),T=D[0],A=D[1],R=(0,a.useRef)(),w=h[T],L=Z.length-1,F=T===L;(0,a.useEffect)((function(){t.current={setActiveStep:A}}),[t]);var M=function(e,t){F?y(e,t):(A(Math.min(L,T+1)),t.setTouched({}),t.setSubmitting(!1))};return a.createElement(a.Fragment,null,a.createElement(l.ZP.Header,null,a.createElement(l.ZP.Title,null,E)),a.createElement(i.J9,{initialValues:g,validationSchema:w,onSubmit:M},(function(e){var t=!(g.isEditMode||e.dirty&&e.isValid);n&&(t=!0);var o=0===T&&!g.isEditMode&&I&&I.totalFilesCount>I.fileCountLimit;return a.createElement(i.l0,null,a.createElement(u.Z,{formRef:R}),a.createElement("div",{className:"p1U6d2oNJgnyaUPNaf4W"},a.createElement("div",{className:"vP1WsDaZ59_TZpi6FMk5"},a.createElement(m.Z,{activeStepIdx:T},Z.map((function(e){var t=e.name,n=e.icon;return a.createElement(f.Z,{key:t,label:t},a.createElement(p.Z,{icon:n}))})))),Z[T].component),a.createElement(l.ZP.Footer,null,a.createElement("div",{className:"MVUObb6tOIvQDSa2fnzw"},a.createElement("div",{className:v},T>0&&a.createElement(s.Z,{type:s.Z.SECONDARY,onClick:function(){return function(e){e.setErrors({}),A(Math.max(0,T-1))}(e)}},(0,d.t)("button.label.back"))),a.createElement("div",{className:v},a.createElement(s.Z,{type:s.Z.SECONDARY,onClick:function(){(0,l.Mr)(),null==N||N()}},(0,d.t)("button.label.cancel")),o?a.createElement(s.Z,{type:s.Z.PRIMARY,onClick:function(){return function(e){!function(e){var t=e.fileCount,n=e.onConfirm,r=e.onClose;(0,l.Ll)(a.createElement(b,{fileCount:t,onClose:r,onConfirm:n}),{onRequestClose:r})}({fileCount:null==I?void 0:I.fileCountLimit,onConfirm:function(){return function(e){var t=e.values,n=(0,r.Z)(e,O);(0,l.GZ)(),M(t,n)}(e)},onClose:l.GZ})}(e)},disabled:t},(0,d.t)("button.label.next")):a.createElement(c.Z,{disabled:t,idleText:F?P:(0,d.t)("button.label.next")})))))})))}},222549:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(204942),o=n(145987),a=n(667294),i=n(645975),l=n(354111),s=n(762074),c=(n(563368),n(241820)),u=n(130892),d=["customMetadataInfo","key","type","operator","value"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=(0,s.nD)("metadataRulesSettings.labels.form"),v=function(e){var t,n,r=e.rule,s=e.minimized,m=void 0!==s&&s,v=e.withHeader,E=void 0===v||v,g=e.maxRows,b=function(e){return m?a.createElement("span",{className:"HHVCloHnUpUOV_lo7ULl NEl23SpAWOi7njWP_WLS qqGfbuN2RooWpKmkockU eugzcnL4uVMlgbRkfTqa"},e):e},O=[{accessor:"property",Header:b(p("propertyLabel")),Cell:i.Z},{accessor:"relative",Header:b(p("operatorLabel"))},{accessor:"value",Header:b(p("valueLabel")),Cell:i.Z,width:m?150:300}],h=function(e,t,n){return t===c.e_.SYSTEM_METADATA?c.Lh[e]:null==n?void 0:n.keyDisplayName},y=null===(t=g>0?null===(n=r.criteria)||void 0===n?void 0:n.slice(0,g):r.criteria)||void 0===t?void 0:t.map((function(e){var t=e.customMetadataInfo,n=e.key,r=e.type,a=e.operator,i=e.value,l=(0,o.Z)(e,d);return{property:h(n,r,t),relative:(0,u.B9)(r,a,t),value:(0,u.Ad)({key:n,criteriaType:r,value:i,rest:f(f({},l),{},{propertyType:null==t?void 0:t.type})})}}));return null!=y&&y.length?a.createElement(l.Z,{condensed:m,columns:O,data:y,configuration:{withHeader:E}}):null}},328912:function(e,t,n){var r=n(204942),o=n(266606);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t=e.action;o.Z.track("Metadata Rule Settings: Rule Form Opened",{Action:t})}function s(e){var t=e.action,n=e.ruleDetails,r=e.isSuccessful,a=e.errorCode,l=e.errorMessage;o.Z.track("Metadata Rules Settings: Rule Saved",i({Action:t,Success:r,ruleDetails:n},!r&&{"Error Code":a,"Error Message":l}))}t.Z={ruleCreated:function(e){var t=e.isSuccessful;s({action:"create",ruleDetails:e.ruleDetails,isSuccessful:t,errorCode:e.errorCode,errorMessage:e.errorMessage})},ruleEdited:function(e){var t=e.isSuccessful,n=e.errorCode,r=e.errorMessage;s({action:"edit",ruleDetails:e.ruleDetails,isSuccessful:t,errorCode:n,errorMessage:r})},ruleListingOpened:function(){o.Z.track("Metadata Rule Settings: Rules Listing Opened")},newRuleFormOpened:function(){l({action:"create"})},existingRuleFormOpened:function(){l({action:"edit"})},ruleDeletionConfirmed:function(e){var t=e.isSuccessful,n=e.errorMessage;!function(e){var t=e.deletionObject,n=e.ruleDetails,r=e.isSuccessful,a=e.errorMessage;o.Z.track("Metadata Rule Settings: Deletion Confirmed",i({"Deletion Object":t,"Rule Details":n,isSuccessful:r},!r&&{"Error Message":a}))}({deletionObject:"rule",ruleDetails:e.ruleDetails,isSuccessful:t,errorMessage:n})},detailsAndOptionsRulesSaved:function(e){var t,n,r,a,l;t={ruleCount:e.ruleCount,isSuccessful:e.isSuccessful,folderId:e.folderId,errorMessage:e.errorMessage},n=t.ruleCount,r=t.isSuccessful,a=t.folderId,l=t.errorMessage,o.Z.track("Details & Options: Metadata Rules Saved",i({"Rule Count":n,"Folder Id":a,isSuccessful:r},!r&&{"Error Message":l}))},ruleListingFolderTreeEdit:function(e){var t=e.isSuccessful,n=e.ruleDetails,r=e.errorMessage;o.Z.track("Metadata Rules Settings: Folder Tree Updated",i({Action:"edit",Success:t,ruleDetails:n},!t&&{"Error Message":r}))}}},563368:function(e,t,n){var r=n(45697),o=n.n(r),a=n(742341),i=(o().shape({ruleName:o().string,ruleLabel:o().string,ruleId:o().string,ruleDescription:o().string,criteriaCount:o().number,criteria:o().arrayOf(o().shape({type:o().string,schemaName:o().string,operator:o().string,key:o().string,value:o().string})),folderAssociations:o().arrayOf(o().shape({folderId:o().string,path:o().string})),isRuleEditable:o().bool}),o().shape({name:o().string,displayName:o().string,helpText:o().string,priority:o().number,type:o().oneOf(Object.values(a.Z.propertyType)),data:o().arrayOf(o().string)}));o().shape({displayName:o().string,name:o().string,editable:o().bool,inheritable:o().bool,priority:o().number,scope:o().oneOf(Object.values(a.Z.scope)),keys:o().arrayOf(i)})},690489:function(e,t,n){n.d(t,{Cb:function(){return d},ZW:function(){return p},eo:function(){return E},ul:function(){return m}});var r=n(204942),o=n(776327),a=n(762074),i=n(827276);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=Object.values(i.m).reduce((function(e,t){return s(s({},e),{},(0,r.Z)({},t,"".concat(t,"SuccessfullyDeleted")))}),{});function u(e){var t,n,r,o=(null===(t=e.at)||void 0===t?void 0:t.call(e,0))||e[0];return null!==(n=null===(r=o.get)||void 0===r?void 0:r.call(o,"name"))&&void 0!==n?n:o.name}function d(e){var t=e.selectionInfo,n=t.length,r=t.type,o=e.items;return(e.bulk?(0,a.nD)("deleteFiles.notices.BULK"):(0,a.nD)("deleteFiles.notices"))(c[r],{itemname:u(o),count:n})}function m(e){var t=d({selectionInfo:e.selectionInfo,items:e.items,bulk:e.bulk});o.ZP.trigger(o.ZP.Events.Storage.NOTIFICATION.SHOW,"success",t)}var f={code:"DEFAULT",msg:""};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return e.msg&&(0,a.Gg)("error.".concat(e.msg))?(0,a.t)("error.".concat(e.msg)):e.msg||(0,a.t)("error.default")}var v=Object.values(i.m).reduce((function(e,t){return s(s({},e),{},(0,r.Z)({},t,t))}),{});function E(e){var t=e.deletionInfo.type,n=e.error,r=void 0===n?f:n,o=e.items;return(e.bulk?(0,a.nD)("deleteFiles.notices.BULK.".concat(r.code)):(0,a.nD)("deleteFiles.notices.".concat(r.code)))(v[t],{itemname:u(o),count:o.length,defaultValue:r.msg})}},155561:function(e,t,n){n.d(t,{F:function(){return s}});var r=n(153672),o=n(296924),a=n(13764),i=n(460474),l=n(466986);function s(e){var t=e.permission,n=e.resourceType,s=(0,r.ZP)().data,c=(0,i.Z)("teamViewEnabled"),u=(0,i.Z)("teamManagementImprovementsEnabled");return!!(c&&s&&n)&&(n===l.v8.PROJECT?function(e){var t,n,r,i=e.env,l=e.permission,s=e.isTeamManagementImprovementsEnabled;if((0,o.GJ)(i))return!0;var c=null!==(t=null===(n=i.workgroup.typesSettings.powerUserSettings)||void 0===n?void 0:n.userCanViewAllGroups)&&void 0!==t&&t,u=null!==(r=i.ui.display.isProjectManager)&&void 0!==r&&r,d=(0,o._P)(i);return s?d&&c&&(0,a.Jg)(l):d&&c&&u&&(0,a.mF)(l)}({permission:t,env:s,isTeamManagementImprovementsEnabled:u}):function(e){var t,n,r=e.env,i=e.permission,l=e.isTeamManagementImprovementsEnabled;if((0,o.GJ)(r))return!0;var s=null!==(t=null===(n=r.workgroup.typesSettings.powerUserSettings)||void 0===n?void 0:n.userCanViewAllGroups)&&void 0!==t&&t,c=(0,o._P)(r);return l?c&&s&&(0,a.Jg)(i):c&&s&&(0,o.Iw)(r)&&(0,a.mF)(i)}({permission:t,env:s,isTeamManagementImprovementsEnabled:u}))}},992163:function(e,t,n){n.d(t,{O:function(){return r.Z}});var r=n(110326)},110326:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(153672),o=n(296924),a=n(460474);function i(){var e=(0,a.Z)("showCanPowerUserCreateGroupsEnabled"),t=(0,r.ZP)().data;if((0,o.GJ)(t))return!0;if((0,o.Kg)(t))return!1;var n=t.workgroup.typesSettings.powerUserSettings,i=void 0===n?{}:n,l=i.canCreateGroups,s=void 0!==l&&l,c=i.canViewUsersAndGroups,u=void 0!==c&&c,d=t.ui.display.canManageGroups,m=void 0!==d&&d;return e?m||s&&u:m||u}},536275:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(487462),o=n(215671),a=n(143144),i=n(497326),l=n(360136),s=n(182963),c=n(661120),u=n(204942),d=n(667294),m=n(986456),f=n.n(m),p=n(619755),v=n.n(p),E=(n(59296),n(294184)),g=n.n(E);function b(e){var t=e.tabs,n=e.onSwitch,r=e.activeIndex,o=e.className,a=e.buttonClass,i=e.activeButtonClass;return d.createElement("div",{className:o},t.map((function(e,t){var o=e.id,l=e.label,s=g()(a,t===r&&i);return d.createElement("button",{type:"button",key:o,href:"#".concat(o),className:s,onClick:function(e){return function(e,t,n){e.preventDefault(),v()(e.target).tab("show"),n(t)}(e,t,n)}},l)})))}b.defaultProps={className:"btn-group item-filters-category",buttonClass:"btn",activeButtonClass:"active"};var O=b;function h(e){var t=e.id,n=e.isActive,o=e.ComponentClass,a=e.componentProps,i=void 0===a?{}:a,l=e.tabElement,s=["tab-pane",n&&"active"],c=n?function(e){var t=e.ComponentClass,n=e.componentProps,o=e.tabElement;return t&&d.createElement(t,(0,r.default)({},n,{isActive:!0}))||o&&d.cloneElement(o,{isActive:!0})||null}({ComponentClass:o,componentProps:i,tabElement:l}):null;return d.createElement("div",{className:g()(s),key:t,id:t},c)}var y=n(19309);var Z=function(e){(0,l.Z)(p,e);var t,n,m=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function p(e){var t;return(0,o.Z)(this,p),t=m.call(this,e),(0,u.Z)((0,i.Z)(t),"renderTabs",(function(){return t.props.tabs.map((function(e,n){var o=f().extend(e,{index:n,isActive:t.state.activeIndex===n});return d.createElement(h,(0,r.default)({},o,{key:e.id}))}))})),(0,u.Z)((0,i.Z)(t),"onSwitch",(function(e){t.state.activeIndex!==e?(t.props.tabs[e].route&&y.Z.history.navigate(t.props.tabs[e].route,{silent:!0}),t.props.mobile&&window.scrollTo(0,0),t.setState({activeIndex:e}),t.props.onSwitch(e)):t.props.onRefresh(e)})),t.state={activeIndex:e.activeIndex},t}return(0,a.Z)(p,[{key:"render",value:function(){return d.createElement("div",{className:this.props.className},d.createElement(O,{tabs:this.props.tabs,onSwitch:this.onSwitch,activeIndex:this.state.activeIndex,className:this.props.tabSwitcherClass,buttonClass:this.props.buttonClass,activeButtonClass:this.props.activeButtonClass}),d.createElement("div",{className:this.props.extensionAfterTabsClassName},this.props.extensionAfterTabs),d.createElement("div",{className:this.props.contentClassName},this.renderTabs()))}}]),p}(d.Component);Z.defaultProps={className:"",contentClassName:"tab-content",extensionAfterTabsClassName:"bem-tabs__extension",extensionAfterTabs:null,activeIndex:0,onSwitch:function(){},onRefresh:function(){}}},452733:function(e,t,n){n.d(t,{k:function(){return l},Q:function(){return s}});var r=n(667294),o=n(956688),a=n(605017),i="Bz5xK4hVQe6OgrpKQo_8";function l(e){var t=e.children,n=e["data-tid"],l=e.sidebarKey,s=(0,o.Or)(l),c=s.width,u=s.setWidth,d=(0,o.KO)(l),m=d.isExpanded,f=d.setExpanded,p=(0,r.useCallback)((function(e){var t=e>200;f(t),u(t?e:200)}),[f,u]);return r.createElement(a.Z,{"data-tid":n,className:i,side:a.Z.sides.LEFT,width:m?c:52,minWidth:200,maxWidth:700,onWidthChange:p,"aria-expanded":m,withHandlebar:!0},t)}function s(e){var t=e.children,n=e["data-tid"],a=e.width;return r.createElement(o.hj,{"data-tid":n,className:i,side:o.hj.sides.LEFT,width:a},t)}},252534:function(e,t,n){n.d(t,{Qt:function(){return a.Q},Ry:function(){return r.Z},tn:function(){return o.Z}});var r=n(776357),o=n(649072),a=n(452733)},649072:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(487462),o=n(145987),a=n(667294),i=n(893864),l=n(294184),s=n.n(l),c=["children","className","forwardedRef"];function u(e){var t=e.children,n=e.className,l=e.forwardedRef,u=(0,o.Z)(e,c);return a.createElement("div",(0,r.default)({className:s()("OsVwMHs3pMNpZkchGJlx",n),ref:l},(0,i.pickHTMLProps)(u)),t)}var d=(0,a.forwardRef)((function(e,t){return a.createElement(u,(0,r.default)({},e,{forwardedRef:t}))}))},776357:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(487462),o=n(529439),a=n(667294),i=n(991173),l=n(499345),s=n(799532),c=n(600529),u="L3XQ_FsjYMCSuptntbuI";function d(e){var t=e.children,n=e.label,d=e.href,m=e.isActive,f=e.showExitIcon,p=e.dataPendoId,v=e.onSectionClicked,E=e.sectionIcon,g=(0,a.useState)(!m),b=(0,o.Z)(g,2),O=b[0],h=b[1],y=!!t;return(0,a.useEffect)((function(){m&&h(!1)}),[m]),a.createElement("div",(0,r.default)({"aria-label":n},p&&{"data-pendoid":p}),a.createElement("div",{className:"Nx5SGQot72XwKXSYSVjG"},!y&&a.createElement(i.Z.ArrowButtonSpacer,null),a.createElement(i.Z,(0,r.default)({type:i.Z.types.SUB,className:"sMBhBBWs1StbDDYs6IUq",as:"a",href:d,highlighted:m},v?{onClick:v}:{}),y&&a.createElement(i.Z.ArrowButton,{state:O?i.Z.ArrowButton.states.COLLAPSED:i.Z.ArrowButton.states.EXPANDED,onClick:function(){return h((function(e){return!e}))}}),a.createElement("span",{className:"iv7_7b297rz7zNPm4zn_"}),a.createElement(l.Z,{className:"CKpELL2KQLQheCic7GdQ"},a.createElement(i.Z.Label,null,n)),!f&&!!E&&a.createElement(s.Z,{icon:E,size:s.Z.sizes.M,className:u}),f&&a.createElement(s.Z,{icon:c.N,size:s.Z.sizes.M,className:u}))),y&&!O&&a.createElement("div",{className:"wvA1H4HXoQHkVi_mAgQb","data-tid":"subview"},t))}d.defaultProps={onSectionClicked:null,sectionIcon:void 0}},704899:function(e,t,n){n.d(t,{$$:function(){return S},BA:function(){return E},DY:function(){return h},EY:function(){return Z},TY:function(){return I},Tl:function(){return b},Yf:function(){return D},dT:function(){return P},e7:function(){return N},fm:function(){return O},tu:function(){return y},zT:function(){return C}});var r=n(671002),o=n(19309),a=n(653712),i=n(895247),l=n(545342),s=n(690415),c=n(163123),u=n(249703),d=n(890851),m=n(589698),f=n(564280),p=n(751581),v=n(858264),E="browseMetadataView",g="metadata",b=function(){o.Z.history.navigate(a.Z.addQueryParamsAfterHash({metadata:"",browseMetadataView:"",viewId:"",isExistingView:""}),{replace:!0})},O=function(){o.Z.history.navigate(a.Z.addQueryParamsAfterHash({isExistingView:"",viewId:""}),{replace:!0})},h=function(e){var t=e.appliedFilters,n=e.doNotPushToUrl,r=void 0!==n&&n,c=i.Z.generateMetadataCriteria(t,l.Z);l.Z.showMetadataSearch(c);var u={browseMetadataView:!0,metadata:s.ZP.encodeMetadata(t)};return r?u:function(e){o.Z.history.navigate(a.Z.addQueryParamsAfterHash(e),{replace:!0})}(u)},y=function(){var e=a.Z.getQueryParamFromHash(g);return e?(0,u.x)(e):[]},Z=function(e){s.ZP.executeSearch({query:"",metadata:e,filters:s.ZP.getFilters()})},I=function(e){return e?e.has(E):c.ZP.location.hash.includes("".concat(E,"=true"))},S=function(e){var t=a.Z.getQueryParamFromHash(g);return"".concat(e,"?metadata=").concat(t,"&").concat(E,"=true")},P=function(e){e.delete(E),e.delete(g)},N=function(e){if(e.data.length)return e.data.map((function(e){return{label:e}}));var t,n,r=e.type.toUpperCase(),o=e.value||"";if([d.QW.INTEGER,d.QW.DECIMAL].includes(r)){var a,i=null!==(a=e.range)&&void 0!==a?a:{start:m.H.GREATER_THAN===e.operator?e.value:null,end:m.H.LESS_THAN===e.operator?e.value:null};m.H.EQUALS===e.operator&&(i={start:e.value,end:e.value}),o=(0,f.R)(i.start,i.end)}return r===d.QW.DATE&&(o=(0,v.mB)(e.value,e.operator,{from:null===(t=e.range)||void 0===t?void 0:t.start,to:null===(n=e.range)||void 0===n?void 0:n.end})),o?[{label:o}]:[]},C=function(e){return!(e&&!(0,p.xb)(e))||Object.values(e).every((function(e){if(null==e||!e.value)return!0;if("string"==typeof e.value)return 0===e.value.trim().length;if("object"===(0,r.Z)(e.value)){var t=e.value,n=t.value,o=t.rangeStart,a=t.rangeEnd;return void 0!==o||void 0!==a?!o&&!a:!n||"any"===n}return!1}))},D=function(e){return!e||0===e.length||e.every((function(e){return!(e.value||e.values&&0!==e.values.length||e.operator===m.H.HAS_KEY)}))}},79145:function(e,t,n){n.d(t,{ah:function(){return a},fI:function(){return i},iR:function(){return o},mk:function(){return s},nl:function(){return u},pz:function(){return l},sS:function(){return c}});var r=n(890851),o="Metadata Browse Mode",a="smart tags",i="aec image tags",l="trainable classifier tags",s={RESTRICTED_TAGS:"restrictedTags",CUSTOM_TAGS:"customTags"},c=[r.m2.ENUM,r.m2.MULTI_VALUE_STRING],u=(r.m2.STRING,r.m2.DATE,r.m2.DECIMAL,r.m2.INTEGER,300)},564280:function(e,t,n){n.d(t,{R:function(){return s},i:function(){return i}});var r=n(914578),o=n(762074),a=n(589698),i=function(e,t){return e||t?e&&t&&e===t?{operator:a.H.EQUALS,value:e}:e&&t?{operator:a.H.BETWEEN,range:{start:e,end:t}}:e?{operator:a.H.GREATER_THAN,value:e}:{operator:a.H.LESS_THAN,value:t}:null},l=(0,o.nD)("storage.columnFilter.numberRange.operators"),s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Number(e)||Number(t)){var o="";return e&&t?o=e===t?"".concat(l("".concat(a.H.EQUALS))," ").concat(e):n?"".concat(l("".concat(a.H.BETWEEN),{start:e,end:t})):"".concat(e," - ").concat(t):e?o="".concat(l("".concat(a.H.GREATER_THAN))," ").concat(e):t&&(o="".concat(l("".concat(a.H.LESS_THAN))," ").concat(t)),(0,r.capitalize)(o)}return""}},858264:function(e,t,n){n.d(t,{LR:function(){return u},Oy:function(){return c},gW:function(){return s},mB:function(){return d}});var r=n(727484),o=n.n(r),a=n(762074),i=n(589698),l=n(528466),s={ANY:"any",CUSTOM:"CUSTOM",LAST_24H:"LAST_24H",LAST_2_DAYS:"LAST_2_DAYS",LAST_7_DAYS:"LAST_7_DAYS",LAST_30_DAYS:"LAST_30_DAYS",LAST_90_DAYS:"LAST_90_DAYS",LAST_180_DAYS:"LAST_180_DAYS"},c=function(){var e=(0,a.nD)("storage.columnFilter.dateRangeFilter");return[{label:e("anyTime"),value:s.ANY,dateResolver:function(){return{from:-864e13,to:0xe677d21fdbff}}},{dateResolver:function(){var e=o()();return{from:e.subtract(1,"day").valueOf(),to:e.valueOf()}},label:e("last24Hours"),value:s.LAST_24H},{dateResolver:function(){var e=o()();return{from:e.subtract(7,"days").startOf("day").valueOf(),to:e.endOf("day").valueOf()}},label:e("last7Days"),value:s.LAST_7_DAYS},{dateResolver:function(){var e=o()();return{from:e.subtract(30,"days").startOf("day").valueOf(),to:e.endOf("day").valueOf()}},label:e("last30Days"),value:s.LAST_30_DAYS},{dateResolver:function(){var e=o()();return{from:e.subtract(90,"days").startOf("day").valueOf(),to:e.endOf("day").valueOf()}},label:e("last90Days"),value:s.LAST_90_DAYS}]},u=function(e,t,n){var r,o,a=Number(t);switch(e){case i.H.EQUALS:r=a,o=a;break;case i.H.GREATER_THAN:r=a;break;case i.H.LESS_THAN:o=a;break;default:r=null==n?void 0:n.from,o=null==n?void 0:n.to}return{from:r,to:o}},d=function(e,t,n){var r,o=null===(r=c().find((function(t){return t.value===e})))||void 0===r?void 0:r.label;if(e===s.CUSTOM||!o){var a=u(t,e,n),i=a.from,d=a.to;return(0,l.WX)(i,d)}return o}},599351:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(204942),o=n(529439),a=n(667294),i=n(294184),l=n.n(i),s=n(638859),c=n(762074),u=n(852649),d="tClSSgdsoqvl0gXAtx_t Er73cMkvdW7IEAv8y1uj m8RKLInoi4LLh_CKMjd0 cMD1Ln5gNqHc7P7v_G_6",m=function(e){var t,n=e.isDndSupported,i=e.isSingleFile,m=void 0!==i&&i,f=e.highlighted,p=void 0!==f&&f,v=e.fixedSize,E=void 0!==v&&v,g=e.fullWidth,b=void 0!==g&&g,O=e.className,h=e.children,y=(0,a.useState)(!1),Z=(0,o.Z)(y,2),I=Z[0],S=Z[1],P=(0,s.Z)();return(0,a.useEffect)((function(){void 0===n&&u.Z.getDndUploadAvailabilityPromise().then((function(){P()&&S(!0)}))}),[n,P]),a.createElement("div",{"data-tid":"upload-area",className:l()("K3bJORAqBWXnUgdcUDLk",(t={},(0,r.Z)(t,"RCLJBvvpLhFBBdjwjV4t",p),(0,r.Z)(t,"DRbEsVUqOMUmaAQSTVUm",E),(0,r.Z)(t,"Q0AAy9QejXmrFEU2sZ1v",!(!n&&!I)),(0,r.Z)(t,"mtCE8Kao8WljlvCJi1Bi",b),t),O)},h,a.createElement("div",{className:d},(0,c.t)("storage.emptyFolderInfo.orDnd",{count:m?1:1/0})),!m&&a.createElement("div",{className:d},(0,c.t)("upload.content.uploadTips")))}},884436:function(e,t){t.Z={container:"jyyhSBVrunzBpktz9xqQ",title:"AeHqw7tp5NruZUEgppx2 di8dHEGxZgrT5KjDiNkg vSadc0pqvD7KtbqURZCR",description:"e2Y_ajJxiVR268sxou5T C7HhvVmv8inrSQjb607z cMD1Ln5gNqHc7P7v_G_6",subTitle:"D1hROxOT8u4Sgx4oDzwy di8dHEGxZgrT5KjDiNkg vSadc0pqvD7KtbqURZCR",filters:"nA0sSBNbd7YwsbZqE0Q0",search:"YX9pME3jp3mypLwlMSot",dropdown:"ap3v53z8SNKd25F1lz60",trigger:"lbOlIEmhdB17p_gQR8Ux",filterActions:"NqeHkHw6qYJ_E5X0izro",actions:"shyWEii54pBWaby8OV_9",clear:"gIOuTwteABc3p1u7zNLg L1NPGp0OArr9AgHvsxTA C7HhvVmv8inrSQjb607z eugzcnL4uVMlgbRkfTqa",selectedFilter:"Ufrq6CxqvtHh2kFH36K7",promptsGrid:"rnE75noMsYBxI0FP0R4R",img:"rMflMSktB1Sgs0zl2ECU",promptsGridContainer:"e36UiiR4LJ8ZZB3soFYP",removeScroll:"XQRDQZC1nAKKonUD0IaF",spinner:"D4oMu2cg0bnme1Na9dJz",noResults:"rUk__vwMH4YDSyhb99rL",pointer:"VhruPmQgHD295jrBjNzp",labelsCount:"zxZfS7sRpMWdPOngKwwQ FNyGYYnJYyNLYscYnZTv eugzcnL4uVMlgbRkfTqa",itemWrapper:"ikNU_fvdL5pxxCkfvnnx",badgeWrapper:"PGPnfNBrBaRfL4HeYrwJ",badgeContent:"GaDRYfFrDqW7fnFgDz3_"}}}]);