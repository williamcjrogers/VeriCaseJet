"use strict";(self.webpackChunkEgnyte_CommonUI=self.webpackChunkEgnyte_CommonUI||[]).push([[6356],{576550:function(e,t,n){n.d(t,{m:function(){return v},s:function(){return f}});var r=n(115861),o=n(204942),i=n(364687),a=n.n(i),s=n(388767),l=n(252851);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){return e<=0?Number.MAX_SAFE_INTEGER:Math.floor(e*(t/100))}function m(e){var t=e.subjectPermissionsHardLimit,n=e.nonInheritedPermissionsHardLimit,r=e.subjectPermissionsWarnLimitPercentage,o=e.nonInheritedPermissionsWarnLimitPercentage;return u(u({},e),{},{permissionsWarningLimit:d(t,r),nonInheritedPermissionsWarningLimit:d(n,o)})}function f(){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.X$)();case 2:return t=e.sent,e.abrupt("return",m(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.useQuery)("getPermissionCounts",l.X$,u({initialData:{},select:function(e){return m(e)}},e))}},252851:function(e,t,n){n.d(t,{L1:function(){return c},X$:function(){return l},ec:function(){return s},uB:function(){return a}});var r=n(301158),o=n(23661),i=n(240701);function a(e){var t=e.path;return r.Z.post(i.Z.REPORT.FOLDER_CONTENT,{body:JSON.stringify({folderPath:t})}).then((function(e){return e.json()})).catch((function(e){return e.json().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,n=e.errorMessage;throw new Error(t||n||"")}))}))}function s(){return r.Z.get(i.Z.REPORT.METADATA).then((function(e){return e.json()}))}function l(){return(0,o.ZP)(i.Z.CIADMIN.REPORTS.PERMISSIONS.COUNTS)}function c(){return(0,o.ZP)(i.Z.CIADMIN.REPORTS.PERMISSIONS.GROWTH)}},528264:function(e,t,n){n.d(t,{T:function(){return u},f:function(){return c}});var r=n(667294),o=n(799532),i=n(581355),a=n(499345),s=n(698607),l=n(119179),c={DATE_ONLY:"date",DATE_WITH_TIME:"dateTime"};function u(e){var t,n=e.value,u=n.date,d=n.infoText,m=n.dateFormat,f=void 0===m?c.DATE_ONLY:m,p=e.className;return r.createElement("div",{className:"toh2RLVlKJRxsEnej4R4"},r.createElement(a.Z,{className:p},u?(t=u,f===c.DATE_WITH_TIME?(0,l.jQ)(t):(0,l.ZU)(t)):"-"),d&&r.createElement(s.Z,{tooltip:d},r.createElement(o.Z,{icon:i.yo,className:"uy1jz9lZ6Janlr9ZBNqW"})))}},535801:function(e,t,n){n.d(t,{X2:function(){return p},FK:function(){return y}}),n(528264);var r=n(487462),o=n(529439),i=n(145987),a=n(667294),s=n(294184),l=n.n(s),c=(0,a.createContext)({rowElement:null});function u(e){var t=e.children,n=e.rowElement,r=(0,a.useMemo)((function(){return{rowElement:n}}),[n]);return a.createElement(c.Provider,{value:r},t)}var d=["row","configuration"],m=["forwardedRef","children","className","isHighlighted"];function f(e){var t,n=e.forwardedRef,s=e.children,c=e.className,f=e.isHighlighted,p=void 0!==f&&f,v=(0,i.Z)(e,m),g=(0,a.useState)(null),E=(0,o.Z)(g,2),h=E[0],b=E[1];return a.createElement("div",(0,r.default)({ref:function(e){b(e),n&&("function"==typeof n?n(e):n.current=e)},className:l()(c,"s8SN7vNQ9I3M9TJVT8wA",p&&"atjr4UWjz0aplSjHLOpA")},((t=v).row,t.configuration,(0,i.Z)(t,d))),a.createElement(u,{rowElement:h},s))}var p=(0,a.forwardRef)((function(e,t){return a.createElement(f,(0,r.default)({forwardedRef:t},e))})),v=n(986456),g=n.n(v),E=n(415415);function h(e){var t=e.tableWrapperElement,n=e.lastCellElement,r=e.rowActionsElementWidth;if(!r)return 0;var o=t.offsetWidth+t.scrollLeft,i=n.offsetLeft+n.offsetWidth+r;return Math.min(o,i)}function b(e){var t=e.children,n=e.rowElement,r=e["data-tid"],i=void 0===r?"data-grid-row-actions":r,s=(0,a.useState)(0),l=(0,o.Z)(s,2),c=l[0],u=l[1],d=(0,E.Z)(),m=d.ref,f=d.width,p=void 0===f?0:f;return(0,a.useLayoutEffect)((function(){var e=n.closest('[role="table"]').parentElement,t=n.querySelectorAll('[role="cell"]'),r=t[t.length-1];u(h({tableWrapperElement:e,lastCellElement:r,rowActionsElementWidth:p}));var o=g().throttle((function(){u(h({tableWrapperElement:e,lastCellElement:r,rowActionsElementWidth:p}))}),10);return e.addEventListener("scroll",o),function(){return e.removeEventListener("scroll",o)}}),[n,p]),a.createElement("div",{ref:m,"data-tid":i,className:"F9254j7d9QjSt6A6FsW3",style:{left:"".concat(c,"px")}},t)}function y(e){var t=(0,a.useContext)(c).rowElement;return t?a.createElement(b,(0,r.default)({},e,{rowElement:t})):null}},981882:function(e,t,n){n.d(t,{Z:function(){return kn}});var r=n(943886);function o(e){var t=e.tasks,n=e.resolution,r=e.onComplete;if(t.length){var i=t[0];!i.condition||i.condition(n)?i.action((function(e){o({tasks:t.slice(1),resolution:e,onComplete:r})})):o({tasks:t.slice(1),onComplete:r})}else r&&r()}function i(e){o({tasks:e.tasks,onComplete:e.onComplete})}var a=n(96506),s=n(601714),l=n(401552),c=n(776327),u=n(93433),d=n(529439),m=n(667294),f=n(403455),p=n.p+"f6a32172b9fc9b19041a.svg",v=n(610861),g=n(531926),E=n(40023),h=n(762074),b=n(28731),y=n(741174),C=n(153672),S={BIOTECHNOLOGY:/life science/i},Z=(0,h.nD)("onboarding");function P(e){var t=e.stepNumber,n=e.stepsTotal,r=e.isLoading,o=void 0!==r&&r;return t&&n?m.createElement(v.ZP.Subtitle,null,o?"":Z("stepper",{step:t,total:n})):null}var O=n(204942),k=n(145987),w=n(32570),T=n(698607),D=n(40509),N=n(289098),R=n(487462),I=n(264802),L=n(934244),x=n(671002),j=n(115861),A=n(364687),M=n.n(A),F=n(982925),U=n(145218),_=n(397404),W="FixedTask_",G="SurveyIncludedFixedTask_",z=function(e){var t=e.isLevelsSplitDefinition,n=e.matchedTasks,r=e.allTasksWithLevels,o=e.fixedTasks,i=e.surveyIncludedFixedTasks,a=e.useCases,s=e.isSkippedRef,l=e.useCaseSelections,c=n.filter((function(e){return!(!o.includes(e)&&!i.includes(e))||!!a[e]&&!s.current&&l[e]}));return{userSelectedOnly:s.current?[]:Object.keys(l).filter((function(e){return l[e]})).filter((function(e){return n.includes(e)})),allThatApplies:t?r.map((function(e){return e.filter((function(e){return c.includes(e)}))})).filter((function(e){return e.length>0})):c}};function B(e){return e.startsWith(W)}function q(e){return e.startsWith(G)}function H(e){return e.replace(new RegExp("^".concat(W)),"").replace(new RegExp("^".concat(G)),"")}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(B).map(H)}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(q).map(H)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){return"string"==typeof e?[e]:e}var J=n(141797),$=(0,h.nD)("onboarding.useCases.inProgressModal");function ee(){return m.createElement(J.Z.Body,null,m.createElement("div",{className:"Hxpja1yuFiMVIi4CMuuA"},m.createElement(w.Z,null),m.createElement("div",{className:"pbpYP6S24IPCUvruwnbQ DjBes9t5ENd6DFQP1lbE vSadc0pqvD7KtbqURZCR"},$("title")),m.createElement("div",{className:"MPQrEc84EFd_gpJAUcB4 C7HhvVmv8inrSQjb607z"},$("description"))))}var te=n(691409),ne=n(389217),re=n(2764),oe=["mssharepointembedded","mswopibeta"],ie=["msteamsaddin"];function ae(e,t){return t?e.filter((function(e){return oe.includes(e)})):e.filter((function(e){return!ie.includes(e)}))}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=(0,h.nD)("onboarding.useCases"),ue=(0,_.Sh)({namespace:"onboarding/useCaseSelection"}).showNotification;function de(e){var t,n,r,o=e.industry,i=e.employeeCount,a=e.role,s=e.onSuccess,l=(0,C.Lb)("{\n            user.typeName,\n            workgroup.planName\n        }"),c=(0,d.Z)(l.data,2),f=c[0],p=c[1],g=(0,U.useQueryClient)(),E=function(e){var t=e.getCriteriaFieldValue,n=(0,m.useCallback)((function(e){return"EQUALS"===e?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Y(arguments.length>1?arguments[1]:void 0).includes(e)}:"CONTAINS"===e?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Y(arguments.length>1?arguments[1]:void 0).some((function(t){return!!e.match(new RegExp(t,"i"))}))}:function(){return!1}}),[]),r=(0,y.cZ)({select:function(e){var r,o,i,a,s,l=e.useCaseSets.find((function(e){var r=e.criteria;return(void 0===r?[]:r).every((function(e){var r=e.field,o=e.operator,i=e.value,a=t(r);return n(o)(a,i)}))})),c=(null===(r=e.integrationSets)||void 0===r||null===(o=r.find((function(e){var r=e.criteria;return(void 0===r?[]:r).every((function(e){var r=e.field,o=e.operator,i=e.value,a=t(r);return n(o)(a,i)}))})))||void 0===o?void 0:o.integrations)||[],u=(s=null==l?void 0:l.checklist,Array.isArray(null==s?void 0:s[0])),d=(null==l?void 0:l.checklist.flat())||[],m=(null==l||null===(i=l.dsgChecklist)||void 0===i?void 0:i.flat())||[],f=X(d),p=V(d),v=X(m),g=V(m),E=d.map(H)||[],h=(null==m?void 0:m.map(H))||[];return{isLevelsSplitDefinition:u,matchedUseCaseSet:l,matchedUseCases:E.map((function(t){if(!f.includes(t)){var n=e.useCases[t];return n?Q(Q({},n),{},{token:t}):void 0}})).filter(Boolean),allMatchedTasks:E,allMatchedTasksWithLevels:u?null==l?void 0:l.checklist.map((function(e){return"string"==typeof e?void 0:e.map(H)})).filter(Boolean):void 0,allUseCases:e.useCases||{},fixedTasks:f,surveyIncludedFixedTasks:p,allUseCasesForDSG:e.useCasesForDSG||{},matchedDSGUseCases:h.map((function(t){var n;if(!v.includes(t)){var r=null===(n=e.useCasesForDSG)||void 0===n?void 0:n[t];return r?Q(Q({},r),{},{token:t}):void 0}})).filter(Boolean),allMatchedDsgTasks:h,allMatchedDsgTasksWithLevels:u?null==l||null===(a=l.dsgChecklist)||void 0===a?void 0:a.map((function(e){return"string"==typeof e?void 0:e.map(H)})).filter(Boolean):void 0,fixedDSGTasks:v,surveyIncludedFixedDSGTasks:g,matchedIntegrations:c}}}),o=r.data,i=void 0===o?{}:o,a=i.isLevelsSplitDefinition,s=void 0!==a&&a,l=i.matchedUseCaseSet,c=i.matchedUseCases,u=void 0===c?[]:c,d=i.matchedDSGUseCases,f=void 0===d?[]:d,p=i.allMatchedTasks,v=void 0===p?[]:p,g=i.allMatchedTasksWithLevels,E=void 0===g?[]:g,h=i.allMatchedDsgTasks,b=void 0===h?[]:h,C=i.allMatchedDsgTasksWithLevels,S=void 0===C?[]:C,Z=i.allUseCases,P=void 0===Z?{}:Z,O=i.allUseCasesForDSG,k=void 0===O?{}:O,w=i.fixedTasks,T=void 0===w?[]:w,D=i.surveyIncludedFixedTasks,N=void 0===D?[]:D,R=i.fixedDSGTasks,I=void 0===R?[]:R,L=i.surveyIncludedFixedDSGTasks,x=void 0===L?[]:L,j=i.matchedIntegrations,A=void 0===j?[]:j;return{isLoadingOnboardingConfig:r.isLoading,isLevelsSplitDefinition:s,matchedUseCaseSet:l,matchedUseCases:u,matchedDSGUseCases:f,allMatchedTasks:v,allMatchedTasksWithLevels:E,allUseCases:P,fixedTasks:T,surveyIncludedFixedTasks:N,allUseCasesForDSG:k,allMatchedDsgTasks:b,allMatchedDsgTasksWithLevels:S,fixedDSGTasks:I,surveyIncludedFixedDSGTasks:x,matchedIntegrations:A}}({getCriteriaFieldValue:(0,m.useCallback)((function(e){return"Industry"===e?o:"Plan Name"===e?p:"User Type"===e?f:"Company Size"===e?i:void 0}),[i,o,p,f])}),h=E.isLevelsSplitDefinition,S=E.matchedUseCaseSet,Z=E.matchedUseCases,P=E.matchedDSGUseCases,k=E.allMatchedTasks,w=E.allMatchedTasksWithLevels,T=E.allMatchedDsgTasks,D=E.allMatchedDsgTasksWithLevels,N=E.allUseCases,R=E.allUseCasesForDSG,I=E.fixedTasks,L=E.surveyIncludedFixedTasks,A=E.fixedDSGTasks,_=E.surveyIncludedFixedDSGTasks,W=E.matchedIntegrations,G=E.isLoadingOnboardingConfig,B=(0,U.useMutation)({mutationFn:F.ZP.fetchList,onSuccess:function(){g.invalidateQueries(F.VF.list())}}).mutate,q=(0,y.Jl)(),K=q.mutate,$=q.isLoading,oe=q.isError,ie=(t=(0,C.ZP)().data,n=(0,te.Zr)(t),r=(0,te.RM)(t),{enableIntegrationsAndReloadUintegrate:function(e){return(0,j.Z)(M().mark((function t(){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ne.sC)(r,ae(e,n).map((function(e){return{appId:e,configType:ne.Xb.ADD}})));case 2:re.Z.init({force:!0});case 3:case"end":return t.stop()}}),t)})))()}}).enableIntegrationsAndReloadUintegrate,se=(0,y.Nu)({onError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.msg,n=void 0===t?"":t;ue("error",n||ce("failureNotification"))}}),de=se.mutate,me=(0,y.lx)({onError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.msg,n=void 0===t?"":t;ue("error",n||ce("failureNotification"))}}),fe=me.mutate,pe=(0,m.useCallback)((function(e){h?fe({type:"V2",trialOnboardingSteps:e.map((function(e){return e.map((function(e){var t,n,r,o,i,a=R[e];return le({userAction:e},a?{pendoGuideId:null!==(t=null===(n=a.productTour)||void 0===n||null===(r=n.details)||void 0===r?void 0:r.guideId)&&void 0!==t?t:"",productLabel:null!==(o=null===(i=a.productTour)||void 0===i?void 0:i.label)&&void 0!==o?o:""}:{})}))}))}):de({trialOnboardingSteps:P.filter((function(t){return e.includes(null==t?void 0:t.token)})).map((function(e){var t,n,r,o,i,a;return{pendoGuideId:null!==(t=null==e||null===(n=e.productTour)||void 0===n||null===(r=n.details)||void 0===r?void 0:r.guideId)&&void 0!==t?t:"",productLabel:null!==(o=null==e||null===(i=e.productTour)||void 0===i?void 0:i.label)&&void 0!==o?o:"",userAction:null!==(a=null==e?void 0:e.token)&&void 0!==a?a:""}}))})}),[h,fe,R,de,P]);return{mutate:(0,m.useCallback)((function(e){var t=e.integrations,n=e.useCases,r=void 0===n?{}:n,l=e.setSubmitting,c=e.isSkippedRef,d=void 0===c?{current:!1}:c;(0,v.Ll)(m.createElement(ee,null),{shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,onRequestClose:v.GZ,size:J.Z.sizes.M});var f=z({isLevelsSplitDefinition:h,matchedTasks:k,allTasksWithLevels:w,fixedTasks:I,surveyIncludedFixedTasks:L,useCases:N,isSkippedRef:d,useCaseSelections:r}),p=f.userSelectedOnly,g=f.allThatApplies,E=z({isLevelsSplitDefinition:h,matchedTasks:T,allTasksWithLevels:D,fixedTasks:A,surveyIncludedFixedTasks:_,useCases:R,isSkippedRef:d,useCaseSelections:r}),y=E.userSelectedOnly,C=E.allThatApplies,Z=h?"checklistWithLevels":"checklist",P=h?"dsgChecklistWithLevels":"dsgChecklist",F=[].concat((0,u.Z)(t),(0,u.Z)(W)),U=F.map((function(e){return e.name})),G=F.length>0,q=C.length>0;K({answers:le(le((0,O.Z)({cmbIndustry:o,noOfEmp:i,roleAtCompany:a},Z,g),q&&(0,O.Z)({},P,C)),{},{useCaseSetName:null==S?void 0:S.name},G&&{integrations:U})},{onSuccess:function(){return(0,j.Z)(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue("success",ce("successNotification")),s(),b.Z.adminSurveyCompleted(le(le({Industry:o,"User's Role":a,"Company Size":i,"Use Case Set":null==S?void 0:S.name,"Selected Use Cases":p},q&&{"Selected DSG Use Cases":y}),G&&{Integrations:U})),G&&ie(F.map((function(e){return e.id}))),q&&pe(h?C:y),B(),(0,v.GZ)(),(0,v.Mr)();case 8:case"end":return e.stop()}}),e)})))()},onError:function(e){var t=e&&"object"===(0,x.Z)(e)&&"msg"in e?"".concat(e.msg):"";l(!1),ue("error",t||ce("failureNotification")),(0,v.GZ)()}})}),[h,k,w,I,L,N,T,D,A,_,R,W,K,o,i,a,null==S?void 0:S.name,s,B,ie,pe]),useCases:[].concat((0,u.Z)(Z),(0,u.Z)(P)),isLoading:G,isMutationLoading:$,isError:oe}}var me=(0,h.nD)("onboarding.useCases");function fe(e){var t=e.token,n=e.chooser,r=e.disabled;return m.createElement("div",null,m.createElement(L.Z,{name:t,label:n.label,disabled:r}))}function pe(e){var t=e.industry,n=e.employeeCount,r=e.role,o=e.integrations,i=e.onSaveSuccess,a=e.onSkipChanged,s=e.totalSteps,l=void 0===s?0:s,c=de({industry:t,employeeCount:n,role:r,onSuccess:i}),u=c.mutate,d=c.useCases,E=c.isLoading,h=c.isMutationLoading,b=c.isError,y=(0,m.useMemo)((function(){var e=d.reduce((function(e,t){return null!=t&&t.token&&(e[t.token]=!1),e}),{});return{initialMatchedUseCases:d,initialFormValues:e}}),[d]),C=y.initialMatchedUseCases,S=y.initialFormValues,Z=(0,m.useRef)(!1),O=(0,m.useRef)(I.Z),k=(0,m.useCallback)((function(e,t){var n=t.setSubmitting;u({integrations:o,useCases:e,setSubmitting:n,isSkippedRef:Z})}),[o,u,Z]),N=(0,m.useCallback)((function(){h||(Z.current=!0,O.current())}),[h]);return(0,m.useEffect)((function(){a(N)}),[N,a]),m.createElement(m.Fragment,null,m.createElement(v.ZP.Header,null,m.createElement(v.ZP.Title,null,me("header")),m.createElement(P,{stepNumber:"3",stepsTotal:l,isLoading:E})),E?m.createElement("div",{className:"nd8O4dMZnW8etWp5xl2Z"},m.createElement(w.Z,null)):m.createElement(f.J9,{initialValues:S,onSubmit:k},(function(e){var t=e.handleSubmit,n=e.values;O.current=t;var r=function(e){return Object.values(e).some(Boolean)}(n);return m.createElement(f.l0,null,m.createElement(v.ZP.Body,null,m.createElement("div",{className:"PxtayNDtmws5NuXVWj_v"},m.createElement("img",{className:"fdpyNRkPNTBG_Ijq2Ncd",src:p,alt:"Survey"})),m.createElement("div",{className:"Qkz4HtPXUGSEeNFoT3tz"},m.createElement(D.Z.Paragraph,null,me("description"))),m.createElement("div",{className:"RGysc5BfDnRUuedIviJv"},C.map((function(e){var t;return m.createElement(fe,(0,R.default)({key:null!==(t=null==e?void 0:e.token)&&void 0!==t?t:"",disabled:h},e))})))),m.createElement(v.ZP.Footer,null,m.createElement(T.Z,{tooltip:me("selectionRequired"),disabled:r},m.createElement(g.Z,{idleText:me("save"),failed:b,disabled:!r}))))})))}var ve=n(735691),ge=ve.Ry().shape({industry:ve.Z_().required(),role:ve.Z_().required(),employeeCount:ve.Z_().required()}),Ee=ve.Ry().shape({tools:ve.IX().of(ve.Ry().shape({value:ve.Z_(),label:ve.Z_()})).min(1).required()}),he=["onSaveSuccess","totalSteps"];function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=[{name:"Microsoft Office Desktop and Mobile",id:"mswopibeta"},{name:"Microsoft Office Online",id:"mswopi"},{name:"Egnyte for Microsoft Teams",id:"msteamsaddin"},{name:"Google Workspace",id:"gdocs"},{name:"Slack",id:"slack"}],Se=(0,h.nD)("onboarding.toolsPreferences");function Ze(e){var t=e.onSaveSuccess,n=e.totalSteps,r=void 0===n?0:n,o=(0,k.Z)(e,he),i=de(ye(ye({},o),{},{onSuccess:t})),a=i.mutate,s=i.useCases,l=i.isLoading,c=i.isMutationLoading,u=i.isError,d=s.length>0,E=(0,m.useCallback)((function(e,n){var i,s,l=e.tools,c=n.setSubmitting,u=l.map((function(e){var t=e.value;return{name:e.label,id:t}}));d?(i=ye(ye({},o),{},{integrations:u,totalSteps:r,onSaveSuccess:t}),(0,v.h7)(m.createElement(pe,(0,R.default)({onSkipChanged:function(e){s=e}},i)),{shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,withCloseButton:!0,onRequestClose:function(){var e;null===(e=s)||void 0===e||e()},size:v.ZP.sizes.XL})):a({integrations:u,setSubmitting:c})}),[o,d,a,t,r]);return m.createElement(m.Fragment,null,m.createElement(v.ZP.Header,null,m.createElement(v.ZP.Title,null,Se("header")),m.createElement(P,{stepNumber:"2",stepsTotal:r,isLoading:l})),l&&m.createElement("div",{className:"ATnLX0uQ4OoZxIkQGWKX"},m.createElement(w.Z,null)),!l&&m.createElement(f.J9,{enableReinitialize:!0,initialValues:{tools:[]},validationSchema:Ee,onSubmit:E},(function(e){var t=e.values.tools.length>0;return m.createElement(f.l0,null,m.createElement(v.ZP.Body,null,m.createElement("div",{className:"vB3E4mRNfa4KyU4a1pwG"},m.createElement("img",{className:"RWv91P7TBvn4PxYlhRz0",src:p,alt:"Survey"})),m.createElement("div",{className:"Qrf6tNhYvPOH63khHbAV"},m.createElement(D.Z.Paragraph,null,Se("description"))),m.createElement("div",{className:"wleNbcu6tyq6ui7JSeLz"},m.createElement(N.MultiSelect,{name:"tools",label:Se("toolsLabel"),placeholder:Se("toolsPlaceholder"),options:Ce.map((function(e){return{value:e.id,label:e.name}})),disabled:c,isClearable:!0,required:!0}))),m.createElement(v.ZP.Footer,null,m.createElement(T.Z,{tooltip:Se("selectionRequired"),disabled:t},m.createElement(g.Z,{idleText:Se(d?"goNext":"save"),failed:u,disabled:!t}))))})))}var Pe=(0,h.nD)("onboarding.adminSurvey");function Oe(e){return Object.entries(e).map((function(e){var t=(0,d.Z)(e,2),n=t[0];return{label:t[1],value:n}}))}function ke(e){var t=e.onSaveSuccess,n=(0,y.Eo)(),r=n.data,o=void 0===r?{}:r,i=o.industry,a=void 0===i?{}:i,s=o.roleAtCompany,l=void 0===s?{}:s,c=o.employees,h=void 0===c?{}:c,Z=n.isLoading,O=function(e){var t,n=(0,C.Lb)("{workgroup.planName, workgroup.industry}"),r=(0,d.Z)(n.data,2),o=r[0],i=r[1],a=Object.keys(e).find((function(t){return e[t]===i}));return(null===(t=Object.entries(S).find((function(e){return(0,d.Z)(e,2)[1].test(o)})))||void 0===t?void 0:t[0])||a}(a),k=(0,y.cZ)({select:function(e){var t=e.useCases,n=void 0===t?{}:t,r=e.useCasesForDSG,o=void 0===r?{}:r;return[].concat((0,u.Z)(Object.keys(null!=n?n:{})),(0,u.Z)(Object.keys(null!=o?o:{}))).length>0}}),w=k.data,T=void 0!==w&&w,D=k.isLoading,N=T?3:2,R=Z||D,I=(0,m.useCallback)((function(e){var n,r=e.industry,o=e.role,i=e.employeeCount;n={industry:a[r],role:l[o],employeeCount:h[i],totalSteps:N,onSaveSuccess:t},(0,v.h7)(m.createElement(Ze,n),{shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,closeOnHashChange:!1,onRequestClose:v.Mr,size:v.ZP.sizes.XL})}),[h,a,t,l,N]);return(0,m.useEffect)((function(){b.Z.adminSurveyShown()}),[]),m.createElement(m.Fragment,null,m.createElement(v.ZP.Header,null,m.createElement(v.ZP.Title,null,Pe("header")),m.createElement(P,{stepNumber:"1",stepsTotal:N,isLoading:R})),m.createElement(f.J9,{enableReinitialize:!0,initialValues:{industry:O,role:void 0,employeeCount:void 0},validationSchema:ge,onSubmit:I},m.createElement(f.l0,null,m.createElement(v.ZP.Body,null,m.createElement("div",{className:"RGdzhDK0aadc2UWOJ2jv"},m.createElement("img",{className:"PmrP3aBcWzDyKz7zL4ls",src:p,alt:"Survey"})),m.createElement("div",{className:"CaOvAuDaHuwU9nqzLGM2"},m.createElement("div",null,m.createElement(E.Z,{name:"industry",disabled:R,required:!0,label:Pe("industry"),placeholder:Pe("industryPlaceholder"),options:Oe(a)})),m.createElement("div",null,m.createElement(E.Z,{name:"role",disabled:R,required:!0,label:Pe("role"),placeholder:Pe("rolePlaceholder"),options:Oe(l)})),m.createElement("div",null,m.createElement(E.Z,{name:"employeeCount",disabled:R,required:!0,label:Pe("employeeCount"),placeholder:Pe("employeeCountPlaceholder"),options:Oe(h)})))),m.createElement(v.ZP.Footer,null,m.createElement(g.Z,{idleText:Pe("goNext"),disabled:R})))))}var we=n(722332),Te="".concat(we.Z.SHARED,"/Documents"),De=function(e){var t=function(e){return function(){s.Z.setAdminSurveyCompleted(),e()}};return{condition:function(){var t=e.isEmbeddedForDesktopApp;return!(!e.isStorage||t)&&l.ZP.isAdmin()&&!s.Z.isAdminSurveyCompleted()&&s.Z.isTrialDomain()},action:function(e){var n,r;n={onSaveSuccess:t(e)},(0,v.h7)(m.createElement(ke,n),{shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,closeOnHashChange:!1,onRequestClose:v.Mr,size:v.ZP.sizes.XL}),(r=we.Z.SHARED,new Promise((function(e){c.ZP.once(c.ZP.Events.Storage.FOLDER.LOADED,(function(t){t.path===r&&e(void 0)}))}))).then((function(){c.ZP.trigger(c.ZP.Events.Storage.PATH.UPDATE,{path:Te})}))}}},Ne=n(994642),Re=n(113491),Ie=n(933705),Le=n(154177),xe=n(808753),je=n(137703),Ae=n(386787),Me=n(821442),Fe=n(930652);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=(0,_.Sh)().showNotification;function Ge(e){var t=e.saveButtonText,n=e.onSaveSuccess,r=(0,C.Lb)("user.{firstName, lastName}"),o=(0,d.Z)(r.data,2),i=o[0],a=o[1],s=(0,je.v9)(Ae.wl.getBrandLabel),l=(0,C.ZP)().data.ui.display.ownPasswordChange,u=(null==l?void 0:l.isEditable)&&(null==l?void 0:l.isVisible),p=(0,Ie.l5)().mutateAsync,E=(0,m.useMemo)((function(){return _e({firstName:i||"",lastName:a||""},u&&{password:"",confirmPassword:""})}),[i,a,u]),b=ve.Ry().shape(_e({firstName:ve.Z_().required(),lastName:ve.Z_().required()},u&&{password:ve.Z_().required(),confirmPassword:ve.Z_().oneOf([ve.iH("password"),""],(0,h.t)("error.password_not_equal")).required()}));function y(){return(y=(0,j.Z)(M().mark((function e(t,r){var o,i;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=_e({firstName:t.firstName,lastName:t.lastName},u&&{password:t.password}),e.next=4,p(o);case 4:We(_.em.success,(0,h.t)("success.personalInformationUpdated")),c.ZP.trigger(c.ZP.Events.User.SYNC),(0,v.Mr)(),n(),e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(0),(0,Le.k0)(e.t0)){e.next=16;break}return We(_.em.error,(0,h.t)("error.default")),xe.ZP.error("Not an API error in PersonalInformationSurvey",e.t0),e.abrupt("return");case 16:if(!(i=(0,Le.lt)(e.t0))){e.next=20;break}return r.setErrors(i),e.abrupt("return");case 20:We(_.em.error,(0,Le.e$)(e.t0,(0,h.t)("error.default")));case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return m.createElement(f.J9,{validationSchema:b,initialValues:E,onSubmit:function(e,t){return y.apply(this,arguments)}},(function(e){var n=e.values;return m.createElement(f.l0,null,m.createElement(v.ZP.Header,null,m.createElement(v.ZP.Title,null,(0,h.t)("loginActions.personalInformation.domain",{domain:s})),m.createElement(v.ZP.Subtitle,null,(0,h.t)("loginActions.personalInformation.title"))),m.createElement(v.ZP.Body,null,m.createElement(N.Text,{name:"firstName",label:(0,h.t)("loginActions.personalInformation.firstName")}),m.createElement(N.Text,{name:"lastName",label:(0,h.t)("loginActions.personalInformation.lastName")}),u&&m.createElement(m.Fragment,null,m.createElement(N.Text,{name:"password",type:"password",label:(0,h.t)("form.generic.password_new"),alert:n.password&&(0,Re.x)(n.password)}),m.createElement(N.Text,{name:"confirmPassword",type:"password",label:(0,h.t)("form.generic.passwordConfirmation")}))),m.createElement(v.ZP.Footer,null,m.createElement("div",{className:"aH2e68Gw2PKTuy32OQy_"},m.createElement(Me.Z,{as:"a",target:"_blank",href:Fe.Z.privacyPolicy},(0,h.t)("global.privacyPolicy")),m.createElement(g.Z,{idleText:t}))))}))}var ze,Be=n(481681),qe=function(e){return{condition:function(){return!e.isEmbeddedForDesktopApp&&s.Z.get("user.firstSignedIn")},action:function(e){var t;t={saveButtonText:Be.Z.shouldOnboardingBeShown()?(0,h.t)("storage.newUserOnboarding.personalInformation.save"):(0,h.t)("button.label.save"),onSaveSuccess:e},(0,v.h7)(m.createElement(Ge,t),{onRequestClose:v.Mr,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,closeOnHashChange:!1})}}},He=function(e){return{condition:function(){return!e.isEmbeddedForDesktopApp&&s.Z.get("user.firstSignedIn")&&(0,r.r0)("isUserEnrichmentEnabled")},action:function(e){Be.Z.jobDetails.show(e)}}},Xe=n(625223),Ve=n(416271),Ke=n(405510),Qe=n(221842),Ye=n.n(Qe),Je=n(668477),$e=n(6587),et=n(840910),tt={widget:"SVbjD1iXQZ0nlavC2eb6 gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa",danger:"Q13mpRqcpuYvVtTWHyKA SVbjD1iXQZ0nlavC2eb6 gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa",warn:"vamg2bYyML9mVuaSZUjY SVbjD1iXQZ0nlavC2eb6 gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa",success:"Ld5z9B9YjPWzBl912AwW SVbjD1iXQZ0nlavC2eb6 gzyXvpl08cSzWIAe3ouf m8RKLInoi4LLh_CKMjd0 eugzcnL4uVMlgbRkfTqa"},nt=(0,h.nD)("components.passwordStrength.strength"),rt=(ze={},(0,O.Z)(ze,et._5.EMPTY,{className:tt.empty,label:nt("empty")}),(0,O.Z)(ze,et._5.WEAK,{className:tt.danger,label:nt("weak")}),(0,O.Z)(ze,et._5.GOOD,{className:tt.warn,label:nt("good")}),(0,O.Z)(ze,et._5.STRONG,{className:tt.success,label:nt("strong")}),ze);function ot(e){var t,n=e.password,r=(t=(0,m.useMemo)((function(){return(0,et.yZ)(n)}),[n]).strength)&&rt[t]?rt[t]:rt[et._5.EMPTY],o=r.className,i=r.label;return m.createElement("div",{className:o,"data-tid":"password-strength"},i)}var it={passwordFieldControl:"odjxDSfOcCXc1ECz7xwZ"};function at(e){var t=e.required,n=void 0!==t&&t,r=e.readonly,o=void 0!==r&&r,i=e.name,a=e.label,s=e.placeholder,l=e.infoTooltip,c=e.alert,u=e.formatValue,d=void 0===u?function(e){return e}:u;return m.createElement(Je.ZP,{name:i,alert:c},m.createElement(Je.ZP.Label,{uppercase:!0,hasColon:!1,required:n&&!o,infoTooltip:l},a)," ",m.createElement(Je.ZP.Control,null,(function(e){var t=e.field,n=e.hasError;return o?m.createElement(Je.ZP.Value,{name:i},d(t.value)):m.createElement("div",{className:it.passwordFieldControl},m.createElement($e.Z,Ye()({"data-lpignore":!0,type:"password",className:it.input,hasError:n,placeholder:s},t)),t.value&&m.createElement(ot,{password:t.value}))})))}var st=(0,h.nD)("form.changePassword.labels"),lt=ve.Ry().shape({oldPassword:ve.Z_().required(),newPassword:ve.Z_().required(),confirmPassword:ve.Z_().oneOf([ve.iH("newPassword"),null],(0,h.t)("error.password_not_equal")).required(),invalidateUiSessions:ve.O7()}),ct={oldPassword:"",newPassword:"",confirmPassword:"",invalidateUiSessions:!1};function ut(){return m.createElement(N.Text,{name:"oldPassword",type:"password",label:st("currentPassword")})}function dt(){return m.createElement(at,{name:"newPassword",label:st("newPassword")})}function mt(){return m.createElement(N.Text,{name:"confirmPassword",type:"password",label:st("newPasswordConfirm"),"data-lpignore":"true"})}function ft(){return m.createElement(N.Checkbox,{name:"invalidateUiSessions",label:st("invalidateUiSessions")})}var pt=(0,_.Sh)({namespace:"storage/users"}),vt=pt.showNotification,gt=pt.hideNotifications;function Et(e){var t=e.userId,n=e.onSuccess,r=(0,Ie.kX)(t,{onSuccess:function(){gt()},onError:function(e){var t=(0,Le.FU)(e).map((function(e){return(0,h.t)("error.".concat(e.code),{defaultValue:e.msg})})).join(". ")||e.message;vt("error",t)}}),o=r.mutate,i=r.isError;return m.createElement(m.Fragment,null,m.createElement(v.ZP.Header,null,m.createElement(v.ZP.Title,null,(0,h.t)("loginActions.passwordChange.title"))),m.createElement(f.J9,{initialValues:ct,validationSchema:lt,onSubmit:function(e){var t=e.oldPassword,r=e.newPassword,i=e.invalidateUiSessions;o({oldPassword:t,newPassword:r,invalidateUiSessions:i},{onSuccess:n})}},m.createElement(f.l0,null,m.createElement(v.ZP.Body,null,m.createElement(Ke.Z,{color:Ke.Z.DANGER,className:"Am5o341BZsgR4rWtmTfc"},(0,h.t)("loginActions.passwordChange.message")),m.createElement(ut,null),m.createElement(dt,null),m.createElement(mt,null),m.createElement(ft,null)),m.createElement(v.ZP.Footer,null,m.createElement(g.Z,{isError:i})))))}var ht=function(e){return{condition:function(){return!e.isEmbeddedForDesktopApp&&s.Z.get("user.isPasswordExpired")},action:function(e){(0,v.Ll)(m.createElement(Et,{userId:s.Z.get("user.id"),onSuccess:function(){s.Z.set("user.isPasswordExpired",!1),(0,v.Mr)(),e();var t=s.Z.get("user.id"),n=s.Z.toJSON(),o=(0,r.r0)("isUserEnrichmentEnabled"),i=s.Z.get("user.jobRole"),a=s.Z.get("user.title");(0,Ve.M)({env:n,isUserEnrichmentEnabled:o,jobRole:i,title:a})&&(0,Xe.Z)({userId:t})}}),{closeOnHashChange:!1,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1})}}},bt=n(318798),yt=n(296924);function Ct(e){var t=e.onboardingConfig,n=e.useCaseSetName;return new Promise((function(e){setTimeout((0,j.Z)(M().mark((function r(){return M().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,bt.Z.init({onboardingConfig:t,useCaseSetName:n});case 2:e(void 0);case 3:case"end":return r.stop()}}),r)}))),1e3)}))}var St=function(e){return{condition:function(){return!e.isEmbeddedForDesktopApp&&(0,yt.He)(s.Z.attributes)&&bt.Z.isOnboardingEnabled()},action:function(e){return(0,j.Z)(M().mark((function t(){var n,r,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,y.Po)(),(0,y.zw)(),(0,y.Jh)({userId:s.Z.get("user.id")})]);case 2:if(n=t.sent,r=(0,d.Z)(n,2),o=r[0],!(i=r[1])){t.next=9;break}return t.next=9,Ct({onboardingConfig:o,useCaseSetName:i});case 9:return e(),t.abrupt("return",Promise.resolve());case 11:case"end":return t.stop()}}),t)})))()}}},Zt=n(619755),Pt=n.n(Zt),Ot=n(90659),kt=function(){return{condition:function(){return!s.Z.get("user.timezone")},action:function(e){var t;try{t=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}t||(t=Ot.jstz.determine().name()),t?Pt().ajax({url:"/rest/public/1.0/users/".concat(s.Z.get("user.id"),"/personalSettings"),contentType:"application/json",dataType:"json",type:"PATCH",data:JSON.stringify({timezone:{id:t}}),success:function(){s.Z.fetch({success:e,error:e})},error:e}):e()}}},wt=function(e,t){var n=Be.Z.shouldWelcomeScreenBeShown();return{condition:function(){var e=t.isClientPortal,r=t.isDocumentRoomPortal,o=t.isEmbeddedForDesktopApp,i=t.isStorage;return!o&&(i||r||e)&&n},action:function(t){Be.Z.welcomeScreen.render(e.layout.newUserOnboarding),t()}}},Tt=function(e,t){var n=Be.Z.shouldOnboardingBeShown(),r=Pt().Deferred();return c.ZP.once(c.ZP.Events.Storage.READY,(function(){r.resolve()})),{condition:function(){var e=t.isStorage;return!t.isEmbeddedForDesktopApp&&e&&n},action:function(t){r.then((function(){return Be.Z.tour.render(e.layout.newUserOnboarding,t)}))}}},Dt=function(e){var t=Be.Z.shouldOnboardingBeShown();return{condition:function(){var n=e.isEmbeddedForDesktopApp,r=e.isClientPortal,o=e.isDocumentRoomPortal,i=e.isStorage;return!n&&(r||o||i)&&t},action:function(e){Be.Z.avatarUpload.show(e)}}},Nt=n(19309),Rt=n(420790),It=n(986456),Lt=n.n(It),xt=n(366350),jt=(0,h.nD)("loginActions.customStorageSettingsDialog");function At(e){var t=e.provider,n=e.onContinue,r={primary:{onClick:function(){return n()},label:jt("settingsLink",{provider:t})}};return m.createElement(Rt.Z.Component,{title:jt("title",{provider:t}),actions:r},m.createElement("div",{dangerouslySetInnerHTML:{__html:jt("message",{provider:t})}}))}At.Bridge=xt.Z.extend({initializeComponent:function(e){return m.createElement(At,e)}});var Mt=["AZURE","ORACLE","GCS","S3"],Ft=function(e){return{condition:function(){var t=e.isStorage,n=e.isEmbeddedForDesktopApp;return!(!t||n)&&l.ZP.isAdmin()&&s.Z.get("workgroup.customStorageEnabled")&&!s.Z.get("workgroup.customStorageSettingsConfigured")},action:function(e){var t=s.Z.get("workgroup.customStorageProvider");Lt().contains(Mt,t)?Rt.Z.create(new At.Bridge({provider:t,onContinue:function(){Nt.Z.history.navigate(s.Z.getCustomStorageConfigurationUrl(),{trigger:!0}),Rt.Z.hide()}}),{keyboard:!1}):e()}}},Ut=n(906565),_t=n(579621);function Wt(e){var t=e.content,n=e.onCancel,r=e.onDone,o=(0,je.v9)(Ae.wl.getBaseBrandColor),i=(0,je.v9)(Ae.wl.getBrandLabel);return m.createElement("div",{"data-tid":"terms-of-service",className:"view",style:{borderTopColor:o}},m.createElement("div",{className:"logo-container"},m.createElement(Ut.Z,{className:"logo"})),m.createElement("h1",{className:"brand-label"},i),m.createElement("div",{className:"introductory-text"},(0,h.t)("loginActions.termsOfService.introductoryText")),m.createElement("div",{className:"terms-of-service-wrapper"},m.createElement("div",{className:"text-container"},t),m.createElement("div",{className:"buttons-section"},m.createElement(_t.Z,{type:_t.Z.TERTIARY,className:"cancel-link",onClick:n},(0,h.t)("loginActions.termsOfService.cancel")),m.createElement(_t.Z,{onClick:r},(0,h.t)("loginActions.termsOfService.confirm")))))}Wt.Bridge=xt.Z.extend({initializeComponent:function(e){return m.createElement(Wt,e)}});var Gt=Wt,zt=n(397122),Bt=n(367414),qt=n(127118),Ht="termsOfServiceHash";function Xt(e){Pt()("body").toggleClass("scrolling-off",!e)}var Vt={create:function(e,t){var n=function(e){var t=s.Z.getTermsOfService(),n=e.layout.termsOfService;return{shouldBeShown:function(){return t.enabled&&e.userPreferences.get(Ht)!==t.hash},render:function(){Xt(!1),n.show(qt.Z.createCompatibleReactComponent(Gt,{content:t.textContent,onDone:function(){e.userPreferences.updatePref(Ht,t.hash),n.close(),zt.l.focus(),Xt(!0)},onCancel:function(){return(0,Bt.kS)({reason:"termsOfService"})}}))}}}(e);return{condition:function(){var e=t.isClientPortal,r=t.isDocumentRoomPortal,o=t.isEmbeddedForDesktopApp,i=t.isStorage;return!o&&(e||r||i)&&n.shouldBeShown()},action:function(e){n.render(),e()}}}},Kt=Vt,Qt=n(842206),Yt=n(215671),Jt=n(143144),$t=n(360136),en=n(182963),tn=n(661120),nn=n(727484),rn=n.n(nn),on=n(266606),an=Nt.Z.Model.extend({urlRoot:"/rest/public/1.0/ccexpiry/notification",url:function(){return"".concat(this.urlRoot,"?lastRemindedDay=").concat(this.get("lastRemindedDay"))}});var sn={EXPIRING_SOON:{name:"EXPIRING_SOON",logEvent:"CC is expiring soon"},CC_EXPIRED:{name:"CC_EXPIRED",logEvent:"CC expired"},CC_DECLINED:{name:"CC_DECLINED",logEvent:"CC declined"},EXPIRING_TODAY:{name:"EXPIRING_TODAY",logEvent:"CC is expiring today"}},ln=(0,h.nD)("loginActions.ccExpiry"),cn=function(e){(0,$t.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,tn.Z)(t);if(n){var o=(0,tn.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,en.Z)(this,e)});function o(){return(0,Yt.Z)(this,o),r.apply(this,arguments)}return(0,Jt.Z)(o,[{key:"getCCexpiryType",value:function(){var e=this.props.model.get("ccExpiryNotificationType");return e===sn.EXPIRING_SOON.name&&0===this.props.model.get("remindedDay")&&(e=sn.EXPIRING_TODAY.name),e}},{key:"onRemindLaterClick",value:function(){this.logEvent("CC notification: Remind later clicked",sn[this.getCCexpiryType()].logEvent),this.props.onRemindLater()}},{key:"onUpdatePaymentInfoClick",value:function(){this.logEvent("CC notification: Update payment info clicked",sn[this.getCCexpiryType()].logEvent),document.location.assign(this.props.subscribeUrl)}},{key:"logEvent",value:function(e,t){on.Z.track(e,{"CC expiry type":t})}},{key:"render",value:function(){var e=this,t=rn()(this.props.model.get("billingDate")),n=this.getCCexpiryType(),r=Lt().extend({},this.props.model.toJSON(),{billingDateShort:t.format("ll"),billingDateFull:t.format("l")}),o={primary:{onClick:function(){return e.onUpdatePaymentInfoClick()},label:ln("actions.updateCC")},secondary:{onClick:function(){return e.onRemindLaterClick()},label:ln("actions.remindLater")}};return this.logEvent("CC notification: Dialog loaded",sn[n].logEvent),m.createElement(Rt.Z.Component,{title:ln("".concat(n,".title"),r),actions:o},ln("".concat(n,".message"),r))}}]),o}(m.Component);cn.Bridge=xt.Z.extend({initializeComponent:function(e){return m.createElement(cn,e)}});var un=cn,dn=function(e){var t="CC_EXPIRY_NOTIFICATION_".concat(s.Z.get("user.id"));return{ccExpiryModel:new an,condition:function(){if(e.isEmbeddedForDesktopApp)return!1;var n=Qt.Z.getItem(t),r=n&&n.lastLoginTimeStamp===s.Z.get("user.lastLoginTimeStamp");return l.ZP.isAdmin()&&!s.Z.isTrialDomain()&&s.Z.get("workgroup.paymentTypeCC")&&!r},action:function(e){var n=this,r=Qt.Z.getItem(t),o=r?r.lastRemindedDay:0;this.ccExpiryModel.set({lastRemindedDay:o}),this.ccExpiryModel.fetch({success:function(){n.ccExpiryModel.get("ccExpiryNotificationType")?Rt.Z.create(new un.Bridge({model:n.ccExpiryModel,subscribeUrl:s.Z.getSubscribeUrl(),onRemindLater:function(){Qt.Z.setItem(t,{lastRemindedDay:n.ccExpiryModel.get("remindedDay"),lastLoginTimeStamp:s.Z.get("user.lastLoginTimeStamp")}),Rt.Z.hide(),e()}}),{keyboard:!1}):(r&&0===o&&Qt.Z.removeItem(t),e())},error:e})}}},mn=n(267009),fn=(0,h.nD)("loginActions.permissionLimitWarning"),pn=function(e){var t=e.permissionSummary,n=e.onOk;return m.createElement(m.Fragment,null,m.createElement(v.ZP.Header,null,m.createElement(v.ZP.Title,null,fn("title"))),m.createElement(v.ZP.Body,null,m.createElement("div",null,m.createElement("p",null,fn("message",{limit:(0,mn.u)(t.subjectPermissionsHardLimit,!1)})),m.createElement("div",{dangerouslySetInnerHTML:{__html:fn("linkMessage",{link:"#settings/reports/dashboard/permissions/"})}}),m.createElement("p",null,fn("footerMessage")))),m.createElement(v.ZP.Footer,null,m.createElement(_t.Z,{onClick:n},(0,h.t)("button.label.ok"))))},vn=n(576550);function gn(){return rn()().startOf("day").valueOf()}var En=function(e){var t="PERMISSION_LIMIT_WARNING_".concat(s.Z.get("user.id"));return{condition:function(){if(e.isEmbeddedForDesktopApp)return!1;var n=Qt.Z.getItem(t),r=gn(),o=n&&n.lastCheckedTimeStamp===r;return l.ZP.isAdmin()&&!s.Z.isTrialDomain()&&!o},action:function(e){(0,vn.s)().then((function(n){var r=gn();Qt.Z.setItem(t,{lastCheckedTimeStamp:r}),n.subjectPermissionsTotal>=n.permissionsWarningLimit?(0,v.h7)(m.createElement(pn,{permissionSummary:n,onOk:v.Mr}),{onRequestClose:v.Mr,onAfterClose:function(){null==e||e()}}):e()}))}}},hn=n(164159),bn=n(338113),yn=function(e,t){return{condition:function(){return!t.isEmbeddedForDesktopApp&&l.ZP.isAdmin()&&e.features.dsgDormantAccountEnabled},action:function(e){return(0,j.Z)(M().mark((function t(){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,bn.m)();case 2:if(!t.sent.showPendo){t.next=8;break}return t.next=7,(0,bn.N)({pendoLastPopupDate:Date.now()});case 7:hn.Z.showGuideById("h_1bvkSg0Kx7xRYeC6URiZm3NTo");case 8:e();case 9:case"end":return t.stop()}}),t)})))()}}},Cn=n(327648),Sn=n(265512),Zn=[Sn.ed.EXPIRE_SOON_3_DAYS,Sn.ed.EXPIRED],Pn=function(e){return{condition:function(){return!e.isEmbeddedForDesktopApp&&l.ZP.isAdmin()&&s.Z.get("workgroup.autoSSLAvailable")&&!(0,Sn.Vc)()},action:function(e){return(0,j.Z)(M().mark((function t(){var n,r,o;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Cn.DD)();case 2:return n=t.sent,r=n.certificate,(o=r?(0,Sn.Zh)(r):null)&&Zn.includes(o)&&(0,Sn.hd)(r),e(),t.abrupt("return",Promise.resolve());case 8:case"end":return t.stop()}}),t)})))()}}},On=n(483979),kn={runTasks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isStorage,o=void 0!==n&&n,s=t.isDocumentRoomPortal,l=void 0!==s&&s,c=t.isClientPortal,u=void 0!==c&&c,d=(0,r.Jo)(),m={isStorage:o,isDocumentRoomPortal:l,isClientPortal:u,isEmbeddedForDesktopApp:(0,a.On)()},f=[wt(e,m),Kt.create(e,m),qe(m),He(m),Dt(m),Tt(e,m),Ne.Z.create(m),De(m),Ft(m),ht(m),St(m),kt(),dn(m),En(m),yn(d,m),Pn(m)];return i({tasks:f,onComplete:function(){(0,On.TZ)(!0)}}),f}}},416271:function(e,t,n){n.d(t,{M:function(){return o}});var r=n(296924);function o(e){var t=e.env,n=e.isUserEnrichmentEnabled,o=e.jobRole,i=e.title;return n&&(!o||(0,r._6)(t)&&!i)}},267009:function(e,t,n){function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n={K:1e3,M:1e6,G:1e9};if(e>=n.G)return"".concat((e/n.G).toFixed(0).replace(/\.0$/,""),"G");if(e>=n.M)return"".concat((e/n.M).toFixed(0).replace(/\.0$/,""),"M");if(e>=n.K)return"".concat((e/n.K).toFixed(0).replace(/\.0$/,""),"K")}return"number"==typeof e?e.toLocaleString():"".concat(e)}function o(e,t){return t<=0?0:e>=t?100:100*Math.abs(e/t)}n.d(t,{S:function(){return o},u:function(){return r}})}}]);