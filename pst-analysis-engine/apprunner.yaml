version: 1.0
runtime: python311
build:
  commands:
    build:
      - pip install --upgrade pip
      - pip install -r requirements.txt
      - cd api && alembic upgrade head
run:
  runtime-version: 3.11
  command: cd api && uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 2
  network:
    port: 8000
    env: PORT
  env:
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: USE_AWS_SERVICES
      value: "true"
    - name: AWS_STORAGE_BUCKET_NAME
      value: "vericase-data"
    - name: S3_BUCKET_NAME
      value: "vericase-data"
    - name: AWS_S3_REGION_NAME
      value: "us-east-1"
    - name: EMAIL_HOST
      value: "smtp.gmail.com"
    - name: EMAIL_PORT
      value: "587"
    - name: EMAIL_FROM
      value: "noreply@vericase.com"
    # Core settings
    - name: SECRET_KEY
      value: "f68ef46806a5165ac398f407bd167e7877ad83f7132e504a335f67be17c70778"
    - name: DATABASE_URL
      value: "postgresql://postgres:password@localhost:5432/vericase"
    # Admin account
    - name: ADMIN_EMAIL
      value: "admin@vericase.com"
    - name: ADMIN_PASSWORD
      value: "ChangeThisPassword123!"
    # AWS credentials (update these)
    - name: AWS_ACCESS_KEY_ID
      value: "your-access-key-here"
    - name: AWS_SECRET_ACCESS_KEY
      value: "your-secret-key-here"
    # Email credentials
    - name: EMAIL_HOST_USER
      value: "your-email@gmail.com"
    - name: EMAIL_HOST_PASSWORD
      value: "your-app-password"
    # AI API Keys (add your actual keys)
    - name: OPENAI_API_KEY
      value: "sk-your-openai-key"
    - name: ANTHROPIC_API_KEY
      value: "sk-ant-your-anthropic-key"
    - name: GEMINI_API_KEY
      value: "your-gemini-key"
    - name: GROK_API_KEY
      value: "your-grok-key"