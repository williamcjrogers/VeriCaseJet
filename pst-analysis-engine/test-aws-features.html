<!DOCTYPE html>
<html>
<head>
    <title>VeriCase AWS Features Demo</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .demo-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .before-after { display: flex; gap: 20px; }
        .before, .after { flex: 1; padding: 15px; border-radius: 5px; }
        .before { background: #fee; }
        .after { background: #efe; }
        .feature-demo { margin: 10px 0; padding: 10px; background: #f9f9f9; border-radius: 5px; }
        .api-test { margin: 10px 0; }
        button { padding: 10px 15px; margin: 5px; background: #17b5a3; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .result { margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 5px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>üöÄ VeriCase AWS Features - Live Demo</h1>
    
    <div class="demo-section">
        <h2>üìä Evidence Grid - New AI Columns</h2>
        <div class="before-after">
            <div class="before">
                <h3>‚ùå BEFORE (Basic)</h3>
                <table border="1" style="width: 100%; border-collapse: collapse;">
                    <tr><th>Name</th><th>Date</th><th>Status</th><th>Links</th></tr>
                    <tr><td>contract.pdf</td><td>2024-01-15</td><td>processed</td><td>3</td></tr>
                    <tr><td>invoice_123.pdf</td><td>2024-01-20</td><td>processed</td><td>1</td></tr>
                </table>
            </div>
            <div class="after">
                <h3>‚úÖ NOW (AI Enhanced)</h3>
                <table border="1" style="width: 100%; border-collapse: collapse;">
                    <tr><th>Name</th><th>Date</th><th>Status</th><th>AI Classification</th><th>AI Confidence</th><th>Extracted Parties</th><th>Key Amounts</th><th>Links</th></tr>
                    <tr><td>contract.pdf</td><td>2024-01-15</td><td>processed</td><td>üìÑ Contract</td><td style="color: green;">92%</td><td style="color: #17b5a3;">ABC Ltd, XYZ Corp</td><td style="color: green;">¬£250,000</td><td>3</td></tr>
                    <tr><td>invoice_123.pdf</td><td>2024-01-20</td><td>processed</td><td>üí∞ Invoice</td><td style="color: green;">88%</td><td style="color: #17b5a3;">Supplier Inc</td><td style="color: green;">¬£15,750</td><td>1</td></tr>
                </table>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üîç Search Enhancement</h2>
        <div class="before-after">
            <div class="before">
                <h3>‚ùå BEFORE (Keyword Only)</h3>
                <input type="text" placeholder="Search: 'delay'" style="width: 100%; padding: 8px;">
                <p>Results: Only files with exact word "delay" in filename</p>
            </div>
            <div class="after">
                <h3>‚úÖ NOW (Semantic AI Search)</h3>
                <input type="text" placeholder="Search: 'Show me all delay notices from main contractor'" style="width: 100%; padding: 8px;">
                <p>Results: Finds delay notices, late completion letters, schedule variations, time extensions - even if they don't contain the word "delay"!</p>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üß† Live AWS API Tests</h2>
        <div class="api-test">
            <button onclick="testAWSHealth()">Test AWS Services Health</button>
            <button onclick="testSemanticSearch()">Test Semantic Search</button>
            <button onclick="testDocumentAnalysis()">Test Document Analysis</button>
            <div id="apiResults" class="result">Click buttons above to test AWS features...</div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üìã Document Processing Differences</h2>
        <div class="feature-demo">
            <h3>üîç When you upload a contract PDF:</h3>
            <div class="before-after">
                <div class="before">
                    <h4>‚ùå BEFORE</h4>
                    <ul>
                        <li>Basic text extraction</li>
                        <li>Manual classification</li>
                        <li>No entity detection</li>
                        <li>No structured data</li>
                    </ul>
                </div>
                <div class="after">
                    <h4>‚úÖ NOW (AWS AI)</h4>
                    <ul>
                        <li>‚úÖ <strong>Textract:</strong> Extracts tables, forms, contract values</li>
                        <li>‚úÖ <strong>Comprehend:</strong> Finds parties, dates, amounts automatically</li>
                        <li>‚úÖ <strong>Auto-classification:</strong> "Contract" with 92% confidence</li>
                        <li>‚úÖ <strong>Bedrock:</strong> Ingested for semantic search</li>
                        <li>‚úÖ <strong>Macie:</strong> Scans for sensitive data</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üì∏ Image Analysis Example</h2>
        <div class="feature-demo">
            <h3>üèóÔ∏è When you upload a construction site photo:</h3>
            <div class="before-after">
                <div class="before">
                    <h4>‚ùå BEFORE</h4>
                    <ul>
                        <li>Just stores the image</li>
                        <li>No analysis</li>
                        <li>Manual tagging required</li>
                    </ul>
                </div>
                <div class="after">
                    <h4>‚úÖ NOW (AWS Rekognition)</h4>
                    <ul>
                        <li>‚úÖ <strong>Detects:</strong> Scaffolding, cranes, workers, safety equipment</li>
                        <li>‚úÖ <strong>Safety Analysis:</strong> PPE compliance checking</li>
                        <li>‚úÖ <strong>Defect Detection:</strong> Cracks, damage, corrosion</li>
                        <li>‚úÖ <strong>Auto-tags:</strong> "construction_site", "heavy_equipment", "safety"</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üéØ Specific URLs to Test Right Now</h2>
        <div class="feature-demo">
            <p>Visit these URLs in your VeriCase application:</p>
            <ul>
                <li><code>/api/v1/aws/health</code> - Check AWS services status</li>
                <li><code>/api/v1/aws/semantic-search?q=payment</code> - Try semantic search</li>
                <li><code>/evidence.html</code> - See new AI columns in evidence grid</li>
                <li><code>/admin-settings.html</code> - Configure AWS features</li>
            </ul>
        </div>
    </div>

    <script>
        const apiUrl = window.location.origin;

        async function testAWSHealth() {
            const result = document.getElementById('apiResults');
            result.innerHTML = 'Testing AWS services...';
            
            try {
                const response = await fetch(`${apiUrl}/api/v1/aws/health`);
                const data = await response.json();
                result.innerHTML = `<strong>AWS Health Check:</strong><br><pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}<br>Make sure VeriCase is running with AWS services enabled.`;
            }
        }

        async function testSemanticSearch() {
            const result = document.getElementById('apiResults');
            result.innerHTML = 'Testing semantic search...';
            
            try {
                const response = await fetch(`${apiUrl}/api/v1/aws/semantic-search?q=delay notices`);
                const data = await response.json();
                result.innerHTML = `<strong>Semantic Search Results:</strong><br><pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}<br>Semantic search requires Bedrock Knowledge Base setup.`;
            }
        }

        async function testDocumentAnalysis() {
            const result = document.getElementById('apiResults');
            result.innerHTML = 'Testing document analysis...';
            
            try {
                const response = await fetch(`${apiUrl}/api/evidence/items?page=1&page_size=1`);
                const data = await response.json();
                if (data.items && data.items.length > 0) {
                    const item = data.items[0];
                    result.innerHTML = `<strong>Sample Evidence Item with AI Analysis:</strong><br><pre>${JSON.stringify({
                        filename: item.filename,
                        evidence_type: item.evidence_type,
                        classification_confidence: item.classification_confidence,
                        extracted_parties: item.extracted_parties,
                        extracted_amounts: item.extracted_amounts,
                        auto_tags: item.auto_tags
                    }, null, 2)}</pre>`;
                } else {
                    result.innerHTML = '<strong>No evidence items found.</strong><br>Upload some documents to see AI analysis in action.';
                }
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }
    </script>
</body>
</html>